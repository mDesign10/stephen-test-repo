{"version":"1.3.0","schemaVersion":29,"minimumStudioVersion":"3.2.0","icon":"other","splash":"other","splashdata":{"img":"Splash.png","bg":"#0fb1ca"},"settings":{"router":{"mode":"single","animation":"off"},"theme":"default","push-notifications":{"android":{"enabled":true,"id":"321487242823","googleServiceJson":"google-services.json"},"ios":{"enabled":true,"voipEnabled":true},"wp":{"enabled":false}},"provisioning":{"enabled":false,"manifest":"","poll":2,"manual":false,"wifionly":true},"crashReporting":{"enabled":false,"androidEnabled":false,"iosEnabled":false,"splunkAndroidApiKey":"","splunkIosApiKey":"","splunkExtraData":""},"kioskMode":{"enabled":false},"singleInstance":{"enabled":true},"crosswalk":{"enabled":false},"logging":{"enabled":true,"bufferFrequency":100,"defaultRootLogLevel":"debug","defaultMaxFileSizeKilobyte":1000,"defaultMaxFiles":5,"appEnabled":true,"appUseDefault":true,"appRootLogLevel":"error","appMaxFileSizeKilobyte":1000,"appMaxFiles":5,"clientEnabled":true,"clientUseDefault":true,"clientRootLogLevel":"error","clientMaxFileSizeKilobyte":1000,"clientMaxFiles":5,"nativeEnabled":true,"nativeUseDefault":true,"nativeRootLogLevel":"error","nativeMaxFileSizeKilobyte":1000,"nativeMaxFiles":5},"loading-message":true,"minimise-on-back-button":false,"plugins":{"builtIn":{"cordova-plugin-whitelist@1.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-battery-status@1.2.4":{"override":false,"used":false,"enabled":false},"cordova-plugin-console@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-contacts@2.1.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-device@1.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-device-motion@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-device-orientation@1.0.3":{"override":false,"used":false,"enabled":false},"cordova-plugin-file@4.2.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-geolocation@2.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-globalization@1.0.3":{"override":false,"used":true,"enabled":true},"commontime-cordova-plugin-inappbrowser@1.6.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-network-information@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-splashscreen@3.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-vibration@2.1.6-dev-ct-0.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-statusbar@1.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-capture@1.4.1":{"override":false,"used":false,"enabled":false},"phonegap-plugin-barcodescanner@6.0.7":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.8":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.fileimporter@1.0.2":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-opener@1.0.13":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.beacon@1.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.17":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.audio@0.9.23":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.media-properties@1.2.13":{"override":true,"used":true,"enabled":true},"com.commontime.cordova.splitscreen@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@0.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.authentication@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.urlhandler@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.5":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.provisioning@0.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.32":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splunk-mint@1.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.kiosk@1.0.11":{"override":false,"used":false,"enabled":false},"cordova-android-movetasktoback@0.1.3":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.logging@1.0.24":{"override":false,"used":true,"enabled":true},"cordova-plugin-email":{"override":false,"used":true,"enabled":true},"cordova-android-crosswalk-webview@2.3.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-emm-app-config@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.public.messaging@0.0.47":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.fileimporter@1.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.33":{"override":false,"used":true,"enabled":true},"cordova-plugin-ionic-webview@1.1.16":{"override":false,"enabled":true,"used":true},"com.commontime.cordova.file-transfer@1.5.6":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.5":{"override":false,"used":true,"enabled":true},"cordova-plugin-screen-orientation@1.4.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-email-composer":{"override":false,"used":true,"enabled":true},"cordova-plugin-splashscreen@5.0.2":{"override":true,"used":true,"enabled":false},"com.commontime.cordova.securesettings@1.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.6":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.14":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.19":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.21":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-transfer@1.5.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.11":{"override":false,"used":true,"enabled":true},"cordova-plugin-ionic-webview@1.1.17":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.50":{"override":false,"used":true,"enabled":true},"cordova-plugin-wkwebview-engine@1.1.4":{"override":false,"enabled":true,"used":true},"cordova-plugin-wkwebview-file-xhr@2.1.1":{"override":false,"enabled":true,"used":true},"com.commontime.cordova.insomnia@0.0.51":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.settimeout@0.0.3":{"override":true,"used":true,"enabled":false},"com.commontime.cordova.thumbnail@1.4.10":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.12":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.5":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.thumbnail@1.4.14":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.16":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v.2.3.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-transfer@1.5.8":{"override":false,"used":true,"enabled":true},"cordova-android-crosswalk-webview@2.4.0":{"override":false,"used":false,"enabled":false},"cordova-build-architecture@v1.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.15":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.settimeout@0.0.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.webviewchecker@1.0.5":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@r1.0.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.16":{"override":false,"used":true,"enabled":true},"cordova-plugin-console@1.1.0":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v.2.4.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.22":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.5":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.0":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.52":{"override":false,"used":false,"enabled":false},"https://github.com/commontime/com.commontime.cordova.volumecontrol@1.0.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.1-ct1":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.15":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.2-ct1":{"override":true,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.2":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.6":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.8":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.18":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.10":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.11":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.12":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@0.0.5":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.8":{"override":false,"used":true,"enabled":true},"cordova-plugin-statusbar@2.4.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.3-ct1":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.9":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.4-ct1":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.5-ct1":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.19":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.13":{"override":false,"used":true,"enabled":true}},"customPlugins":{"cordova-plugin-splashscreen":{"id":"cordova-plugin-splashscreen","name":"cordova-plugin-splashscreen","version":"5.0.2","description":"Cordova Splashscreen Plugin","spec":"5.0.2","preferences":{"SplashMaintainAspectRatio":"true","SplashScreenDelay":"10000","FadeSplashScreen":"true","FadeSplashScreenDuration":"1000","ShowSplashScreenSpinner":"false"}}}},"insomnia":{"enabled":false,"startOnBoot":true,"battOp":true,"fgService":true,"fgServiceMain":"Clinical Messaging","fgServiceSub":"Waiting for messages...","appRestartService":true,"nativeSetTimeout":true,"backgroundAlarm":true},"orientation":"portrait","ionic":{"enabled":true},"wkwebview":{"enabled":true},"minWebviewVersion":{"version":"53.0.0"}},"language":{"defaultLocale":"en_GB","initialLanguage":"","useDeviceLocale":true},"pages":[{"start":true,"name":"Login","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"dffd2c79-1c89-4d12-a64f-6fbf23313145","actions":[{"event":"onpageloaded","type":"call-function","data":{"name":"setupLoginForm"},"_auto_id_":"9dee15f0-0217-453b-af21-ffef9b324272"}]}],"content":[{"name":"main_content","type":"area","item-type":"static","content":[{"name":"login_watermark","type":"content","item-type":"html","content":"<svg viewBox=\"0 0 1346 2402\">\n  <path d=\"M1280.5,3386 C677.128911,3386 188,2896.87109 188,2293.5 C188,1690.12891 677.128911,1201 1280.5,1201 C1883.87109,1201 2373,1690.12891 2373,2293.5 C2373,2896.87109 1883.87109,3386 1280.5,3386 Z M1279.5,3317 C1829.29947,3317 2275,2871.29947 2275,2321.5 C2275,1771.70053 1829.29947,1326 1279.5,1326 C729.700532,1326 284,1771.70053 284,2321.5 C284,2871.29947 729.700532,3317 1279.5,3317 Z\"></path>\n  <path d=\"M1246,3188 C752.257434,3188 352,2802.96488 352,2328 C352,1853.03512 752.257434,1468 1246,1468 C1739.74257,1468 2140,1853.03512 2140,2328 C2140,2802.96488 1739.74257,3188 1246,3188 Z M1244.4407,3134 C1694.26314,3134 2058.91628,2783.2151 2058.91628,2350.5 C2058.91628,1917.7849 1694.26314,1567 1244.4407,1567 C794.618255,1567 429.965116,1917.7849 429.965116,2350.5 C429.965116,2783.2151 794.618255,3134 1244.4407,3134 Z\"></path>\n  <path d=\"M1229.5,3067 C821.085428,3067 490,2756.50947 490,2373.5 C490,1990.49053 821.085428,1680 1229.5,1680 C1637.91457,1680 1969,1990.49053 1969,2373.5 C1969,2756.50947 1637.91457,3067 1229.5,3067 Z M1229,3023 C1601.23992,3023 1903,2740.04396 1903,2391 C1903,2041.95604 1601.23992,1759 1229,1759 C856.760079,1759 555,2041.95604 555,2391 C555,2740.04396 856.760079,3023 1229,3023 Z\"></path>\n  <path d=\"M1236.5,2916 C884.418472,2916 599,2676.24848 599,2380.5 C599,2084.75152 884.418472,1845 1236.5,1845 C1588.58153,1845 1874,2084.75152 1874,2380.5 C1874,2676.24848 1588.58153,2916 1236.5,2916 Z M1236.5,2880 C1557.1013,2880 1817,2661.73882 1817,2392.5 C1817,2123.26118 1557.1013,1905 1236.5,1905 C915.898703,1905 656,2123.26118 656,2392.5 C656,2661.73882 915.898703,2880 1236.5,2880 Z\"></path>\n  <path d=\"M1224.5,2815 C932.61751,2815 696,2627.40731 696,2396 C696,2164.59269 932.61751,1977 1224.5,1977 C1516.38249,1977 1753,2164.59269 1753,2396 C1753,2627.40731 1516.38249,2815 1224.5,2815 Z M1225,2786 C1490.64896,2786 1706,2615.42049 1706,2405 C1706,2194.57951 1490.64896,2024 1225,2024 C959.351035,2024 744,2194.57951 744,2405 C744,2615.42049 959.351035,2786 1225,2786 Z\"></path>\n</svg>","expressions":{},"classes":"login-watermark","_auto_id_":"82a9ac77-cd74-44fd-ab14-86ef2e5200e8"},{"name":"login_content","type":"content","item-type":"html","content":"<div class=\"logo\">\n  <img src=\"user-assets/App Icon With Background - for App Icon).png\" />\n</div>\n<div class=\"title\">\n  <span class=\"b\">Clinical</span> Messaging\n</div>\n<div class=\"subtitle subtitle-1\">\n  Connecting you with colleagues.\n</div>\n<div class=\"subtitle subtitle-2\">\n  Anytime. Anywhere.\n</div>","expressions":{},"classes":"login-content","_auto_id_":"3d2fa7eb-facf-4353-aa6e-9c03f8ad5aaf"},{"name":"btnIconAbout","type":"button","item-type":"button","_auto_id_":"006cd129-8065-4003-972e-05533c54f483","content":"","theme":"default","actions":[{"event":"click","type":"go-to-page","data":{"name":"About","isConditional":false},"_auto_id_":"b4feb836-b53c-4163-8bdc-e5ad86d9a022"}],"expressions":{},"left-icon":"fa-info-circle"},{"name":"login_form","type":"messaging-common","item-type":"common-login-form","autoAppendDomainName":true,"username":"","hideUsername":false,"disableUsername":false,"logInLabel":"Sign In","expressions":{},"layer":"Clinical_Messaging","actions":[],"classes":"login-form","theme":"light","_auto_id_":"9345576b-4d5e-4b4f-a01b-21499392045d"},{"name":"audio_1","type":"media","item-type":"audio","_auto_id_":"57c6e1aa-307b-47d7-bb0f-55c5a02dfb15","fileName":"pager_responder_alert.m4a"}],"expressions":{},"classes":"login-page","_auto_id_":"7394cc9f-01d5-4393-80a1-41f9333e6043"}]},{"start":false,"name":"Conversations","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"0f4d5725-fa64-4305-b272-794f42bc2cf5","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"if (!window.chatLayer.getCurrentUserJid()) {\n  \t// If we've got here are we are actually logged out we need to go to the\n    // login page\n    console.log(\"Got into the conversations page without being logged in, redirecting to the Login page...\");\n\t$fail();  \n} else {\n\t$success();  \n}"},"_auto_id_":"7d717e76-a08b-4f99-9c1a-695dc893414f","actions":[{"event":"fail","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"f1d854cf-e676-4896-9be0-5d22f35e45b0"}]}]}],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"menu","type":"messaging-common","item-type":"common-slide-panel","content":[{"name":"menu_content","type":"area","item-type":"static","content":[{"name":"menu_header","type":"area","item-type":"static","content":[{"name":"current_user","type":"messaging-common","item-type":"common-user-display","showIcon":true,"expressions":{},"classes":"current-user","layer":"Clinical_Messaging","displayType":"full","label":"","_auto_id_":"37d3e78a-5449-45ec-8e71-76c3181ec17a"}],"expressions":{},"classes":"menu-header","_auto_id_":"97e2581d-8f62-423d-bbf7-a51c6c10c9f3"},{"name":"menu_items","type":"area","item-type":"scrollable","content":[{"name":"about_btn","type":"button","item-type":"button","_auto_id_":"b912b816-c7c4-44a9-84d7-37e3ed893c43","content":"About","theme":"default","expressions":{},"actions":[{"event":"click","type":"go-to-page","data":{"name":"About","isConditional":false},"_auto_id_":"7b1c7008-e820-4e8d-b6b3-5d650b55c3ed"}],"classes":"menu-btn qa-btn"},{"name":"qa_btn","type":"button","item-type":"button","_auto_id_":"29d59e48-dcd5-4e53-9ed7-e009037e3e63","content":"QA Data","theme":"default","expressions":{"show":"$store.preferences.qaMode === \"true\""},"classes":"menu-btn qa-btn","actions":[{"event":"click","type":"go-to-page","data":{"name":"QA","isConditional":false},"_auto_id_":"643e406d-6df0-4972-9452-5b3217117987"}]},{"name":"switch_theme_button","type":"button","item-type":"button","_auto_id_":"6b834f32-0fc6-47be-a225-2920b59ed314","content":"Switch Theme","theme":"default","expressions":{},"classes":"menu-btn qa-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"const theme  = document.querySelector(\"html\").getAttribute(\"theme\");\n\nif (theme) {\n  \n  window.chatLayer.setTheme(\"\");\n}\nelse {\n  window.chatLayer.setTheme(\"dark\");\n}"},"_auto_id_":"b969487d-3d5f-4ef5-93f0-615788d95f46"}]}],"expressions":{},"classes":"menu-items","_auto_id_":"cc59b5ed-a108-44f0-95eb-2a0bdb8d76a0"},{"name":"menu_footer","type":"area","item-type":"static","content":[{"name":"logout_btn","type":"button","item-type":"button","content":"Sign Out","theme":"default","actions":[{"event":"click","type":"common-log-out","data":{"layer":"Clinical_Messaging"},"_auto_id_":"09f31bed-235d-499a-aeea-2d9f48b7fd52"}],"expressions":{},"classes":"menu-btn logout-btn","_auto_id_":"fbb5f512-7797-44f3-a038-751e311ee617"}],"expressions":{},"classes":"menu-footer","_auto_id_":"3f78c773-ec29-483c-b5bb-825df442bf92"}],"expressions":{},"classes":"menu-content","_auto_id_":"fdd6a605-7b5c-4fb5-bed2-0ebabc0d0b5e"}],"layer":"Clinical_Messaging","menuWidth":"90vw","expressions":{"show":"$store.state.currentPage === \"Conversations\""},"classes":"menu","_auto_id_":"fda1664e-d8d9-4dc3-9235-179bddeffd6c"},{"name":"conversation_list","type":"chat","item-type":"cl-conversation-list","expressions":{},"layer":"Clinical_Messaging","classes":"conversation-list","actions":[{"event":"go-new-conversation","type":"go-to-page","data":{"name":"New_Conversation","isConditional":false},"_auto_id_":"69bac81f-90b0-4f58-95b9-5d77335b2cab"},{"event":"go-chat","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"8bd55202-5da4-4cd4-8795-d63566ca6f0d"}],"_auto_id_":"ea471109-cda0-4d46-989c-60baf2d58e86"}],"expressions":{},"classes":"conversations-page","_auto_id_":"67668c20-62ee-4a83-9e55-c4eac2f00382"}]},{"start":false,"name":"New_Conversation","config":[],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"new_conversation","type":"chat","item-type":"cl-new-conversation","expressions":{},"classes":"new-conversation","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"806660e4-c3fa-4cd0-bc3d-f201d8647fbe"},{"event":"go-chat","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"2bd21d64-1a66-4421-a6b4-8871e7f62367"}],"allowSearch":true,"requireSearch":true,"showCountFrom":"{{$store.preferences.showParticipantCountFrom}}","_auto_id_":"7cd6aa4e-5991-482f-84aa-c8c1b953b9f1"}],"expressions":{},"classes":"new-conversation-page","_auto_id_":"2e0b6fe7-3162-4a37-ba7b-4c939c862f6c"}]},{"start":false,"name":"Chat","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"82b30a8b-a269-4220-a12b-c9a5376123a3","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"if (!window.chatLayer.getCurrentUserJid()) {\n  \t// If we've got here are we are actually logged out we need to go to the\n    // login page\n    console.log(\"Got into the chat page without being logged in, redirecting to the Login page...\");\n\t$fail();  \n} else {\n\t$success();  \n}"},"_auto_id_":"526a93ee-dc71-4436-a9e0-af549acc0ff7","actions":[{"event":"fail","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"28d6fb28-4eb3-4d6b-8e58-2c0301ae422f"}]}]}],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"chat_message_list","type":"chat","item-type":"cl-chat-message-list","expressions":{},"classes":"chat-message-list","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"15406988-04f4-4a87-8186-9d70cbc9f20a"},{"event":"go-info","type":"go-to-page","data":{"name":"Conversation_Info","isConditional":false},"_auto_id_":"808741d5-f800-4c64-bf60-9e0b13748252"},{"event":"go-leave","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"f57d5bab-6650-4096-be3d-d482067c6777"},{"event":"go-end","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"f8df61dc-b31c-471a-93d1-faf990797acf"}],"_auto_id_":"6f987a6b-8345-4ff1-afef-ecd456b098a6"}],"expressions":{},"classes":"chat-page","_auto_id_":"979300b0-fb5d-49fc-aad4-ed1fef9dc33c"}]},{"start":false,"name":"Conversation_Info","config":[],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"conversation_info","type":"chat","item-type":"cl-conversation-info","expressions":{},"classes":"conversation-info","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"c900c516-d49b-49cd-8158-1c71d5cfc548"},{"event":"go-add-contacts","type":"go-to-page","data":{"name":"Add_Contacts","isConditional":false},"_auto_id_":"ae3693e9-347c-4836-b48b-083cf03038db"},{"event":"go-chat","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"a064409b-dfce-4a36-8c0c-4e94851f6a1c"}],"_auto_id_":"936ed8b6-bafb-45b6-99d6-715e04469fec"}],"expressions":{},"classes":"conversation-info-page","_auto_id_":"77af1f61-4d3e-49f2-9412-362663ad9fc0"}]},{"start":false,"name":"Add_Contacts","config":[],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"add_conversation_contacts","type":"chat","item-type":"cl-add-conversation-contacts","expressions":{},"classes":"add-conversation-contacts","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Conversation_Info","isConditional":false},"_auto_id_":"fad957ff-ad87-4326-a680-164be0d770b4"}],"allowSearch":true,"requireSearch":true,"showCountFrom":"{{$store.preferences.showParticipantCountFrom}}","_auto_id_":"31013fc9-e427-4e3c-8ac5-29965a419026"}],"expressions":{},"classes":"add-contacts-page","_auto_id_":"44a38f53-909c-44a5-a6f6-01383badd742"}]},{"start":false,"name":"QA","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"0e713de3-0fe3-4aa4-891f-9ce44753c834","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"let content = `\n  <div class=\"app-header\">\n    <div class=\"name\">${cti.store.schema.displayName}</div>\n    <div class=\"package-id\">${cti.store.schema.packageId}</div>\n    <div class=\"ver\">version: ${cti.store.schema.version}</div>\n  </div>\n`;\n\nif (cti.store.preferences.qaMode === \"true\") {\n  const preferenceKeys = [];\n  for (const id in cti.store.schema.metadata) {\n    preferenceKeys.push(cti.store.schema.metadata[id].key)\n  }\n  content += `\n\t<div class=\"section app-prefs\">\n      <div class=\"heading\">Preferences:</div>\n  `;\n  preferenceKeys.forEach(key => {\n    const hasValue = !!cti.store.preferences[key];\n    const prefValue = cti.store.preferences[key] || \"undefined\";\n    const prefClass = \"value\" + (hasValue ? \"\" : \" no-value\");\n    content += `\n      <div class=\"pref\">\n        <span class=\"key\">${key}: </span>\n        <span class=\"${prefClass}\">${prefValue}</span>\n      </div>\n    `;\n  });\n  content += `</div>`;\n}\n\nconst $appInfo = document.querySelector(\"#app_info\");\n$appInfo.innerHTML = content;"},"_auto_id_":"edb7b11b-dbca-45ba-a296-aac48d78a310"}]}],"content":[{"name":"main_content","type":"area","item-type":"scrollable","_auto_id_":"3155bda9-70f4-4318-9862-6b6150af0cb2","content":[{"name":"close_btn","type":"button","item-type":"button","_auto_id_":"e1ab37e4-2ae6-4ffb-88ac-928ad77f593b","content":"","theme":"default","left-icon":"fa-times-circle","actions":[{"event":"click","type":"go-back","data":{},"_auto_id_":"7f564c43-3dde-480e-a25c-faf9167d983c"}],"expressions":{},"classes":"close-btn"},{"name":"qa_data","type":"content","item-type":"html","_auto_id_":"fc332441-1fa1-4b78-87d8-641e8b06eb46","content":"<div id=\"app_info\"></div>","expressions":{},"classes":"qa-data"},{"name":"debugger","type":"messaging-common","item-type":"common-debugger","_auto_id_":"5d2c0f90-a1a9-4d77-a295-b6ddd17f9e52","expressions":{"show":"$store.preferences.qaMode === \"true\""},"classes":"debugger","layer":"Clinical_Messaging"},{"name":"button_1","type":"button","item-type":"button","_auto_id_":"c2a03518-27d4-45ab-a1be-b0b563bd1052","content":"E-Mail Device Logs","theme":"default","actions":[{"event":"click","type":"email-logs","data":{"subject":"CM App Logs (v{{$store.schema.version}}-b{{$store.schema.buildInfo.build}})","includeArchivedLogs":true,"to":"testing@commontime.com","body":"Device logs for Clinical Messaging app '{{$store.schema.name}}'. App Version: '{{$store.schema.version}}'. Studio Build: '{{$store.schema.buildInfo.build}}'."},"_auto_id_":"e7d2499f-b9a1-4dcd-a255-dc61a3898efb"}],"left-icon":"fa-envelope-o"}],"expressions":{},"classes":"qa-page"}]},{"start":false,"name":"About","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"4ab461c5-f7bd-4aa5-8720-27ae2f4f449e","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"const server = document.getElementById(\"server\");\n\nif (server) {\n  \n  \t if (window.chatLayer && window.chatLayer.comms && window.chatLayer.comms.serverVersion) {\n\n        server.innerText = `Server version: ${window.chatLayer.comms.serverVersion.version}`;\n     \tserver.classList.remove(\"hidden\");\n     }\n     else {\n       \n        server.classList.add(\"hidden\");\n     }\n}"},"_auto_id_":"9a172246-89b8-4c44-966f-65fd703926fe"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnBack","type":"button","item-type":"button","_auto_id_":"1de6ccb7-89f8-4981-848a-76cb8143e6a6","content":"","theme":"default","left-icon":"fa-chevron-left","actions":[{"event":"click","type":"go-back","data":{},"_auto_id_":"13529e69-cc8c-4501-8534-62ccd5d34e55"}],"expressions":{}}],"_auto_id_":"8264c38e-3a5e-4862-b938-e7d0d31e1abc"},{"name":"scrlAbout","type":"area","item-type":"scrollable","content":[{"name":"ctLogo","type":"media","item-type":"image-viewer","_auto_id_":"b8126a04-7bac-43e3-b988-1c06c142eab7","scaleImage":true,"maxWidth":200,"maxHeight":200,"fileName":"CommonTime.png","expressions":{},"openExternallyOnClick":false},{"name":"htmlAbout","type":"content","item-type":"html","_auto_id_":"a16edfad-4e04-49c6-aa95-d9e9ccf0515f","content":"<p class=\"versions\">\n  <span>Build Number: {{'$store.preferences.customerReleaseNumber' | store}} - {{'$store.preferences.appBuildNumber' | store}}</span><br>\n  <span>CM Version: {{'$store.schema.version' | store}} {{'$store.preferences.productBuildNumber' | store}} ({{'$store.schema.buildInfo.build' | store}}b)</span><br>\n  <span id=\"server\" class=\"hidden\">Server Version: Please login first</span>\n</p>\n\n<p><strong>Clinical Messaging</strong> is a new breed of communication tool, designed and developed by CommonTime to facilitate multi-way conversations, broadcasts and alerts in high pressure environments.</p>\n\n<p>CommonTime develop market leading communication apps that deliver practical innovation to organisations across the world. Backed by over 20 years of experience, our secure & reliable solutions are vital to mobilising enterprise and government communication.</p>","expressions":{}}],"_auto_id_":"c5c09e93-7c93-4d40-be04-ed13b913cb3c","expressions":{}}]}],"actionflows":[{"name":"on_instance_ready","content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"window.chatLayer = $data;\nwindow.chatLayer.logger.setTypes([\"_all_\"]);\nwindow.chatLayer.comms.client._options.debug = true;\n$store.variables.debug = true;\nif (navigator && navigator.splashscreen) {\n\tnavigator.splashscreen.hide();\n}"},"_auto_id_":"65839d38-1354-4ddb-b14a-cce34e401fb5","actions":[]}]},{"name":"on_login","content":[{"event":"click","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"718f4a04-4341-481e-b205-7abb8bf6e202"}]},{"name":"on_logout","content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Clear any current notifications\nwindow.cordova.plugins.notification.clearAll();\n$success();"},"_auto_id_":"3c44fce8-322c-4f89-82dc-0491f5ba74d0"},{"event":"click","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"07791a81-5c85-4793-9512-2be0bbd05178"}]},{"name":"on_connection_status","content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"const status = ($data.status || \"\").toLowerCase();\nif (status === \"connected\") document.body.classList.add(\"connected\");\nelse document.body.classList.remove(\"connected\");\n$success($data);"},"_auto_id_":"8c874853-79df-48ca-a85f-88b5c4b4e4c0"}]},{"name":"chat_notification","content":[{"event":"click","type":"call-actionflow","data":{"name":"stop_audio_vibrate"},"_auto_id_":"76253ad2-bbe2-4073-b42b-dc2107edf06c"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"const {isForCurrentConversation, conversationTitle, messagePreview} = $data;\nconst isChatPage = cti.store.state.currentPage === \"Chat\";\nconst isForeground = cti.store.state.foreground === true;\nconst showDeviceNotification = !isForeground;\nconst showAppNotification = !isForCurrentConversation || !isChatPage;\nconst appName = cti.store.schema.displayName;\n// const notificationTitle = conversationTitle || appName;\n// const notificationText = messagePreview;\nconst notificationTitle = appName;\nconst notificationText = \"New Message Received\";\nconst data = {\n  showDeviceNotification,\n  showAppNotification,\n  notificationTitle,\n  notificationText\n};\n\n$success(data);"},"_auto_id_":"1a6cf22b-0b34-4f19-b885-38e3546fffcd"},{"type":"if","data":{},"_auto_id_":"fdc8184f-ceb4-4b33-b93a-de7329ba40c6","operations":[{"type":"value","content":"{{$data.showDeviceNotification}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true,"model":"","badge":"1"},"name":"device_notification","text":"{{$data.notificationText}}","title":"{{$data.notificationTitle}}"},"_auto_id_":"4896a767-6f17-45b2-a7c6-c9131334fd0e"},{"type":"otherwise-if","data":{},"_auto_id_":"7c2c07ab-ea64-471c-b337-b5219f48493d","operations":[{"type":"value","content":"{{$data.showAppNotification}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"app_notification","title":"{{$data.notificationTitle}}","text":"{{$data.notificationText}}"},"_auto_id_":"0ef1fa64-81bc-49b9-a76b-8e533fd648fc"},{"event":"click","type":"call-actionflow","data":{"name":"start_audio_vibrate"},"_auto_id_":"976c9c0e-3276-46f3-b3d8-c89b6e9884e3"},{"type":"otherwise","data":{},"_auto_id_":"cb33fd3c-4250-45e0-8d54-e81ea65ed569"},{"event":"click","type":"call-actionflow","data":{"name":"start_audio_vibrate"},"_auto_id_":"a967ebdb-0fb9-4be0-8ac1-743940dd7795"},{"type":"end-if","data":{},"_auto_id_":"6f246e42-9c9d-4931-84e8-691c7d991bc0"}]},{"name":"start_audio_vibrate","content":[{"type":"if","data":{},"_auto_id_":"84cbd4d2-27c6-4d75-9957-4ca7ecac143f","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}","$selected":false},{"type":"operator","content":"!=","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"notification","fileName":"Clinical_Messaging_Notification.m4a"},"_auto_id_":"84bf340b-2812-43f6-9cbc-6cf5b3d321bf"},{"event":"click","type":"start-vibration","data":{"pattern":"none","customPattern":"","duration":"100","patternIterations":1,"continuous":false},"_auto_id_":"d4caa9b2-7cbc-438b-a81d-d84e31be7023"},{"type":"end-if","data":{},"_auto_id_":"fbac8099-673f-45df-b3a5-f5909f64a2a3"}]},{"name":"stop_audio_vibrate","content":[{"type":"if","data":{},"_auto_id_":"0535b8ba-c1ff-4720-aff3-2a02a1fc9d3c","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"bf1ced2c-fbf2-46bc-9efb-6b7e87e972ef"},{"event":"click","type":"stop-vibration","data":{},"_auto_id_":"214eeb56-4570-4df3-9c89-e1f5c5c6eb9d"},{"type":"end-if","data":{},"_auto_id_":"74ba6392-030a-4d90-9d1e-aa67f3516144"}]},{"name":"on_removed_from_conversation","content":[{"event":"click","type":"go-to-page","data":{"name":"Conversations"},"_auto_id_":"7b206e08-1b57-42db-ba41-03455a918d25"}]},{"name":"show_qa_page","content":[{"type":"if","data":{},"_auto_id_":"c4f8ac44-2500-4897-8f4a-a03526bc56bf","operations":[{"type":"value","content":"{{$store.preferences.qaMode}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"go-to-page","data":{"name":"QA","isConditional":false},"_auto_id_":"2469c73d-3e10-433a-93e9-ffe4901519b1"},{"type":"end-if","data":{},"_auto_id_":"db019643-edb9-4c84-9314-728467d8b81c"}]},{"content":[{"event":"click","type":"log","data":{"level":"debug","message":"{{$data}}"},"_auto_id_":"da481f13-de46-4ce8-9465-8fc83e460124"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nPushNotification.addToIgnoreList(function(){\n  console.log(\"Stored messageId: \");\n  $success($data);\n}, function(e){\n  console.error(e);\n  $fail();\n}, $data.conversation.createdTime);\n"},"_auto_id_":"c1fed411-75ab-411e-bb22-a121756758d5"},{"event":"click","type":"log","data":{"level":"debug","message":"hello 1"},"_auto_id_":"9c9187ac-7fa2-4cca-9bf3-002c477c3b79"},{"event":"click","type":"set-variable","data":{"name":"stored_message","value":"{{$data}}"},"_auto_id_":"5b87ea98-0cbf-4b28-80da-b4001e48f0b1"},{"type":"if","data":{},"_auto_id_":"53371e6e-3fcd-4e0e-a006-e95bb0e2b318","operations":[{"type":"value","content":"{{$data.conversation.priority}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"high","$selected":false}]},{"type":"if","data":{},"_auto_id_":"36f06bb5-4ac7-490f-8229-78bbef86a97c","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"fc4f7323-d7e0-4eaf-b57a-e563447eccda"},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","loop":false,"vibrate":true,"loopInterval":5,"loopCount":0,"fileName":"Clinical_Messaging_Notification.m4a","vibratePattern":"100,30,100,30,100,200,200,30,200,30,200,200,100,30,100,30,100","forceVibrate":true},"_auto_id_":"523abd64-6f3d-4681-b28e-111cfc535a91"},{"type":"end-if","data":{},"_auto_id_":"c4670259-081e-4d2c-bf7e-9726051c5e44"},{"type":"otherwise-if","data":{},"_auto_id_":"3774bb08-d66d-49ca-8d2b-59fdfc875c63","operations":[{"type":"value","content":"{{$data.conversation.priority}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"urgent","$selected":false}]},{"event":"click","type":"log","data":{"level":"debug","message":"hello 2"},"_auto_id_":"213a2da7-9233-4f25-a0fb-4b9c2c5f1924"},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"d8adf44d-9431-4773-98fd-8c39dc006ad7"},{"event":"click","type":"set-model","data":{"location":"$store.variables.currently_alerting","dataType":"boolean","value":"true"},"_auto_id_":"1e00ea54-14f6-49c7-8142-8a5a4f47fdb5"},{"type":"if","data":{},"_auto_id_":"cf67e0a7-52f0-40ec-8f2c-5cb3842bfae2","operations":[{"type":"value","content":"{{$store.variables.in_alert}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"get-media-volume","data":{"streamId":"alarm"},"_auto_id_":"0694ac43-509e-49d0-9609-facffaf13976"},{"event":"click","type":"set-variable","data":{"name":"stored_volume","value":"{{$data}}"},"_auto_id_":"f6036877-f3be-4446-8218-ce73f4a1bdc2"},{"event":"click","type":"set-variable","data":{"name":"in_alert","value":"true"},"_auto_id_":"ce3c6a2f-a2c7-44e5-9dfb-6916af96b324"},{"type":"end-if","data":{},"_auto_id_":"56a86569-1a6e-4411-b81f-c61ae927b44d"},{"event":"click","type":"change-media-volume","data":{"streamId":"alarm","volumeLevel":"{{$store.variables.default_urgent_volume}}"},"_auto_id_":"822f8311-307a-4ff8-964e-1ee3e6d8c29a"},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","loop":true,"vibrate":true,"loopInterval":2,"loopCount":0,"vibratePattern":"100,30,100,30,100,200,200,30,200,30,200,200,100,30,100,30,100","forceVibrate":true,"fileName":"pager_responder_alert.m4a"},"_auto_id_":"57b12d68-8b1f-437e-812b-fd3f0e3c0bf4"},{"type":"end-if","data":{},"_auto_id_":"0273b74c-c57d-4404-9dc9-21c0db3ff5f1"}],"name":"priority_conv_start"},{"content":[{"event":"click","type":"log","data":{"level":"debug","message":"{{$data}}"},"_auto_id_":"8f87290f-1468-4ef0-b7f8-b6164632163b"},{"type":"if","data":{},"_auto_id_":"23310066-2b0e-4606-b20b-ae0df50855d2","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false},{"type":"connector","content":"&&","$selected":false},{"type":"value","content":"{{$data.pendingCount}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"0","$selected":false}]},{"event":"click","type":"set-model","data":{"location":"$store.variables.currently_alerting","dataType":"boolean","value":"false"},"_auto_id_":"562554b8-4a52-4cd5-83f8-97b68a848be0"},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"3abafebc-07cb-45c3-8091-74920c412474"},{"event":"click","type":"change-media-volume","data":{"streamId":"alarm","volumeLevel":"{{$store.variables.stored_volume}}"},"_auto_id_":"1d373c11-192f-4ff4-b7cc-8767954de216"},{"event":"click","type":"set-variable","data":{"name":"in_alert","value":"false"},"_auto_id_":"b0f63f68-4146-481c-919e-bfc7b376b30c"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"if (window.cti.store.env.platform.name === \"android\") { \n\n  PushNotification.cancelAtFront(function() {\n    $success();\n  }, function() {\n    $fail();\n  });\n\n} else {\n  $success();\n}"},"_auto_id_":"2721f402-c359-4e28-9bc1-2dd62236ee81"},{"type":"end-if","data":{},"_auto_id_":"df4f1649-de96-48a0-8f6f-cd22be19c3ff"}],"name":"priority_conv_ack"},{"content":[{"type":"if","data":{},"_auto_id_":"6af808c3-2d80-42f8-88cc-c9ee9a9a890c","operations":[{"type":"value","content":"{{$store.state.currentPage}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Login","$selected":false}]},{"event":"click","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"d4183de9-4c5e-4e2c-a15f-4877b02faf9d"},{"type":"end-if","data":{},"_auto_id_":"d8567801-d7bf-4dca-aae8-a0b72bb7a44e"}],"name":"on_auto_reconnected"}],"dataflows":[],"config":[{"name":"Keyboard Did Show Event","type":"event","item-type":"onkeyboarddidshow","_auto_id_":"8c8e1fd3-056b-4b2f-88ef-fbde3414db19","actions":[{"type":"inline-function","data":{"sync":true,"code":"var chatLayerInstance = window.CtChatLayer.getInstance(\"Clinical_Messaging\");\nchatLayerInstance.keyboardShown($data.keyboardHeight);"},"_auto_id_":"df709ab5-783e-449f-92a0-cdfd554d2e45"}]},{"name":"Keyboard Will Hide Event","type":"event","item-type":"onkeyboardwillhide","_auto_id_":"fc80c7f0-8f72-4b6e-b9b4-d20435e50764","actions":[{"type":"inline-function","data":{"sync":true,"code":"var chatLayerInstance = window.CtChatLayer.getInstance(\"Clinical_Messaging\");\nchatLayerInstance.keyboardHidden();"},"_auto_id_":"2d41afd6-f5f6-4a60-a86b-e9f858913939"}]},{"name":"App Load Event","type":"event","item-type":"onappload","actions":[{"event":"onappload","type":"inline-function","data":{"sync":true,"code":"// TODO: remove this from the app when we have real data\n\nwindow.localConfig = {\n    fakeFetch: true,\n    fakeData: {\n        // conversations: true,\n        // contacts: true\n        // chat: true,\n    }\n};\n\nwindow.resetData = function () {\n  const layer = window.chatLayer;\n  layer.showWaitingMessage(\"Clearing local data and restarting...\");\n  layer.clearAllData().then(() => window.location.reload());\n}\n\n$success();"},"_auto_id_":"591b4b5b-7f11-4a88-94ad-226999245e10"},{"event":"onappload","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"e10c6a61-b624-4799-8798-a03a7ef92f37"}],"_auto_id_":"e7370d46-cb57-482e-9da7-d3a376e1ecb1"},{"name":"OpenSans-Light","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Light.woff","_auto_id_":"41da30dd-feb0-4ccb-b1de-f4822e6919a7"},{"name":"OpenSans-Regular","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Regular.woff","_auto_id_":"2a3623d1-0dd5-431e-816d-a35572ee840d"},{"name":"OpenSans-Semibold","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Semibold.woff","_auto_id_":"7acdaabd-424b-4bcb-a0d7-874c2b49fb81"},{"name":"OpenSans-Bold","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Bold.woff","_auto_id_":"1b53d788-5577-4162-a4b4-c82d31908e11"},{"name":"logo","type":"style","item-type":"image-asset","fileName":"chat_logo_generic.png","_auto_id_":"6c030fbf-b34f-441a-9979-8eb9cbafe348"},{"name":"notification_sound","type":"media","item-type":"audio-asset","_auto_id_":"65301da8-c189-483e-91b3-c8d24efe39ca","fileName":"Clinical_Messaging_Notification.m4a"},{"name":"push_audio","type":"media","item-type":"audio-asset","_auto_id_":"936bc951-6530-4c2b-8489-9fbbdae4bc9a","fileName":"Clinical_Messaging_Push.caf"},{"name":"css_variables","type":"style","item-type":"css","content":"body {\n\n  --primary-color: #22b1c8;\n  --primary-font-color: #ffffff;\n\n  --secondary-color: #f2f2f2;\n  --secondary-font-color: #212121;\n  --secondary-border: 1px solid #dddddd;\n\n  --default-font-color: #212121;\n  --subtle-font-color: #828688;\n\n  --header-height: 75px;\n  --header-bg: #7b7e80;\n  --header-text: var(--primary-font-color);\n\n  --light-header-bg: #f2f2f2;\n  --light-header-text: var(--subtle-font-color);\n\n  --dark-header-bg: #212121;\n  --dark-header-text: #f2f2f2;\n\n  --list-bg: #fbfbfb;\n  --list-item-bg: #ffffff;\n  --list-item-border: 1px solid #dddddd;\n\n  --avatar-bg: #7b7e80;\n  --avatar-color: #ffffff;\n\n  --group-avatar-bg: var(--primary-color);\n  --group-avatar-color: var(--primary-font-color);\n\n  --conversation-unread-text: var(--default-font-color);\n  --conversation-unread-marker-bg: var(--primary-color);\n  --conversation-unread-marker-border: 1px solid var(--primary-color);\n\n  --conversation-read-text: var(--subtle-font-color);\n  --conversation-read-marker-bg: transparent;\n  --conversation-read-marker-border: var(--secondary-border);\n\n  --conversation-has-draft-color: #7e8080;\n  --conversation-has-error-color: #d93247;\n\n  --chat-message-bubble-sent-bg: var(--primary-color);\n  --chat-message-bubble-sent-text: var(--primary-font-color);\n\n  --chat-message-bubble-received-bg: #ebebeb;\n  --chat-message-bubble-received-from: var(--primary-color);\n  --chat-message-bubble-received-text: var(--default-font-color);\n\n  --button-primary-bg: var(--primary-color);\n  --button-primary-border: 1px solid var(--primary-color);\n  --button-primary-text: #ffffff;\n  --button-primary-ripple: var(--primary-color);\n\n  --button-secondary-bg: transparent;\n  --button-secondary-border: 1px solid var(--primary-color);\n  --button-secondary-text: var(--primary-color);\n  --button-secondary-ripple: var(--primary-color);\n\n  --button-dangerous-bg: #ce0a24;\n  --button-dangerous-border: #ce0a24;\n  --button-dangerous-text: #ffffff;\n  --button-dangerous-ripple: #ffffff;\n}\n\nbody.connected {\n\n  --header-bg: var(--primary-color);\n}\n\nct-login-form {\n\n  --button-primary-bg: var(--primary-color);\n  --button-primary-text: var(--primary-font-color);\n  --button-primary-border: 1px solid var(--primary-font-color);\n}\n\nct-alert-modal-manager {\n\n  --alert-info-bg: var(--primary-color);\n  --alert-info-text: var(--primary-font-color);\n\n  --alert-question-bg: var(--primary-color);\n  --alert-question-text: var(--primary-font-color);\n\n  --button-primary-bg: #7b7e80;\n  --button-primary-border: #7b7e80;\n  --button-primary-text: #fff;\n  --button-primary-ripple: #fff;\n}\n\nhtml[theme=\"dark\"] > body {\n\n    --base-color: #2f3136;\n    --secondary-color: #36393f;\n    --tertiary-color: #484c52;\n    --default-border-color: #474a4f;\n\n    --default-font-color: #fff;\n    --subtle-font-color: #828482;\n\n    --secondary-font-color: #616367;\n    --secondary-border: 1px solid var(--tertiary-border-color);\n\n    --tertiary-font-color: #fff;\n    --tertiary-border-color: #5b5e64;\n    --tertiary-placeholder-color: #7f8186;\n\n    --list-bg: var(--base-color);\n    --list-item-bg: var(--base-color);\n    --list-item-border: 1px solid var(--default-border-color);\n\n    --chat-list-bg-color: var(--base-color);\n    --chat-message-bubble-received-bg: var(--tertiary-color);\n    --chat-message-bubble-received-from: var(--primary-color);\n    --chat-message-bubble-received-text: var(--tertiary-font-color);\n\n    --light-header-bg: var(--secondary-color);\n    --light-header-text: var(--secondary-font-color);\n\n    --avatar-bg: var(--base-color);\n    --avatar-color: var(--default-font-color);\n\n    --group-avatar-bg: var(--base-color);\n    --group-avatar-color: var(--primary-font-color);\n\n    --default-bg-color-light: var(--tertiary-color);\n    --default-bg-color-light-font: var(--tertiary-font-color);\n\n    --select-border-color: var(--tertiary-border-color);\n    --select-placeholder-color: var(--tertiary-placeholder-color);\n\n    --action-sheet-border-color: var(--tertiary-border-color);\n    --action-sheet-button-bg: var(--tertiary-color);\n    --action-sheet-subtitle-color: var(--tertiary-placeholder-color);\n}","_auto_id_":"6d1b5166-0a8a-4c82-834a-f788d463c033"},{"name":"app_styles","type":"style","item-type":"css","content":"@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Light.woff?v=1.1.0\") format(\"woff\");\n  font-weight: 300;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Regular.woff?v=1.1.0\") format(\"woff\");\n  font-weight: normal;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Semibold.woff?v=1.1.0\") format(\"woff\");\n  font-weight: 600;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Bold.woff?v=1.1.0\") format(\"woff\");\n  font-weight: bold;\n  font-style: normal;\n}\n\nhtml, body {\n    /* prevent iOS overscroll */\n    position: fixed;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    background-color: var(--list-bg);\n}\n\nhtml, body, input, textarea, select, button {\n  font-size: 12px;\n}\n\nhtml, body, h1, h2, h3, h4, h5, h6, p, input, textarea, select, button {\n  font-family: \"Open Sans\", sans-serif;\n}\n\n#main_content {\n  position: relative;\n  padding: 0;\n  margin: 0;\n}\n\n#toast-container {\n  top: 0;\n  left: 0;\n  right: 0;\n}\n#toast-container .toast,\n#toast-container .toast:hover {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.8);\n  background-size: 24px 24px;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAATlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////+QlxstAAAAGXRSTlMAECAwP0BQYHB/gI+Qn6CvsL/Az9Df4O/wU9PRWAAAATBJREFUeNrt1lGTgiAUBeCDRKWYCWV4/v8f3RlrhqZEgbsP+7Df+7negQuIf2mH1jrHhXO2PZSF7Y1fbjazSGMDE4JtsMc4bnIGW7TjLqeRoiyzWJXofmKmSWNFywItvlxY5CLMxwoxL6rQs0If80dWOeKlCawSGjxdWemKhWE1sxRwrOZiA4IWBgoMAAIFAmAoYtBRpMNIkRGeIh4U+gMFZsqIF1G8jeJBko+ybBXn3zjOWnqhSDbSyy/VxVg/BE9qZpW5kT5t8sc1GqpGoL5CzEdDZT7qyg7hCv1gpofGKsU8vUICc3iNpJy4QZrmjrlvsOXMLffeYMf08T3vufC+7wz2nT7yGnkSf4t3hTLqxne9LP8wKGSm9/gJhVTLyJ9QLPBlHs8NKpD3Za81yv0ASG4Lo6gTOU0AAAAASUVORK5CYII=\") !important;\n  background-repeat: no-repeat;\n  background-position: 20px center;\n  color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  width: 100% !important;\n  padding: 15px 20px 15px 60px !important;\n  box-shadow: none;\n  z-index: 100;\n}\n#toast-container .toast {\n  opacity: 1 !important;\n  transform: translateY(0);\n}\n#toast-container .toast .toast-title {\n  font-weight: 600;\n}\n#toast-container .toast .toast-message {\n  font-weight: 300;\n}\n#toast-container .toast.ng-enter {\n  opacity: 1 !important;\n  transform: translateY(-100%);\n  transition: transform 0.3s ease-out;\n}\n#toast-container .toast.ng-enter.ng-enter-active {\n  opacity: 1 !important;\n  transform: translateY(0);\n}\n#toast-container .toast.ng-leave {\n  opacity: 1;\n  transform: translateY(0);\n  transition: transform 0.3s ease-out;\n  z-index: 0;\n}\n#toast-container .toast.ng-leave.ng-leave-active {\n  opacity: 1 !important;\n  transform: translateY(-100%);\n}\n\nbody.cti-preview #___ct_base_layer_modal_container > * {\n  top: 20px;\n  height: calc(100% - 20px);\n}\n\nbody div.app-container,\nbody div.page-container {\n  background-color: var(--list-bg); \n}","_auto_id_":"68012ec4-0833-4eb2-838b-47c5c348f2a6"},{"name":"page_specific_styles","type":"style","item-type":"css","content":"#main_content.login-page {\n  padding: 50px;\n  background: var(--primary-color);\n  color: var(--primary-font-color);\n  overflow: auto;\n}\n\n#main_content.login-page .login-watermark {\n  position: fixed;\n  bottom: -20px;\n  right: -20px;\n  margin: 0;\n  height: 100%;\n}\n\n#main_content.login-page .login-watermark svg {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  height: 100vh;\n  fill: rgba(255, 255, 255, 0.05);\n  pointer-events: none;\n}\n\n#main_content.login-page .login-content {\n  text-align: center;\n  font-weight: 300;\n  font-size: 12px;\n  margin: 0 0 20px 0;\n}\n\n#main_content.login-page .login-content .logo {\n  width: 75px;\n  height: 75px;\n  margin: 0 auto;\n  overflow: hidden;\n  transition: height 0.3s ease-out;\n}\n\n#main_content.login-page .login-content .logo.vanish {\n  height: 0;\n}\n\n#main_content.login-page .login-content .logo img {\n  display: block;\n  width: 75px;\n  height: 75px;\n}\n\n#main_content.login-page .login-content .title {\n  font-size: 26px;\n  margin: 5px 0 0 0;\n}\n\n#main_content.login-page .login-content .title .b {\n  font-weight: 600;\n}\n\n#main_content.login-page .login-content .subtitle {\n  font-weight: 300;\n  margin: 5px 0 0 0;\n}\n\n#main_content.login-page .login-content .subtitle.subtitle-1 {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n#main_content.login-page .login-content .subtitle.subtitle-2 {\n  font-weight: 600;\n}\n\n#main_content.login-page .login-content {\n  text-align: center;\n}\n\n#main_content.login-page .login-form {\n  font-size: 16px;\n  font-weight: 300;\n  max-width: 400px;\n  margin: 0 auto;\n  opacity: 0;\n  transition: opacity 0.5s ease-out;\n}\n\n/* force full-height component UIs on iOS 10.3 */\n#main_content.conversations-page,\n#main_content.new-conversation-page,\n#main_content.chat-page,\n#main_content.conversation-info-page,\n#main_content.add-contacts-page {\n  display: flex;\n  flex-direction: column;\n}\n\n/* force full-height component UIs on iOS 10.3 */\n#main_content.conversations-page > .conversation-list,\n#main_content.new-conversation-page > .new-conversation,\n#main_content.chat-page > .chat-message-list,\n#main_content.conversation-info-page > .conversation-info,\n#main_content.add-contacts-page > .add-conversation-contacts {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  height: 100%;\n}\n\n#main_content.qa-page {\n  padding: 20px;\n}\n\n#main_content.qa-page #close_btn.md-button-container {\n  position: absolute;\n  top: 24px;\n  right: 20px;\n  margin: 0;\n}\n\n#main_content.qa-page #close_btn.md-button-container .btn {\n  border: 0;\n  padding: 0;\n}\n\n#main_content.qa-page #close_btn.md-button-container .btn:hover,\n#main_content.qa-page #close_btn.md-button-container .btn:active {\n  background: none;\n  box-shadow: none;\n}\n\n#main_content.qa-page #close_button.md-button-container .btn .fa {\n  font-size: 2em;\n}\n\n#main_content.qa-page .qa-data {\n  margin: 0 0 10px 0;\n}\n\n#main_content.qa-page .app-header .name { \n  font-size: 2em;\n  font-weight: 600;\n}\n\n#main_content.qa-page .app-header .package-id,\n#main_content.qa-page .app-header .ver { \n  opacity: 0.7;\n  font-size: 0.8em;\n  margin: 0 0 3px 0;\n}\n\n#main_content.qa-page .section { \n  margin: 10px 0 0 0;\n  padding: 10px;\n  border: 1px dotted var(--default-border-color, #ddd);\n  border-radius: 8px;\n}\n\n#main_content.qa-page .section .heading {\n  font-size: 1.333em;\n  font-weight: 600;\n  margin: 0 0 10px 0;\n}\n\n#main_content.qa-page .app-prefs .pref {\n  font-family: monospace;\n  margin: 5px 0 0 0;\n}\n\n#main_content.qa-page .app-prefs .key {\n  font-weight: 600;\n}\n\n#main_content.qa-page .app-prefs .no-value {\n  font-style: italic;\n}\n\n#title_bar {\n\tjustify-content: flex-start;\n\tbackground-color: var(--primary-color, #0fb1ca);\n}\n\n#title_bar div.md-button-container a {\n    background: var(--primary-color, #0fb1ca);\n    color: #fff;\n    border: none;\n}\n\n#btnIconAbout {\n\tposition: absolute;\n\tbottom: 10px;\n\tleft: 10px;\n}\n\n@media screen and (max-height: 480px) {\n    #btnIconAbout {\n        display: none;\n    }\n}\n\n#btnIconAbout a {\n\t\n\tbackground-color: transparent;\n    color: white;\n    border: none;\n}\n\n#btnIconAbout a span {\n\tfont-size: 30px;\n}\n\n#scrlAbout {\n    display: flex;\n    flex-direction: column;\n    background-color: var(--default-bg-color);\n    color: var(--default-font-color);\n}\n\n#scrlAbout image-viewer[name=\"ctLogo\"] div {\n    display: flex;\n    margin: 2vh auto;\n}\n\n#scrlAbout image-viewer[name=\"ctLogo\"] div img {\n    margin: auto;\n    height: 15vh;\n}\n\np.versions { \n    text-align: center;\n    color: var(--subtle-font-color);\n}\n","_auto_id_":"dba3e159-37e7-4812-aad6-e15587f5fa12"},{"name":"menu_styles","type":"style","item-type":"css","content":"#main_content #menu {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: var(--header-height);\n  margin: 0 0 0 20px;\n  color: #ffffff;\n}\n\n#main_content #menu #menu_content {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  border: none;\n  box-shadow: none;\n  padding: 0;\n}\n\n#main_content #menu #menu_content .md-button-container {\n  text-align: left;\n  margin: 0;\n}\n\n#main_content #menu #menu_content #menu_header {\n  flex: none;\n  background: var(--header-bg);\n  color: var(--primary-font-color);\n  border: none;\n  box-shadow: none;\n  padding: 65px 20px 20px 20px;\n}\n\n#main_content #menu #menu_content #menu_header .current-user {\n  --list-item-bg: transparent;\n  --list-item-border: none;\n  --avatar-tile-padding: 0;\n  --avatar-bg: var(--primary-font-color);\n  --avatar-color: var(--header-bg);\n  --default-font-color: var(--primary-font-color);\n  --subtle-font-color: var(--primary-font-color);\n}\n\n#main_content #menu #menu_content #menu_items {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  box-shadow: none;\n  padding: 0;\n  background: var(--list-bg);\n  border-top: var(--list-item-border);\n  color: var(--default-font-color);\n}\n\n#main_content #menu #menu_content #menu_footer {\n  flex: none;\n  background: var(--list-bg);\n  border: var(--list-item-border);\n  border-width: 1px 0 0 0;\n  box-shadow: none;\n  padding: 0;\n}\n\n#main_content #menu #menu_content .menu-btn {\n  display: block;\n  border: 0;\n  padding: 20px;\n  text-align: left;\n  background: var(--list-bg);\n  color: var(--default-font-color);\n}\n\n#main_content #menu #menu_content #menu_items .menu-btn {\n  border-bottom: var(--list-item-border);\n  background: var(--list-bg);\n  color: var(--default-font-color);\n}\n\n/* special case for CTI preview */\nbody.cti-preview #main_content #menu #menu_content {\n  margin: 20px 0 0 0;\n  height: calc(100% - 20px);\n}\n#version_block {\n  background: #f2f2f2;\n  color: #666;\n  padding: 0 10px;\n  text-align: right;\n  height: 30px;\n  line-height: 30px;\n  border-top: solid 1px #DDD;\n}","_auto_id_":"b7278284-6cf5-4751-9881-a313c3114f34"},{"name":"Clinical_Messaging","type":"chat","item-type":"chatlayer","clConfig":{"xmpp":{"endpoint":"{{$store.preferences.xmppUrl}}","user":{"domain":"{{$store.preferences.xmppDomain}}","userPersistentResource":false,"forceLowercaseJid":true,"sendAppIdentifier":false,"appIdentifier":"Clinical_Messaging"},"iq":{"host":"{{$store.preferences.xmppDomain}}","namespace":"urn:commontime:infinity:muc"},"mucHost":"conference.{{$store.preferences.xmppDomain}}","uploadHost":"upload.{{$store.preferences.xmppDomain}}","enablePing":true,"pingInterval":"{{$store.preferences.xmppPingInterval}}","pingTimeout":"{{$store.preferences.xmppPingTimeout}}","loginTimeout":60000,"autoLogin":true,"autoReconnect":true,"useChatMarkers":true,"maxMessageAge":-1,"mam":{"enabled":true},"encryption":true,"fileEncryption":true,"authAttachments":true,"alwaysSendPresence":true,"sleepingBeauty":true},"behaviour":{"maxSubjectLength":40,"maxDescriptionLength":500,"maxConversationParticipants":"{{$store.preferences.maxParticipants}}","chatEntriesFetchBatchSize":"{{$store.preferences.chatFetchBatchSize}}","photoQuality":"{{$store.preferences.photoQuality}}","enablePriorityConversations":true,"defaultConversationExpiryTTL":150,"defaultConversationActivityTTL":300,"maxChatEntriesToStore":30,"updateUsersOnNewConversationClick":true},"priorities":[{"id":"","sortOrder":0,"name":"Standard","colorCode":"#007AC3","autoAlert":false,"alert":false,"descriptionAtTop":false,"userDescription":"","mustAcknowledge":false},{"id":"high","sortOrder":1,"name":"High","colorCode":"#F5BD23","autoAlert":false,"alert":true,"descriptionAtTop":true,"userDescription":"A High priority conversation will create a conversation that must be acknowledged by the recipients.","mustAcknowledge":false},{"id":"urgent","sortOrder":2,"name":"Urgent","colorCode":"#D74736","autoAlert":true,"alert":true,"descriptionAtTop":true,"userDescription":"An Urgent conversation will immediately pop-up on the user's device.","mustAcknowledge":true}],"roles":{"enableRoles":true,"rolesLabel":"Team"},"conversationSettings":[{"nick":"test"}],"conversationTypes":[{"id":"1","sortOrder":1,"name":"Direct Conversation","shortDescription":"A conversations with a set group of users that is ongoing","colorCode":"#22b1c8","displayGroup":"normal","behaviour":{"warnWhenNoContacts":false,"errorWhenNoContacts":false,"chatAvailable":true,"usePagerUI":false,"participantCanLeave":false,"ownerCanEditAfterSend":false,"ownerCanCloseEarly":false,"canSendAttachmentsWithinConversation":true,"ownerCanAddAdditionalContacts":false,"autoRemoveOnClose":false}},{"id":"2","sortOrder":2,"name":"Named Conversation","shortDescription":"Standard conversation where users can be added/removed","colorCode":"#1b2341","displayGroup":"normal","defaultConversationExpiryTTL":150,"defaultConversationActivityTTL":300,"behaviour":{"warnWhenNoContacts":false,"errorWhenNoContacts":false,"chatAvailable":true,"namedSettings":{"subjectRequired":true,"subjectFieldLabel":"Title","descriptionRequired":false,"descriptionFieldLabel":""},"usePagerUI":false,"participantCanLeave":true,"ownerCanEditAfterSend":true,"ownerCanCloseEarly":true,"canSendAttachmentsWithinConversation":true,"ownerCanAddAdditionalContacts":true,"autoRemoveOnClose":false}},{"id":"3","sortOrder":3,"name":"High Priority","shortDescription":"A conversation with an alert when the user first views the conversation","colorCode":"#baa91c","displayGroup":"normal","defaultConversationExpiryTTL":150,"defaultConversationActivityTTL":300,"behaviour":{"warnWhenNoContacts":true,"errorWhenNoContacts":false,"chatAvailable":true,"namedSettings":{"subjectRequired":true,"subjectFieldLabel":"Title","descriptionRequired":true,"descriptionFieldLabel":"Enter a description for your high priority conversation"},"usePagerUI":false,"participantCanLeave":true,"ownerCanEditAfterSend":true,"ownerCanCloseEarly":true,"canSendAttachmentsWithinConversation":true,"ownerCanAddAdditionalContacts":true,"autoRemoveOnClose":false,"priorityPush":"high","alert":{"autoAlert":false,"suppressAlertModalWarning":true,"alertVolume":50,"alertSoundFilename":"cancelled.m4a","alertSoundLoops":2,"alertAudioStream":"alarm","alertResponseOptions":[{"id":"1","name":"Attend / Unable","options":[{"name":"Attend","type":"button","label":"Attend","value":"Attend","color":"#37be52","shortDescription":"You will attend as soon as possible"},{"name":"Unable","type":"button","label":"Unable","value":"Unable","color":"#ea4335","shortDescription":"I cannot attend immediately"}]},{"id":"2","name":"Yes / No","options":[{"name":"Yes","type":"button","label":"Yes","value":"Yes","color":"#37be52"},{"name":"No","type":"button","label":"No","value":"No","color":"#ea4335"}]},{"id":"3","name":"Acknowledge","options":[{"name":"Acknowledge","type":"button","label":"Acknowledge","value":"Acknowledge"}]}],"shouldOpenConversationAfterResponded":true,"participantAlertResponsesVisible":true},"attachments":{"image":true,"audio":{"attachPreRecordedFile":true,"attachLiveRecordedAudio":true},"video":false}}},{"id":"4","sortOrder":4,"name":"Urgent Priority","shortDescription":"A conversation with an alert which displays as soon as the conversation starts","colorCode":"#b1191c","displayGroup":"normal","defaultConversationExpiryTTL":150,"defaultConversationActivityTTL":300,"behaviour":{"warnWhenNoContacts":true,"errorWhenNoContacts":false,"chatAvailable":true,"namedSettings":{"subjectRequired":true,"subjectFieldLabel":"Title","descriptionRequired":true,"descriptionFieldLabel":"Enter a description for your urgent priority conversation"},"usePagerUI":false,"participantCanLeave":true,"ownerCanEditAfterSend":true,"ownerCanCloseEarly":true,"canSendAttachmentsWithinConversation":true,"ownerCanAddAdditionalContacts":true,"autoRemoveOnClose":false,"priorityPush":"urgent","alert":{"autoAlert":true,"suppressAlertModalWarning":false,"alertVolume":100,"alertSoundFilename":"cancelled.m4a","alertSoundLoops":0,"alertAudioStream":"alarm","alertResponseOptions":[{"id":"1","name":"Attend / Unable","options":[{"name":"Attend","type":"button","label":"Attend","value":"Attend","color":"#37be52","shortDescription":"You will attend as soon as possible"},{"name":"Unable","type":"button","label":"Unable","value":"Unable","color":"#ea4335","shortDescription":"I cannot attend immediately"}]},{"id":"2","name":"Yes / No","options":[{"name":"Yes","type":"button","label":"Yes","value":"Yes","color":"#37be52"},{"name":"No","type":"button","label":"No","value":"No","color":"#ea4335"}]},{"id":"3","name":"Acknowledge","options":[{"name":"Acknowledge","type":"button","label":"Acknowledge","value":"Acknowledge"}]}],"shouldOpenConversationAfterResponded":true,"participantAlertResponsesVisible":true},"attachments":{"image":true,"audio":{"attachPreRecordedFile":true,"attachLiveRecordedAudio":true},"video":false}}},{"id":"5","sortOrder":5,"name":"Pager Message","shortDescription":"A pager style message that requires a response from the participants.","colorCode":"#2e8725","displayGroup":"normal","defaultConversationExpiryTTL":150,"defaultConversationActivityTTL":300,"behaviour":{"warnWhenNoContacts":true,"errorWhenNoContacts":true,"chatAvailable":false,"namedSettings":{"subjectRequired":true,"subjectFieldLabel":"Title","descriptionRequired":false,"descriptionFieldLabel":""},"usePagerUI":true,"participantCanLeave":false,"ownerCanEditAfterSend":false,"ownerCanCloseEarly":false,"canSendAttachmentsWithinConversation":false,"ownerCanAddAdditionalContacts":false,"autoRemoveOnClose":true,"priorityPush":"urgent","alert":{"autoAlert":true,"suppressAlertModalWarning":true,"alertVolume":50,"alertSoundFilename":"cancelled.m4a","alertSoundLoops":0,"alertAudioStream":"alarm","automaticallyPlayAudioOnDownload":false,"autoIncludeMembersInRoles":["Console"],"shouldOpenConversationAfterResponded":false,"participantAlertResponsesVisible":false},"attachments":{"image":false,"audio":false,"video":false}}}]},"actions":[{"event":"chat-layer-ready","type":"call-actionflow","data":{"name":"on_instance_ready"},"_auto_id_":"3a72c86b-24d1-472f-a38d-d4b5342ec1fe"},{"event":"login","type":"call-actionflow","data":{"name":"on_login"},"_auto_id_":"e23d499e-26de-4c31-93b1-9fc1243b7b3c"},{"event":"logout","type":"call-actionflow","data":{"name":"on_logout"},"_auto_id_":"90287b52-7213-47f8-97b6-b4cdfad92161"},{"event":"connection-status-change","type":"call-actionflow","data":{"name":"on_connection_status"},"_auto_id_":"d7e52274-ca2c-4bc6-a3f0-d5814f7c2382"},{"event":"chat-notification","type":"call-actionflow","data":{"name":"chat_notification"},"_auto_id_":"3f9425b7-4663-44e2-9e8c-bf19dd2fd7cf"},{"event":"force-quit-conversation","type":"call-actionflow","data":{"name":"on_removed_from_conversation"},"_auto_id_":"1d51693c-43be-49d7-85bb-66255b9aa4c4"},{"event":"chat-mute","type":"stop-audio","data":{},"_auto_id_":"17ffb998-7944-4519-84a8-385518f53fe3"},{"event":"chat-layer-ready","type":"call-actionflow","data":{"name":"on_auto_reconnected"},"_auto_id_":"90cabbaa-44d4-4dd3-9f0f-60d8c2de9d17"},{"event":"move-task-to-back","type":"move-task-to-back","data":{},"_auto_id_":"b798eadb-ee21-4d72-a436-95a0f28b4f35"}],"_auto_id_":"bd89e360-21b7-4690-8355-842fb6814ce3"},{"name":"device_notification","type":"notification","item-type":"device-notification","_auto_id_":"9a15fe3a-609e-4366-a05a-2c71454e05f2","interactions":[],"actions":[],"text":"You have new notification(s)"},{"name":"app_notification","type":"notification","item-type":"app-notification","_auto_id_":"09c2ee58-e9a5-41d4-9751-222ec08543be","options":{"autoDismiss":true,"progressBar":false,"maxOne":false},"style":"info","text":"You have new notification(s)","actions":[]},{"name":"default_urgent_volume","type":"scripting","item-type":"variable","_auto_id_":"d06fa5ba-b864-49fa-a7d7-0ef4e047dab5","variable-type":"int","value":"100"},{"name":"debugLog","type":"scripting","item-type":"function","sync":false,"params":[],"content":"if (cti.store.preferences.debugMode === \"true\") {\n  var params = Array.prototype.slice.call(arguments);\n  console.log.apply(console.log, params);\n}\n","_auto_id_":"ce55a16a-3aa8-4e1f-a2bb-9b1f9f6774d2"},{"name":"setupLoginForm","type":"scripting","item-type":"function","_auto_id_":"234eb96b-6e30-42d0-aba9-b0080d7e2959","sync":false,"params":[],"content":"let attempts = 0;\nsetTimeout(() => testReadiness(), 500);\nfunction testReadiness() {\n  attempts += 1;\n  if (attempts === 10) {\n    alert(\"Unable to find window.CtChatLayer\");\n    return;\n  }\n  if (window.CtChatLayer) prepareLoginForm();\n  else setTimeout(() => testReadiness(), 250);\n}\nfunction prepareLoginForm() {  \n  window.CtChatLayer.onReady(\"Clinical_Messaging\", () => {\n    let logoTaps = 0;\n    let tapsTimeout = null;\n    const loginPage = document\n      .querySelector(\".login-page\");\n    if (!loginPage) return;\n    const logo = loginPage\n      .querySelector(\".logo\");\n    const loginForm = loginPage\n      .querySelector(\".login-form\");\n    const textBoxes = loginForm\n      .shadowRoot\n      .querySelectorAll(\"ct-textbox\");\n    const loginButton = loginForm\n      .shadowRoot\n      .querySelector(\"ct-button\");\n    textBoxes.forEach(textBox => {\n      const input = textBox\n        .shadowRoot\n        .querySelector(\"input\");\n      input.addEventListener(\"focus\", () => {\n        if (window.innerHeight < 768) hideLogo();\n      });\n      input.addEventListener(\"blur\", () => {\n        restoreLogo();\n      });\n    });\n    function hideLogo() {\n      logo.classList.add(\"vanish\");\n    }\n    function restoreLogo() {\n      logo.classList.remove(\"vanish\");\n    }\n    loginForm.style.opacity = 1;\n    const eventName = cti.store.env.platform.type === \"device\" ? \"touchstart\" : \"click\";\n    logo.addEventListener(eventName, () => {\n      clearTimeout(tapsTimeout);\n      tapsTimeout = setTimeout(() => {\n        taps = 0;\n      }, 400);\n      logoTaps += 1;\n      if (logoTaps === 2) {\n        clearTimeout(tapsTimeout);\n        cti.utils.callActionflow(\"show_qa_page\");\n        logoTaps = 0;\n      }\n    });\n  });\n}","actions":[]},{"name":"stored_volume","type":"scripting","item-type":"variable","_auto_id_":"cbffe216-325c-4201-bd04-7146776209d8","variable-type":"int"},{"name":"in_alert","type":"scripting","item-type":"variable","_auto_id_":"21079890-2db3-4516-840a-ea8d9a5c7ed5","variable-type":"boolean","value":"false"},{"name":"stored_message","type":"scripting","item-type":"variable","_auto_id_":"0a29b114-f570-4181-8d90-5c65357841bc","variable-type":"string"},{"name":"currently_alerting","type":"scripting","item-type":"variable","_auto_id_":"eb81a46f-4f32-4c5a-b504-866407b8a366","variable-type":"boolean","value":"false"},{"name":"pushTs","type":"scripting","item-type":"variable","_auto_id_":"12569361-70b5-45bc-9bce-995b418e3616","variable-type":"int","value":"0"},{"name":"pageTs","type":"scripting","item-type":"variable","_auto_id_":"5dc9d00b-a76c-431f-9100-f73fa28a2688","variable-type":"int","value":"0"},{"name":"debug","type":"scripting","item-type":"variable","_auto_id_":"5f2c9b15-5b24-408c-aea7-42c931178113","variable-type":"boolean","value":"true"},{"name":"audio_asset_1","type":"media","item-type":"audio-asset","_auto_id_":"1e4a5ff2-c5f6-488f-a286-b770d83df6aa","fileName":"cancelled.m4a"}],"components":[],"id":"3a2e8c97-8f7e-4f6d-94a9-dcec1de59b90","name":"SIM_General","packageId":"com.cti.cm.simulation","metadata":{"6b8051c6-7d89-4903-bb83-893cb3ddd71e":{"value":"true","key":"debugMode","externallyConfigurable":true},"91f13824-6aa3-46e8-8b84-1a88ffb47044":{"value":"true","key":"qaMode","externallyConfigurable":true},"b4b47657-e96c-4409-8ebc-045ddc9fe284":{"value":"wss://internal-cm-01.cti-paging.com:12300/websocket","key":"xmppUrl","externallyConfigurable":true},"b24aff90-4008-44f0-b660-aee3b4bf77e5":{"value":"ctsimulation.com","key":"xmppDomain","externallyConfigurable":true},"71e9a46f-1722-4131-a000-10ee2e7eb65c":{"value":"60000","key":"xmppPingInterval","externallyConfigurable":true},"c39f1fef-1e84-4638-af64-6d1ba1b3f401":{"value":"10000","key":"xmppPingTimeout","externallyConfigurable":true},"1b076d61-3323-41c1-acdb-98725e71bfdc":{"value":"120","key":"maxParticipants","externallyConfigurable":true},"3263d149-2f20-4504-bd27-06803bc662dd":{"value":"120","key":"showParticipantCountFrom","externallyConfigurable":true},"31413d5f-d331-4bf4-873a-25929fbca649":{"value":"10","key":"chatFetchBatchSize","externallyConfigurable":true},"259822a1-32d7-463b-a10c-bfabd54994af":{"value":"80","key":"photoQuality","externallyConfigurable":true},"b3cdb4a5-09b7-4c1f-b2dc-05a4ed539a7d":{"value":"5000","key":"disableInsomniaDelay","externallyConfigurable":true},"2656364f-e4da-41d0-a9e1-aa5cfeaa6398":{"value":"60000","key":"insomniaLimit","externallyConfigurable":true},"87994c37-77d3-4e5a-97ab-f47c41ae94bb":{"value":"Sim 1.3 G1","key":"statusBarColor","externallyConfigurable":false},"cf00e6cb-4362-49b9-b27d-6ea59a01abee":{"value":"- build 7","key":"productBuildNumber","externallyConfigurable":false},"20cdafb1-02db-4b47-9d52-307dc98234f7":{"value":"SIM 1.3","key":"customerReleaseNumber","externallyConfigurable":false},"2c885ed6-f7fe-42f4-a20d-2a522dc0322d":{"value":"Gen2","key":"appBuildNumber","externallyConfigurable":false}},"displayName":"Sim 1.3 General 2","icondata":"App Icon With Background - for App Icon).png","buildInfo":{"version":"4.0.0-cm1.3","build":1215},"jwt":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfaWQiOiIzYTJlOGM5Ny04ZjdlLTRmNmQtOTRhOS1kY2VjMWRlNTliOTAiLCJhcHBfbmFtZSI6IlNJTV9HZW5lcmFsIiwiYnVpbGRfaWQiOiIyNWQ1MzlkMy0yNmM3LTQyNzctOGE0MS00MmNhZGU2NGUzZjUiLCJjbGllbnRfaWQiOiIxMTQyNTBhZS03YzZhLTRjYWMtYjY3Yy02Nzk5M2FlNGIzMWMiLCJjbGllbnRfc2VjcmV0IjoiU3pWRE1Ib3JjVmxVY25kaGJVdzVZVlF3ZWxaa1p6MDkiLCJleHAiOjE3Mzk2NjQwMDAsImZyZXF1ZW5jeSI6Im5ldmVyIiwiaGFzaCI6IjZjYjFhMWE2MmFjODQ3NzNlNzFlNWMwYTFkNTdmYTRiZjQwZWY5M2Y5YmE1N2RmY2JmODc4NmNjNzZiZDY2ZTUiLCJsaWNfZXhwIjoxNzM3MDcyMDAwLCJscF9pZCI6IjQ0MTBhNmIxLWE0MWQtNGVhMi1hYTEyLWY0N2NkOTgyMDE3YyIsInBhY2thZ2VfaWQiOiJjb20uY3RpLmNtLnNpbXVsYXRpb24iLCJyZWZyZXNoX3Rva2VuIjoiU1VzMVEzRm1PRWxPVFd0aVZXSXJZazF1YjFwMlpFOUlNMHBxUnpSWmJVNVFkbkZRYjNZd2NrZHJhejA9IiwidHlwZSI6ImZ1bGwiLCJpYXQiOjE1NTQxMzQ3MTl9.tf9LpDCe4-uV_Jpmhldjz1JDBWFOXgaoGpMLkfXW-feMvGZof2OdgbOLo2jRq0t1wM8PczhS9lGUSbAGc4KKGUQQF-Ud2AbFMpkXXvdibNnXdgfEUiL4fWoM_R0cZE5eX8my3FgN8q5sucS-Yrt-fi2IVz7cHJ3KENAEfSRgPEniJf4uVXmrkh1MLzp8fSfimWK18nzZYDH6gqzQDP4taxnjqWF7Y-WYp0VhEIIxSpszWKQoHL8OZsx2N7BB10cmcKSw1fxL4dWQf_0ssh9Q_0Smxc_I7vEdeogOXbli9Yz0pJ977mfW4L9Brb0uuBVCf89CAN2565ufy0s5hyAWbQ","buildId":"25d539d3-26c7-4277-8a41-42cade64e3f5","hostContext":0}