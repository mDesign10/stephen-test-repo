/*! Copyright (c) 2019 CommonTime Ltd */
/*! Build date: Thu Mar 21 2019 19:26:55 GMT+0000 (GMT Standard Time) */
/*! ================================= */
/*! Commit hash: 45150b2 (45150b2500f841b796024da677584da4a76f2903) */
/*! Commit date: Thu Mar 21 2019 19:15:40 GMT+0000 (GMT Standard Time) */
/*! Commit branch: hotfix/3.2.0-beta11 */
/*! ================================= */

(function(L){function E(I){if(A[I])return A[I].exports;var R=A[I]={i:I,l:!1,exports:{}};return L[I].call(R.exports,R,R.exports,E),R.l=!0,R.exports}var A={};return E.m=L,E.c=A,E.i=function(I){return I},E.d=function(I,R,N){E.o(I,R)||Object.defineProperty(I,R,{configurable:!1,enumerable:!0,get:N})},E.n=function(I){var R=I&&I.__esModule?function(){return I['default']}:function(){return I};return E.d(R,'a',R),R},E.o=function(I,R){return Object.prototype.hasOwnProperty.call(I,R)},E.p='',E(E.s=211)})([function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(79);E.prop=I.prop;var R=A(78);E.Stroolean=R.Stroolean,E.NullableNumber=R.NullableNumber;var N=A(44);E.CTBaseComponent=N.CTBaseComponent;var H=A(76);E.CTLayerComponent=H.CTLayerComponent;var B=A(75);E.BaseLayer=B.BaseLayer;var z=A(17);E.Logger=z.Logger},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(94);E.AppMode=I.AppMode;var R=A(46);E.DefaultAlerts=R.DefaultAlerts;var N=A(95);E.ChatEntryType=N.ChatEntryType;var H=A(96);E.ChatRole=H.ChatRole;var B=A(97);E.ConnectionStatus=B.ConnectionStatus;var z=A(98);E.DisconnectionStatus=z.DisconnectionStatus;var W=A(47);E.Icons=W.Icons;var G=A(99);E.RoomRole=G.RoomRole;var J=A(100);E.UserAdditionalDetailsType=J.UserAdditionalDetailsType},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(173);E.CTAlertModalManager=I.CTAlertModalManager;var R=A(174);E.CTAlertModal=R.CTAlertModal;var N=A(175);E.CTAvatarTile=N.CTAvatarTile;var H=A(59);E.CTButton=H.CTButton;var B=A(176);E.CTDebugger=B.CTDebugger;var z=A(177);E.CTFilePicker=z.CTFilePicker;var W=A(179);E.CTGrowingTextbox=W.CTGrowingTextbox;var G=A(180);E.CTIcon=G.CTIcon;var J=A(181);E.CTLoginForm=J.CTLoginForm,E.CTLoginFormMetadata=J.CTLoginFormMetadata;var K=A(182);E.CTMenu=K.CTMenu,E.MenuItem=K.MenuItem;var $=A(183);E.CTOnlineIndicator=$.CTOnlineIndicator,E.CTOnlineIndicatorMetadata=$.CTOnlineIndicatorMetadata;var X=A(184);E.CTSearchbox=X.CTSearchbox;var Q=A(185);E.CTSelectionList=Q.CTSelectionList;var Z=A(187);E.CTSlidePanel=Z.CTSlidePanel;var ee=A(188);E.CTTextbox=ee.CTTextbox;var te=A(189);E.CTUserAvatar=te.CTUserAvatar;var ne=A(190);E.CTUserDisplay=ne.CTUserDisplay;var ae=A(191);E.CTUserList=ae.CTUserList,E.CTUserListMetadata=ae.CTUserListMetadata;var oe=A(192);E.CTUserTile=oe.CTUserTile},function(L,E,A){'use strict';function X(Ae){const Ie=new E.safeMoment().startOf('day'),Re=new E.safeMoment(Ae).startOf('day');return Re.diff(Ie,'days')}function Q(Ae,Ie=null){const Re=X(Ae);if(0===Re||-1===Re){const we=0===Re?be.CommonI18nKeys.TODAY:be.CommonI18nKeys.YESTERDAY;return Ie&&Ie.translateI18nItem(be.CommonMetadata.getI18nItem(we))||we.toString()}return E.safeMoment(Ae).format('L')}function Z(Ae,Ie=!1){const Re=Ie?'LTS':'LT';return E.safeMoment(Ae).format(Re)}function oe(Ae){return Ae.map((Ie)=>{return Ie instanceof Array?oe(Ie):'object'==typeof Ie?Object.assign({},Ie):Ie})}function de(Ae){return null===Ae?null:void 0===Ae?void 0:'object'==typeof Ae?JSON.parse(JSON.stringify(Ae)):Ae}function le(Ae){return Ae&&'object'==typeof Ae&&!Array.isArray(Ae)}function _e(Ae,...Ie){if(!Ie.length)return Ae;const Re=Ie.shift();if(le(Ae)&&le(Re))for(const we in Re)le(Re[we])?(Ae[we]||Object.assign(Ae,{[we]:{}}),_e(Ae[we],Re[we])):Object.assign(Ae,{[we]:Re[we]});return _e(Ae,...Ie)}function ue(Ae){if('data'in Ae&&'object'==typeof Ae.data){const Ie=Object.keys(Ae.data).filter((Re)=>'$attributes'!==Re);if(0<Ie.length)return Ie[0]}return Se.BaseMessageType.XmppChat}function ce(Ae,Ie){const Re=de(Ae);return Ie||Re,Re.data&&'string'==typeof Re.data[Ie.toString()]&&(Re.data[Ie.toString()]=JSON.parse(Re.data[Ie.toString()])),Re}var ve=this&&this.__awaiter||function(Ae,Ie,Re,we){return new(Re||(Re=Promise))(function(ke,Ye){function Oe(xe){try{Pe(we.next(xe))}catch(He){Ye(He)}}function Ne(xe){try{Pe(we['throw'](xe))}catch(He){Ye(He)}}function Pe(xe){xe.done?ke(xe.value):new Re(function(He){He(xe.value)}).then(Oe,Ne)}Pe((we=we.apply(Ae,Ie||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const Le=A(205),Ee=A(195),Se=A(32),be=A(20);var De;(function(Ae){Ae[Ae.PREFIX_INITIAL_LAST=0]='PREFIX_INITIAL_LAST',Ae[Ae.PREFIX_FIRST_LAST=1]='PREFIX_FIRST_LAST'})(De=E.NameFormat||(E.NameFormat={})),E.safeMoment=Le,E.setLocale=function(Ae){E.safeMoment.locale(Ae)},E.isDesktop=function(){return'undefined'==typeof window.orientation},E.isMobile=function(){return'undefined'!=typeof window.orientation},E.isAndroid=function(){const Ae=window;if(Ae.device&&Ae.device.platform)return'android'===Ae.device.platform.toLowerCase();return!!Ae.cti&&'android'===Ae.cti.store.env.platform.name},E.normalizeLocalFilePaths=function(Ae){return window.Ionic&&window.Ionic.normalizeURL?window.Ionic.normalizeURL(Ae):Ae},E.padLeft=function(Ae,Ie,Re=' '){let we=Ae;const ke=Ie-Ae.length;return 0<ke&&(we=Array(ke+1).join(Re)+we),we},E.generateRandomSixString=function(){let Ae=0|46656*Math.random(),Ie=0|46656*Math.random();return Ae=('000'+Ae.toString(36)).slice(-3),Ie=('000'+Ie.toString(36)).slice(-3),Ae+Ie},E.tokenReplace=function(Ae,Ie){if(!Ae)return'';if(void 0===Ie||null===Ie)return Ae;if(-1===Ae.indexOf('${'))return Ae;const Re=(we,ke)=>{const Ye=ke.split('.');do;while(Ye.length&&(we=we[Ye.shift()]));return we};return Ae.replace(/\${([^{}]*)}/g,(we,ke)=>{const Ye=Re(Ie,ke);return'string'==typeof Ye||'number'==typeof Ye?Ye:we})},E.jidsMatch=function(Ae,Ie,Re=!1){return Re||(Ae=(Ae||'').toLowerCase(),Ie=(Ie||'').toLowerCase()),Ae===Ie},E.formatDate=function(Ae,Ie){return null===Ae||void 0===Ae?'':Le(Ae).format(Ie)},E.formatDateForTimeOrDate=function(Ae,Ie=!1,Re=!1,we=null){if(null===Ae||Ae===void 0)return'';const ke=X(Ae);if(0===ke){let Ye='';if(Ie){const Oe=be.CommonI18nKeys.TODAY;Ye=we&&we.translateI18nItem(be.CommonMetadata.getI18nItem(Oe))||Oe.toString()}return(Ie&&`${Ye}, `||'')+Z(Ae,Re)}return`${Q(Ae,we)} ${Z(Ae,Re)}`},E.daysFromNow=X,E.getFriendlyDate=Q,E.getFriendlyTime=Z,E.prettyDuration=function(Ae){if(1e3>Ae)return'< 1s';const Ie=Math.trunc(Ae/1e3);if(60>Ie)return`${Ie}s`;const Re=Math.trunc(Ae/1e3/60),we=Math.trunc((Ae-1e3*(60*Re))/1e3);if(60>Re)return`${Re}m`+(we&&` ${we}s`||'');const ke=Math.trunc(Ae/1e3/60/60),Ye=Math.trunc((Ae-1e3*(60*(60*ke)))/1e3/60);if(24>ke)return`${ke}h`+(Ye&&` ${Ye}m`||'');const Oe=Math.trunc(Ae/1e3/60/60/24);return`${Oe} days`},E.formatUserName=function(Ae,Ie){if(!Ae)return'';return Ie===De.PREFIX_INITIAL_LAST?`${Ae.prefix||''} ${(Ae.firstName||'').substr(0,1)} ${Ae.lastName||''}`.trim()||Ae.username||Ae.jid||'':Ie===De.PREFIX_FIRST_LAST?`${Ae.prefix||''} ${Ae.firstName||''} ${Ae.lastName||''}`.trim()||Ae.username||Ae.jid||'':void 0},E.sortUsersByName=function(Ae){return oe(Ae).sort((Ie,Re)=>{const we=Ie.lastName||'',ke=Re.lastName||'',Ye=we.localeCompare(ke);if(0!==Ye)return Ye;const Oe=Ie.firstName||'',Ne=Re.firstName||'';return Oe.localeCompare(Ne)})},E.enumFromString=function(Ae){return Ae||null},E.deepCloneArray=oe,E.uniqueArrayItems=function(Ae,Ie=(ke)=>ke){const Re=[],we=[];return Ae.forEach((ke)=>{const Ye=Ie(ke);Re.includes(Ye)||(Re.push(Ye),we.push(ke))}),we},E.groupArrayItemsByKey=function(Ae,Ie=(Re)=>Re){return Ae.reduce((Re,we)=>{const ke=Ie(we);let Ye=null;return Re[ke]?Ye=Re[ke]:(Ye=[],Re[ke]=Ye),Ye.push(we),Re},{})},E.deepCloneObject=de,E.isObject=le,E.mergeDeep=_e,E.getMessageType=ue,E.parseMessagePayload=ce,E.getMessageContentForDebug=function(Ae){const Ie=ue(Ae);if(null===Ie)return'';if(Ie===Se.BaseMessageType.XmppChat)return{[Ie]:{body:Ae.body,attachments:Ae.attachments}};if(Ae.data&&Ie in Ae.data){const Re=ce(Ae,Ie);return{[Ie]:Re.data[Ie]}}return''},E.getUsernameFromJid=function(Ae){return-1<Ae.indexOf('@')?Ae.substring(0,Ae.indexOf('@')):Ae},E.findRoomJidInMessage=function(Ae,Ie){const Re=['recipient_id','sender_id','jid'];for(let we=0;we<Re.length;we++){const ke=Re[we];if(Ae[ke]){const Ye=(Ae[ke]||'').toString().toLowerCase().split('/')[0];if(Ye.endsWith(Ie.toLowerCase()))return Ye}}return null},E.validateVCardObject=function(Ae){return Ae&&0<Object.keys(Ae).length},E.randomNumberBetween=function(Ae,Ie){return Math.floor(Math.random()*Ie)+Ae},E.sleep=function(Ae){return ve(this,void 0,void 0,function*(){return new Promise((Ie)=>{setTimeout(Ie,Ae)})})},E.getDiffs=function(Ae,Ie){if(Ae===void 0||Ie===void 0)return[];const Re=Ee.default(Ae,Ie);return Re.map((we)=>{const ke=we.path.reduce((He,je)=>{return'number'==typeof je?`${He}[${je}]`:`${He}.${je}`},'').replace('.','');if('_id'===ke||'_rev'===ke)return null;let Ye='',Oe=!1,Ne=!1,Pe=null,xe=null;return'A'===we.kind&&'N'===we.item.kind?(Ye=`ADDED [${we.index}]`,Oe=!0,xe=we.item.rhs):'A'===we.kind&&'D'===we.item.kind?(Ye=`DELETED [${we.index}]`,Ne=!0,xe=we.item.lhs):'N'===we.kind?(Ye='ADDED',Oe=!0,xe=we.rhs):'D'===we.kind?(Ye='DELETED',Ne=!0,xe=we.lhs):(Ye='EDITED',Pe=we.lhs,xe=we.rhs),{type:Ye,added:Oe,deleted:Ne,path:ke,lhs:Pe,rhs:xe}}).filter((we)=>null!==we)},E.getCSSVariable=function(Ae){const Ie=getComputedStyle(document.body).getPropertyValue(Ae);return Ie?Ie.trim():Ie}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);var R=A(54);E.ConversationEventArgs=R.ConversationEventArgs;var N=A(114);E.ConversationParticiantsEventArgs=N.ConversationParticiantsEventArgs;var H=A(113);E.ConversationParticiantRoleEventArgs=H.ConversationParticiantRoleEventArgs;var B=A(115);E.ForceQuitConversationEventArgs=B.ForceQuitConversationEventArgs;var z=A(53);E.ChatEntryEventArgs=z.ChatEntryEventArgs;var W=A(112);E.ChatNotificationEventArgs=W.ChatNotificationEventArgs;var G=A(111);E.AudioAttachmentDownloadComplete=G.AudioAttachmentDownloadComplete;var J=A(110);E.AttachmentDownloadComplete=J.AttachmentDownloadComplete;class K extends I.BaseEvents{}K.ConversationAdded='conversation-added',K.ConversationUpdated='conversation-updated',K.ConversationClosed='conversation-closed',K.ConversationRemoved='conversation-removed',K.ConversationDeleted='conversation-deleted',K.ConversationPurged='conversation-purged',K.ConversationParticipantsChanged='conversation-participants-changed',K.ForceQuitConversation='force-quit-conversation',K.CurrentConversationChanged='current-conversation-changed',K.ChatEntryReceived='chat-entry-received',K.ChatEntryUpdated='chat-entry-updated',K.ChatEntriesFetched='chat-entries-fetched',K.ThumbnailLoaded='thumbnail-loaded',K.ChatNotification='chat-notification',K.PriorityConversationNotification='priority-conversation-notification',K.PriorityConversationAcknowledged='priority-conversation-acknowledged',K.PriorityConversationAcknowledgedOnAnotherDevice='priority-conversation-acknowledged-on-another-device',K.MuteAlertToPlayOtherAudio='mute-alert-to-play-other-audio',K.ResumeAlertAfterPlayingAudio='resume-alert-after-playing-audio',K.AudioAttachmentDownloadComplete='audio-attachment-download-complete',K.RemotelyStartAudioPlayer='remotely-start-audio-player',K.RemotelyStopAudioPlayer='remotely-stop-audio-player',K.AudioRecordingStarted='audio-recording-started',K.AudioRecordingStopped='audio-recording-stopped',K.AttachmentDownloadComplete='attachment-download-complete',K.AutoReconnected='auto-reconnected',K.Mute='mute',K.MessageProcessorQueueEmpty='message-processor-queue-empty',E.ChatEvents=K},function(L,E,A){'use strict';function I(B){for(var z in B)E.hasOwnProperty(z)||(E[z]=B[z])}Object.defineProperty(E,'__esModule',{value:!0});var R=A(156);E.ChatMetaActivityType=R.ChatMetaActivityType;var N=A(157);E.ConversationType=N.ConversationType;var H=A(158);E.Icons=H.Icons,I(A(155)),I(A(159)),I(A(57))},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(B,z,W,G){return new(W||(W=Promise))(function(J,K){function $(Z){try{Q(G.next(Z))}catch(ee){K(ee)}}function X(Z){try{Q(G['throw'](Z))}catch(ee){K(ee)}}function Q(Z){Z.done?J(Z.value):new W(function(ee){ee(Z.value)}).then($,X)}Q((G=G.apply(B,z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(32),N=A(3);class H extends R.BaseHandler{constructor(B){super(B)}callHandleMessage(B){return I(this,void 0,void 0,function*(){this._ensureValidVersion(B),yield this.handleMessage(B),yield this.layer.updateLatestIdentifier(B)})}callHandleMessageUpdate(B){return I(this,void 0,void 0,function*(){this._ensureValidVersion(B),yield this.handleMessageUpdate(B),yield this.layer.updateLatestIdentifier(B)})}handleConversationNotFound(){}isMamMessage(B){return!0===B.fromMam}isInjectedMessage(B){return!0===B.injected}_ensureValidVersion(B){const z=N.getMessageType(B);if(z!==R.BaseMessageType.XmppChat){const W=B.data[z],G=W&&W.version||1;if(G>H.VERSION){const J=`Invalid message version ${W.version} for message "${z}" - expected ${H.VERSION}`;throw this.layer.logger.error(J,B),new Error(J)}}}}H.VERSION=1,E.BaseChatHandler=H},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const R=A(123);var N=A(117);E.ChatMessageType=N.ChatMessageType;const H=A(118),B=A(129),z=A(126),W=A(133),G=A(124),J=A(132),K=A(125),$=A(130),X=A(128),Q=A(127),Z=A(134),ee=A(136),te=A(137),ne=A(139),ae=A(142),oe=A(143),se=A(140),ie=A(135),de=A(144),le=A(148),_e=A(147),ue=A(145),ce=A(146),pe=A(121),he=A(138),ge=A(120),fe=A(131),ye=A(141),Te=A(122),Ce=A(119);E.get=function(Me){return[new ge.AutoReconnectedHandler(Me),new H.CommsConnectionHandler(Me),new Ce.AttachmentDownloadedHandler(Me),new Te.RaiseDeviceNotificationHandler(Me),new B.FetchConversationsHandler(Me),new z.CreateConversationHandler(Me),new W.UpdateConversationHandler(Me),new G.AddParticipantsHandler(Me),new J.RemoveParticipantsHandler(Me),new K.ChangeParticipantRoleHandler(Me),new $.LeaveConversationHandler(Me),new X.EndConversationHandler(Me),new fe.ReceivedConversationHandler(Me),new R.AcknowledgeConversationHandler(Me),new Q.DeleteDirectConversationHandler(Me),new Z.ChatMessageHandler(Me),new ee.ConversationStartedHandler(Me),new te.ConversationUpdatedHandler(Me),new ne.ParticipantAddedHandler(Me),new ae.ParticipantRemovedHandler(Me),new oe.ParticipantRoleChangedHandler(Me),new se.ParticipantLeftHandler(Me),new ie.ConversationEndedHandler(Me),new ye.ParticipantReceivedHandler(Me),new he.ParticipantAcknowledgedHandler(Me),new de.UserAddedHandler(Me),new le.UserRemovedHandler(Me),new _e.UserLeftHandler(Me),new ue.UserConversationEndedHandler(Me),new ce.UserDeleteDirectConversationHandler(Me),new pe.ChatEntryEventHandler(Me)]}},function(L,E,A){'use strict';function N(X,Q,Z){return X?Q:Z}function B(X){const Q=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;X=X.replace(Q,function(ee,te,ne,ae){return te+te+ne+ne+ae+ae});const Z=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(X);return Z?{r:parseInt(Z[1],16),g:parseInt(Z[2],16),b:parseInt(Z[3],16)}:null}Object.defineProperty(E,'__esModule',{value:!0});const J=A(204),K=document.createElement('div');let $=!1;E.debouncedRequestAnimationFrame=function(X){$||($=!0,requestAnimationFrame(()=>{$=!1,X()}))},E.renderIf=function(X,Q){return N(X,Q,null)},E.renderIfElse=N,E.buildStyles=function(X={}){return X},E.hexToRgbaString=function(X){const Q=B(X);return`rgba(${Q.r}, ${Q.g}, ${Q.b}, 1)`},E.decideTextColorFromBgColor=function(X){const Q=B(X);return 186<0.299*Q.r+0.587*Q.g+0.114*Q.b?'#000000':'#ffffff'},E.linkifyText=function(X){const Q=J(X,{target:'_system',attributes:{onclick:'window.open(this.href, \'_system\'); return false;'}});return Q.replace(/&amp;/g,'&')}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(23);E.BaseEventArgs=I.BaseEventArgs;var R=A(82);E.CommsEventArgs=R.CommsEventArgs;var N=A(85);E.UserActivityEventArgs=N.UserActivityEventArgs;var H=A(86);E.UserConnectionStatusEventArgs=H.UserConnectionStatusEventArgs;var B=A(84);E.RoomParticipantUpdateEventArgs=B.RoomParticipantUpdateEventArgs;var z=A(83);E.ConnectionStatusEventArgs=z.ConnectionStatusEventArgs;class W{}W._Request_RaiseAlert='request-raise-alert',W._Request_CloseAlert='request-close-alert',W._Request_UpdateUISuppression='request-update-ui-suppression',W._Request_RedrawAllUIs='_request-redraw-all-uis',W._Request_Logout='request-logout',W._Request_Component_Clear_Data='request-component-clear-data',W._Request_ThemeChange='request-theme-change',W.ConnectionStatusChange='connection-status-change',W.OtherUserConnectionStatusChange='other-user-connection-status-change',W.CurrentUserVCardUpdate='current-user-vcard-update',W.RoomParticipantUpdate='room-participant-update',W.UserActivity='user-activity',W.LoginResult='login-result',W.LogoutResult='logout-result',W.LoginFormResult='login-form-result',W.MoveTaskToBack='move-task-to-back',E.BaseEvents=W},function(L,E,A){'use strict';function R(ie,de,le,_e,ue,ce,pe,he,ge,fe,ye,Te,Ce,Me,ve,Le=[]){const Ee={id:ie,roomJid:le,type:de,participants:_e,hasUnread:!1,preview:null,createdTime:parseInt(pe),instigator:Ce,hideBefore:Me,config:ve?JSON.parse(ve):null};return de===ne.ConversationType.Named&&(Ee.subject=ue,Ee.description=ce,Ee.priority=he,Ee.expiryTTL=ge,Ee.activityTTL=fe,Ee.receivedList=ye||[],Ee.acknowledgements=Te||[],Ee.attachments=Le.map((Se)=>JSON.parse(Se))),Ee}function B(ie,de,le,_e='',ue='',ce){let pe=ae.deepCloneArray(de);return''!==_e&&'all'!==_e.toLowerCase()&&(pe=pe.filter((he)=>(he.config?he.config.name:he.type).toLowerCase()===_e.toLowerCase())),ue&&(pe=pe.filter((he)=>{const ge=[],fe=[];he.participants.forEach((Te)=>{if(!ae.jidsMatch(Te.jid,le)){const Ce=ie.get(Te.jid)||null;Ce&&(Ce.firstName&&ge.push(Ce.firstName.toLowerCase()),Ce.lastName&&ge.push(Ce.lastName.toLowerCase()))}}),he.type===ne.ConversationType.Named&&fe.push(he.subject.toLowerCase());const ye=ue.toLowerCase();return ge.some((Te)=>Te.startsWith(ye))||fe.some((Te)=>Te.includes(ye))})),pe.sort((he,ge)=>{const fe=new se.ConversationConfigReader(ce,he),ye=new se.ConversationConfigReader(ce,ge);if(W(he)&&!W(ge))return 1;if(W(ge)&&!W(he))return-1;if(fe.alert&&!ye.alert)return-1;if(ye.alert&&!fe.alert)return 1;if(fe.alert&&ye.alert){const Me=fe.sortOrder,ve=ye.sortOrder;if(Me!==ve)return ve-Me}const Te=he.preview&&he.preview.date||0,Ce=ge.preview&&ge.preview.date||0;return Math.sign(Ce-Te)}),pe}function W(ie){if(!ie||!ie.priority)return!1;if(!ie.expiryTTL||0===ie.expiryTTL)return!1;const de=ie.createdTime+1e3*ie.expiryTTL;return new Date().getTime()>de}function J(ie,de,le,_e=0){const ue=de.map((he)=>ie.get(he.jid)),ce=ae.sortUsersByName(ue);let pe=ce.map((he)=>ae.formatUserName(he,ae.NameFormat.PREFIX_INITIAL_LAST)).join(', ');return 0<_e&&(pe=pe.substr(0,_e)),pe}var ee=this&&this.__awaiter||function(ie,de,le,_e){return new(le||(le=Promise))(function(ue,ce){function pe(fe){try{ge(_e.next(fe))}catch(ye){ce(ye)}}function he(fe){try{ge(_e['throw'](fe))}catch(ye){ce(ye)}}function ge(fe){fe.done?ue(fe.value):new le(function(ye){ye(fe.value)}).then(pe,he)}ge((_e=_e.apply(ie,de||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const te=A(1),ne=A(5),ae=A(3),oe=A(13),se=A(14);E.buildConversationParticipants=function(ie,de,le){return[...(ie&&ie.map((_e)=>({jid:_e,role:te.ChatRole.Owner}))||[]),...(de&&de.map((_e)=>({jid:_e,role:te.ChatRole.Administrator}))||[]),...(le&&le.map((_e)=>({jid:_e,role:te.ChatRole.Participant}))||[])]},E.createConversation=R,E.createProvisionalDirectConversation=function(ie,de){return Object.assign({},R('provisional',ne.ConversationType.Direct,null,ie),{isProvisional:!0,config:de})},E.getParticipantHash=function(ie){return ie.map((de)=>de.jid.toLowerCase()).sort().reduce((de,le)=>de.concat(le),'')},E.prepareConversationsForList=B,E.sortConversationsIntoHash=function(ie,de,le,_e='',ue='',ce){const pe={};return B(ie,de,le,_e,ue,ce).forEach((he)=>{let ge=(he.config?he.config.name:he.type).toLowerCase();W(he)&&(ge=`${ge} (expired)`),pe[ge]?pe[ge].push(he):pe[ge]=[he]}),pe},E.isExpiredConversation=W,E.getConversationTitle=function(ie,de,le,_e){const ue=ie.type===ne.ConversationType.Named,ce=ie.participants.filter((pe)=>!ae.jidsMatch(pe.jid,le));return ue?ie.subject:0===ce.length?_e:J(de,ce,le,this._contentLimit)},E.generateConversationTitleFromParticipants=J,E.createChatMessage=function(ie,de,le,_e,ue,ce,pe,he=null,ge=null,fe=null){'string'==typeof de&&(de=parseInt(de,10));const ye={id:ie,type:te.ChatEntryType.Chat,date:de,mine:ae.jidsMatch(_e,le),from:_e,to:ue,body:ce};return pe&&pe.length&&(ye.attachments=pe),he&&he.length&&(ye.receivedBy=he),ge&&ge.length&&(ye.readBy=ge),fe&&(ye.placeholder=fe),ye},E.createMetaEntry=function(ie,de,le,_e,ue,ce,pe){return'string'==typeof de&&(de=parseInt(de,10)),{id:ie,type:te.ChatEntryType.Meta,date:de,to:le,instigator:ue,subject:ce,action:_e.toString(),data:pe}},E.convertToChatEntry=function(ie,de){return ee(this,void 0,void 0,function*(){const le=ae.getMessageType(ie),_e=ae.parseMessagePayload(ie,le),ue=de.getHandlerForMessage(_e);if('convert'in ue){const ce=_e.data&&_e.data[ue.messageKey]||null;return yield ue.convert(ie,ce)}return null})},E.getChatMessageTextForPreview=function(ie,de){if(ie.body&&0<ie.body.length){const le=100,_e=ie.body.length>le-3?'...':'';return ie.body.substr(0,le)+_e}return ie.attachments&&0<ie.attachments.length?de.translateI18nItem(oe.ChatCommonMetadata.getI18nItem(oe.ChatCommonI18nKeys.ATTATCHMENT_RECEIVED)):''},E.getChatMetaActivitySummaryText=function(ie,de,le,_e,ue=!1){let ce=null;const pe=ae.enumFromString(ie.action);if(pe===ne.ChatMetaActivityType.START?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.START_BY_YOU:oe.ChatCommonI18nKeys.START:pe===ne.ChatMetaActivityType.UPDATE?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.UPDATE_BY_YOU:oe.ChatCommonI18nKeys.UPDATE:pe===ne.ChatMetaActivityType.ADD?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.ADD_BY_YOU:ae.jidsMatch(ie.subject,le)?oe.ChatCommonI18nKeys.ADD_YOU:oe.ChatCommonI18nKeys.ADD:pe===ne.ChatMetaActivityType.REMOVE?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.KICK_BY_YOU:ae.jidsMatch(ie.subject,le)?oe.ChatCommonI18nKeys.KICK_YOU:oe.ChatCommonI18nKeys.KICK:pe===ne.ChatMetaActivityType.CHANGEROLE?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.CHANGE_ROLE_BY_YOU:ae.jidsMatch(ie.subject,le)?oe.ChatCommonI18nKeys.CHANGE_ROLE_YOU:oe.ChatCommonI18nKeys.CHANGE_ROLE:pe===ne.ChatMetaActivityType.LEFT?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.LEFT_YOU:oe.ChatCommonI18nKeys.LEFT:pe===ne.ChatMetaActivityType.END?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.END_YOU:oe.ChatCommonI18nKeys.END:pe===ne.ChatMetaActivityType.ACK?ce=ae.jidsMatch(ie.instigator,le)?oe.ChatCommonI18nKeys.ACK_BY_YOU:oe.ChatCommonI18nKeys.ACK:void 0,!ce)return null;const he=(ye)=>{const Te=de.get(ye);return Te?ae.formatUserName(Te,ae.NameFormat.PREFIX_INITIAL_LAST)||ye:ye},ge={date:ae.getFriendlyDate(ie.date,_e),time:ae.getFriendlyTime(ie.date),instigator:he(ie.instigator),subject:he(ie.subject),data:ie.data,value:ie.subject||'acknowledge'};if('change_role'===ie.action)switch(ie.data){case te.ChatRole.Participant.toString():ge.data=_e.translateI18nItem(oe.ChatCommonMetadata.getI18nItem(oe.ChatCommonI18nKeys.PARTICIPANT));break;case te.ChatRole.Administrator.toString():ge.data=_e.translateI18nItem(oe.ChatCommonMetadata.getI18nItem(oe.ChatCommonI18nKeys.ADMINISTRATOR));break;case te.ChatRole.Owner.toString():ge.data=_e.translateI18nItem(oe.ChatCommonMetadata.getI18nItem(oe.ChatCommonI18nKeys.OWNER));}let fe=_e.translateI18nItem(oe.ChatCommonMetadata.getI18nItem(ce));return Object.keys(ge).forEach((ye)=>{fe=fe.replace(`{{${ye}}}`,ge[ye])}),ue?fe.replace(/\*(.*?)\*/g,'<span class=\'b\'>$1</span>'):fe.replace(/\*(.*?)\*/g,'$1')}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(89);E.Metadata=I.Metadata;var R=A(88);E.I18nItem=R.I18nItem},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(102);E.CTCLComponent=I.CTCLComponent},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(11);var R;(function(N){N[N.FETCHING_OWN_DATA='Fetching personal data...']='FETCHING_OWN_DATA',N[N.UPDATING_CONTACTS='Updating contacts...']='UPDATING_CONTACTS',N[N.FETCHING_CONVERSATIONS='Fetching conversations...']='FETCHING_CONVERSATIONS',N[N.REMOVED_TITLE='Removed from conversation']='REMOVED_TITLE',N[N.REMOVED_MESSAGE='You were removed from the conversation "{{subject}}"']='REMOVED_MESSAGE',N[N.ENDED_TITLE='Conversation closed']='ENDED_TITLE',N[N.ENDED_MESSAGE='The conversation "{{subject}}" has been closed']='ENDED_MESSAGE',N[N.ERROR_SAVING_CHANGES_TITLE='Error saving changes']='ERROR_SAVING_CHANGES_TITLE',N[N.ERROR_SAVING_CHANGES_MESSAGE='There was an error saving changes']='ERROR_SAVING_CHANGES_MESSAGE',N[N.ERROR_CREATING_CONVERSATION_TITLE='Unable to create conversation']='ERROR_CREATING_CONVERSATION_TITLE',N[N.ERROR_UPDATING_CONVERSATION_TITLE='Unable to update details']='ERROR_UPDATING_CONVERSATION_TITLE',N[N.ERROR_ADDING_PARTICIPANTS_TITLE='Unable to add participants']='ERROR_ADDING_PARTICIPANTS_TITLE',N[N.ERROR_REMOVING_PARTICIPANTS_TITLE='Unable to remove participants']='ERROR_REMOVING_PARTICIPANTS_TITLE',N[N.ERROR_CHANGING_PARTICIPANT_ROLE_TITLE='Unable to change role']='ERROR_CHANGING_PARTICIPANT_ROLE_TITLE',N[N.ERROR_LEAVING_CONVERSATION_TITLE='Unable to leave conversation']='ERROR_LEAVING_CONVERSATION_TITLE',N[N.ERROR_ENDING_CONVERSATION_TITLE='Unable to end conversation']='ERROR_ENDING_CONVERSATION_TITLE',N[N.ERROR_RECEIVING_CONVERSATION='Unable to mark conversation as received']='ERROR_RECEIVING_CONVERSATION',N[N.ERROR_ACKNOWLEDGING_CONVERSATION='Unable to acknowledge conversation']='ERROR_ACKNOWLEDGING_CONVERSATION',N[N.ERROR_DELETING_DIRECT_CONVERSATION='Unable to delete this conversation']='ERROR_DELETING_DIRECT_CONVERSATION',N[N.YOU_HAVE_NEW_NOTIFICATIONS='You have new notifications']='YOU_HAVE_NEW_NOTIFICATIONS',N[N.ATTATCHMENT_RECEIVED='Image']='ATTATCHMENT_RECEIVED',N[N.START='Started *{{date}}* at *{{time}}* by *{{instigator}}*']='START',N[N.START_BY_YOU='Started *{{date}}* at *{{time}}* by *you*']='START_BY_YOU',N[N.UPDATE='*{{instigator}}* updated the conversation details']='UPDATE',N[N.UPDATE_BY_YOU='*You* updated the conversation details']='UPDATE_BY_YOU',N[N.ADD='*{{subject}}* was added by *{{instigator}}*']='ADD',N[N.ADD_YOU='*You* were added by *{{instigator}}*']='ADD_YOU',N[N.ADD_BY_YOU='*{{subject}}* was added by *you*']='ADD_BY_YOU',N[N.ACK='*{{instigator}}* responded with: *{{value}}* *{{date}}* at *{{time}}*']='ACK',N[N.ACK_BY_YOU='You responded with: *{{value}}* *{{date}}* at *{{time}}*']='ACK_BY_YOU',N[N.CHANGE_ROLE='*{{subject}}* was made *{{data}}* by *{{instigator}}*']='CHANGE_ROLE',N[N.CHANGE_ROLE_YOU='*You* were made *{{data}}* by *{{instigator}}*']='CHANGE_ROLE_YOU',N[N.CHANGE_ROLE_BY_YOU='*{{subject}}* was made *{{data}}* by *you*']='CHANGE_ROLE_BY_YOU',N[N.KICK='*{{subject}}* was removed by *{{instigator}}*']='KICK',N[N.KICK_YOU='*You* were removed by *{{instigator}}*']='KICK_YOU',N[N.KICK_BY_YOU='*{{subject}}* was removed by *you*']='KICK_BY_YOU',N[N.LEFT='*{{instigator}}* left the conversation']='LEFT',N[N.LEFT_YOU='*You* left the conversation']='LEFT_YOU',N[N.END='*{{instigator}}* ended the conversation']='END',N[N.END_YOU='*You* ended the conversation']='END_YOU',N[N.PARTICIPANT='participant']='PARTICIPANT',N[N.ADMINISTRATOR='administrator']='ADMINISTRATOR',N[N.OWNER='owner']='OWNER'})(R=E.ChatCommonI18nKeys||(E.ChatCommonI18nKeys={})),E.ChatCommonMetadata=new I.Metadata('ChatCommon',R)},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(5),R=A(3);class N{constructor(H,B,z){this._layer=H,this._conversation=B,this._config=z||this._loadConfiguration()}_loadConfiguration(){let H='';if(this._conversation&&this._conversation.config)return this._conversation.config;if(this._conversation){H=this._conversation.type;const B=this._layer.config.conversationTypes.find((z)=>z.id===this._conversation.type);if(B)return B}switch(H){case'named':return I.namedConversationConfig;case'direct':default:return I.directConversationConfig;}}_ensureConfigSet(){if(!this._config)throw new Error('Configuration has not been set.')}constructConfigurationToSend(H,B=!0){const z=R.deepCloneObject(this._config);return H&&z.behaviour.alert&&(z.behaviour.alert.alertResponseOptions=[H]),z.behaviour.chatAvailable=B,z}get id(){return this._config.id||null}get sortOrder(){return this._config.sortOrder||999}get name(){return this._config.name||'Direct'}get shortDescription(){return this._config.shortDescription||null}get longDescription(){return this._config.longDescription||null}get descriptionAtTop(){return this._config.descriptionAtTop||null}get colorCode(){return this._config.colorCode||null}get displayGroup(){return this._config.displayGroup||null}get defaultConversationExpiryTTL(){return void 0===this._config.defaultConversationExpiryTTL?this._layer.config.behaviour.defaultConversationExpiryTTL||3600:this._config.defaultConversationExpiryTTL}get defaultConversationActivityTTL(){return void 0===this._config.defaultConversationActivityTTL?this._layer.config.behaviour.defaultConversationActivityTTL||604800:this._config.defaultConversationActivityTTL}get maxConversationParticipants(){return this._config.maxConversationParticipants||this._layer.config.behaviour.maxConversationParticipants||20}get warnWhenNoContacts(){return void 0!==this._config.behaviour.warnWhenNoContacts&&this._config.behaviour.warnWhenNoContacts}get errorWhenNoContacts(){return void 0!==this._config.behaviour.errorWhenNoContacts&&this._config.behaviour.errorWhenNoContacts}get chatAvailable(){return!(void 0!==this._config.behaviour.chatAvailable)||this._config.behaviour.chatAvailable}get namedSettings(){return this._config.behaviour.namedSettings&&0<Object.keys(this._config.behaviour.namedSettings).length||null}get usePagerUI(){return this._config.behaviour.usePagerUI||!1}get subjectRequired(){return this._config.behaviour.namedSettings?void 0===this._config.behaviour.namedSettings.subjectRequired||this._config.behaviour.namedSettings.subjectRequired:null}get subjectFieldLabel(){return this._config.behaviour.namedSettings?this._config.behaviour.namedSettings.subjectFieldLabel||'Subject':'Subject'}get maxSubjectLength(){return this._config.behaviour.namedSettings?this._config.behaviour.namedSettings.maxSubjectLength||this._layer.config.behaviour.maxSubjectLength:this._layer.config.behaviour.maxSubjectLength}get descriptionRequired(){return!!this._config.behaviour.namedSettings&&(this._config.behaviour.namedSettings.descriptionRequired||!1)}get descriptionFieldLabel(){return this._config.behaviour.namedSettings?this._config.behaviour.namedSettings.descriptionFieldLabel||`Description${this.descriptionRequired?'':' (optional)'}`:'Description (optional)'}get maxDescriptionLength(){return this._config.behaviour.namedSettings?this._config.behaviour.namedSettings.maxDescriptionLength||this._layer.config.behaviour.maxDescriptionLength:this._layer.config.behaviour.maxDescriptionLength}get participantCanLeave(){return!(void 0!==this._config.behaviour.participantCanLeave)||this._config.behaviour.participantCanLeave}get participantCanDelete(){return!(void 0!==this._config.behaviour.participantCanDelete)||this._config.behaviour.participantCanDelete}get ownerCanEditAfterSend(){return!(void 0!==this._config.behaviour.ownerCanEditAfterSend)||this._config.behaviour.ownerCanEditAfterSend}get ownerCanAddAdditionalContacts(){return!(void 0!==this._config.behaviour.ownerCanAddAdditionalContacts)||this._config.behaviour.ownerCanAddAdditionalContacts}get ownerCanCloseEarly(){return!(void 0!==this._config.behaviour.ownerCanCloseEarly)||this._config.behaviour.ownerCanCloseEarly}get canSendAttachmentsWithinConversation(){return!(void 0!==this._config.behaviour.canSendAttachmentsWithinConversation)||this._config.behaviour.canSendAttachmentsWithinConversation}get autoRemoveOnClose(){return!(void 0!==this._config.behaviour.autoRemoveOnClose)||this._config.behaviour.autoRemoveOnClose}get priorityPush(){return this._config.behaviour.priorityPush?this._config.behaviour.priorityPush:null}get alert(){return this._config.behaviour.alert&&0<Object.keys(this._config.behaviour.alert).length||null}get autoAlert(){return this._config.behaviour.alert?void 0===this._config.behaviour.alert.autoAlert||this._config.behaviour.alert.autoAlert:null}get suppressAlertModalWarning(){return!!this._config.behaviour.alert&&(this._config.behaviour.alert.suppressAlertModalWarning||!1)}get alertVolume(){return this._config.behaviour.alert?void 0===this._config.behaviour.alert.alertVolume?100:this._config.behaviour.alert.alertVolume:100}get alertSoundFilename(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.alertSoundFilename?this._config.behaviour.alert.alertSoundFilename:'Clinical_Messaging_Notification.m4a'}get alertSoundLoops(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.alertSoundLoops?this._config.behaviour.alert.alertSoundLoops:1}get alertAudioStream(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.alertAudioStream?this._config.behaviour.alert.alertAudioStream:'notification'}get vibrate(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.vibrate?this._config.behaviour.alert.vibrate:!0}get forceVibrate(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.forceVibrate?this._config.behaviour.alert.forceVibrate:!0}get vibrateDuration(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.vibrateDuration?this._config.behaviour.alert.vibrateDuration:300}get automaticallyPlayAudioOnDownload(){return this._config.behaviour.alert&&void 0!==this._config.behaviour.alert.automaticallyPlayAudioOnDownload&&this._config.behaviour.alert.automaticallyPlayAudioOnDownload}get allowMute(){return this._config.behaviour.alert?this._config.behaviour.alert.allowMute||!1:null}get snoozeDuration(){return this._config.behaviour.alert?this._config.behaviour.alert.snoozeDuration||60:null}get alertResponseOptions(){return this.alert&&this._config.behaviour.alert.alertResponseOptions?this._config.behaviour.alert.alertResponseOptions:[]}get alertResponseOptionTemplates(){return this.alert&&this.alertResponseOptions.length?this.alertResponseOptions.reduce((H,B)=>H=[...H,...B.options],[]):[]}get attachments(){return this._config.behaviour&&this._config.behaviour.attachments&&0<Object.keys(this._config.behaviour.attachments).length||null}get image(){return this.attachments?this._config.behaviour.attachments.image:null}get allowOpenInFullScreen(){return this.attachments&&this.image&&0<Object.keys(this._config.behaviour.attachments.image).length?void 0===this._config.behaviour.attachments.image.allowOpenInFullScreen||this._config.behaviour.attachments.image.allowOpenInFullScreen:!0}get audio(){return this.attachments?this._config.behaviour.attachments.audio:null}get attachPreRecordedFile(){return this.attachments?this.audio&&void 0!==this.audio.attachPreRecordedFile?this.audio.attachPreRecordedFile:!0:null}get attachLiveRecordedAudio(){return this.attachments?this.audio&&void 0!==this.audio.attachLiveRecordedAudio?this.audio.attachLiveRecordedAudio:!0:null}get video(){return this.attachments?this._config.behaviour.attachments.video:null}get autoPlay(){return this.attachments&&this.audio?this.audio.autoPlay||!1:null}get limitPlaybackToEarpiece(){return this.attachments&&this.audio?this.audio.limitPlaybackToEarpiece||!1:null}get shouldOpenConversationAfterResponded(){return!this._config.behaviour.alert||void 0===this._config.behaviour.alert.shouldOpenConversationAfterResponded||this._config.behaviour.alert.shouldOpenConversationAfterResponded}get participantAlertResponsesVisible(){return!this._config.behaviour.alert||void 0===this._config.behaviour.alert.participantAlertResponsesVisible||this._config.behaviour.alert.participantAlertResponsesVisible}get autoIncludeMembersInRoles(){return this._config.behaviour.alert?this._config.behaviour.alert.autoIncludeMembersInRoles||[]:[]}}E.ConversationConfigReader=N},function(L,E,A){'use strict';function R(H,B){window.translationData||(window.translationData=new Map),window.translationData.set(H,B)}Object.defineProperty(E,'__esModule',{value:!0});const N=A(11);E.component=function(H){return(B)=>{const z=customElements.get(H.tag);return z||customElements.define(H.tag,B),B.prototype.styles=H.styles,H.i18nKeys&&(B.prototype._metadata=new N.Metadata(B.name,H.i18nKeys),R(B.name,B.prototype._metadata)),class extends B{static get is(){return H.tag}static set styles(W){this.styles=W}static set _metadata(W){this._metadata=W}}}}},function(L,E){'use strict';function R(N,H=null){const B={};return N&&(B.$attributes=N),Object.assign({},B,H||{})}Object.defineProperty(E,'__esModule',{value:!0}),E.createIq=function(N,H,B){return{[N]:R({xmlns:'urn:commontime:infinity:muc'},B)}},E.createIqNode=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(3);var R;(function(H){H[H.Connectivity='connectivity']='Connectivity',H[H.MessageSent='message-sent']='MessageSent',H[H.MessageReceived='message-received']='MessageReceived',H[H.MessageUpdated='message-updated']='MessageUpdated',H[H.MessageChatMarker='message-chat-marker']='MessageChatMarker',H[H.ProcessingReceived='processing-received']='ProcessingReceived',H[H.ProcessingUpdated='processing-updated']='ProcessingUpdated',H[H.ProcessingChatMarker='processing-chat-marker']='ProcessingChatMarker',H[H.Status='status']='Status',H[H.Presence='presence']='Presence',H[H.Participation='participation']='Participation',H[H.Mam='mam']='Mam',H[H.CleanUp='clean-up']='CleanUp',H[H.XmppClient='xmpp-client']='XmppClient',H[H.Events='events']='Events',H[H.DataStorage='data-storage']='DataStorage',H[H.Other='other']='Other'})(R=E.LoggerTypes||(E.LoggerTypes={}));E.Logger=class{constructor(H=null){this._types=H||[],this._initialTypes=H}log(H,...B){this.shouldLog(H)&&console.log.call(null,...B)}info(H,...B){this.shouldLog(H)&&console.info.call(null,...B)}debug(H,...B){this.shouldLog(H)&&console.debug.call(null,...B)}error(...H){console.error.call(null,...H)}group(H,B=!1,z='',...W){this.shouldLog(H)&&(B?console.group.call(null,z,...W):console.groupCollapsed.call(null,z,...W))}groupEnd(H){this.shouldLog(H)&&console.groupEnd.call(null)}getTypes(){return this._types}hasInitialTypes(){return this._initialTypes&&0<this._initialTypes.length}getTypesAsEnumValues(){return this._types.map((H)=>I.enumFromString(H))}setTypes(H){this._types=H||[]}resetTypes(){this._types=this._initialTypes}shouldLog(H){return this._types&&this._types.length&&(!!this._types.includes('_all_')||this._types.includes(H.toString()))}}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const R=A(11);var N;(function(H){H[H.E_IQ_TYPE_INVALID='Unknown request']='E_IQ_TYPE_INVALID',H[H.E_IQ_SUB_EL_MISSING='Request has missing data']='E_IQ_SUB_EL_MISSING',H[H.E_IQ_SUB_EL_UNKNOWN='Request has unknown data']='E_IQ_SUB_EL_UNKNOWN',H[H.E_CONV_NOT_FOUND='The conversation could not be found']='E_CONV_NOT_FOUND',H[H.E_CONV_TYPE='Unable to perform operation on this type of conversation']='E_CONV_TYPE',H[H.E_CONV_ROLE='You are not permitted to perform that operation']='E_CONV_ROLE',H[H.E_CREATION_FAILED='Could not create conversation']='E_CREATION_FAILED',H[H.E_CREATOR_NOT_PARTICIPANT='Could not create conversation - the creator was not included as a participant']='E_CREATOR_NOT_PARTICIPANT',H[H.E_PARTICIPANTS_NOT_MEMBERS='Could not create conversation - all participants must be in the participant role']='E_PARTICIPANTS_NOT_MEMBERS',H[H.E_CONV_SELF='You are not permitted to change your own role']='E_CONV_SELF',H[H.E_CONV_NO_OWNER='You cannot leave this conversation as you are the only owner']='E_CONV_NO_OWNER',H[H.E_NO_CONNECTION_DELETING_DIRECT='You cannot delete a direct conversation when you are offline.']='E_NO_CONNECTION_DELETING_DIRECT',H[H.E_UNKNOWN='An unknown error occurred']='E_UNKNOWN'})(N=E.ChatErrorsI18nKeys||(E.ChatErrorsI18nKeys={})),E.ChatErrorsMetadata=new R.Metadata('ChatErrors',N),E.getErrorMessage=function(H,B){const z=N[H]||N.E_UNKNOWN;return B.translateI18nItem(E.ChatErrorsMetadata.getI18nItem(z))}},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(11),H=A(1),B=A(12),z=A(5),W=A(2),G=A(0),J=A(8);var K;(function(Q){Q[Q.ONLINE='Online']='ONLINE',Q[Q.OFFLINE='Offline']='OFFLINE',Q[Q.RECONNECTING='Reconnecting']='RECONNECTING'})(K||(K={}));class ${static _create(){return new N.Metadata(X,K)}static get instance(){return this._instance||(this._instance=this._create())}}$._instance=null,E.CTCLHeaderMetadata=$;class X extends B.CTCLComponent{constructor(){super(),this.setMetadata($.instance)}static get is(){return'ct-cl-header'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){this.setupConnectionStatusListener(()=>{clearTimeout(this._reconnectTimeout)})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;font-size:1em}:host .header{position:relative;display:flex;align-items:center;height:var(--header-height, 75px);padding:0 20px;background:var(--header-bg, #22b1c8);color:var(--header-text, #fff)}:host .header .left-action{flex:0 0 20px}:host .header .details{flex:1 1 auto;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;text-align:center;transition:padding 0.3s ease-out;overflow:hidden}:host .header .details .heading{font-size:1.5em}:host .header .details .sub-heading{font-weight:100}:host .header .details .status{position:absolute;bottom:0;left:50%;transform:translate(-50%, 100%);display:flex;justify-content:center;align-items:center;font-size:.833em;padding:3px 10px;border:1px solid rgba(255,255,255,0.5);border-bottom:0;border-radius:10px 10px 0 0;will-change:transform;transition:transform 0.3s ease-out}:host .header .details .status .icon{margin:0 0 0 5px}:host .header .right-action{flex:0 0 20px}:host .header.offline .details{padding:0 0 20px 0}:host .header.offline .details .status{transform:translate(-50%, 0);cursor:pointer}:host .header.offline .details .status:hover{background:rgba(255,255,255,0.1)}:host .header.disconnecting .details .status,:host .header.connecting .details .status{opacity:0.5;cursor:default}
        `}generateComponentMarkup(){const Q=['header',...this._getConnectionStatusCssClasses()],Z=J.buildStyles({backgroundColor:this.backgroundColor});return window.__CTRender('div',{class:Q.join(' '),style:Z},window.__CTRender('div',{class:'left-action'},window.__CTRender('slot',{name:'left-action'})),window.__CTRender('div',{class:'details'},window.__CTRender('div',{class:'heading'},window.__CTRender('slot',{name:'heading'})),window.__CTRender('div',{class:'sub-heading'},window.__CTRender('slot',{name:'sub-heading'})),window.__CTRender('div',{class:'status',onClick:this._onClickReconnectNow.bind(this)},window.__CTRender('div',{class:'label'},this._getConnectionStatusLabel()),window.__CTRender(W.CTIcon,{class:'icon',width:'10',height:'10',icon:z.Icons.UI.Reconnect,spin:this.connectionStatus===H.ConnectionStatus.Connecting}))),window.__CTRender('div',{class:'right-action'},window.__CTRender('slot',{name:'right-action'})))}_onClickReconnectNow(){this.connectionStatus===H.ConnectionStatus.Disconnected&&(this.connectionStatus=H.ConnectionStatus.Connecting,clearTimeout(this._reconnectTimeout),this._reconnectTimeout=setTimeout(()=>{this.layer.attemptReconnect()},500))}_getConnectionStatusCssClasses(){switch(this.connectionStatus){case H.ConnectionStatus.Disconnected:return['offline disconnected'];case H.ConnectionStatus.Disconnecting:return['offline disconnecting'];case H.ConnectionStatus.Connecting:return['offline connecting'];case H.ConnectionStatus.Connected:return['online connected'];}}_getConnectionStatusLabel(){switch(this.connectionStatus){case H.ConnectionStatus.Connected:return this.translateI18nItem(K.ONLINE);case H.ConnectionStatus.Connecting:case H.ConnectionStatus.Disconnecting:case H.ConnectionStatus.Disconnected:return this.translateI18nItem(K.OFFLINE);}}}I([G.prop({type:String,attribute:!0,default:null})],X.prototype,'backgroundColor',void 0),E.CTCLHeader=X,X.register()},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(11);var R;(function(N){N[N.TODAY='Today']='TODAY',N[N.YESTERDAY='Yesterday']='YESTERDAY',N[N.ARE_YOU_SURE='Are you sure?']='ARE_YOU_SURE',N[N.PLEASE_WAIT='Please wait...']='PLEASE_WAIT',N[N.AUTHENTICATING='Authenticating...']='AUTHENTICATING',N[N.SYNCING='Syncing with server...']='SYNCING',N[N.LOGIN_ERROR_TITLE='Error logging in']='LOGIN_ERROR_TITLE',N[N.LOGIN_ERROR_GENERIC='Check your connectivity and credentials and try again.']='LOGIN_ERROR_GENERIC',N[N.USER_NOT_FOUND='User {{username}} was not found.']='USER_NOT_FOUND',N[N.FETCH_ERROR='Error fetching data']='FETCH_ERROR',N[N.LOGIN_TIMEOUT='Logging in took longer than expected. Please check your connectivity and log in again.']='LOGIN_TIMEOUT',N[N.LOGOUT_ERROR_TITLE='Error logging out']='LOGOUT_ERROR_TITLE',N[N.UPLOAD_ERROR_TITLE='Upload Error']='UPLOAD_ERROR_TITLE',N[N.UPLOAD_ERROR_DESCRIPTION='Uploading your file failed. Please try again or try a different file.']='UPLOAD_ERROR_DESCRIPTION',N[N.ERROR='Error']='ERROR'})(R=E.CommonI18nKeys||(E.CommonI18nKeys={})),E.CommonMetadata=new I.Metadata('Common',R)},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(62),R=A(42),N=A(43),H=A(30),B=A(22),z=A(73),W=A(72),G=A(31),J=A(74);if(!window.Promise)throw new Error('ct-xmpp-client.js has a dependency on Promise, did you forget to include the polyfill?');if(!window.PouchDB)throw new Error('ct-xmpp-client.js has a dependency on PouchDB, please ensure PouchDB is included before ct-xmpp-client.js');class K{constructor($,X,Q){if(this._userDirectory=null,this._includeStanzaFilters=[],this._excludeStanzaFilters=[],this._pushNodeName=null,this._lastStatusId=null,this._pingInterval=null,this._pingTimeout=null,this._alreadyReLoggingIn=!1,this._reLoginTimeout=null,this._reLoginBackOff=3e3,this._forcedLogout=!1,this._sendTimeouts={},this._sendStanzaPromises={},this._destroyingDbs=!1,this._joinedRooms={},this._saveDebounce={},this._botCommandTimeouts={},this._botCommandPromises={},this._initialised=!1,!$)throw new Error('An instance ID must be provided.');this._instanceId=$;let Z=localStorage.getItem(`${this._instanceId}_last_archive_id`);if(null===Z&&(Z='0'),this._lastArchiveId=Z,!X)throw new Error('XMPP server hostname must be provided.');this._serverTimeDiff=null,this._eventListeners={},this._options=K._merge({sendTimeout:3e5,debug:!1,perfLogging:!1,mucHost:null,uploadHost:null,echoHost:null,authAttachments:!1,mam:{auto:!0,defaultTimeLimit:2.628e9,pageSize:250},push:{androidEnabled:!1,packageId:'',senderId:'',iosEnabled:!1},enablePing:!0,pingInterval:5e3,pingTimeout:1e4,connectTimeout:7e3,autoLogin:!1,autoReconnect:!0,autoMarkMessages:!0,encryption:!1,fileEncryption:!1,autoDownloadAttachmentTime:-1,autoPurgeOldMessagesAge:-1,autoPurgeOldMessagesCount:-1,streamResumption:!0,useEncodedJidAsResource:!1,adSpn:null,adSecurityPackage:null,adTokenPlaceholder:'[[AD_PASSWORD_TOKEN]]',updateUserDirectoryOnLogin:!1,enableMessageCarbons:!1,maxReconnectBackoff:3e5,stropheLogging:!1,forceIndexedDb:!1,bringToForegroundOnVoipPush:!0,updateUserDirectoryInterval:1800000,useConnectionEvents:!0,autoResumeTimers:!0,maxStreamResumptionTime:null,alwaysSendPresence:!1,updateRosterOnLogin:!0},Q),this._endpoint=X,this._connection=null,this.connected=!1,this.loggedIn=!1,this._reLoggingIn=!1,this._loggingOut=!1,this._jid=null,this.resource=null,this._bareJid=null,this.username=null,this._userDirectory=new W.UsersDirectory(this._instanceId,this._options.debug),!0===this._options.stropheLogging&&(R.default.Strophe.log=(ee,te)=>{this._log(`[${ee}]: ${te}`)}),I.Promise.all([this._getInstallId(),this._initDbs()]).then(()=>{if(this._initialised=!0,this._log('XMPP client successfully initialised.'),this._dispatchEvent(K.EVENT_TYPES.INITIALISED,null),!0===this._options.autoLogin){const ee=[this._getCacheItem('user_jid'),this._getCacheItem('user_password')];I.Promise.all(ee).then((te)=>{const ne=te[0],ae=te[1];void 0!==ne&&void 0!==ae&&this._reLogin()}).catch((te)=>{this._onError('Unable to get jid/pw: '+te)})}}).catch((ee)=>{throw new Error(ee)}),this._options.useConnectionEvents&&(document.addEventListener('offline',()=>{this._onOffline()},!1),document.addEventListener('online',()=>{this._onOnline()},!1))}set sendTimeout($){$===this._options.sendTimeout||(this._options.sendTimeout=$)}get status(){return this._isMethodReady(!0),this._getCacheItem('connection_status')}get bareJid(){return this._bareJid}get mucHost(){return this._options.mucHost}addIncludeStanzaFilter($){this._includeStanzaFilters.push($)}addExcludeStanzaFilter($){this._excludeStanzaFilters.push($)}_onOffline(){this._connection._doDisconnect()}_onOnline(){this.connected||this.reLoginNow()}_getInstallId(){const $='install_id';return new I.Promise((X,Q)=>{const Z=localStorage.getItem(`${this._instanceId}_install_id`);if(null===Z){let ee=this;if('ios'===N.getPlatformName()){const te=B.getSource('securesettings');te.get((ne)=>{if('string'==typeof ne)ee._installId=ne,localStorage.setItem(`${ee._instanceId}_install_id`,ee._installId),X();else{const ae=G.generateGuid();te.set(()=>{ee._installId=ae,localStorage.setItem(`${ee._instanceId}_install_id`,ee._installId),X()},(oe)=>{Q(oe)},$,ae)}},(ne)=>{ee._log('Secure settings error:',ne),Q(ne)},$)}else if('android'===N.getPlatformName()){const te=B.getSource('device');this._installId=te.uuid,localStorage.setItem(`${this._instanceId}_install_id`,this._installId),X()}else{const te=G.generateGuid();ee._installId=te,localStorage.setItem(`${this._instanceId}_install_id`,this._installId),X()}}else return this._installId=Z,X()})}_initDbs(){return new I.Promise(($,X)=>{const Q={auto_compaction:!1,revs_limit:1};this._msgDb=new window.PouchDB(`${this._instanceId}_messages`,Q),this._contactDb=new window.PouchDB(`${this._instanceId}_contacts`,Q),this._cacheDb=new window.PouchDB(`${this._instanceId}_cache`,Q),this._cache={},this._roomDb=new window.PouchDB(`${this._instanceId}_rooms`,Q),this._participantDb=new window.PouchDB(`${this._instanceId}_participants`,Q);const Z=[];Z.push(this._msgDb.compact()),Z.push(this._contactDb.compact()),Z.push(this._cacheDb.compact()),Z.push(this._roomDb.compact()),Z.push(this._participantDb.compact()),I.Promise.all(Z).then((ee)=>{this._log(`Compaction results: ${ee}`),!0===this._options.encryption?G.getEncryptionKey(this._instanceId).then((te)=>{this._cacheDb.crypto({key:te}),this._msgDb.crypto({key:te}),this._contactDb.crypto({key:te}),this._roomDb.crypto({key:te}),this._participantDb.crypto({key:te}),$()}).catch(X):(console.warn('Encryption has not been enabled! If you have auto-reconnect, auto-login or authenticated attachments enabled your password will be stored unencrypted! \uD83D\uDE31'),$())}).catch((ee)=>{this._log(`Compaction errors: ${ee}`),X(ee)})})}_setStatus($,X=!0,Q=null){return new I.Promise((Z,ee)=>{if(this._lastStatusId===$)Z();else{const te={id:$,label:null,reason:Q};$===R.default.Strophe.Status.CONNECTING?te.label='Connecting':$===R.default.Strophe.Status.CONNFAIL?te.label='Connection failed':$===R.default.Strophe.Status.DISCONNECTING?te.label='Disconnecting':$===R.default.Strophe.Status.DISCONNECTED?te.label='Disconnected':$===R.default.Strophe.Status.CONNECTED?te.label='Connected':$===R.default.Strophe.Status.AUTHFAIL?te.label='Authentication failed.':$===R.default.Strophe.Status.ERROR?te.label=Q||'An unknown error occurred.':void 0;this._lastStatusId!==te.id&&!1!==X&&this._dispatchEvent(K.EVENT_TYPES.STATUS,te),this._lastStatusId=te.id,this._setCacheItem('connection_status',te).then(Z).catch(ee)}})}static _isReasonToReconnect($){if(!$||'string'!=typeof $)return!0;let X=!0;switch($.toLowerCase()){case'kicked by administrator':case'replaced by new connection':case'conflict':X=!1;}return X}static _translateCondition($){if(!$)return null;switch($.toLowerCase()){case'conflict':return'You already have an active session. Please log out of any previous sessions or wait for the previous login attempt to timeout.';case'system-shutdown':return'Remote server was shut down.';case'connection-timeout':return'The connection to the server timed out.';case'socket closed, probably due to no network connectivity.':case'invalid username or password':case'kicked by administrator':return $;default:return'Connection closed unexpectedly.';}}_connect($,X){return new I.Promise((Q,Z)=>{this._connection&&this._connection.connected&&this._connection._doDisconnect(),this._connection=new R.default.Strophe.Connection(this._endpoint,{instance_id:this._instanceId}),this._connection.addHandler(this._onStanza.bind(this),null,'message'),this._connection.addHandler((ne)=>{return this._onPresence(K.xmlToJson(ne))},null,'presence'),this._connection.addHandler((ne)=>{return this._onIq(K.xmlToJson(ne))},null,'iq');const ee=setTimeout(()=>{this._connection._doDisconnect(),Z('Connection took more than 5 seconds to be established, connection closed.')},this._options.connectTimeout),te=!0===this._options.streamResumption?this._getCacheItem('stream_management_id'):I.Promise.resolve();te.then((ne)=>{this._connection.streamManagement.prevId=ne;let ae=!1;this._forcedLogout&&(!0===this._options.useEncodedJidAsResource&&(this._connection.override=!0),this._forcedLogout=!1),this._connection.connect($,X,(oe,se)=>{if(!0!==this._reLoggingIn&&this._setStatus(oe,!0,se),!0==ae)return!1;switch(oe){case R.default.Strophe.Status.ERROR:case R.default.Strophe.Status.AUTHFAIL:case R.default.Strophe.Status.CONNFAIL:case R.default.Strophe.Status.DISCONNECTED:const ie=K._translateCondition(se);let de='Connection Disconnected';oe===R.default.Strophe.Status.ERROR&&(de='Connection Error',this._onError(de,ie)),oe===R.default.Strophe.Status.AUTHFAIL&&(de='Authentication Failed'),oe===R.default.Strophe.Status.CONNFAIL&&(de='Connection Failed'),null!==ie&&(de+=': '+ie);const le=(_e,ue)=>{const ce=ue[_e];ce.pauseable?!ce.paused&&(this._log(`Pausing timer for request with ID '${_e}'...`),ce.pause()):(this._log(`Ending timer for request with ID '${_e}'...`),ce.end())};0<Object.keys(this._sendTimeouts).length&&Object.keys(this._sendTimeouts).forEach((_e)=>le(_e,this._sendTimeouts)),0<Object.keys(this._botCommandTimeouts).length&&Object.keys(this._botCommandTimeouts).forEach((_e)=>le(_e,this._botCommandTimeouts)),clearTimeout(ee),this.connected=!1,this._stopPing(),this._log('Disconnected:',se),this._alreadyReLoggingIn=!1,!1===this._loggingOut&&!0===this._options.autoReconnect&&oe!==R.default.Strophe.Status.AUTHFAIL&&!0===K._isReasonToReconnect(se)&&(this._log('Attempting to re-login...'),this._reLogin()),ae=!0,Z({msg:de,status:oe,condition:se});break;case R.default.Strophe.Status.CONNECTED:clearTimeout(ee),this.connected=!0,Q(se);}})})})}_enableStreamManagement(){return new I.Promise(($,X)=>{const Q=(Z)=>{Z.id===R.default.Strophe.Status.DISCONNECTED&&(this.removeEventListener(K.EVENT_TYPES.STATUS,Q),X(`Disconnected during stream management enabling.`))};if(this.addEventListener(K.EVENT_TYPES.STATUS,Q),!1===this.connected||null===this._connection)X('You must have an active connection to enable stream management');else{if(!this._connection.streamManagement)throw new Error('Stream management is required.');try{this._connection.addHandler((Z)=>{return this._log('Stream resumption enabled!'),this._setCacheItem('stream_management_id',Z.getAttribute('id')).then(()=>{this.removeEventListener(K.EVENT_TYPES.STATUS,Q),$()}),!1},'urn:xmpp:sm:3','enabled'),this._connection.streamManagement.enable(this._options.maxStreamResumptionTime)}catch(Z){console.error(Z),X()}}})}_enableMessageCarbons(){return this.sendIq(null,'set',{enable:{$attributes:{xmlns:K.NAMESPACES.CARBONS},$value:''}})}_initialisePing(){return new I.Promise(($)=>{!0===this._options.enablePing&&(null!==this._pingInterval&&clearInterval(this._pingInterval),this._pingInterval=setTimeout(()=>{this._sendPing().then(()=>{this._initialisePing()}).catch(()=>{this._log('Ping failed.'),!0===this._options.autoReconnect&&(this._log('Auto-reconnect enabled, so let\'s try and reconnect!'),this._connection&&this._connection._doDisconnect(),this._reLogin())})},this._options.pingInterval)),$()})}_sendPing(){return new I.Promise(($,X)=>{this._pingTimeout=setTimeout(()=>{return this.connected?void(this.connected=!1,this._setStatus(R.default.Strophe.Status.DISCONNECTED),!0===this._options.autoReconnect&&this._setStatus(R.default.Strophe.Status.CONNECTING),X()):void $()},this._options.pingTimeout),this.sendIq(this._domain,'get',{ping:{$attributes:{xmlns:K.NAMESPACES.PING}}}).then(()=>{clearTimeout(this._pingTimeout),$()}).catch(X)})}_makeParticipantsOffline(){return new I.Promise(($,X)=>{this._participantDb.allDocs({include_docs:!0}).then((Q)=>{const Z=Q.rows.filter((ee)=>{return!ee.doc.language}).map((ee)=>{return ee.doc.online=!1,ee.doc});this._participantDb.bulkDocs(Z).then($).catch((ee)=>{this._onError(`Unable to bulk update participants to offline status.`,ee),X(ee)})}).catch((Q)=>{this._onError(`Unable to get participants from database.`,Q),X(Q)})})}_makeContactsOffline(){return new I.Promise(($,X)=>{this.getContacts().then((Q)=>{Q.forEach((Z)=>{Z.online=!1}),this._contactDb.bulkDocs(Q).then(function(){$()}).catch((Z)=>{this._onError(`Unable to bulk update contacts to offline status.`,Z),X(Z)})}).catch((Q)=>{this._onError(`Unable to get contacts from database.`,Q),X(Q)})})}resumeTimers(){0<Object.keys(this._sendTimeouts).length&&Object.keys(this._sendTimeouts).forEach(($)=>{const X=this._sendTimeouts[$];X.paused&&(this._log(`Resuming send timer for request with ID '${X.id}'...`),X.resume())}),0<Object.keys(this._botCommandTimeouts).length&&Object.keys(this._botCommandTimeouts).forEach(($)=>{const X=this._botCommandTimeouts[$];X.paused&&(this._log(`Resuming bot command timer for request with ID '${X.id}'...`),X.resume())})}reLoginNow(){if(this._alreadyReLoggingIn)return void this._log('Not executing reLoginNow() because _alreadyReLoggingIn is currently \'true\'.');this._alreadyReLoggingIn=!0,this._clearReLoginTimeout();const $=[this._getCacheItem('user_jid'),this._getCacheItem('user_password')];I.Promise.all($).then((X)=>{const Q=X[0],Z=X[1];Q!==void 0&&Z!==void 0&&(this._log(`Auto-logging in with JID '${Q}'.`),this._setStatus(R.default.Strophe.Status.CONNECTING),this._login(Q,Z,!0).then((ee)=>{this._reLoginBackOff=3e3,this._log(`Auto-login success.`),this._reLoggingIn=!1,this.connected=!0;const te=[];for(let ne in this._joinedRooms)te.push(this.joinRoom(ne));I.Promise.all(te).then(()=>{this._setStatus(R.default.Strophe.Status.CONNECTED).then(()=>{!1!==this._options.autoResumeTimers&&this.resumeTimers(),this._dispatchEvent(K.EVENT_TYPES.AUTO_RECONNECTED,{resumed:ee}),this._alreadyReLoggingIn=!1}).catch((ne)=>{this._alreadyReLoggingIn=!1,console.error('Couldn\'t set connection status:',ne)})}).catch((ne)=>{this._onError('Couldn\'t join all rooms on re-login, logging out.',ne),this.logout(),this._alreadyReLoggingIn=!1})}).catch((ee)=>{if(this._alreadyReLoggingIn=!1,ee.status==R.default.Strophe.Status.AUTHFAIL){const te={id:R.default.Strophe.Status.DISCONNECTED,label:'Authentication Failed.',wontReconnect:!0,reason:ee.condition};this._dispatchEvent(K.EVENT_TYPES.STATUS,te)}else this._reLoginBackOff+=3e3,this._reLoginBackOff>this._options.maxReconnectBackoff&&(this._reLoginBackOff=this._options.maxReconnectBackoff),this._log(`Couldn't re-login, trying again in ${this._reLoginBackOff/1e3} seconds...`),this._reLogin()}))}).catch((X)=>{this._onError('Couldn\'t get user JID or user password for re-login!',X)})}_reLogin(){if(!0===this._loggingOut)return void this._log('Not executing _reLogin because _loggingOut is currently \'true\'.');if(this._reLoggingIn=!0,this._clearReLoginTimeout(),this._log('Re-login back off time is:',this._reLoginBackOff),0<this._reLoginBackOff){const $={id:R.default.Strophe.Status.DISCONNECTED,label:'Disconnected',reconnectTime:this._reLoginBackOff};this._dispatchEvent(K.EVENT_TYPES.STATUS,$)}this._reLoginTimeout=setTimeout(()=>{this._log('Calling reLoginNow()...'),this.reLoginNow()},this._reLoginBackOff)}_clearReLoginTimeout(){null!==this._reLoginTimeout&&(clearTimeout(this._reLoginTimeout),this._reLoginTimeout=null)}_stopPing(){null!==this._pingTimeout&&clearTimeout(this._pingTimeout),null!==this._pingInterval&&clearInterval(this._pingInterval)}_createPresenceObject(){return new I.Promise(($,X)=>{const Q={$attributes:{from:this._jid,xmlns:K.NAMESPACES.JABBER_CLIENT}};Q.show='chat',Q.status='Available',this._getCacheItem('chat_status').then((Z)=>{Z!==void 0&&(Z.status&&(Q.show=Z.status),Z.label&&(Q.status=Z.label),Z.metadata&&(Q.metadata=K._merge({$attributes:{xmlns:K.NAMESPACES.CT_METADATA}},Z.metadata))),$(Q)}).catch((Z)=>{this._onError('Couldn\'t get chat status to construct presence object!',Z),X(Z)})})}sendPresence(){return this._sendPresence()}uploadAttachment($){if(!this._options.uploadHost)throw new Error('Cannot send attachments without a upload host configured.');let X=I.Promise.resolve({}),Q=null;return X=X.then(()=>{return new I.Promise((Z,ee)=>{H.getFileInfo($).then((te)=>{Q=te,Z()}).catch(ee)})}).then(()=>{return new I.Promise((Z,ee)=>{H.getFileSize(Q).then((te)=>{const ne={$attributes:{id:this.getUniqueId(),to:this._options.uploadHost,from:this._jid,type:'get',xmlns:K.NAMESPACES.JABBER_CLIENT},request:{$attributes:{xmlns:K.NAMESPACES.HTTP_UPLOAD},filename:Q.name.replace('.encrypted',''),size:''+te,"content-type":Q.type}};this.sendIq(this._options.uploadHost,'get',ne).then(Z).catch(ee)}).catch((te)=>{console.error(`Couldn't get file size for file with name '${Q.name}'.`,te),ee(te)})})}).then((Z)=>{return new I.Promise((ee)=>{!0===this._options.authAttachments?this._getCacheItem('user_password').then((te)=>{return this._embellishPasswordWithAdToken(te)}).then((te)=>{ee([Z,{Authorization:'Basic '+btoa(this._bareJid+':'+te),"Content-Type":Q.type}])}):ee([Z,{"Content-Type":Q.type}])})}).then((Z)=>{const ee=Z[0],te=Z[1];return new I.Promise((ne,ae)=>{const oe=ee.iq.slot.put,se=ee.iq.slot.get;H.upload(Q.path,oe,se,te).then(()=>{this._dispatchEvent(K.EVENT_TYPES.UPLOAD_SUCCESS,Q.path),ne(se)}).catch((ie)=>{this._dispatchEvent(K.EVENT_TYPES.UPLOAD_FAILED,Q.path);const de=`Couldn't successfully upload file '${Q.path}' to the server:`;this._onError(de,ie),ae({error:de})})})}),new I.Promise((Z,ee)=>X.then(Z).catch(ee))}_sendPresence(){return this._log(`Sending presence...`),new I.Promise(($,X)=>{this._log(`Creating presence object...`),this._createPresenceObject().then((Q)=>{this._log(`Presence object created:`,Q),this.sendStanza(Q,!1,'presence',!1,!1).then(()=>{this._log(`Presence sent!`),this._log(`Sending presence for all rooms...`);const Z=[];for(let ee in this._joinedRooms)Q.$attributes.to=`${ee}@${this._options.mucHost}`,Q.x={$attributes:{xmlns:K.NAMESPACES.MUC}},Z.push(this.sendStanza(Q,!1,'presence',!1,!1));I.Promise.all(Z).then(()=>{this._log(`Finished sending presence(s).`),$()}).catch((ee)=>{this._onError('Couldn\'t send all presence objects:',ee),X(ee)})}).catch((Z)=>{this._onError('Couldn\'t send initial presence object:',Z),X(Z)})}).catch((Q)=>{this._onError('Couldn\'t create presence object:',Q),X(Q)})})}getServerTime(){return this._isMethodReady(!0,!0),new I.Promise(($,X)=>{this.sendIq(this._domain,'get',{time:{$attributes:{xmlns:K.NAMESPACES.TIME}}}).then((Q)=>{if(void 0!==Q.iq.time&&Q.iq.time.utc){const Z=new Date(Q.iq.time.utc).valueOf(),ee=Date.now();this._serverTimeDiff=Z-ee}$(this._serverTimeDiff)}).catch(X)})}getSyncedTimestamp($){if(null===this._serverTimeDiff)return $;const X=Math.abs(this._serverTimeDiff);return 0<=this._serverTimeDiff?$+X:$-X}login($,X){return this._login($,X,!1)}_login($,X,Q=!1){if(this._isMethodReady(!0),!$)throw new Error('Parameter \'jid\' must be provided.');if(!X)throw new Error('Parameter \'password\' must be provided.');return!0===this._reLoggingIn&&!1===Q&&(this._clearReLoginTimeout(),this._reLoggingIn=!1),this._loggingOut=!1,new I.Promise((Z,ee)=>{this._getInstallId().then(()=>{this._getCacheItem('user_jid').then((te)=>{if(!0===this.connected&&!0===this.loggedIn&&te===R.default.Strophe.getBareJidFromJid($))Z(!1);else{const ne=R.default.Strophe.getResourceFromJid($);if(null!==ne)this.resource=ne,this._jid=$,this._bareJid=R.default.getBareJidFromJid(this._jid);else{if(this._bareJid=$,!0===this._options.useEncodedJidAsResource)this.resource=btoa(this._bareJid);else{const se=localStorage.getItem(`${this._instanceId}_resource`);null===se?(this.resource=this._installId,localStorage.setItem(`${this._instanceId}_resource`,this.resource)):this.resource=se}this._jid=this._bareJid+'/'+this.resource}const ae=()=>{this.loggedIn=!0,localStorage.removeItem(`${this._instanceId}_logging_in`)};this.username=R.default.Strophe.getNodeFromJid(this._jid),this._domain=this._bareJid.split('@')[1];const oe=()=>{let se=!1;const ie=null!==localStorage.getItem(`${this._instanceId}_logging_in`);ie&&this._log('Previous login attempt failed, calling a force logout to clean-up.'),this.logout(ie,!0).then(()=>{return this._embellishPasswordWithAdToken(X)}).then((de)=>{return this._connect(this._jid,de).then((le)=>{se='resumed'===le,localStorage.setItem(`${this._instanceId}_logging_in`,'true')})}).then(()=>{return!1==se?this._enableStreamManagement():I.Promise.resolve()}).then(()=>{return!1==se&&!0===this._options.enableMessageCarbons?this._enableMessageCarbons():I.Promise.resolve()}).then(()=>{return!1==se?this.getServerTime():I.Promise.resolve()}).then(()=>{return!1==se?this._setCacheItem('user_jid',this._bareJid):I.Promise.resolve()}).then(()=>{return new I.Promise((de,le)=>{!1==se&&(!0===this._options.autoReconnect||!0===this._options.autoLogin||!0===this._options.authAttachments)?this._setCacheItem('user_password',X,!0).then(de).catch(le):de()})}).then(()=>{return se?void 0:I.Promise.all([this._makeContactsOffline(),this._makeParticipantsOffline()])}).then(()=>{return new I.Promise((de)=>{!se&&this.isPushEnabled()?this._getPushTokens().then((_e)=>{return this.registerForPush(_e)}).then(()=>{de()}).catch((_e)=>{this._log('Failed to register for push: '+_e),de()}):de()})}).then(()=>{return this._initialisePing()}).then(()=>{return!0===this._options.updateUserDirectoryOnLogin?this.updateUserDirectory():I.Promise.resolve()}).then(()=>{return!1==se&&!1!==this._options.updateRosterOnLogin?this._getCacheItem('roster_version').then((de)=>{return this.sendIq(this._bareJid,'get',{query:{$attributes:{xmlns:'jabber:iq:roster',ver:de||''}}})}):I.Promise.resolve()}).then((de)=>{return this._processRoster(de)}).then(()=>{return new I.Promise((de,le)=>{if(!1==se&&!1!==this._options.mam.auto){const _e=this.getLastArchiveId();this.listSubscriptions().then((ue)=>{const ce=[];ue.forEach((pe)=>{ce.push(this.queryMamByRoomName(pe.name,!0,_e))}),I.Promise.all(ce).then(()=>{this.queryMam(null,_e).then(de).catch((pe)=>{this._onError(`Unable to query the MAM for missed messages.`,pe),le(pe)})}).catch((pe)=>{this._onError(`Unable to query the MAM for missed messages in a subscribed room.`,pe),le(pe)})}).catch((ue)=>{this._onError(`Unable to get a list of subscriptions.`,ue),le(ue)})}else de()})}).then(()=>{ae(),Z(se)}).catch((de)=>{null!==this._connection&&!0===this._connection.connected&&(this._connection._doDisconnect(),this._connection=null),this._onError(`Unable to complete login process with JID '${$}'.`,de.msg),ee(de)})};void 0!==te&&te!==this._bareJid?this._clearDbsForNewUser().then(()=>{oe()}):oe()}}).catch(ee)}).catch(ee)})}isPushEnabled(){return this._options.push.androidEnabled&&'android'===N.getPlatformName()||this._options.push.iosEnabled&&'ios'===N.getPlatformName()}logout($=!1,X=!1){return new I.Promise((Q,Z)=>{const ee=()=>{this._joinedRooms={},this._reLoggingIn=!1,this.connected=!1,this.loggedIn=!1,this._stopPing(),this._clearReLoginTimeout(),localStorage.removeItem(`${this._instanceId}_logging_in`);const te=[this._deleteCacheItem('stream_management_id')];!0!==X&&te.push(this._deleteCacheItem('user_password')),I.Promise.all(te).then(()=>{this._loggingOut=!1,Q()}).catch(Z)};if(!0!==$&&(!1===this.connected||!0===this._loggingOut))Q();else if(null!==this._connection&&!0===this._connection.connected&&!1===this._loggingOut){this._loggingOut=!0;const te=()=>{this._stopPing(),this._clearReLoginTimeout(),this._connection.disconnect('user_logout'),this._connection=null,ee()};this.isPushEnabled()?this.disablePush().then(()=>{te()}).catch((ne)=>{this._log(`Unable to disable push notifications: ${ne}`),te()}):te()}else ee()})}forceLogout(){return new I.Promise(($,X)=>{this._forcedLogout=!0,this._loggingOut=!0,this._joinedRooms={},this._reLoggingIn=!1,this.connected=!1,this.loggedIn=!1,this._stopPing(),this._clearReLoginTimeout(),localStorage.removeItem(`${this._instanceId}_logging_in`),this._connection&&(this._connection.disconnect('user_logout'),this._connection=null),I.Promise.all([this._deleteCacheItem('stream_management_id'),this._deleteCacheItem('user_password')]).then(()=>{this._loggingOut=!1,$()}).catch(X)})}resendMessage($){return this._isMethodReady(!0,!0),new I.Promise((X,Q)=>{this.getMessageById($).then((Z)=>{this._log(`Resending message with ID '${$}':`,Z);const ee={$attributes:{id:Z._id,to:Z.recipient_id,from:Z.sender_id,type:Z.type,xmlns:K.NAMESPACES.JABBER_CLIENT},markable:{$attributes:{xmlns:K.NAMESPACES.CHAT_MARKERS}},body:Z.body,data:Z.data,attachments:[]};void 0!==Z.addresses&&(ee.addresses={$attributes:{xmlns:K.NAMESPACES.ADDRESS},address:Z.addresses}),Z.attachments.forEach((te)=>{ee.attachments.push({name:te.name,type:te.type,size:''+te.size,get:te.get})}),this.sendStanza(ee).then(()=>{X(Z)}).catch(Q)}).catch(Q)})}_stanzaResponseHandler($,X){this._sendTimeouts[$]&&(this._log(`Clearing send timeout for message with ID '${$}'.`),this._sendTimeouts[$].cancel(),delete this._sendTimeouts[$]),X?this._rejectSendStanzaPromise($,X):this._resolveSendStanzaPromise($)}_resolveSendStanzaPromise($,X){this._sendStanzaPromises[$]&&(this._log(`Resolving send stanza promise for message with ID '${$}'.`),this._sendStanzaPromises[$].resolve(X),delete this._sendStanzaPromises[$],this._sendTimeouts[$]&&delete this._sendTimeouts[$])}_rejectSendStanzaPromise($,X){this._sendStanzaPromises[$]&&(this._log(`Rejecting send stanza promise for message with ID '${$}'.`),this._sendStanzaPromises[$].reject(X),delete this._sendStanzaPromises[$],this._sendTimeouts[$]&&delete this._sendTimeouts[$])}sendStanza($,X=!0,Q='message',Z=!0,ee=!0){return this._isMethodReady(!0,!0),new I.Promise((te,ne)=>{$.$attributes||($.$attributes={}),void 0===$.$attributes.id&&($.$attributes.id=this.getUniqueId());let ae=$.$attributes.id;if(!0===this.connected&&null!==this._connection){this._sendStanzaPromises[ae]={resolve:te,reject:ne},this._sendTimeouts[ae]=new z.default(ae,()=>{const oe=`${Q.replace(/^\w/,(se)=>se.toUpperCase())} with ID '${ae}' was not received by the server within ${this._options.sendTimeout}ms.`;this._log(oe,$),this._rejectSendStanzaPromise(ae,oe)},this._options.sendTimeout,ee);try{void 0===$.$attributes&&($.$attributes={}),void 0===$.$attributes.from&&($.$attributes.from=this._jid),!0===X&&($.store={$attributes:{xmlns:K.NAMESPACES.HINTS},$value:''}),!0===Z&&($.timestamp={$attributes:{xmlns:K.NAMESPACES.CT_CLIENT_TIMESTAMP},$value:Date.now()});const oe=K.jsonToXml(Q,$);this._connection.send(oe)}catch(oe){const se=`Unable to send XMPP ${Q}`;this._onError(se,oe),this._rejectSendStanzaPromise(ae,se)}}else{const oe='You\'re not currently connected, please connect and try again.';this._onError(oe),this._rejectSendStanzaPromise(ae,oe)}})}_sendMessageWithAttachments($,X){if(!this._options.uploadHost)throw new Error('Cannot send attachments without a upload host configured.');this._log(`Sending message with ID ${$._id} with attachments:`,X);let Q=I.Promise.resolve({});return X.forEach((Z,ee)=>{Q=Q.then(()=>{return new I.Promise((te,ne)=>{H.getFileSize(Z).then((ae)=>{const oe={$attributes:{id:this.getUniqueId(),to:this._options.uploadHost,from:this._jid,type:'get',xmlns:K.NAMESPACES.JABBER_CLIENT},request:{$attributes:{xmlns:K.NAMESPACES.HTTP_UPLOAD},filename:Z.name.replace('.encrypted',''),size:''+ae,"content-type":Z.type}};this.sendIq(this._options.uploadHost,'get',oe).then(te).catch(ne)}).catch((ae)=>{console.error(`Couldn't get file size for file with name '${Z.name}'.`,ae),ne(ae)})})}).then((te)=>{return new I.Promise((ne)=>{!0===this._options.authAttachments?this._getCacheItem('user_password').then((ae)=>{return this._embellishPasswordWithAdToken(ae)}).then((ae)=>{ne([te,{Authorization:'Basic '+btoa(this._bareJid+':'+ae),"Content-Type":Z.type}])}):ne([te,{"Content-Type":Z.type}])})}).then((te)=>{const ne=te[0],ae=te[1];return new I.Promise((oe,se)=>{const ie=ne.iq.slot.put,de=ne.iq.slot.get;H.upload(Z.path,ie,de,ae).then(()=>{this._dispatchEvent(K.EVENT_TYPES.UPLOAD_SUCCESS,$),oe(['transferred',de,ie])}).catch((le)=>{this._dispatchEvent(K.EVENT_TYPES.UPLOAD_FAILED,$);const _e=`Couldn't successfully upload file '${Z.path}' to the server:`;this._onError(_e,le),se({error:_e,message:$})})})}).then((te)=>{const ne=te[0],ae=te[1],oe=te[2];return new I.Promise((se,ie)=>{this.saveMessage($._id,(de)=>{return de.attachments[ee].state=ne,de.attachments[ee].get=ae,de.attachments[ee].put=oe,N.isBrowser()&&(de.attachments[ee].path=ae),de}).then(se).catch(ie)})})}),Q.then(()=>{return this.resendMessage($._id)})}_prepareMessageAttachmentsForSend($,X){return this._log('Preparing to send the following attachments:',X),new I.Promise((Q,Z)=>{const ee=[];X.forEach((te)=>{ee.push(new I.Promise((ne,ae)=>{this._log('Getting file information for file:',te),H.getFileInfo(te).then((oe)=>{this._log('Got file info for file:',oe),ne(Object.assign({get:'',put:'',state:'transferring'},oe))}).catch(ae)}))}),I.Promise.all(ee).then((te)=>{this._messageStanzaToDbObject({message:$},{mine:!0,attachments:te}).then((ne)=>{this._dispatchEvent(K.EVENT_TYPES.UPLOAD_STARTED,ne),this._sendMessageWithAttachments(ne,te).then(Q).catch(Z)}).catch(Z)})})}sendChatMessage($,X,Q,Z=[],ee=!0){if(this._isMethodReady(!0,!0),!$)throw new Error('Parameter \'to\' is required.');if(this._options.mucHost&&-1<$.indexOf(this._options.mucHost))throw new Error('You are trying to send a peer-to-peer chat message to a room, please use the \'sendGroupChatMessage\' method instead.');return new I.Promise((te,ne)=>{const ae={$attributes:{id:this.getUniqueId(),from:this._jid,to:$,type:'chat',xmlns:K.NAMESPACES.JABBER_CLIENT}};!0===ee&&(ae.markable={$attributes:{xmlns:K.NAMESPACES.CHAT_MARKERS}}),null!==X&&(ae.body=X),null!==Q&&(ae.data=Q),1>Z.length?this.sendMessage(ae).then(te).catch(ne):this._prepareMessageAttachmentsForSend(ae,Z).then(te).catch(ne)})}sendMulticastMessage($,X,Q,Z=[],ee=!0){return this._isMethodReady(!0,!0),new I.Promise((te,ne)=>{const ae={$attributes:{id:this.getUniqueId(),from:this._jid,to:`${this._options.multicastHost}`,type:'chat',xmlns:K.NAMESPACES.JABBER_CLIENT},addresses:{$attributes:{xmlns:K.NAMESPACES.ADDRESS},address:$.map((oe)=>{return{$attributes:oe}})}};!0===ee&&(ae.markable={$attributes:{xmlns:K.NAMESPACES.CHAT_MARKERS}}),null!==X&&(ae.body=X),null!==Q&&(ae.data=Q),1>Z.length?this.sendMessage(ae).then(te).catch(ne):this._prepareMessageAttachmentsForSend(ae,Z).then(te).catch(ne)})}sendGroupChatMessage($,X,Q,Z=[],ee=!0,te=!1){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');if(!$)throw new Error('Parameter \'roomName\' is required.');return new I.Promise((ne,ae)=>{const oe={$attributes:{id:this.getUniqueId(),from:this._jid,to:`${$}@${this._options.mucHost}`,type:'groupchat',xmlns:K.NAMESPACES.JABBER_CLIENT}};!0===ee&&(oe.markable={$attributes:{xmlns:K.NAMESPACES.CHAT_MARKERS}}),null!==X&&(oe.body=X),null!==Q&&(oe.data=Q),!0!==te&&(oe.exclude={$attributes:{xmlns:K.NAMESPACES.INFINITY_MAM,archive:'user'}}),1>Z.length?this.sendMessage(oe).then(ne).catch(ae):this._prepareMessageAttachmentsForSend(oe,Z).then(ne).catch(ae)})}sendMessage($){return new I.Promise((X,Q)=>{this._messageStanzaToDbObject({message:$},{state:{sent:!1},mine:!0}).then((Z)=>{this.sendStanza($).then(()=>{this.saveMessage(Z._id,(ee)=>{return ee.state.sent=!0,ee}).then(X).catch(Q)}).catch(Q)}).catch(Q)})}sendIq($,X,Q,Z=this._options.sendTimeout||25000,ee){this._isMethodReady(!0,!0);const te=ee===void 0?this.getUniqueId():ee;return new I.Promise((ne,ae)=>{const oe=(ie)=>{ie.id===R.default.Strophe.Status.DISCONNECTED&&(this.removeEventListener(K.EVENT_TYPES.STATUS,oe),ae(`Disconnected during IQ request.`))};this.addEventListener(K.EVENT_TYPES.STATUS,oe);let se=null;try{for(let ie in se={$attributes:{id:te,type:X,from:this._connection.jid}},$&&(se.$attributes.to=$),Q)se[ie]=Q[ie]}catch(ie){this._onError('Couldn\'t construct IQ message:',ie),ae(ie)}if(null!==se){const ie=K.jsonToXml('iq',se);this._connection.sendIQ(ie,(de)=>{try{this.removeEventListener(K.EVENT_TYPES.STATUS,oe),ne(K.xmlToJson(de))}catch(le){this._onError('Couldn\'t convert IQ response to JSON.',le),ae(le)}},ae,Z)}})}getPrivateData(){this._isMethodReady(!0,!0),this._log('Fetching Private XML Data for:',this._bareJid);const $={privatexmldata:{$attributes:{xmlns:K.NAMESPACES.CT_PRIVATE_XML_STORAGE}}};return new I.Promise((X,Q)=>{return this._getPrivateXMLStorage($).then((Z)=>{Z!==void 0&&Z.privatexmldata!==void 0&&Z.privatexmldata.json!==void 0?X(JSON.parse(Z.privatexmldata.json)):Q('No private data found, or unable to fetch')})})}_getPrivateXMLStorage($){return this._log('Fetching Private XML Storage Data for: ',this._bareJid),new I.Promise((X,Q)=>{this.sendIq(this._bareJid,'get',{query:Object.assign({$attributes:{xmlns:K.NAMESPACES.PRIVATE_XML_STORAGE}},$)}).then((Z)=>{this._log('Fetched Private XML Storage Data for:',this._bareJid),X(Z.iq.query)}).catch(()=>{Q('Unable to send IQ for Private XML Storage')})})}setPrivateData($){this._isMethodReady(!0,!0),this._log('Setting Private XML data for:',this._bareJid);const X=JSON.stringify($),Q={privatexmldata:{$attributes:{xmlns:K.NAMESPACES.CT_PRIVATE_XML_STORAGE},json:X}};return this._setPrivateXMLStorage(Q)}_setPrivateXMLStorage($){const X={query:Object.assign({$attributes:{xmlns:K.NAMESPACES.PRIVATE_XML_STORAGE}},$)};return new I.Promise((Q,Z)=>{this.sendIq(null,'set',X).then(()=>{Q(),this._log('Set Private XML Storage for:',this._bareJid)}).catch(Z)})}_getvCard($){return this._log('\uD83C\uDCA1 Fetching vCard for:',$),new I.Promise((X,Q)=>{this.sendIq($,'get',{vCard:{$attributes:{xmlns:'vcard-temp'}}}).then((Z)=>{this._log('Fetched vCard for:',$),X(Z.iq.vCard)}).catch(()=>{Q('Unable to send IQ for vCard')})})}_setvCard($,X){this._log('\uD83C\uDCA1 Setting vCard for:',$);const Q=new DOMParser().parseFromString(X,'text/xml'),Z=K.xmlToJson(Q);return new I.Promise((ee,te)=>{this.sendIq(null,'set',Z['#document']).then(()=>{ee(),this._log('\uD83C\uDCA1 Set vCard for:',$)}).catch(te)})}addEventListener($,X){if(!K._validateEventType($))throw new Error('Invalid event type provided.');$===K.EVENT_TYPES.INITIALISED&&!0===this._initialised?X(null):(this._eventListeners[$]===void 0&&(this._eventListeners[$]=[]),this._eventListeners[$].push(X))}removeEventListener($,X){if(!K._validateEventType($))throw new Error('Invalid event type provided.');this._eventListeners[$]!==void 0&&this._eventListeners[$].forEach((Q,Z)=>{Q===X&&this._eventListeners[$].splice(Z,1)})}_searchDb($,X,Q,Z,ee,te){return new I.Promise((ne,ae)=>{const oe=[];for(let se in X)0===se.indexOf('$')?-1<['$or','$and','$not','$nor','$all'].indexOf(se)&&Array.isArray(X[se])&&0<X[se].length&&X[se].forEach((ie)=>{for(let de in ie)oe.push(de)}):oe.push(se);0<oe.length&&$.createIndex({index:{fields:oe}}).then(()=>{let se={selector:X};Array.isArray(Q)&&0<Q.length&&(se.sort=Q),Array.isArray(Z)&&0<Z.length&&(se.fields=Z),te&&(se.skip=te),ee&&(se.limit=ee),$.find(se).then((ie)=>{ne(ie.docs)}).catch(ae)}).catch(ae)})}findMessages($,X,Q,Z,ee){return this._isMethodReady(!0),this._searchDb(this._msgDb,$,X,Q,Z,ee)}getAllMessageIds(){return this._isMethodReady(!0),new I.Promise(($,X)=>{this._msgDb.allDocs().then((Q)=>{let Z=[];Q.rows&&0<Q.rows.length&&(Z=Q.rows.map((ee)=>{return ee.id})),$(Z)}).catch(X)})}getAllMessages(){return this._isMethodReady(!0),new I.Promise(($,X)=>{this._msgDb.allDocs({include_docs:!0}).then((Q)=>{const Z=Q.rows.map((ee)=>ee.doc);$(Z)}).catch(X)})}getChatHistory($,X,Q,Z,ee){this._isMethodReady(!0);let te={$or:[{sender_id:$},{recipient_id:$}]};return!0===Q&&(te['state.read']=!0),new I.Promise((ne,ae)=>{this.findMessages(te,X,null,Z,ee).then((oe)=>{const se=oe.sort((ie,de)=>{return ie.ts-de.ts});ne(se)}).catch(ae)})}getMessagesById($){return this._msgDb.allDocs({include_docs:!0}).then((X)=>{return X.rows.filter((Q)=>{return $.includes(Q.id)})})}getMessageById($){if(this._isMethodReady(!0),!$)throw new Error(`A message ID must be provided.`);return this._msgDb.get($)}deleteMessage($,X=!0){return this._isMethodReady(!0),new I.Promise((Q,Z)=>{if(!$)Q();else{const ee=[];X&&void 0!==$.attachments&&$.attachments.forEach((te)=>{void 0!==te.path&&ee.push(new I.Promise((ne)=>{return'ios'!==N.getPlatformName()||te.path.includes('file://')||(te.path=`file://${te.path}`),H.deleteFile(te.path).then(ne).catch((ae)=>{this._onError(`Couldn't delete attachment: '${te.name}':`,ae),ne()})}))}),I.Promise.all(ee).then(()=>{this._msgDb.remove($).then(()=>{if(this._log('Message successfully deleted with ID:',$._id),window.PushNotification&&window.PushNotification.removeFromIgnoreList&&$.data&&$.data.conversationstarted){const te=JSON.parse($.data.conversationstarted),ne=te.started;window.PushNotification.removeFromIgnoreList(()=>{},()=>{},ne)}Q()}).catch((te)=>{this._onError(`Couldn't delete message with ID '${$._id}'.`,te),Z(te)})}).catch((te)=>{this._onError(`Couldn't delete attachment(s) for message with ID '${$._id}':`,te),Z(te)})}})}deleteMessageById($,X=!0){return this._isMethodReady(!0),this._log('Deleting message with ID:',$),new I.Promise((Q,Z)=>{this.getMessageById($).then((ee)=>{this.deleteMessage(ee,X).then(Q).catch(Z)}).catch((ee)=>{this._onError(`Couldn't get message with ID '${$}' to delete it.`,ee),Z(ee)})})}deleteMessages($){return this._isMethodReady(!0),new I.Promise((X,Q)=>{this._searchDb(this._msgDb,$).then((Z)=>{this._log('\uD83D\uDDD1\uFE0F There are '+Z.length+' messages to delete');const ee=[];Z.forEach((te)=>{ee.push(this.deleteMessage(te))}),I.Promise.all(ee).then(X).catch((te)=>{this._onError(`Couldn't delete messages from database.`,te),Q(te)})})})}deleteMessagesByRoom($){return console.warn('This method is going to be DEPRECATED, please use \'deleteMessagesByRoomName\' instead.'),this.deleteMessages({$or:[{sender_id:$},{recipient_id:$}]})}deleteMessagesByRoomName($){if(!this._options.mucHost)throw new Error('mucHost must be provided as an option.');return this.deleteMessages({$or:[{sender_id:`${$}@${this._options.mucHost}`},{recipient_id:`${$}@${this._options.mucHost}`}]})}saveMessage($,X){return this._isMethodReady(!0),new I.Promise((Q,Z)=>{this._saveObject(K.OBJECT_TYPES.MESSAGE,$,X,(ee)=>{Q(ee)},(ee)=>{Z(ee)})})}_clearDbsForNewUser(){return new I.Promise(($,X)=>{this.destroyDbs(!1).then(()=>{this._dispatchEvent(K.EVENT_TYPES.AUTO_DBS_DESTROYED,null),$()}).catch(X)})}destroyDbs($=!0,X=!1){return new I.Promise((Q,Z)=>{if(this._destroyingDbs)return void Q();this._log('\uD83D\uDCA3 Destroying all databases and data...'),this._destroyingDbs=!0,this._lastArchiveId=null,localStorage.removeItem(`${this._instanceId}_last_archive_id`),this.resource=null,localStorage.removeItem(`${this._instanceId}_resource`),localStorage.removeItem(`${this._instanceId}_counters`),!0!==X&&localStorage.removeItem(`${this._instanceId}_key`),localStorage.removeItem(`${this._instanceId}_logging_in`),localStorage.removeItem(`${this._instanceId}_presence_needed`);const ee=[this._msgDb.destroy(),this._contactDb.destroy(),this._roomDb.destroy(),this._participantDb.destroy()];!1!==B.getSource('file')&&ee.push(H.deleteAttachments()),!0!==X&&ee.push(this._cacheDb.destroy()),ee.push(new I.Promise((te,ne)=>{this._userDirectory.initialised?(localStorage.removeItem(`${this._instanceId}_ud_iv`),this._userDirectory.destroy().then(()=>{te()}).catch(ne)):te()})),I.Promise.all(ee).then(()=>{this._initDbs().then(()=>{!0===$&&this._dispatchEvent(K.EVENT_TYPES.DBS_DESTROYED,null),this._log('\u2705 Successfully destroyed all data.'),this._destroyingDbs=!1,Q()}).catch((te)=>{this._destroyingDbs=!1,Z(te)})}).catch((te)=>{this._destroyingDbs=!1,Z(te)})})}deleteAttachments(){return H.deleteAttachments()}deleteFile($){return new I.Promise((X)=>{return void 0===$?void X():('ios'!==N.getPlatformName()||$.includes('file://')||($=`file://${$}`),H.deleteFile($).then(X).catch((Z)=>{this._onError(`Couldn't delete attachment at: '${$}':`,Z),X()}))})}setChatStatus($,X,Q,Z){return this._isMethodReady(!0),new I.Promise((ee,te)=>{if(K._validateChatStatus($)){const ne={status:$,label:X,metadata:Z};ne.label||($===K.CHAT_STATUSES.CHAT?ne.label='Available':$===K.CHAT_STATUSES.AWAY?ne.label='Away':$===K.CHAT_STATUSES.XA?ne.label='Extended Away':$===K.CHAT_STATUSES.DND?ne.label='Do Not Disturb':void 0),this._setCacheItem('chat_status',ne).then(()=>{!0===Q?this._sendPresence().then(()=>ee(ne)).catch(te):ee(ne)}).catch(te)}else te('Invalid chat status provided, one of \'away\', \'chat\', \'dnd\' or \'xa\' should be specified.')})}getChatStatus(){return this._isMethodReady(!0),this._getCacheItem('chat_status')}setClientState($){if(this._isMethodReady(!0,!0),!K._validateConstants(K.CLIENT_STATES,$))throw new Error('Invalid client state specified.');const X=K.jsonToXml($,{$attributes:{xmlns:K.NAMESPACES.CLIENT_STATE_INDICATION}});return this._connection.send(X)}findContacts($,X,Q,Z,ee){return this._isMethodReady(!0),this._searchDb(this._contactDb,$,X,Q,Z,ee)}getContacts(){return this._isMethodReady(!0),new I.Promise(($,X)=>{this._contactDb.allDocs({include_docs:!0}).then((Q)=>{const Z=Q.rows.filter((ee)=>{return!ee.doc.language}).map((ee)=>{return ee.doc});$(Z)}).catch((Q)=>{this._onError(`Unable to get contacts from database.`,Q),X(Q)})})}_embellishPasswordWithAdToken($){if(!$)throw new Error('Password must be provided.');return new I.Promise((X,Q)=>{if(!0===N.isElectron()&&!0===N.isWindows()&&this._options.adTokenPlaceholder&&this._options.adSecurityPackage&&this._options.adSpn&&-1<$.indexOf(this._options.adTokenPlaceholder)){const Z=B.getSource('sspiclient');!1===Z?Q('Couldn\'t access sspiclient plugin.'):Z.Helper.getUserToken((ee)=>{X($.replace(this._options.adTokenPlaceholder,ee))},Q,this._options.adSpn,this._options.adSecurityPackage)}else X($)})}_shouldMarkMessage($,X){let Q=!0;return!1!==$.markable&&($.state.markers.every((Z)=>{if(Z.type===X){if('groupchat'===$.type&&Z.sender_resource===this.username)return Q=!1,!1;if(Z.sender_id===this._jid)return Q=!1,!1}return!0}),Q)}_markMessage($,X,Q=!0){return new I.Promise((Z,ee)=>{if(!0===$.mine||!1===this._shouldMarkMessage($,X))Z($);else{const te={$attributes:{id:this.getUniqueId(),to:R.default.Strophe.getBareJidFromJid($.stanza.message.$attributes.from),from:this._connection.jid},timestamp:{$attributes:{xmlns:K.NAMESPACES.CT_CLIENT_TIMESTAMP},$value:Date.now()}};te[X]={$attributes:{xmlns:K.NAMESPACES.CHAT_MARKERS,id:$._id}},'groupchat'===$.type&&(te.$attributes.type='groupchat'),this.sendStanza(te).then(()=>{this.saveMessage($._id,(ne)=>{return ne.state[X]=!0,ne}).then((ne)=>{!1!==Q&&this._dispatchEvent(K.EVENT_TYPES.MESSAGE_UPDATED,ne),Z(ne)}).catch(ee)}).catch(ee)}})}markMessageRead($){return this._isMethodReady(!0,!0),N.isDevice()&&G.isInBackground()?void 0:this._markMessage($,K.MARKER_TYPES.READ)}markMessageReadById($){return this._isMethodReady(!0,!0),this.getMessageById($).then((X)=>{return this.markMessageRead(X)})}markMessageAcknowleged($){return this._isMethodReady(!0,!0),this._markMessage($,K.MARKER_TYPES.ACKNOWLEDGED)}markMessageAcknowledgedById($){return this._isMethodReady(!0,!0),this.getMessageById($).then((X)=>{return this.markMessageAcknowleged(X)})}_dispatchEvent($,X){if(!K._validateEventType($))throw new Error('Invalid event type provided.');this._eventListeners[$]!==void 0&&this._eventListeners[$].forEach((Q)=>{Q(X)})}createRoom($){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('mucHost must be provided as an option.');return new I.Promise((X,Q)=>{const Z=`${$}@${this._options.mucHost}`;let ee={$attributes:{to:`${Z}/${this.username}`,xmlns:K.NAMESPACES.JABBER_CLIENT},x:{$attributes:{xmlns:K.NAMESPACES.MUC}}};this._connection.addHandler((te)=>{const ne=K.xmlToJson(te);if(void 0!==ne.$attributes&&'error'===ne.$attributes.type){const ae=new Error(`Failed to create room '${$}'.`);this._onError(`Unable to create room with name '${$}'.`,ae),Q(ae)}else this.sendIq(Z,'get',{query:{$attributes:{xmlns:K.NAMESPACES.MUC_OWNER}}}).then(()=>{this.sendIq(Z,'set',{query:{$attributes:{xmlns:K.NAMESPACES.MUC_OWNER},x:{$attributes:{xmlns:K.NAMESPACES.X_DATA,type:'submit'},field:[{$attributes:{var:'muc#roomconfig_whois'},value:'anyone'}]}}}).then(()=>{this._log(`Room '${$}' successfully created.`),X()}).catch(()=>Q)}).catch(()=>Q);return!1},K.NAMESPACES.MUC,'presence',null,null,`${Z}/${this.username}`,{ignoreNamespaceFragment:!0}),this._connection.send(K.jsonToXml('presence',ee))})}destroyRoom($){if(this._isMethodReady(!0,!0),!$)throw new Error('Parameter \'roomName\' must be provided.');if(!this._options.mucHost)throw new Error('mucHost must be provided as an option.');return new I.Promise((X,Q)=>{this.sendIq(`${$}@${this._options.mucHost}`,'set',{query:{$attributes:{xmlns:K.NAMESPACES.MUC_OWNER},destroy:{}}}).then(()=>{X()}).catch(()=>Q)})}listRooms($){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('mucHost must be provided as an option.');return new I.Promise((X,Q)=>{const Z=()=>{this._roomDb.allDocs({include_docs:!0}).then((ee)=>{const te=ee.rows.map((ne)=>{return ne.doc});X(te)}).catch((ee)=>{this._onError(`Couldn't fetch list of rooms from database.`,ee),Q(ee)})};!0===this.connected&&!1!==$?this.sendIq(this._options.mucHost,'get',{query:{$attributes:{xmlns:'http://jabber.org/protocol/disco#items'}}}).then((ee)=>{if(ee.iq&&ee.iq.query&&ee.iq.query.item){let te=[];te=Array.isArray(ee.iq.query.item)?ee.iq.query.item.map((ne)=>{return{_id:ne.$attributes.jid,name:R.default.Strophe.getNodeFromJid(ne.$attributes.jid)}}):[{_id:ee.iq.query.item.$attributes.jid,name:R.default.Strophe.getNodeFromJid(ee.iq.query.item.$attributes.jid)}],this._roomDb.allDocs({include_docs:!0}).then((ne)=>{const ae=[];ne.rows.forEach((oe)=>{let se=oe.doc,ie=null;te.every((de)=>{return de._id!==se._id||(ie=de,!1)}),null===ie&&ae.push(this._roomDb.remove(se))}),te.forEach((oe)=>{const se=new I.Promise((ie,de)=>{this.saveRoom(oe._id,(le)=>{return void 0===le._id?le={_id:oe._id,name:oe.name,ts:this.getSyncedTimestamp(Date.now()),updated_at:null}:(le.name!==oe.name&&(le.name=oe.name),le.updated_at=this.getSyncedTimestamp(Date.now())),le}).then(ie).catch(de)});ae.push(se)}),I.Promise.all(ae).then(()=>{Z()}).catch((oe)=>{this._onError('Couldn\'t merge list of rooms from server with locally stored list of rooms.',oe),Q(oe)})}),X(te)}else X([])}).catch(Q):Z()})}listSubscriptions(){return this._isMethodReady(!0,!0),new I.Promise(($,X)=>{this._options.mucHost?this.sendIq(this._options.mucHost,'get',{subscriptions:{$attributes:{xmlns:K.NAMESPACES.MUC_SUB}}}).then((Q)=>{let Z=[];Q.iq&&Q.iq.subscriptions&&Q.iq.subscriptions.subscription&&(Array.isArray(Q.iq.subscriptions.subscription)?Z=Q.iq.subscriptions.subscription.map((ee)=>{if(ee.$attributes&&ee.$attributes.jid)return{name:R.default.Strophe.getNodeFromJid(ee.$attributes.jid),jid:ee.$attributes.jid}}):Q.iq.subscriptions.subscription.$attributes&&Q.iq.subscriptions.subscription.$attributes.jid&&(Z=[{name:R.default.Strophe.getNodeFromJid(Q.iq.subscriptions.subscription.$attributes.jid),jid:Q.iq.subscriptions.subscription.$attributes.jid}])),$(Z)}).catch(X):$([])})}joinRoom($){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');if(!$)throw new Error('Parameter \'roomName\' must be provided.');return new I.Promise((X,Q)=>{const Z=`${$}@${this._options.mucHost}`;this._createPresenceObject().then((ee)=>{ee.$attributes.to=`${Z}/${this.username}`,ee.x={$attributes:{xmlns:K.NAMESPACES.MUC},history:{$attributes:{maxchars:0}}},this._connection.addHandler((te)=>{try{const ne=K.xmlToJson(te);ne.presence&&void 0===ne.presence.error?this.saveRoom(Z,(ae)=>{return void 0===ae._id?ae={_id:Z,name:$,ts:this.getSyncedTimestamp(Date.now()),updated_at:null}:ae.name!==$&&(ae.name=$,ae.updated_at=this.getSyncedTimestamp(Date.now())),ae}).then((ae)=>{this._joinedRooms[$]=Date.now(),!1===this._options.mam.auto?X(ae):this.queryMamByRoomName($).then(()=>{X(ae)}).catch(Q)}).catch(Q):(this._onError(`Couldn't join room '${$}' with nick '${this.username}'.`,te),Q(te))}catch(ne){this._onError('Couldn\'t convert stanza XML to JSON',ne),Q(ne)}return!1},K.NAMESPACES.JABBER_CLIENT,'presence',null,null,`${$}@${this._options.mucHost}/${this.username}`,{ignoreNamespaceFragment:!0}),this._connection.send(K.jsonToXml('presence',ee))})})}leaveRoom($){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');if(!$)throw new Error('Parameter \'roomName\' must be provided.');return new I.Promise((X)=>{const Q={$attributes:{from:this._jid,xmlns:K.NAMESPACES.JABBER_CLIENT,to:`${$}@${this._options.mucHost}/${this.username}`,type:'unavailable'}};this._connection.send(K.jsonToXml('presence',Q)),delete this._joinedRooms[$],X()})}subscribeToRoom($,X){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('mucHost must be provided as an option.');if(!$)throw new Error('Parameter \'roomName\' must be provided.');return new I.Promise((Q,Z)=>{const ee={subscribe:{$attributes:{xmlns:K.NAMESPACES.MUC_SUB,nick:this.username}}};if(!X)for(let te in X=[],K.MUC_NODES)X.push(K.MUC_NODES[te]);0<X.length&&(ee.subscribe.event=[],X.forEach((te)=>{ee.subscribe.event.push({$attributes:{node:te}})})),this.sendIq(`${$}@${this._options.mucHost}`,'set',ee).then((te)=>{te.iq&&te.iq.subscribe?Q(te):this._onError(`Couldn't subscribe to room '${$}.'`,te)}).catch(Z)})}listSubscribedUsersForRoom($){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('mucHost must be provided as an option.');return new I.Promise((X,Q)=>{this.sendIq(`${$}@${this._options.mucHost}`,'get',{subscriptions:{$attributes:{xmlns:K.NAMESPACES.MUC_SUB}}}).then((Z)=>{let ee=[];if(Z.iq&&void 0!==Z.iq.subscriptions)if(Array.isArray(Z.iq.subscriptions.subscription))ee=Z.iq.subscriptions.subscription.map((te)=>{if(te.$attributes&&void 0!==te.$attributes.jid)return te.$attributes.jid});else if(void 0!==Z.iq.subscriptions.subscription){const te=Z.iq.subscriptions.subscription;te.$attributes&&void 0!==te.$attributes.jid&&(ee=[te.$attributes.jid])}X(ee)}).catch(Q)})}unsubscribeFromRoom($){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('mucHost must be provided as an option.');return new I.Promise((X,Q)=>{this.sendIq(`${$}@${this._options.mucHost}`,'set',{unsubscribe:{$attributes:{xmlns:K.NAMESPACES.MUC_SUB}}}).then(X).catch(Q)})}getRoomById($){if(this._isMethodReady(!0),!$)throw new Error(`A room ID must be provided.`);return this._log('Getting room with ID:',$),this._roomDb.get($)}findRooms($,X,Q,Z,ee){return this._isMethodReady(!0),this._searchDb(this._roomDb,$,X,Q,Z,ee)}saveRoom($,X){return this._isMethodReady(!0),new I.Promise((Q,Z)=>{this._saveObject(K.OBJECT_TYPES.ROOM,$,X,(ee)=>{Q(ee)},(ee)=>{Z(ee)})})}saveParticipant($,X){return this._isMethodReady(!0),new I.Promise((Q,Z)=>{this._saveObject(K.OBJECT_TYPES.PARTICIPANT,$,X,(ee)=>{Q(ee)},(ee)=>{Z(ee)})})}listParticipantsByRoom($){return this._isMethodReady(!0),this._searchDb(this._participantDb,{room_name:$})}getParticipantByRoomAndJid($,X){return this._isMethodReady(!0),new I.Promise((Q,Z)=>{return this._searchDb(this._participantDb,{room_name:$,jid:X}).then((ee)=>{0<ee.length?Q(ee[0]):Q(null)}).catch(Z)})}purgeParticipantsByUpdatedAt($){return this._isMethodReady(!0),new I.Promise((X,Q)=>{this._searchDb(this._participantDb,{updated_at:{$lt:$}}).then((Z)=>{const ee=Z.map((te)=>{return this._participantDb.remove(te)});I.Promise.all(ee).then(X).catch(Q)}).catch((Z)=>{console.error(Z)})})}getServerVersion(){return this._isMethodReady(!0),new I.Promise(($,X)=>{this.sendIq(`${this._domain}`,'get',{query:{$attributes:{xmlns:K.NAMESPACES.SOFTWARE_VERSION}}}).then((Q)=>{Q.iq&&Q.iq.query&&$({name:Q.iq.query.name||'',os:Q.iq.query.os||'',version:Q.iq.query.version})}).catch(X)})}_requestMessagesFromMam($,X=null,Q=!1,Z=null,ee,te=this._options.mam.pageSize){const ne=(se,ie,de,le,_e,ue=[],ce=null)=>{const pe={query:{$attributes:{xmlns:K.NAMESPACES.MAM,queryid:de},x:{$attributes:{xmlns:'jabber:x:data',type:'submit'},field:[{$attributes:{var:'FORM_TYPE',type:'hidden'},value:K.NAMESPACES.MAM}]},set:{$attributes:{xmlns:K.NAMESPACES.RESULT_SET_MANAGEMENT},max:''+te}}};if(this._log(`Querying the message archive for start date '${le}' and end date '${_e}'.`),null!==le||!0===Q){let he='';!0===Q&&(he+='inf_conv_mode'),null!==le&&(he+=le.toISOString()),pe.query.x.field.push({$attributes:{var:'start'},value:he})}null!==_e&&pe.query.x.field.push({$attributes:{var:'end'},value:_e.toISOString()}),null!==ce&&(pe.query.set[!0===Q?'before':'after']=ce),null!==Z&&pe.query.x.field.push({$attributes:{var:'with'},value:Z}),this._connection.addHandler((he)=>{const ge=K.xmlToJson(he);try{if(void 0!==ge.message.result&&void 0!==ge.message.result.forwarded&&void 0!==ge.message.result.forwarded.message){const ye=ge.message.result.forwarded;void 0===ge.message.result.forwarded.message.archived&&void 0!==ge.message.result&&void 0!==ge.message.result.$attributes&&void 0!==ge.message.result.$attributes.id&&(ye.message.archived={$attributes:{by:R.default.Strophe.getBareJidFromJid(ye.message.$attributes.from),id:ge.message.result.$attributes.id,xmlns:K.NAMESPACES.MAM_TMP}}),ue.push(ye)}}catch(ye){return ie(ye),!1}const fe=void 0!==ge.message.fin&&void 0!==ge.message.fin.$attributes&&ge.message.fin.$attributes.xmlns===K.NAMESPACES.MAM;return!0==fe&&('true'==ge.message.fin.$attributes.complete||!0===Q?(this._log(`Finished paging through result set, got a total of '${ue.length}' items.`),se(ue)):(this._log(`Paging through result set to get a total of '${ge.message.fin.set.count}' items.`),this._log(`Got '${ue.length}' items so far...`),ne(se,ie,de,le,_e,ue,ge.message.fin.set.last))),!fe},K.NAMESPACES.JABBER_CLIENT,'message',null,null,$),this.sendIq($,'set',pe,null).catch((he)=>{this._onError('Couldn\'t query the MAM:',he),ie(he)})};let ae=null,oe=null;return new I.Promise((se,ie)=>{null===ee?ne(se,ie,this.getUniqueId(),ae,oe,[],X):this.getServerTime().then(()=>{const de=this.getSyncedTimestamp(Date.now()+6e4);ee>=de?ie(`The start timestamp (${ee}) cannot be equal to or larger than the end timestamp (${de}).`):(ae=new Date(ee),oe=new Date(de),ne(se,ie,this.getUniqueId(),ae,oe,[],X))})})}queryMam($,X=null,Q=null,Z,ee=!0){return this._isMethodReady(!0,!0),new I.Promise((te,ne)=>{const ae=Z||this._options.mam.defaultTimeLimit,oe=Date.now()-ae,se=this.getSyncedTimestamp(oe-6e4);this._log(`Starting the MAM query process...`),this._perfStart('requestMessagesFromMam','Starting the first request for MAM messages','color: blue;'),this._requestMessagesFromMam($,X,!1,Q,se).then((ie)=>{this._perfEnd('requestMessagesFromMam','Finished getting all messages from the MAM','color: blue;'),this._processMamStanzas(ie,ee,!1).then(te).catch(ne)}).then(()=>{if(0<this._options.autoPurgeOldMessagesAge)return this.purgeMessagesOlderThan(this._options.autoPurgeOldMessagesAge)}).then(()=>{if(0<this._options.autoPurgeOldRetainMessageCount)return this.purgeOldestMessagesLeavingCount(this._options.autoPurgeOldRetainMessageCount)}).catch(ne)})}_processMamStanzas($,X=!0,Q=!1,Z=!1){return new I.Promise((ee,te)=>{const ne=[],ae=[];if(0===$.length)ee([]);else{this._perfStart('processMamMessages','Starting to process all messages received from the MAM','color: yellow; background: black;'),this._perfStart('preProcessMamMessages','Starting to pre-process all messages received from the MAM','color: darkgreen; background: grey;');let oe='0';$.forEach((le)=>{const _e={state:{sent:!0},fromMam:!1===Q,injected:!0===Q};let ue=!1;try{ue=void 0!==le.message.timestamp}catch(pe){}if(!1==ue&&le.delay&&le.delay.$attributes.stamp){let pe=null;try{pe=new Date(le.delay.$attributes.stamp).getTime()}catch(he){console.error('Couldn\'t parse stanza timestamp to integer.')}null!==pe&&(_e.ts=pe)}const ce=this._getArchiveIdFromStanza(le);ce>oe&&(oe=ce),K._isMarkerMessage(le)?(this._stanzaResponseHandler(le.message.$attributes.id),ae.push(le)):le.message.$attributes&&'chat'===le.message.$attributes.type?ne.push(this._messageDelta(le,{},_e)):le.message.$attributes&&'groupchat'===le.message.$attributes.type?(this._stanzaResponseHandler(le.message.$attributes.id),ne.push(this._messageDelta(le,{},_e))):le.message.call&&le.message.call.$attributes&&le.message.call.$attributes.xmlns===K.NAMESPACES.INFINITY_BOT?(this._log(`Processing bot command response from the MAM with request ID '${le.message.call.$attributes['request-id']}':`,le),this._botCommandResponseHandler(le.message.call.$attributes['request-id'],le)):le.message.error&&le.message.error.$attributes&&le.message.error.$attributes.xmlns===K.NAMESPACES.INFINITY_BOT?this._botCommandResponseHandler(le.message.error.$attributes['request-id'],le):le.message.ack&&le.message.ack.$attributes&&le.message.ack.$attributes.xmlns===K.NAMESPACES.INFINITY_ACK&&this._stanzaResponseHandler(le.message.ack.$attributes['original-id'])}),this._perfEnd('preProcessMamMessages','Finished pre-processing messages from the MAM.','color: darkgreen; background: grey;'),this._perfStart('postProcessMamMessages','Start post-processing messages received from the MAM','color: lightgreen; background: grey;'),this._perfStart('addMarkersToMamMessages','Adding markers to messages','color: brown; background: #E1E1E1;');const se=[];let ie={};const de={};for(let le in ae.forEach((le)=>{const _e=K._getMarkerType(le),ue=K._getMarkerMessageId(le,_e);de[ue]||(de[ue]=[]),de[ue].push(le)}),de){const _e=de[le];let ue=null;ne.every((ce)=>{return ce._id!==le||(ue=ce,!1)}),null===ue?se.push(new I.Promise((ce)=>{this.getMessageById(le).then((pe)=>{_e.forEach((he)=>{const ge=K._getMarkerType(he),fe=K._getMarkerMessageId(he,ge),ye=this._updateMessageMarkers(he,ge,pe);!1===ye?this._setLastArchiveId(this._getArchiveIdFromStanza(he)):ne.push(ye)}),ce()}).catch(()=>{this._log(`Not found message with id '${le}', creating message placeholder...`);let pe=Object.assign({},K._messageSkeleton(),{_id:le,placeholder:!0,markable:!0,type:null});_e.forEach((he)=>{const ge=K._getMarkerType(he),fe=K._getMarkerMessageId(he,ge),ye=this._updateMessageMarkers(he,ge,pe);!1!==ye&&(pe=ye)}),ne.push(pe),ce()})})):_e.forEach((ce)=>{const pe=K._getMarkerType(ce),he=K._getMarkerMessageId(ce,pe),ge=this._updateMessageMarkers(ce,pe,ue);!1!==ge&&(ie[ue._id]=!0,ue=ge)})}I.Promise.all(se).then(()=>{if(this._log('Messages to save from the MAM:',ne),0===ne.length)ee([]);else{this._perfEnd('addMarkersToMamMessages','Finished adding markers to messages','color: brown; background: #E1E1E1;');const le=[];!0===Z&&ne.forEach((_e,ue,ce)=>le.push(this.saveMessage(_e._id,(pe)=>{if(pe._id)return ce.splice(ue,1),delete _e.state,Object.assign({},pe,_e)}))),I.Promise.all(le).then((_e)=>{const ue=ne.filter((ce)=>{return 0===_e.filter((pe)=>{return!!pe&&pe._id===ce._id}).length});this._msgDb.bulkDocs(ue).then((ce)=>{this._setLastArchiveId(oe);const pe=function(he){ee([...he,..._e].filter((ge)=>null!==ge))};0<ce.length?this._msgDb.bulkGet({docs:ce}).then((he)=>{let ge=he.results.map((fe)=>{const ye=fe.docs[0].ok;return void 0===ye?null:(!1!==X&&(null===ye.updated_at||!0===ie[ye._id]?this._dispatchEvent(K.EVENT_TYPES.NEW_MESSAGE,ye):this._dispatchEvent(K.EVENT_TYPES.MESSAGE_UPDATED,ye)),!0===this._options.autoMarkMessages&&this._markMessage(ye,K.MARKER_TYPES.RECEIVED,X),ye)});ie={},this._perfEnd('postProcessMamMessages','Finished post-processing messages received from the MAM','color: lightgreen; background: grey;'),this._perfEnd('processMamMessages','Finished processing messages received from the MAM','color: yellow; background: black;'),pe(ge)}):pe([])}).catch((ce)=>{console.error(ce),te(ce)})})}})}})}processXmlStanzaStringsFromMam($,X=!0){const Q=new DOMParser,Z=$.map((ne)=>Q.parseFromString(ne,'text/xml').childNodes[0]),ee=Z.map((ne)=>K.xmlToJson(ne)),te={};return ee.forEach((ne)=>{try{const ae=ne.message.$attributes.id,oe=ne.message.$attributes.to.split('@')[0];void 0===te[oe]&&(te[oe]=[]),te[oe].push(ae)}catch(ae){console.error('The stanza wasn\'t in the expected format:',ae)}}),this.getAllMessages().then((ne)=>{let ae=[];return 0<ne.length&&(ae=Object.keys(te).map((oe)=>{const se=ne.filter((le)=>`${oe}@${this.mucHost}`===le.recipient_id||`${oe}@${this.mucHost}`===le.sender_id);if(0!==se.length){const ie=te[oe],de=ie.filter((le)=>{return 0<se.filter((_e)=>_e._id===le).length});return 0<de.length?void 0:this.deleteMessagesByRoomName(oe)}})),I.Promise.all(ae).then(()=>{return this._processMamStanzas(ee,X,!0)})})}purgeOldMessages(){return this._isMethodReady(!0),this.purgeMessagesOlderThan(this._options.autoPurgeOldMessagesAge)}purgeMessagesOlderThan($){return this._isMethodReady(!0),this._log('\uD83D\uDDD1\uFE0F Removing messages older than: '+$),this.purgeMessagesFromBefore(this.getSyncedTimestamp(Date.now())-$)}purgeMessagesFromBefore($){return this._isMethodReady(!0),this._log('\uD83D\uDDD1\uFE0F Removing messages with timestamp before: '+new Date($).toISOString()),this.deleteMessages({ts:{$lt:$}})}purgeOldestMessagesLeavingCount($){return this._isMethodReady(!0),this._log('\uD83D\uDDD1\uFE0F Want to restrict to: '+$+' messages in DB'),this._msgDb.info().then((X)=>{this._log('\uD83D\uDDD1\uFE0F There are: '+X.doc_count+' messages in DB');const Q=X.doc_count-$;if(0<Q)return this._log('\uD83D\uDDD1\uFE0F Going to delete: '+Q+' messages from DB'),this.purgeOldestMessagesCount(Q)})}purgeOldestMessagesCount($){return this._isMethodReady(!0),this._msgDb.createIndex({index:{fields:['ts']}}).then(()=>{this._msgDb.find({selector:{},sort:['ts'],limit:$,fields:['_id']}).then((X)=>{let Q=I.Promise.resolve();return X.docs.forEach((Z)=>{Q=Q.then(()=>{return this._log('\uD83D\uDDD1\uFE0F Deleting message: '+Z._id),this.deleteMessageById(Z._id).then(()=>{this._log('\uD83D\uDDD1\uFE0F Deleted message: '+Z._id)})})}),Q})})}_setLastArchiveId($){$>this._lastArchiveId&&(this._lastArchiveId=$,localStorage.setItem(`${this._instanceId}_last_archive_id`,$))}getLastArchiveId(){return this._lastArchiveId}getLastArchiveIdForRoom($){if(this._isMethodReady(!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');return new I.Promise((X,Q)=>{const Z=`${$}@${this._options.mucHost}`;let ee='0';this.getChatHistory(Z).then((te)=>{if(0<te.length){const ne=te.sort((oe,se)=>{const ie=se.updated_at-oe.updated_at;return 0==ie?se.ts-oe.ts:ie}),ae=ne[0];ee=ae.archive_id}X(ee)}).catch(Q)})}getFirstArchiveIdForRoom($){if(this._isMethodReady(!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');return new I.Promise((X,Q)=>{const Z=`${$}@${this._options.mucHost}`;let ee='0';this.getChatHistory(Z).then((te)=>{if(0<te.length){const ne=te.sort((oe,se)=>{return oe.ts-se.ts}),ae=ne[0];ee=ae.archive_id}X(ee)}).catch(Q)})}queryMamByRoomName($,X=!0,Q=null){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');return this._perfStart('queryMamByRoomName',`- Querying the MAM for room '${$}'`,'color: green;'),new I.Promise((Z,ee)=>{const te=`${$}@${this._options.mucHost}`,ne=(ae)=>{this.queryMam(te,ae,null,null,X).then((oe)=>{this._perfEnd('queryMamByRoomName',`- Finished querying the MAM for message in room '${$}'.`,'color: green;'),Z(oe)}).catch(ee)};null===Q?this.getLastArchiveIdForRoom($).then((ae)=>{ne(ae)}).catch(Z):ne(Q)})}queryMamRoomHistoryByName($,X=null,Q=5,Z=!0,ee=null){if(this._isMethodReady(!0,!0),!this._options.mucHost)throw new Error('\'mucHost\' must be provided as an option.');return this._perfStart('queryMamRoomHistoryByName',`Querying MAM history for room '${$}'`,'color: purple;'),new I.Promise((te,ne)=>{const ae=`${$}@${this._options.mucHost}`;this._requestMessagesFromMam(ae,X,!0,null,ee,Q).then((oe)=>{this._perfEnd('queryMamRoomHistoryByName',`Finished querying the MAM history for '${Q}' messages in the '${$}' room.`,'color: purple;'),this._processMamStanzas(oe,Z,!1,!0).then(te).catch(ne)}).then(()=>{if(0<this._options.autoPurgeOldMessagesAge)return this.purgeMessagesOlderThan(this._options.autoPurgeOldMessagesAge)}).then(()=>{if(0<this._options.autoPurgeOldRetainMessageCount)return this.purgeOldestMessagesLeavingCount(this._options.autoPurgeOldRetainMessageCount)}).catch(ne)})}queryMamByRecipient($,X=!0){return this._isMethodReady(!0,!0),new I.Promise((Q,Z)=>{this.getChatHistory($).then((ee)=>{let te=null;if(0<ee.length){const ne=ee.sort((oe,se)=>{const ie=se.updated_at-oe.updated_at;return 0==ie?se.ts-oe.ts:ie}),ae=ne[0];te=ae.archive_id}this.queryMam(null,te,$,null,X).then(Q).catch(Z)}).catch(()=>console.error)})}_saveObject($,X,Q,Z,ee){if(this._destroyingDbs)return this._log(`Couldn't save '${$}' because the databases are being destroyed.`),void(ee&&ee(K.ERROR_CODES.DESTROYING_DBS));let te=null;if($===K.OBJECT_TYPES.MESSAGE?te=this._msgDb:$===K.OBJECT_TYPES.CONTACT?te=this._contactDb:$===K.OBJECT_TYPES.ROOM?te=this._roomDb:$===K.OBJECT_TYPES.PARTICIPANT?te=this._participantDb:$===K.OBJECT_TYPES.CACHE_ITEM?te=this._cacheDb:void 0,null===te)throw new Error(`The object type provided (${$}) is not valid.`);void 0===this._saveDebounce[$]&&(this._saveDebounce[$]={}),this._saveDebounce[$][X]?setTimeout(()=>{this._saveObject($,X,Q,Z,ee)},250):(this._saveDebounce[$][X]=!0,te.upsert(X,Q).then((ne)=>{void 0===ne.rev?(delete this._saveDebounce[$][X],Z&&Z(null)):te.get(X).then((ae)=>{delete this._saveDebounce[$][X],Z&&Z(ae)}).catch((ae)=>{this._onError(`Couldn't get ${$} with ID '${X}' after performing an update.`,ae),delete this._saveDebounce[$][X],ee&&ee(ae)})}).catch((ne)=>{this._log(`Couldn't update ${$} with ID '${X}'.`,ne),delete this._saveDebounce[$][X],ee&&ee(ne)}))}doDownload($){return new I.Promise((X,Q)=>{const Z=(ee)=>{H.download($,ee).then((te)=>{var ne=B.getSource('fileEncryption');N.isDevice()&&this._options.fileEncryption&&ne?ne.encrypt(function(ae){te.source=ae,X(te)},function(ae){Q(ae)},te.source):X(te)}).catch(Q)};!0===this._options.authAttachments?this._getCacheItem('user_password').then((ee)=>{return this._embellishPasswordWithAdToken(ee)}).then((ee)=>{Z({Authorization:'Basic '+btoa(this._bareJid+':'+ee)})}):Z(null)})}downloadAttachment($,X,Q=!0){return this._isMethodReady(!0,!0),new I.Promise((Z,ee)=>{if(X>$.attachments.length-1)return ee('No such attachment: '+X);const te=$.attachments[X];void 0===te.path?this.doDownload(te.get).then((ne)=>{te.path=ne.source,te.state='transferred',this.saveMessage($._id,(ae)=>{return ae.attachments[X]=te,ae}).then((ae)=>{!1!==Q&&this._dispatchEvent(K.EVENT_TYPES.MESSAGE_UPDATED,ae),Z()})}).catch(ee):Z()})}initUserDirectory(){return new I.Promise(($,X)=>{if(!0===this._userDirectory.initialised)$();else{let Q=null,Z=localStorage.getItem(`${this._instanceId}_ud_iv`);if(null==Z){Q=window.crypto.getRandomValues(new Uint8Array(16));let ee=[];for(let ne=0;16>ne;ne++)ee.push(String.fromCharCode(Q[ne]));const te=ee.join('');localStorage.setItem(`${this._instanceId}_ud_iv`,te)}else{const ee=new Uint8Array(16);for(let te=0;te<Z.length;te++)ee[te]=Z.charCodeAt(te);Q=ee}G.getEncryptionKey(this._instanceId).then((ee)=>{this._userDirectory.initialise(ee,Q,this._options.userDirectoryEncryptionBlockSize||2e3).then($).catch(X)})}})}_updateUserDirectoryTimer(){setTimeout(()=>{this.updateUserDirectory().then(($)=>{this._log(` Updated user directory: ${$}`)}).catch(($)=>{this._log(` Couldn't update user directory: ${$.message}`)})},this._options.updateUserDirectoryInterval)}updateUserDirectory(){return this.initUserDirectory().then(()=>{return this._log('\uD83D\uDC71\uD83C\uDFFC Updating user directory...'),this._getCacheItem('user_directory_hash').then(($)=>{const X={query:{$attributes:{xmlns:K.NAMESPACES.DIRECTORY}}};return $&&(X.query.$attributes.hash=$),this.sendIq(this._domain,'get',X).then((Q)=>{try{const Z=Q.iq.query.$attributes.url;return void 0===Z?(this._updateUserDirectoryTimer(),`No change since last update.`):this._getCacheItem('user_password').then((ee)=>{return this._embellishPasswordWithAdToken(ee)}).then((ee)=>{return this._userDirectory.update(this._bareJid,ee,Z).then((te)=>{return this._setCacheItem('user_directory_hash',te.hash).then(()=>{return this._log('\u2705 User directory successfully updated.'),this._updateUserDirectoryTimer(),te.msg})})})}catch(Z){return this._updateUserDirectoryTimer(),I.Promise.reject('Couldn\'t obtain directory URL from server.')}})})}).catch(($)=>{return this._getCacheItem('user_directory_hash').then((X)=>{return void 0===X?I.Promise.reject($):this._deleteCacheItem('user_directory_hash').then(()=>{return this.updateUserDirectory().then((Q)=>{return I.Promise.resolve(Q)}).catch((Q)=>{return I.Promise.reject(Q)})})})})}searchUsers($,X){return this.initUserDirectory().then(()=>{return this._userDirectory.search($,X)})}getAllUsers($=!1){return this.initUserDirectory().then(()=>{return this._userDirectory.getAllUsers($)})}getUserByJid($){return this.initUserDirectory().then(()=>{return this._userDirectory.getUserByJid($)})}downloadAttachments($,X=!0){return new I.Promise((Q,Z)=>{if(Array.isArray($.attachments)&&0<$.attachments.length){let ee=I.Promise.resolve({});$.attachments.forEach((te,ne)=>{ee=ee.then(()=>{return new I.Promise((ae,oe)=>{te.path===void 0?this.doDownload(te.get).then((se)=>{$.attachments[ne].path=se.source,$.attachments[ne].mediaType=H.getMediaTypeFromExtension(se.source),$.attachments[ne].state='transferred',ae()}).catch(oe):ae()})})}),ee.then(()=>{this.saveMessage($._id,()=>{return $}).then((te)=>{!1!==X&&this._dispatchEvent(K.EVENT_TYPES.MESSAGE_UPDATED,te),this._log(`Successfully updated message '${te._id}' with attachments.`,te),Q(te)}).catch((te)=>{this._onError(`Unable to update message '${$._id}' with attachments:`,te),Z(te)})}).catch((te)=>{this._onError('Unable to download all message attachments:',te),Z(te)})}else Q($)})}_processNewMessage($,X,Q=!0,Z=!0){return this._perfStart(`processNewMessage (${$.message.$attributes.id.split('-')[0]})`,'Starting to process a new message','color: purple;'),new I.Promise((ee,te)=>{this._setLastArchiveId(this._getArchiveIdFromStanza($)),this._messageStanzaToDbObject($,X).then((ne)=>{!1!==Z&&(null===ne.updated_at?this._dispatchEvent(K.EVENT_TYPES.NEW_MESSAGE,ne):this._dispatchEvent(K.EVENT_TYPES.MESSAGE_UPDATED,ne));const ae=this.getSyncedTimestamp(new Date().getTime())-ne.ts;return ae<this._options.autoDownloadAttachmentTime||-1==this._options.autoDownloadAttachmentTime?this.downloadAttachments(ne,Z):ne}).then((ne)=>{$.message.markable&&!0===Q&&!0===this._options.autoMarkMessages?this._markMessage(ne,K.MARKER_TYPES.RECEIVED,Z).then((ae)=>{this._perfEnd(`processNewMessage (${$.message.$attributes.id.split('-')[0]})`,'Finished processing a new message','color: purple;'),ee(ae)}).catch(te):(this._perfEnd(`processNewMessage (${$.message.$attributes.id.split('-')[0]})`,'Finished processing a new message','color: purple;'),ee(ne))}).catch(te)})}_processGroupMessage($,X,Q=!0,Z=!0){const ee=K._merge({type:'groupchat',mine:R.default.Strophe.getBareJidFromJid($.message.$attributes.from)===this._bareJid||R.default.Strophe.getResourceFromJid($.message.$attributes.from)===this.username},X);try{this._stanzaResponseHandler($.message.$attributes.id)}catch(te){this._onError(`Couldn't process stanza response handler for stanza:`,$)}return this._processNewMessage($,ee,Q,Z)}_updateMessageMarkers($,X,Q){if(!Q._id)return!1;if(!Q.markable)return!1;const Z=R.default.Strophe.getBareJidFromJid($.message.$attributes.from),ee=R.default.Strophe.getResourceFromJid($.message.$attributes.from),te=Q.state.markers.some((ae)=>{if(ae.type===X&&(ae.sender_id===Z&&ae.sender_resource===ee||ae.sender_resource===this.bareJid))return!0});if(!0===te)return!1;const ne={type:X,sender_id:Z,sender_resource:ee,recipient_id:$.message.$attributes.to,ts:this._getTimestampFromStanza($),priority:K.MARKER_PRIORITIES[X]};return Q.state.markers.push(ne),Q.state.markers=Q.state.markers.sort(function(ae,oe){return ae.priority===oe.priority?null!==oe.ts&&null!==ae.ts?oe.ts-ae.ts:void 0:ae.priority-oe.priority}),Q.state[X]=!0,!0!==Q.state.sent&&(Q.state.sent=!0),Q.updated_at=this.getSyncedTimestamp(Date.now()),Q}static _getMarkerType($){let X=null;return $.message.received?X=K.MARKER_TYPES.RECEIVED:$.message.read?X=K.MARKER_TYPES.READ:$.message.acknowledged&&(X=K.MARKER_TYPES.ACKNOWLEDGED),X}static _getMarkerMessageId($,X){return $.message[X].$attributes!==void 0&&$.message[X].$attributes.id!==void 0?$.message[X].$attributes.id:null}_processMarkerMessage($,X=!0){return new I.Promise((Q,Z)=>{this._setLastArchiveId(this._getArchiveIdFromStanza($));const ee=K._getMarkerType($);if(null!==ee){const te=K._getMarkerMessageId($,ee);if(null!==te){this._log(`Processing marker of type '${ee}' for message with ID '${te}':`,$),this._stanzaResponseHandler($.message.$attributes.id);const ne=R.default.Strophe.getBareJidFromJid($.message.$attributes.from),ae=R.default.Strophe.getResourceFromJid($.message.$attributes.from);this.saveMessage(te,(oe)=>{return this._updateMessageMarkers($,ee,oe)}).then((oe)=>{if(null!==oe){const se={message_id:oe._id,message:oe,type:ee,sender_id:ne,sender_resource:ae};!1!==X&&this._dispatchEvent(K.EVENT_TYPES.RECEIPT_RECEIVED,se),!1!==X&&this._dispatchEvent(K.EVENT_TYPES.MESSAGE_UPDATED,oe),Q(se)}else Q(null)}).catch(Z)}}})}_processErrorMessage($){return new I.Promise((X,Q)=>{const Z=$.message.$attributes&&$.message.$attributes.id?$.message.$attributes.id:null;if(null!==Z){const ee=$.message.error&&$.message.error.text&&$.message.error.text.$value?$.message.error.text.$value:`The server returned an error for stanza with ID '${Z}'.`;this._onError(ee,Object.assign({},$.message.error,{messageId:Z})),this._stanzaResponseHandler(Z,ee),this.saveMessage(Z,(te)=>{return void 0!==te._id&&(!0!==te.state.read&&!0!==te.state.received&&!0!==te.state.acknowledged?te.state.sent=!1:!0!==te.state.sent&&(te.state.sent=!0),te)}).then(()=>{X({id:Z,msg:ee})}).catch(Q)}else X()})}_processAckMessage($){return new I.Promise((X,Q)=>{if($.message.ack&&$.message.ack.$attributes&&$.message.ack.$attributes['original-id']){const Z=$.message.ack.$attributes['original-id'];this._stanzaResponseHandler(Z),this._dispatchEvent(K.EVENT_TYPES.ACK_RECEIVED,Z),this.saveMessage(Z,(ee)=>{return void 0!==ee._id&&(!0!==ee.state.sent&&(ee.state.sent=!0),ee)}).then(X).catch(Q)}else X()})}_onIq($){return $&&$.iq&&$.iq.ping&&$.iq.$attributes&&$.iq.$attributes.from&&$.iq.$attributes.id&&setTimeout(()=>{this.sendIq($.iq.$attributes.from,'result',{},void 0,$.iq.$attributes.id)},0),!0}_onStanza($){this.connected=!0,this._setStatus(R.default.Strophe.Status.CONNECTED);try{const X=K.xmlToJson($);if(this._isFilteredOut(X))return!0;if(this._log(`[1] - Processing stanza with ID '${X.message.$attributes.id}':`,X),X.message.$attributes&&'chat'===X.message.$attributes.type&&void 0!==X.message.sent&&void 0!==X.message.sent.$attributes&&X.message.sent.$attributes.xmlns===K.NAMESPACES.CARBONS&&void 0!==X.message.sent.forwarded)this._processNewMessage(X.message.sent.forwarded,{state:{sent:!0}});else if(X.message.$attributes&&'chat'===X.message.$attributes.type)this._processNewMessage(X);else if(X.message.event&&X.message.event.items){const Q=(Z)=>{K._isMarkerMessage(Z)?(this._log(`[2] - Processing stanza with ID '${X.message.$attributes.id}':`,X),this._processMarkerMessage(Z)):this._processGroupMessage(Z)};Array.isArray(X.message.event.items.item)?X.message.event.items.forEach((Z)=>{Z.message&&Z.message.$attributes&&'groupchat'===Z.message.$attributes.type?Q(Z):Z.presence&&this._onPresence(Z)}):'object'==typeof X.message.event.items.item&&X.message.event.items.item.message&&X.message.event.items.item.message.$attributes&&'groupchat'===X.message.event.items.item.message.$attributes.type?Q(X.message.event.items.item):'object'==typeof X.message.event.items.item&&X.message.event.items.item.presence&&this._onPresence(X.message.event.items.item)}else K._isMarkerMessage(X)?(this._log(`[3] - Processing stanza with ID '${X.message.$attributes.id}':`,X),this._processMarkerMessage(X)):X.message.$attributes&&'groupchat'===X.message.$attributes.type&&X.message.$attributes.id?this._processGroupMessage(X):X.message.$attributes&&'error'===X.message.$attributes.type?this._processErrorMessage(X):void 0===X.message.ack?X.message.call&&X.message.call.$attributes&&X.message.call.$attributes.xmlns===K.NAMESPACES.INFINITY_BOT?(this._log(`Processing bot command response with request ID '${X.message.call.$attributes['request-id']}':`,X),this._botCommandResponseHandler(X.message.call.$attributes['request-id'],X)):X.message.error&&X.message.error.$attributes&&X.message.error.$attributes.xmlns===K.NAMESPACES.INFINITY_BOT&&this._botCommandResponseHandler(X.message.error.$attributes['request-id'],X):this._processAckMessage(X)}catch(X){this._onError('An error occurred when processing an incoming message stanza:',X)}return!0}_isFilteredOut($){let X=!0;return 0<this._includeStanzaFilters.length&&(X=!1,this._includeStanzaFilters.some((Q)=>{try{return Q($)}catch(Z){return this._log('Include filter function failed: '+Z),this._onError('Include filter function failed: '+Z),!1}})&&(X=!0)),this._excludeStanzaFilters.some((Q)=>{try{return Q($)}catch(Z){return this._log('Exclude filter function failed: '+Z),this._onError('Exclude filter function failed: '+Z),!1}})&&(X=!1),!X}_messageIsGroupChat($){return this._options.mucHost&&$.$attributes&&'string'==typeof $.$attributes.from&&-1<$.$attributes.from.indexOf(this._options.mucHost)}_onPresence($){if($.presence!==void 0){const X=$.presence;if(X.$attributes!==void 0&&X.$attributes.from!==void 0){if('error'===X.$attributes.type)return this._onError('An error from the server was received in a presence stanza:',X),!0;const Q=R.default.Strophe.getBareJidFromJid(X.$attributes.from);if(!Q)return!0;if(Q===this._bareJid)this.setChatStatus(X.show,X.status,!1,X.metadata);else{const Z=K.getDomainFromJid(Q);this._options.mucHost===Z?this.saveParticipant(X.$attributes.from,(ee)=>{if(void 0!==ee._id)try{if(ee.show=X.show,ee.status=X.status,ee.online='unavailable'!==X.$attributes.type,ee.affiliation=X.x.item.$attributes.affiliation,ee.room_role=X.x.item.$attributes.role,ee.last_stanza=X,void 0!==X.metadata){const te=X.metadata;delete te.$attributes,ee.metadata=te}ee.updated_at=this.getSyncedTimestamp(Date.now())}catch(te){this._onError(`Presence stanza wasn't in the expected format when trying to update participant with ID '${ee._id}' and JID '${ee.jid}'.`,te)}else try{if(ee._id=X.$attributes.from,ee.jid=R.default.Strophe.getBareJidFromJid(X.x.item.$attributes.jid),ee.is_current_user=ee.jid===this._jid,ee.username=R.default.Strophe.getNodeFromJid(ee.jid),ee.room_name=R.default.Strophe.getNodeFromJid(X.$attributes.from),ee.affiliation=X.x.item.$attributes.affiliation,ee.room_role=X.x.item.$attributes.role,ee.online='unavailable'!==X.$attributes.type,ee.show=X.show,ee.status=X.status,ee.ts=this.getSyncedTimestamp(Date.now()),void 0!==X.metadata){const te=X.metadata;delete te.$attributes,ee.metadata=te}ee.updated_at=null,ee.last_stanza=X}catch(te){this._onError(`Presence stanza wasn't in the expected format when trying to create a new participant with ID '${ee._id}' and JID '${ee.jid}'.`,te)}return ee}).then((ee)=>{null===ee.updated_at?this._dispatchEvent(K.EVENT_TYPES.NEW_PARTICIPANT,ee):this._dispatchEvent(K.EVENT_TYPES.PARTICIPANT_UPDATED,ee)}).catch((ee)=>{this._onError('Couldn\'t upsert participant database.',ee)}):this._saveObject(K.OBJECT_TYPES.CONTACT,Q,(ee)=>{if(void 0!==ee&&(ee.online='unavailable'!==X.$attributes.type,void 0!==X.show&&(ee.show=X.show),void 0!==X.status&&(ee.status=X.status),void 0!==X.metadata)){const te=X.metadata;delete te.$attributes,ee.metadata=te}return ee},(ee)=>{let te=!1;X.x&&X.x.$attributes&&X.x.$attributes.xmlns&&X.x.$attributes.xmlns===K.NAMESPACES.VCARD_UPDATE&&void 0!==X.x.photo&&'string'==typeof X.x.photo&&(void 0===ee.avatarHash||ee.avatarHash!==X.x.photo)&&(te=!0,this._log('\uD83C\uDCA1 Avatar update for:',Q),this._log('\uD83C\uDCA1 New avatar hash:',X.x.photo),this.updatevCardForContact(Q).then(()=>{this._saveObject(K.OBJECT_TYPES.CONTACT,Q,(ne)=>{return ne.avatarHash=X.x.photo,ne},(ne)=>{this._dispatchEvent(K.EVENT_TYPES.PRESENCE_UPDATE,ne)},(ne)=>{this._onError('Couldn\'t update contact with vCard: ',ne)})}).catch((ne)=>{this._onError('Couldn\'t get updated vCard for contact: ',ne)})),!1==te&&this._dispatchEvent(K.EVENT_TYPES.PRESENCE_UPDATE,ee)},(ee)=>{this._onError('Couldn\'t upsert contacts database.',ee)})}}}return!0}getContactByJid($){return this._isMethodReady(!0),new I.Promise((X,Q)=>{this.findContacts({id:$}).then((Z)=>{let ee=Z[0];void 0===ee?Q('No contact found: '+$):X(ee)}).catch(Q)})}updatevCardForContact($){return this._isMethodReady(!0,!0),this._log('\uD83C\uDCA1 Updating vCard for Contact:',$),new I.Promise((X,Q)=>{this.findContacts({id:$}).then((Z)=>{let ee=Z[0];return void 0===ee?void(this._log('\uD83C\uDCA1 No contact:',$),Q('No contact found: '+$)):ee}).then(()=>{this._getvCard($).then((ee)=>{if(void 0!==ee){const te=J.VCardSimple.fromXml(ee);void 0===te?(this._log('\uD83C\uDCA1 Bad vCard:',$),Q('Bad vCard')):this._saveObject(K.OBJECT_TYPES.CONTACT,$,(ne)=>{return ne.vCard=te.toJSON(),ne},(ne)=>{this._log('\uD83C\uDCA1 vCard Updated:',$),X(ne)},(ne)=>{this._log('\uD83C\uDCA1 Couldn\'t save contact:',$),Q('Couldn\'t save contact: '+ne)})}else this._log('\uD83C\uDCA1 No vCard:',$),X(null)}).catch(Q)}).catch(Q)})}_processRoster($){return new I.Promise((X,Q)=>{if(void 0===$||void 0===$.iq||void 0===$.iq.query)X();else if(void 0!==$.iq.query.$attributes&&void 0!==$.iq.query.$attributes.ver&&this._setCacheItem('roster_version',$.iq.query.$attributes.ver).catch(Q),void 0!==$.iq.query.item){const Z=Array.isArray($.iq.query.item)?$.iq.query.item:[$.iq.query.item],ee=[];Z.forEach((te)=>{if(void 0!==te.$attributes.jid){const ne={id:te.$attributes.jid,subscription:te.$attributes.subscription,online:!1};void 0!==te.group&&('string'==typeof te.group?ne.groups=[te.group]:Array.isArray(te.group)&&(ne.groups=te.group)),ee.push(ne)}}),this._contactDb.allDocs({include_docs:!0}).then((te)=>{const ne=[];te.rows.forEach((ae)=>{let oe=ae.doc,se=null;ee.every((ie,de)=>{return ie.id!==oe.id||(se=ie,delete ee[de],!1)}),null===se?ne.push(this._contactDb.remove(oe)):(oe.subscription!==se.subscription||!K._arraysEqual(oe.groups,se.groups))&&(oe=K._merge(oe,se),this._log('MERGED CONTACT:',oe),ne.push(this._contactDb.post(oe)))}),ee.forEach((ae)=>{this._log('ADDING NEW CONTACT:',ae),ne.push(new I.Promise((oe,se)=>{this._saveObject(K.OBJECT_TYPES.CONTACT,ae.id,()=>{return ae},(ie)=>{this._log('CONTACT ADDED:',ae.id),oe(ie)},(ie)=>{this._log('CONTACT ADD FAILED:'+ae.id+': '+ie),se(ie)})}))}),I.Promise.all(ne).then(X).catch((ae)=>{this._onError('Couldn\'t merge contacts from server with locally sorted contacts.',ae),Q(ae)})})}else X()})}getvCardsForAllContacts(){return this._isMethodReady(!0,!0),this._log('\uD83C\uDCA1 Fetching all vCards...'),new I.Promise(($,X)=>{this.getContacts().then((Q)=>{const Z=[];Q.forEach((ee)=>{this._log('\uD83C\uDCA1 Fetching vCard for:',ee.id),Z.push(new I.Promise((ne)=>{this.updatevCardForContact(ee.id).then(()=>{this._log('\uD83C\uDCA1 Fetched vCard for:',ee.id),ne()}).catch(()=>{ne()})}))}),I.Promise.all(Z).then($).catch(X)})})}getOurvCard(){return this._isMethodReady(!0,!0),this._log('\uD83C\uDCA1 Fetching vCard for:',this._bareJid),new I.Promise(($,X)=>{this._getvCard(this._bareJid).then((Q)=>{if(void 0===Q||1>Q.length)return X('No vCard');const Z=J.VCardSimple.fromXml(Q);void 0===Z?(this._log('\uD83C\uDCA1 Bad vCard: ',this._bareJid),X('Bad vCard')):(this._log('\uD83C\uDCA1 Fetched vCard: ',Z.toJSON()),$(Z.toJSON()))}).catch(X)})}saveOurvCard($){return this._isMethodReady(!0,!0),this._log('\uD83C\uDCA1 Saving vCard for:',this._bareJid),new I.Promise((X,Q)=>{const Z=J.VCardSimple.fromJSON($);this._setvCard(this._bareJid,Z.toXML(!0)).then(()=>{this._log('\uD83C\uDCA1 Saved vCard for:',this._bareJid),X()}).catch(Q)})}_onError($,X){console.error($,X||''),this._dispatchEvent(K.EVENT_TYPES.ERROR,X)}_setCacheItem($,X,Q=!1){return new I.Promise((Z,ee)=>{const te=()=>{this._saveObject(K.OBJECT_TYPES.CACHE_ITEM,$,(ne)=>{return ne.value!==X&&(ne.value=X,ne.secret=!0===Q,ne)},(ne)=>{const ae=ne.value;!1===ne.secret&&(this._cache[$]=ae),Z(ne.value)},(ne)=>{ne===K.ERROR_CODES.DESTROYING_DBS?Z():(this._onError(`Couldn't set cache item '${$}' with value '${X}'.`),ee(ne))})};this._getCacheItem($).then((ne)=>{ne===X?Z(ne):te()}).catch(te)})}_getCacheItem($,X=0){return new I.Promise((Z)=>{this._cache[$]===void 0?this._cacheDb.get($).then((ee)=>{if(this._options.encryption&&!ee.hasOwnProperty('value'))++X,X===5?Z():setTimeout(()=>{this._getCacheItem($,X).then(Z)},100);else{const te=ee.value;!1===ee.secret&&(this._cache[$]=te),Z(te)}}).catch(()=>{Z()}):Z(this._cache[$])})}_deleteCacheItem($){return new I.Promise((X,Q)=>{this._cacheDb.get($).then((Z)=>{this._cacheDb.remove(Z).then(()=>{delete this._cache[$],X()}).catch(Q)}).catch(()=>{X()})})}_messageDelta($,X,Q){const Z=$.message.$attributes.from,ee=R.default.Strophe.getBareJidFromJid(Z),te=R.default.Strophe.getResourceFromJid(Z);if(void 0!==X._id)$!==X.stanza&&(X.stanza=$),void 0!==$.message.body&&$.message.body!==X.body&&(X.body=$.message.body),null===X.type&&(X.type=$.message.$attributes.type),'groupchat'===X.type&&(X.state.sent=!0),null===X.jid&&(X.jid=Z),null===X.sender_id&&(X.sender_id=ee),null===X.sender_resource&&(X.sender_resource=te),null===X.recipient_id&&(X.recipient_id=$.message.$attributes.to),void 0!==$.message.data&&$.message.data!==X.data&&(X.data=$.message.data),(null===X.ts||$.message.timestamp&&1<$.message.timestamp.length)&&(X.ts=this._getTimestampFromStanza($)),null===X.mine&&(X.mine=ee===this._bareJid),X.placeholder=!1,X.archive_id=this._getArchiveIdFromStanza($),X.updated_at=this.getSyncedTimestamp(Date.now()),X=K._merge(X,Q);else{let ne=[];void 0!==$.message.attachments&&(Array.isArray($.message.attachments)?ne=$.message.attachments:ne.push($.message.attachments));let ae={_id:$.message.$attributes.id,stanza:$,archive_id:this._getArchiveIdFromStanza($),jid:Z,sender_id:ee,sender_resource:te,recipient_id:$.message.$attributes.to,body:$.message.body||null,updated_at:null,ts:this._getTimestampFromStanza($),state:{sent:null,markers:[],received:null,read:null,acknowledged:null},data:$.message.data||{},attachments:ne,type:$.message.$attributes.type||'chat',mine:ee===this._bareJid,markable:void 0!==$.message.markable,fromMam:!1,injected:!1,placeholder:!1},oe=[];void 0!==$.message.addresses&&(Array.isArray($.message.addresses.address)?oe=$.message.addresses.address:oe.push($.message.addresses.address)),X=Object.assign({},K._messageSkeleton(),{_id:$.message.$attributes.id,stanza:$,archive_id:this._getArchiveIdFromStanza($),jid:Z,sender_id:ee,sender_resource:te,recipient_id:$.message.$attributes.to,body:$.message.body,ts:this._getTimestampFromStanza($),data:$.message.data,attachments:ne,type:$.message.$attributes.type,mine:ee===this._bareJid,markable:void 0!==$.message.markable,addresses:oe})}return $.message.$attributes&&'groupchat'===$.message.$attributes.type&&(X.type='groupchat',X.mine=R.default.Strophe.getBareJidFromJid($.message.$attributes.from)===this._bareJid||R.default.Strophe.getResourceFromJid($.message.$attributes.from)===this.username),K._merge(X,Q)}static _messageSkeleton(){return{_id:null,stanza:null,archive_id:null,jid:null,sender_id:null,sender_resource:null,recipient_id:null,body:null,updated_at:null,ts:null,state:{sent:null,markers:[],received:null,read:null,acknowledged:null},data:{},attachments:[],type:'chat',mine:null,markable:!1,fromMam:!1,placeholder:!1,injected:!1}}_messageStanzaToDbObject($,X){return new I.Promise((Q,Z)=>{if($.message!==void 0&&$.message.$attributes!==void 0)this.saveMessage($.message.$attributes.id,(ee)=>{return this._messageDelta($,ee,X)}).then(Q).catch((ee)=>{this._onError('Unable to convert message stanza to DB object.',ee),Z(ee)});else{const ee='No message part present in the stanza.';this._onError(ee),Z(ee)}})}_getTimestampFromStanza($){let X=null;if(void 0!==$.message&&void 0!==$.message.timestamp)if(Array.isArray($.message.timestamp)){const Q=$.message.timestamp.filter((Z)=>{return void 0!==Z.$attributes&&Z.$attributes.xmlns===K.NAMESPACES.CT_SERVER_TIMESTAMP});void 0!==Q[0]&&(X=parseInt(Q[0].$value))}else void 0!==$.message.timestamp.$value&&(X=parseInt($.message.timestamp.$value));return null===X&&(X=this.getSyncedTimestamp(Date.now())),X}_getArchiveIdFromStanza($){let X=null;if($.message.archived!==void 0){const Q=Array.isArray($.message.archived)?$.message.archived[0]:$.message.archived;Q.$attributes!==void 0&&Q.$attributes.id!==void 0&&(X=Q.$attributes.id)}return X}_log($,X){!0===this._options.debug&&console.debug('['+new Date().toString()+'] ',$,X||'')}getUniqueId(){return this._isMethodReady(!0,!0),this._connection.getUniqueId(`${this._instanceId}-${performance.now()}`)}_clearBotTimeout($){this._botCommandTimeouts[$]&&(this._log(`Bot command response verified, removing bot timeout for request '${$}'.`),this._botCommandTimeouts[$].cancel(),delete this._botCommandTimeouts[$])}_clearBotPromise($){this._botCommandPromises[$]&&(this._log(`Clearing bot command promise for request '${$}'.`),delete this._botCommandPromises[$])}_botCommandResponseHandler($,X){if(!this._botCommandPromises[$])return!1;if(void 0!==X.message&&void 0!==X.message.$attributes&&'error'===X.message.$attributes.type){const Q=void 0!==X.message.error&&void 0!==X.message.error.$attributes&&X.message.error.$attributes['request-id']?X.message.error.$attributes['request-id']:null;if(Q===$){this._clearBotTimeout(Q);const Z=void 0!==X.message.error&&void 0!==X.message.error.text?X.message.error.text.$value:'An unexpected error occurred';this._botCommandPromises[$].reject(Z),this._clearBotPromise($)}}else if(void 0!==X.message&&void 0!==X.message.call&&void 0!==X.message.call.$attributes&&'result'===X.message.call.$attributes.type&&X.message.call.$attributes['request-id']===$){if(this._clearBotTimeout($),void 0!==X.message.call.json&&void 0!==X.message.call.json.$value){let Q=null;try{Q=JSON.parse(X.message.call.json.$value)}catch(Z){this._onError('Couldn\'t parse JSON from bot command response:',Z),this._botCommandPromises[$].reject(Z),this._clearBotPromise($)}null!==Q&&(this._botCommandPromises[$].resolve(Q),this._clearBotPromise($))}return!1}return!0}sendBotCommand($,X,Q,Z=5e3){return this._isMethodReady(!0,!0),new I.Promise((ee,te)=>{const ne=this.getUniqueId(),ae={$attributes:{to:$,type:'normal'},call:{$attributes:{xmlns:K.NAMESPACES.INFINITY_BOT,"request-id":ne,type:'get',name:X}}};let oe=null;try{oe=JSON.stringify(Q)}catch(se){this._onError('Couldn\'t stringify JSON:',se)}null!==oe&&(ae.call.json={$attributes:{xmlns:'urn:xmpp:json:0'},$value:oe}),this._botCommandPromises[ne]={resolve:ee,reject:te},this.sendStanza(ae,!1).then(()=>{this._log(`Creating bot command timer for request '${ne}'...`),this._botCommandTimeouts[ne]=new z.default(ne,()=>{this._log(`Bot command timer finished for request '${ne}'.`),this._onError(`Didn't get a response from the bot within ${Z}ms.`,{operationName:X}),this._botCommandPromises[ne].reject('Your request took longer then expected, please try again.')},Z)}).catch((se)=>{this._onError('Couldn\'t send bot command:',se),te(se)})})}_pushHandler($){this._log('Push Received: ',$)}_getPushTokens(){return new I.Promise(($,X)=>{const Q=function(Z=null){const ee=B.getSource('PushNotification'),te=B.getSource('notification');if(!1!==ee){this._log('Registering for push notifications...');const ae=this,oe=ee.init({android:{},ios:{badge:'true',sound:'true',alert:'true'}});oe.on('registration',function(se){const ie=se.registrationId;ae._log('Registered for push:',ie),ae._setCacheItem('push_token',ie).then(()=>{$({voipToken:Z,standardToken:ie})})}),oe.on('notification',function(se){ae._pushHandler.call(ae,se)}),oe.on('error',function(se){ae._log('Error registering for push:',se),X(se)})}else if(!1!==te){let ne=null;'android'===N.getPlatformName()?ne={senderID:this._options.push.senderId}:'ios'===N.getPlatformName()&&(ne={badge:'true',sound:'true',alert:'true'}),this._log('Registering for push notifications...');const ae=this;te.registerForPush(function(oe){ae._log('Registered for push:',oe),te.on('pushReceived',function(se){ae._pushHandler(se),ae._options.push.reLoginOnPushAndroid&&!ae.connected&&ae.reLoginNow()}),ae._setCacheItem('push_token',oe).then(()=>{$({voipToken:Z,standardToken:oe})})},function(oe){ae._log('Error registering for push:',oe),X(oe)},ne)}else this._log('Could not find Push plugin'),X('Could not find Push plugin')};if(this._options.push.voip&&'ios'===N.getPlatformName()){const Z=this,ee=B.getSource('VoIPPushNotification');if(!1!==ee){const te=ee.init();te.on('registration',function(ne){Z._log('Registered for push: ',ne.deviceToken),Z._setCacheItem('push_token',ne.deviceToken).then(()=>{Q.call(Z,ne.deviceToken)})}),te.on('notification',function(ne){Z._pushHandler(ne),Z._options.push.reLoginOnPushiOS&&!Z.connected&&Z.reLoginNow()}),te.on('error',function(ne){Z._log('VOIP Push Error: '+ne)})}else this._log('Could not find VOIP Push plugin'),X('Could not find VOIP Push plugin')}else Q.call(this)})}registerForPush($){if(!N.isDevice())throw new Error('This platform does not support push notifications.');return new I.Promise((X,Q)=>{const Z={package:this._options.push.packageId,type:'ios'===N.getPlatformName()?'apns':'gcm',token:$.standardToken,installation_id:this._installId};$.voipToken&&(Z.voip_token=$.voipToken),this.sendIq(null,'set',{push:{$attributes:{xmlns:K.NAMESPACES.CT_PUSH},notification:Z}}).then((ee)=>{let te=null;try{te=ee.iq.push.notification.$attributes.jid,this._pushNodeName=ee.iq.push.notification.$attributes.node}catch(ne){this._onError('Couldn\'t enable push notifications.',ne),Q(ne)}null!==te&&this._setCacheItem('push_jid',te).then(()=>{this.enablePush().then(X).catch(Q)})}).catch((ee)=>{this._onError('Couldn\'t register for push notifications:',ee),Q(ee)})})}enablePush(){return new I.Promise(($,X)=>{this._getCacheItem('push_jid').then((Q)=>{Q===void 0?(this._onError('\'registerForPush\' must be called before \'enablePush\'.'),X()):this.sendIq(null,'set',{enable:{$attributes:{xmlns:K.NAMESPACES.PUSH,jid:Q,node:this._pushNodeName}}}).then($).catch((Z)=>{this._onError('Unable to enable push notifications:',Z),X(Z)})})})}disablePush(){return new I.Promise(($,X)=>{this._getCacheItem('push_jid').then((Q)=>{Q===void 0?$():this.sendIq(null,'set',{disable:{$attributes:{xmlns:K.NAMESPACES.PUSH,jid:Q,node:this._pushNodeName}}}).then($).catch((Z)=>{this._onError('Unable to disable push notifications:',Z),X(Z)})})})}_perfStart($,X,Q){!0!==this._options.perfLogging||(console.log(`%c[START: ${$}] ${X}`,Q),console.time($))}_perfEnd($,X,Q){!0!==this._options.perfLogging||(console.log(`%c[END: ${$}] ${X}`,Q),console.timeEnd($))}static jsonToXml($,X){return K._parseJsonNode(X,K._createElement($,X.$attributes))}static _parseJsonNode($,X){for(let Q in $){let Z=$[Q];if(0!==Q.indexOf('$')){if(Array.isArray(Z)&&0<Z.length)Z.forEach((ee)=>{let te;'string'==typeof ee?(te=K._createElement(Q,{}),te.textContent=ee):(te=K._createElement(Q,ee.$attributes),te=K._parseJsonNode(ee,te)),X.appendChild(te)});else{const ee='object'==typeof Z&&null!==Z?Z.$attributes:void 0;let te=K._createElement(Q,ee);if('object'==typeof Z&&null!==Z&&0<Object.keys(Z).length)te=K._parseJsonNode(Z,te);else if('string'==typeof Z){const ne=K.doc.createTextNode(Z);te.appendChild(ne)}X.appendChild(te)}}else if('$value'==Q){const ee=K.doc.createTextNode(Z);X.appendChild(ee)}else if('$cdata'==Q){const ee=K.doc.createCDATASection(Z);X.appendChild(ee)}}return X}static xmlToJson($){return K._parseXmlNode($,{})}static _parseXmlNode($,X){let Q={};if(void 0!==$.attributes&&0<$.attributes.length){Q.$attributes={};for(let Z=0;Z<$.attributes.length;Z++){const ee=$.attributes[Z];Q.$attributes[ee.nodeName]=ee.value}}if(0<$.childNodes.length)for(let Z=0;Z<$.childNodes.length;Z++){const ee=$.childNodes[Z];if(3===ee.nodeType)void 0===Q.$attributes?Q=ee.textContent:Q.$value=ee.textContent;else if(4===ee.nodeType)Q.$cdata=ee.textContent;else{if('\n'===Q)continue;K._parseXmlNode(ee,Q)}}return void 0!==X[$.nodeName]&&!1===Array.isArray(X[$.nodeName])&&(X[$.nodeName]=[X[$.nodeName]]),Array.isArray(X[$.nodeName])?X[$.nodeName].push(Q):X[$.nodeName]=Q,X}static _createElement($,X){null===K.doc&&(K.doc=document.implementation.createDocument('ct:xmpp:client','infinity',null));const Q=K.doc.createElement($);if(X!==void 0&&0<Object.keys(X).length)for(let Z in X)Q.setAttribute(Z,X[Z]);return Q}static _getContactFromRosterByJid($,X){let Q=null;return void 0!==X&&void 0!==X.contacts&&0<X.contacts.length&&X.contacts.forEach((Z)=>{Z.jid===$&&(Q=Z)}),Q}static _isObject($){return $&&'object'==typeof $&&!Array.isArray($)}static _merge($,...X){if(!X.length)return $;const Q=X.shift();if(K._isObject($)&&K._isObject(Q))for(const Z in Q)K._isObject(Q[Z])?($[Z]||Object.assign($,{[Z]:{}}),K._merge($[Z],Q[Z])):Object.assign($,{[Z]:Q[Z]});return K._merge($,...X)}static _arraysEqual($,X){if(!Array.isArray($)||!Array.isArray(X))return $===X;if($.length!==X.length)return!1;for(let Q=$.length;Q--;)if($[Q]!==X[Q])return!1;return!0}static _validateEventType($){return K._validateConstants(K.EVENT_TYPES,$)}static _validateChatStatus($){return K._validateConstants(K.CHAT_STATUSES,$)}static _validateConstants($,X){for(let Q in $)if($[Q]===X)return!0;return!1}static getDomainFromJid($){const X=R.default.Strophe.getBareJidFromJid($);return X.split('@')[1]}static _isMarkerMessage($){return $.message.received&&$.message.received.$attributes&&$.message.received.$attributes.xmlns===K.NAMESPACES.CHAT_MARKERS||$.message.read&&$.message.read.$attributes&&$.message.read.$attributes.xmlns===K.NAMESPACES.CHAT_MARKERS||$.message.acknowledged&&$.message.acknowledged.$attributes&&$.message.acknowledged.$attributes.xmlns===K.NAMESPACES.CHAT_MARKERS}static getNodeFromJid($){return R.default.Strophe.getNodeFromJid($)}static pickFile($={}){return H.pickFile($)}_isMethodReady($=!0,X=!1){if(!0===$&&!0!==this._initialised)throw new Error(`XMPP client has not yet been fully initialised.`);if(!0===X&&!1===this.connected)throw new Error(`An active connection is required to perform this action.`)}static isInBackground(){return G.isInBackground()}}K.doc=null,K.MARKER_TYPES={RECEIVED:'received',READ:'read',ACKNOWLEDGED:'acknowledged'},K.EVENT_TYPES={INITIALISED:'initialised',STATUS:'status',NEW_MESSAGE:'newmessage',ERROR:'error',MESSAGE_UPDATED:'messageupdated',PRESENCE_UPDATE:'presenceupdate',NEW_PARTICIPANT:'newparticipant',PARTICIPANT_UPDATED:'participantupdated',RECEIPT_RECEIVED:'receiptreceived',AUTO_RECONNECTED:'autoreconnected',DBS_DESTROYED:'dbsdestroyed',AUTO_DBS_DESTROYED:'autodbsdestroyed',ACK_RECEIVED:'ackreceived',UPLOAD_STARTED:'uploadstarted',UPLOAD_SUCCESS:'uploadsuccess',UPLOAD_FAILED:'uploadfailed'},K.CHAT_STATUSES={AWAY:'away',CHAT:'chat',DND:'dnd',XA:'xa'},K.NAMESPACES={MUC:'http://jabber.org/protocol/muc',MUC_SUB:'urn:xmpp:mucsub:0',MUC_OWNER:'http://jabber.org/protocol/muc#owner',X_DATA:'jabber:x:data',DISCO_INFO:'http://jabber.org/protocol/disco#info',DISCO_ITEMS:'http://jabber.org/protocol/disco#items',JABBER_CLIENT:'jabber:client',MAM:'urn:xmpp:mam:0',MAM_TMP:'urn:xmpp:mam:tmp',RESULT_SET_MANAGEMENT:'http://jabber.org/protocol/rsm',CHAT_MARKERS:'urn:xmpp:chat-markers:0',CT_METADATA:'ct:metadata:0',HINTS:'urn:xmpp:hints',CT_CLIENT_TIMESTAMP:'ct:client-timestamp:0',CT_SERVER_TIMESTAMP:'urn:commontime:infinity:timestamps',HTTP_UPLOAD:'urn:xmpp:http:upload',PING:'urn:xmpp:ping',CLIENT_STATE_INDICATION:'urn:xmpp:csi:0',ADDRESS:'http://jabber.org/protocol/address',VCARD_UPDATE:'vcard-temp:x:update',TIME:'urn:xmpp:time',INFINITY_BOT:'urn:commontime:infinity:api',PRIVATE_XML_STORAGE:'jabber:iq:private',CT_PRIVATE_XML_STORAGE:'ct:private-xml-data',CT_PUSH:'urn:commontime:infinity:push',PUSH:'urn:xmpp:push:0',DIRECTORY:'urn:commontime:infinity:directory',CARBONS:'urn:xmpp:carbons:2',INFINITY_MAM:'urn:commontime:infinity:mam',INFINITY_ACK:'urn:commontime:infinity:ack',SOFTWARE_VERSION:'jabber:iq:version'},K.MUC_NODES={PRESENCE:'urn:xmpp:mucsub:nodes:presence',MESSAGES:'urn:xmpp:mucsub:nodes:messages',AFFILIATIONS:'urn:xmpp:mucsub:nodes:affiliations',CONFIG:'urn:xmpp:mucsub:nodes:config',SUBJECT:'urn:xmpp:mucsub:nodes:subject',SYSTEM:'urn:xmpp:mucsub:nodes:system'},K.MARKER_PRIORITIES={received:3,read:2,acknowledged:1},K.OBJECT_TYPES={MESSAGE:'message',CONTACT:'contact',ROOM:'room',PARTICIPANT:'participant',CACHE_ITEM:'cache_item',OBJECT_URL:'object_url'},K.CLIENT_STATES={ACTIVE:'active',INACTIVE:'inactive'},K.ERROR_CODES={DESTROYING_DBS:'destroying_dbs'},E.CtXmppClient=K,window.CtXmppClient=K},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const R=window,N=window;E.getSource=function(H){if(R[H]!==void 0)return R[H];if(void 0!==R.cordova&&void 0!==R.cordova[H])return R.cordova[H];if(void 0!==R.cordova&&void 0!==R.cordova.plugins&&void 0!==R.cordova.plugins[H])return R.cordova.plugins[H];if(void 0!==R.plugins&&void 0!==R.plugins[H])return R.plugins[H];if(void 0!==navigator&&void 0!==navigator[H])return navigator[H];if(void 0!==N.require){let B=!1;try{return B=N.require(H),B}catch(z){if(!1==B||void 0===B){const W=H.replace(/\-/g,'').toLowerCase();try{return N.require('@commontimeltd/com.commontime.'+W)}catch(G){return!1}}return!1}}else return console.warn(`Plugin '${H}' is not available.`),!1}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});E.BaseEventArgs=class{constructor(){this.eventDate=new Date().getTime()}}},function(L){L.exports=skate},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(80);E.IQError=I.IQError;var R=A(81);E.NotConnectedError=R.NotConnectedError},function(L,E,A){'use strict';function I(B){return{id:B,jid:B,username:B.split('@')[0],connectionStatus:N.ConnectionStatus.Disconnected,displayName:B}}var R=this&&this.__awaiter||function(B,z,W,G){return new(W||(W=Promise))(function(J,K){function $(Z){try{Q(G.next(Z))}catch(ee){K(ee)}}function X(Z){try{Q(G['throw'](Z))}catch(ee){K(ee)}}function Q(Z){Z.done?J(Z.value):new W(function(ee){ee(Z.value)}).then($,X)}Q((G=G.apply(B,z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(1);E.UserLookup=class{constructor(B){if(!B)throw new Error('Chat Layer Component Interface not supplied');this._layer=B,this._users=new Map}populate(B=[],z=[]){return R(this,void 0,void 0,function*(){const W=new Set;B&&B.forEach((J)=>this._addFromConversation(J,W)),z&&z.forEach((J)=>R(this,void 0,void 0,function*(){return this._addFromChatEntry(J,W)}));const G=Array.from(W.keys()).map((J)=>this._processJid(J));return yield Promise.all(G),0<W.size})}getJids(){return[...this._users.keys()]}hasJid(B){return this._users.has(B)}get(B){if(!B)return null;const z=B.toLowerCase();return this._users.get(z)||null}_addFromConversation(B,z){return R(this,void 0,void 0,function*(){B.participants&&B.participants.length&&B.participants.forEach((W)=>this._addIfNew(W.jid,z)),B.preview&&this._addFromChatEntry(B.preview,z)})}_addFromChatEntry(B,z){return R(this,void 0,void 0,function*(){switch(B.type){case N.ChatEntryType.Chat:this._addIfNew(B.from,z);break;case N.ChatEntryType.Meta:const G=B;this._addIfNew(G.instigator,z),this._addIfNew(G.subject,z);}})}_processJid(B){return R(this,void 0,void 0,function*(){if(B){const z=B.toLowerCase();if(!this._users.has(z)){const W=yield this._layer.getUserByJid(z);this._users.set(z,W||I(z))}}})}_addIfNew(B,z){if(B){const W=B.toLowerCase();this.hasJid(W)||z.add(W)}}}},function(L,E,A){'use strict';var R=this&&this.__awaiter||function(H,B,z,W){return new(z||(z=Promise))(function(G,J){function K(Q){try{X(W.next(Q))}catch(Z){J(Z)}}function $(Q){try{X(W['throw'](Q))}catch(Z){J(Z)}}function X(Q){Q.done?G(Q.value):new z(function(Z){Z(Q.value)}).then(K,$)}X((W=W.apply(H,B||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(22);E.getThumbnail=function(H,B,z,W){return R(this,void 0,void 0,function*(){return new Promise((G,J)=>{const K=N.getSource('thumbnail');K&&K.makeThumbnail(($)=>{G($)},($)=>{J(`Could not create thumbnail of image. ${$}`)},H,B,z,W)})})}},function(L,E){'use strict';E.__esModule=!0,E.inherits=function(R,N){var H=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},B=Object.create(R.prototype);for(var z in H)B[z]=H[z];return B.constructor=N,N.prototype=B,N}},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(11),H=A(1),B=A(12),z=A(5),W=A(2),G=A(0),J=A(8);var K;(function(Q){Q[Q.ONLINE='Online']='ONLINE',Q[Q.OFFLINE='Offline']='OFFLINE',Q[Q.RECONNECTING='Reconnecting']='RECONNECTING'})(K||(K={}));class ${static _create(){return new N.Metadata(X,K)}static get instance(){return this._instance||(this._instance=this._create())}}$._instance=null,E.CTCLHeaderMetadata=$;class X extends B.CTCLComponent{constructor(){super(),this.setMetadata($.instance)}static get is(){return'ct-cl-header'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){this.setupConnectionStatusListener(()=>{clearTimeout(this._reconnectTimeout)})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;font-size:1em}:host .header{position:relative;display:flex;align-items:center;height:var(--header-height, 75px);padding:0 20px;background:var(--header-bg, #22b1c8);color:var(--header-text, #fff)}:host .header .left-action{flex:0 0 20px}:host .header .details{flex:1 1 auto;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;text-align:center;transition:padding 0.3s ease-out;overflow:hidden}:host .header .details .heading{font-size:1.5em}:host .header .details .sub-heading{font-weight:100}:host .header .details .status{position:absolute;bottom:0;left:50%;transform:translate(-50%, 100%);display:flex;justify-content:center;align-items:center;font-size:.833em;padding:3px 10px;border:1px solid rgba(255,255,255,0.5);border-bottom:0;border-radius:10px 10px 0 0;will-change:transform;transition:transform 0.3s ease-out}:host .header .details .status .icon{margin:0 0 0 5px}:host .header .right-action{flex:0 0 20px}:host .header.offline .details{padding:0 0 20px 0}:host .header.offline .details .status{transform:translate(-50%, 0);cursor:pointer}:host .header.offline .details .status:hover{background:rgba(255,255,255,0.1)}:host .header.disconnecting .details .status,:host .header.connecting .details .status{opacity:0.5;cursor:default}
        `}generateComponentMarkup(){const Q=['header',...this._getConnectionStatusCssClasses()],Z=J.buildStyles({backgroundColor:this.backgroundColor});return window.__CTRender('div',{class:Q.join(' '),style:Z},window.__CTRender('div',{class:'left-action'},window.__CTRender('slot',{name:'left-action'})),window.__CTRender('div',{class:'details'},window.__CTRender('div',{class:'heading'},window.__CTRender('slot',{name:'heading'})),window.__CTRender('div',{class:'sub-heading'},window.__CTRender('slot',{name:'sub-heading'})),window.__CTRender('div',{class:'status',onClick:this._onClickReconnectNow.bind(this)},window.__CTRender('div',{class:'label'},this._getConnectionStatusLabel()),window.__CTRender(W.CTIcon,{class:'icon',width:'10',height:'10',icon:z.Icons.UI.Reconnect,spin:this.connectionStatus===H.ConnectionStatus.Connecting}))),window.__CTRender('div',{class:'right-action'},window.__CTRender('slot',{name:'right-action'})))}_onClickReconnectNow(){this.connectionStatus===H.ConnectionStatus.Disconnected&&(this.connectionStatus=H.ConnectionStatus.Connecting,clearTimeout(this._reconnectTimeout),this._reconnectTimeout=setTimeout(()=>{this.layer.attemptReconnect()},500))}_getConnectionStatusCssClasses(){switch(this.connectionStatus){case H.ConnectionStatus.Disconnected:return['offline disconnected'];case H.ConnectionStatus.Disconnecting:return['offline disconnecting'];case H.ConnectionStatus.Connecting:return['offline connecting'];case H.ConnectionStatus.Connected:return['online connected'];}}_getConnectionStatusLabel(){switch(this.connectionStatus){case H.ConnectionStatus.Connected:return this.translateI18nItem(K.ONLINE);case H.ConnectionStatus.Connecting:case H.ConnectionStatus.Disconnecting:case H.ConnectionStatus.Disconnected:return this.translateI18nItem(K.OFFLINE);}}}I([G.prop({type:String,attribute:!0,default:null})],X.prototype,'backgroundColor',void 0),E.CTCLHeader=X,X.register()},function(L,E,A){'use strict';(function(I){function R(ce){return-1!==ce.indexOf('.')&&(ce=ce.split('.').pop().toLowerCase()),ue.hasOwnProperty(ce)?ue[ce].mimeType:null}function N(ce){return-1!==ce.indexOf('.')&&(ce=ce.split('.').pop().toLowerCase()),ue.hasOwnProperty(ce)?ue[ce].mediaType:null}function H(ce){const pe=Object.keys(ue).filter((he)=>ue[he].mimeType===ce)[0];return pe?ue[pe].mediaType:null}function B(ce){return ce.replace(/\\/g,'/').split('/').pop()}function z(){return new ne.Promise((ce,pe)=>{if(ae.isElectron())try{const he=se.require('electron').remote.app,ge=se.require('path'),fe=ge.sep,ye=he.getPath('userData'),Te=ye+fe+le+fe,Ce=se.require('fs');Ce.existsSync(Te)||Ce.mkdirSync(Te),ce(Te)}catch(he){pe(he)}else{const he=ae.getPlatformName(),ge=oe.getSource('file');if(!1!==ge){let fe='';if('ios'===he)fe+=ge.documentsDirectory;else if('android'===he)fe+=ge.dataDirectory;else return pe('Unsupported platform, expected Android or iOS.');ie.resolveLocalFileSystemURL(fe,function(ye){ye.getDirectory(le,{create:!0,exclusive:!1},function(Te){ce(Te.nativeURL)},pe)},pe)}else pe('No file plugin available.')}})}function $(ce){return new ne.Promise((pe)=>{const ge=new XMLHttpRequest;ge.open('GET',ce,!0),ge.responseType='blob',ge.onload=()=>{200===ge.status&&pe(ge.response)},ge.send()})}Object.defineProperty(E,'__esModule',{value:!0});const ne=A(62),ae=A(43),oe=A(22),se=window,ie=window;let de=null;const le='attachments',_e={IMAGE:'image',AUDIO:'audio',VIDEO:'video'},ue={a:{mimeType:'application/octet-stream',mediaType:null},ai:{mimeType:'application/postscript',mediaType:null},aif:{mimeType:'audio/x-aiff',mediaType:_e.AUDIO},aifc:{mimeType:'audio/x-aiff',mediaType:_e.AUDIO},aiff:{mimeType:'audio/x-aiff',mediaType:_e.AUDIO},au:{mimeType:'audio/basic',mediaType:_e.AUDIO},avi:{mimeType:'video/x-msvideo',mediaType:null},bat:{mimeType:'text/plain',mediaType:null},bin:{mimeType:'application/octet-stream',mediaType:null},bmp:{mimeType:'image/x-ms-bmp',mediaType:_e.IMAGE},c:{mimeType:'text/plain',mediaType:null},cdf:{mimeType:'application/x-cdf',mediaType:null},csh:{mimeType:'application/x-csh',mediaType:null},css:{mimeType:'text/css',mediaType:null},dll:{mimeType:'application/octet-stream',mediaType:null},doc:{mimeType:'application/msword',mediaType:null},docm:{mimeType:'application/vnd.ms-word.document.macroEnabled.12',mediaType:null},docx:{mimeType:'application/vnd.openxmlformats-officedocument.wordprocessingml.document',mediaType:null},dot:{mimeType:'application/msword',mediaType:null},dotx:{mimeType:'application/vnd.openxmlformats-officedocument.wordprocessingml.template',mediaType:null},dvi:{mimeType:'application/x-dvi',mediaType:null},eml:{mimeType:'message/rfc822',mediaType:null},eps:{mimeType:'application/postscript',mediaType:null},etx:{mimeType:'text/x-setext',mediaType:null},exe:{mimeType:'application/octet-stream',mediaType:null},gif:{mimeType:'image/gif',mediaType:_e.IMAGE},gtar:{mimeType:'application/x-gtar',mediaType:null},h:{mimeType:'text/plain',mediaType:null},hdf:{mimeType:'application/x-hdf',mediaType:null},htm:{mimeType:'text/html',mediaType:null},html:{mimeType:'text/html',mediaType:null},jpe:{mimeType:'image/jpe',mediaType:_e.IMAGE},jpeg:{mimeType:'image/jpeg',mediaType:_e.IMAGE},jpg:{mimeType:'image/jpeg',mediaType:_e.IMAGE,preferred:!0},js:{mimeType:'application/javascript',mediaType:null},json:{mimeType:'application/json',mediaType:null},ksh:{mimeType:'text/plain',mediaType:null},latex:{mimeType:'application/x-latex',mediaType:null},m1v:{mimeType:'video/mpeg',mediaType:_e.VIDEO},m4a:{mimeType:'audio/mpeg',mediaType:_e.AUDIO,preferred:!0},man:{mimeType:'application/x-troff-man',mediaType:null},me:{mimeType:'application/x-troff-me',mediaType:null},mht:{mimeType:'message/rfc822',mediaType:null},mhtml:{mimeType:'message/rfc822',mediaType:null},mif:{mimeType:'application/x-mif',mediaType:null},mov:{mimeType:'video/quicktime',mediaType:_e.VIDEO},movie:{mimeType:'video/x-sgi-movie',mediaType:_e.VIDEO},mp2:{mimeType:'audio/mpeg',mediaType:_e.AUDIO},mp3:{mimeType:'audio/mp3',mediaType:_e.AUDIO},mp4:{mimeType:'video/mp4',mediaType:_e.VIDEO},mpa:{mimeType:'video/mpeg',mediaType:_e.VIDEO},mpe:{mimeType:'video/mpeg',mediaType:_e.VIDEO},mpeg:{mimeType:'video/mpeg',mediaType:_e.VIDEO},mpg:{mimeType:'video/mpeg',mediaType:_e.VIDEO,preferred:!0},ms:{mimeType:'application/x-troff-ms',mediaType:null},nc:{mimeType:'application/x-netcdf',mediaType:null},nws:{mimeType:'message/rfc822',mediaType:null},o:{mimeType:'application/octet-stream',mediaType:null},obj:{mimeType:'application/octet-stream',mediaType:null},oda:{mimeType:'application/oda',mediaType:null},otf:{mimeType:'application/x-font-opentype',mediaType:null},pbm:{mimeType:'image/x-portable-bitmap',mediaType:_e.IMAGE},pdf:{mimeType:'application/pdf',mediaType:null},pfx:{mimeType:'application/x-pkcs12',mediaType:null},pgm:{mimeType:'image/x-portable-graymap',mediaType:_e.IMAGE},png:{mimeType:'image/png',mediaType:_e.IMAGE},pnm:{mimeType:'image/x-portable-anymap',mediaType:_e.IMAGE},po:{mimeType:'text/x-gettext-translation',mediaType:null},pot:{mimeType:'application/vnd.ms-powerpoint',mediaType:null},ppa:{mimeType:'application/vnd.ms-powerpoint',mediaType:null},ppm:{mimeType:'image/x-portable-pixmap',mediaType:_e.IMAGE},pps:{mimeType:'application/vnd.ms-powerpoint',mediaType:null},ppt:{mimeType:'application/vnd.ms-powerpoint',mediaType:null},pptm:{mimeType:'application/vnd.ms-powerpoint.presentation.macroEnabled.12',mediaType:null},pptx:{mimeType:'application/vnd.openxmlformats-officedocument.presentationml.presentation',mediaType:null},ps:{mimeType:'application/postscript',mediaType:null},pwz:{mimeType:'application/vnd.ms-powerpoint',mediaType:null},py:{mimeType:'text/x-python',mediaType:null},pyc:{mimeType:'application/x-python-code',mediaType:null},pyo:{mimeType:'application/x-python-code',mediaType:null},qt:{mimeType:'video/quicktime',mediaType:_e.VIDEO},ra:{mimeType:'audio/x-pn-realaudio',mediaType:_e.AUDIO},ram:{mimeType:'application/x-pn-realaudio',mediaType:_e.AUDIO},ras:{mimeType:'image/x-cmu-raster',mediaType:_e.IMAGE},rdf:{mimeType:'application/xml',mediaType:null},rgb:{mimeType:'image/x-rgb',mediaType:_e.IMAGE},roff:{mimeType:'application/x-troff',mediaType:null},rtx:{mimeType:'text/richtext',mediaType:null},sgm:{mimeType:'text/x-sgml',mediaType:null},sgml:{mimeType:'text/x-sgml',mediaType:null},sh:{mimeType:'application/x-sh',mediaType:null},shar:{mimeType:'application/x-shar',mediaType:null},snd:{mimeType:'audio/basic',mediaType:_e.AUDIO},so:{mimeType:'application/octet-stream',mediaType:null},src:{mimeType:'application/x-wais-source',mediaType:null},svg:{mimeType:'image/svg+xml',mediaType:_e.IMAGE},swf:{mimeType:'application/x-shockwave-flash',mediaType:null},t:{mimeType:'application/x-troff',mediaType:null},tar:{mimeType:'application/x-tar',mediaType:null},tcl:{mimeType:'application/x-tcl',mediaType:null},tex:{mimeType:'application/x-tex',mediaType:null},texi:{mimeType:'application/x-texinfo',mediaType:null},texinfo:{mimeType:'application/x-texinfo',mediaType:null},tif:{mimeType:'image/tiff',mediaType:_e.IMAGE},tiff:{mimeType:'image/tiff',mediaType:_e.IMAGE},tr:{mimeType:'application/x-troff',mediaType:null},tsv:{mimeType:'text/tab-separated-values',mediaType:null},ttf:{mimeType:'application/x-font-truetype',mediaType:null},txt:{mimeType:'text/plain',mediaType:null,preferred:!0},ustar:{mimeType:'application/x-ustar',mediaType:null},vcf:{mimeType:'text/x-vcard',mediaType:null},wav:{mimeType:'audio/x-wav',mediaType:_e.AUDIO},woff:{mimeType:'application/font-woff',mediaType:null,preferred:!0},woff2:{mimeType:'application/font-woff',mediaType:null},wsdl:{mimeType:'application/xml',mediaType:null},xbm:{mimeType:'image/x-xbitmap',mediaType:_e.IMAGE},xlb:{mimeType:'application/vnd.ms-excel',mediaType:null},xls:{mimeType:'application/vnd.ms-excel',mediaType:null},xlsm:{mimeType:'application/vnd.ms-excel.sheet.macroEnabled.12',mediaType:null},xlsx:{mimeType:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',mediaType:null},xml:{mimeType:'text/xml',mediaType:null},xpdl:{mimeType:'application/xml',mediaType:null},xpm:{mimeType:'image/x-xpixmap',mediaType:_e.IMAGE},xsl:{mimeType:'application/xml',mediaType:null},xwd:{mimeType:'image/x-xwindowdump',mediaType:_e.IMAGE},zip:{mimeType:'application/zip',mediaType:null}};E.getMimeTypeFromExtension=R,E.getMediaTypeFromExtension=N,E.getMediaTypeFromMimeType=H,E.getFileNameFromPath=B,E.getStorageLocation=z,E.upload=function(ce,pe,he,ge){return new ne.Promise((fe,ye)=>{if(null==de&&(de=ae.isElectron()?oe.getSource('@commontimeltd/com.commontime.filetransfer'):oe.getSource('FileTransfer')),!1!==de){const Te={httpMethod:'PUT',fileName:B(ce),fileKey:'file',headers:ge,mimeType:R(ce),chunkedMode:!1},Ce=new de;Ce.upload(ce,pe,(Me)=>{fe({source:ce,target:pe,response:Me.response})},ye,Te)}else console.warn('Falling back to using XHR for file uploads.'),$(ce).then((Te)=>{const Ce=new XMLHttpRequest;if(Ce.addEventListener('load',(Me)=>{fe({source:he,target:pe,response:Me})}),Ce.addEventListener('error',ye),Ce.open('PUT',pe,!0),ge)for(let Me in ge)Ce.setRequestHeader(Me,ge[Me]);Ce.send(Te)})})},E.download=function(ce,pe=null){return new ne.Promise((he,ge)=>{null===de&&(de=ae.isElectron()?oe.getSource('@commontimeltd/com.commontime.filetransfer'):oe.getSource('FileTransfer')),!1===de?he({source:ce,target:ce}):z().then((fe)=>{const ye=new de,Te=fe+Date.now()+'_'+B(ce),Ce=(ve)=>{ae.isElectron()?he({source:ve.filePath,target:ce}):ae.isDevice()?he({source:ve.nativeURL,target:ce}):(console.warn('Attachments are not currently supported on this platform.'),ge())},Me=(ve)=>{console.error(`Unable to download file '${Te}' from '${ce}':`,ve),ge(ve)};ae.isDevice()?ye.download(ce,Te,Ce,Me,!1,{headers:pe}):ye.download(ce,Te,Ce,Me,{headers:pe})}).catch(ge)})},E.getFileInfo=function(ce){return new ne.Promise((pe,he)=>{if(ae.isElectron())try{const ge=se.require('fs-plus');ge.stat(ce,(fe,ye)=>{fe?he(fe):pe({name:B(ce),path:ce,size:ye.size,type:R(ce),mediaType:N(ce)})})}catch(ge){he('Couldn\'t require \'fs-plus\' module.')}else if(ae.isDevice()){const ge=0===ce.indexOf('file://')?ce:`file://${ce}`;ie.resolveLocalFileSystemURL(ge,function(fe){fe.file(function(ye){const Te=ye.type?ye.type:R(ce);pe({name:ye.name,path:ge,size:ye.size,type:Te,mediaType:N(ce)})})},he)}else $(ce).then((ge)=>{pe({name:ce.split('/').pop(),path:ce,size:ge.size,type:ge.type,mediaType:H(ge.type)})})})},E.deleteFile=function(ce){return new ne.Promise((pe,he)=>{if(ae.isElectron())try{const ge=se.require('fs-plus'),fe=ge.existsSync(ce);fe?(ge.unlinkSync(ce),pe()):he(`File '${ce}' doesn't exist and cannot be deleted.`)}catch(ge){he(`Something went wrong while trying to delete the file '${ce}': ${ge}`)}else ae.isDevice()?ie.resolveLocalFileSystemURL(ce,(ge)=>{ge.isDirectory?he(`File path '${ce}' is a directory and cannot be deleted.`):ge.remove(pe,he)},(ge)=>{he(ge)}):pe()})},E.urlToBlob=$,E.blobToObjectUrl=function(ce){return new ne.Promise((pe)=>{pe(URL.createObjectURL(ce))})},E.deleteAttachments=function(){return new ne.Promise((ce,pe)=>{if(ae.isElectron()){const he=se.require('path'),ge=se.require('fs'),fe=se.require('electron').remote.app.getPath('userData'),ye=he.sep,Te=fe+ye+le+ye;if(!ge.existsSync(Te))return ce();ge.readdir(Te,(Ce,Me)=>{if(Ce)return pe(Ce);for(const ve of Me)ge.lstatSync(he.join(Te,ve)).isFile()&&ge.unlinkSync(he.join(Te,ve));ce()})}else if(ae.isDevice()){const he=ae.getPlatformName(),ge=oe.getSource('file');if(!1!==ge){let fe=null;'ios'===he?fe=ge.documentsDirectory:'android'===he&&(fe=ge.dataDirectory),null===fe?pe('Unsupported platform, expected Android or iOS.'):ie.resolveLocalFileSystemURL(fe,(ye)=>{ye.getDirectory(le,{create:!1,exclusive:!1},function(Te){Te.removeRecursively(ce,pe)},function(Te){1===Te.code?ce():(console.error(`Couldn't get '${le}' to delete:`,Te),pe(Te))})},function(ye){pe(ye)})}else pe('No file plugin available.')}else ce()})},E.pickFile=function(ce){return new ne.Promise((pe,he)=>{let ge=[],fe=['*'],ye='All Files';if(void 0===ce.mediaType?void 0!==ce.mimeTypes&&(ge=ce.mimeTypes,fe=Object.keys(ue).filter((Te)=>0<=ge.indexOf(ue[Te].mimeType))):(fe=Object.keys(ue).filter((Te)=>ue[Te].mediaType===ce.mediaType),ge=fe.map((Te)=>{return ue[Te].mimeType}),ye=ce.mediaType),ae.isElectron()){const Te=se.require('electron').remote.dialog;Te.showOpenDialog({properties:['openFile','multiSelections'],filters:[{name:ye,extensions:fe}]},(Ce)=>{const Me=se.require('path'),ve=se.require('fs'),Le=se.require('electron').remote.app.getPath('userData'),Ee=Me.sep,Se=Le+Ee+le+Ee;ve.existsSync(Se)||ve.mkdirSync(Se);const be=[];Ce.forEach((De)=>{be.push(new ne.Promise((Ae,Ie)=>{const Re=Me.join(Se,Date.now()+'_'+Me.basename(De)),we=(Oe)=>{console.error(`A problem occurred when trying to copy the file '${De}' to '${Re}'.`,Oe),Ie(Oe)},ke=ve.createReadStream(De);ke.on('error',we);const Ye=ve.createWriteStream(Re);Ye.on('error',we),Ye.on('close',()=>{Ae(Re)}),ke.pipe(Ye)}))}),ne.Promise.all(be).then(pe).catch(he)})}else if(ae.isDevice()){const Te=ae.getPlatformName(),Ce=oe.getSource('file');if(!1!==Ce){let Me=null;'ios'===Te?Me=Ce.documentsDirectory:'android'===Te&&(Me=Ce.dataDirectory),null===Me?he('Unsupported platform, expected Android or iOS.'):ie.resolveLocalFileSystemURL(Me,(ve)=>{ve.getDirectory(le,{create:!0,exclusive:!1},()=>{const Ee=oe.getSource('fileimporter');null===Ee?he('File importer plugin not available.'):Ee.importFile((Se)=>{if(ce.encrypt){const be=oe.getSource('fileEncryption');be||pe([Se]),be.encrypt((De)=>{pe([De])},(De)=>{he(`Could not encrypt image. ${De}`)},0===Se.indexOf('file://')?Se:`file://${Se}`)}else pe([Se])},he,void 0,ge,le)},he)},he)}else he('No file plugin available.')}else{const Te=document.createElement('input');Te.setAttribute('type','file'),Te.setAttribute('multiple','multiple'),Te.addEventListener('change',()=>{const Ce=[];for(let Me=0;Me<Te.files.length;Me++)Ce.push(URL.createObjectURL(Te.files[Me]));pe(Ce)}),Te.click()}})},E.getFileSize=function(ce){return new ne.Promise((pe,he)=>{if(ce&&-1!==ce.name.indexOf('.encrypted')){const ge=oe.getSource('fileEncryption');ge?ge.getFileSize((fe)=>{try{pe(parseInt(fe))}catch(ye){console.error('Couldn\'t convert file size to an integer.'),he(ye)}},he,ce.path):pe(ce.size)}else pe(ce.size)})},E.saveFileToDisk=function(ce,pe){return new ne.Promise((he,ge)=>{const fe=se.require('path'),ye=se.require('fs'),Te=se.require('electron').remote.app.getPath('userData'),Ce=fe.sep,Me=Te+Ce+le+Ce;ye.existsSync(Me)||ye.mkdirSync(Me);const ve=fe.join(Me,Date.now()+'_'+fe.basename(pe)),Le=(Se)=>{console.error(`A problem occurred when trying to copy the file to '${ve}'.`,Se),ge(Se)},Ee=new FileReader;Ee.readAsArrayBuffer(ce),Ee.onerror=Le,Ee.onload=()=>{try{ye.writeFileSync(ve,I(new Uint8Array(Ee.result))),he(ve)}catch(Se){Le(Se)}}})}}).call(E,A(65).Buffer)},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const B=A(22),z=A(65);E.isNumber=function(G){return!isNaN(parseFloat(G))&&isFinite(G)},E.generateGuid=function(){let G=Date.now();return window.performance&&'function'==typeof window.performance.now&&(G+=performance.now()),'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(J){const K=0|(G+16*Math.random())%16;return G=Math.floor(G/16),('x'===J?K:8|3&K).toString(16)})},E.getEncryptionKey=function(G){return new Promise((J,K)=>{const $=B.getSource('securesettings');if(!1!==$)$.getOrCreateCryptographicKey(function(Q){const ee=z.Buffer.from(function(te){let ne=[];for(let ae=0;ae<te.length;ae+=2)ne.push(parseInt(te.substr(ae,2),16));return ne}(Q));J(ee)},K,G,256);else{console.warn('Oh no! \uD83D\uDE31 Your databases are encrypted but the key couldn\'t be secured because this platform doesn\'t support secure settings.');const Q=localStorage.getItem(`${G}_key`);if(null!==Q){const Z=z.Buffer.from(JSON.parse(Q));J(Z)}else{let Z=[],ee;if(window.crypto&&window.crypto.getRandomValues){var X=new Uint8Array(32);for(window.crypto.getRandomValues(X),ee=0;32>ee;ee++)Z[ee]=X[ee]}else for(let ne=0;32>ne;ne++)Z[ne]=Math.floor(256*Math.random());localStorage.setItem(`${G}_key`,JSON.stringify(Z));const te=z.Buffer.from(Z);J(te)}}})};let W=!1;document.addEventListener('pause',()=>W=!0,!1),document.addEventListener('resume',()=>W=!1,!1),E.isInBackground=function(){return!0==W}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class R{}R.XmppChat='xmppchat',E.BaseMessageType=R;E.BaseBotCommand=class{};E.BaseIQ=class{},E.get=function(){return[]};var B=A(87);E.BaseHandler=B.BaseHandler},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(8),R=A(3),N=A(8),H='vl-l';class B{constructor(z,W,G){this.EMPTY_STYLES=I.buildStyles(),this._scrollerStyles=I.buildStyles({"overflow-y":'auto',overflowScrolling:'touch',WebkitOverflowScrolling:'touch',"will-change":'transform'}),this._host=z,this._items=W,this._config=G,this._initialized=!1,this._id=`vl_${R.generateRandomSixString()}`,this._scroller=null,this._useBlocks=G.blockSize&&0<G.blockSize,z.onRenderComplete(()=>{return this._scroller=z.shadowRoot.querySelector(`#${this._id}`),this._scroller?void(this._initialized||(N.debouncedRequestAnimationFrame(()=>this._calculateVirtualListData(!0)),this._scroller.addEventListener('scroll',()=>N.debouncedRequestAnimationFrame(()=>this._calculateVirtualListData())),this._initialized=!0)):void(this._initialized=!1)}),window.addEventListener('resize',()=>{this._useBlocks||this._calculateVirtualListData()})}get items(){return this._items}setItems(z){this._items=z,this._calculateVirtualListData(!0),this._updateHost()}render(z,W='',G=''){const J=this._data&&this._data.scrollerProps||{id:this._id,key:this._id},K=this._data&&this._data.containerProps||{},$=this._data&&!!this._data.viewportItems;return window.__CTRender('div',Object.assign({class:`virtual-list-scroller ${W}`},J),$&&window.__CTRender('div',Object.assign({class:`virtual-list-content ${G}`},K),this._data.viewportItems.map((X,Q)=>z(X.item,X.itemProps,Q))))}_calculateVirtualListData(z=!1){if(this._scroller){const W=Math.floor(this._scroller.scrollTop/this._config.itemHeight),G=parseInt(this._scroller.getAttribute(H))||null,J=this._useBlocks?Math.floor(W/this._config.blockSize):W;if(z||G!==J){const K=this._items.length;if(this._useBlocks){const $=this._config.itemHeight*this._config.blockSize,X=Math.floor(K/this._config.blockSize)+1,Q=Math.max(0,J-1),Z=Math.min(X,J+1),te=(Z-Q+1)*this._config.blockSize,ne=Q*this._config.blockSize,ae=Math.max(0,ne+te-1),se=this._items.slice(ne,ae+1);this._data=this._generateVirtualListData(se,J,Q*$)}else{const $=Math.ceil(this._scroller.clientHeight/this._config.itemHeight),X=3*$,Q=Math.max(W-X,0),Z=W+$,ee=Math.max(W-Q,0),te=Math.min(K-Z,X),ae=Q*this._config.itemHeight,oe=this._items.slice(Q,Z+1);this._data=this._generateVirtualListData(oe,J,ae)}this._updateHost(),'function'==typeof this._config.onUpdate&&this._config.onUpdate(this._data)}}}_generateVirtualListData(z,W,G){const J=this._items.length,K=J*this._config.itemHeight;return{viewportItems:this._mapToVirtualListItems(z,G),scrollerProps:{id:this._id,key:this._id,[H]:W.toString(),style:this._scrollerStyles},containerProps:{style:this._setStyles({position:'relative',height:`${K}px`})}}}_mapToVirtualListItems(z,W){return z.map((G,J)=>{const K=W+J*this._config.itemHeight;return{item:G,itemProps:{key:this._config.itemKeyGetter(G),style:this._setStyles({position:'absolute',top:0,left:0,width:'100%',height:`${this._config.itemHeight}px`,transform:`translateY(${K}px)`})}}})}_setStyles(z={}){return Object.assign({},this.EMPTY_STYLES,z)}_updateHost(){this._host.forceRedraw()}forceRecalc(){this._calculateVirtualListData(!0)}}E.VirtualList=B},function(L,E,A){'use strict';function I(Te){var Ce=Te?{v:Te}:{};return(0,N.inherits)(H,(0,R.createTokenClass)(),Ce)}E.__esModule=!0,E.AMPERSAND=E.CLOSEPAREN=E.CLOSEANGLEBRACKET=E.CLOSEBRACKET=E.CLOSEBRACE=E.OPENPAREN=E.OPENANGLEBRACKET=E.OPENBRACKET=E.OPENBRACE=E.WS=E.TLD=E.SYM=E.UNDERSCORE=E.SLASH=E.MAILTO=E.PROTOCOL=E.QUERY=E.POUND=E.PLUS=E.NUM=E.NL=E.LOCALHOST=E.PUNCTUATION=E.DOT=E.COLON=E.AT=E.DOMAIN=E.Base=void 0;var R=A(64),N=A(28),H=(0,R.createTokenClass)();H.prototype={toString:function(){return this.v+''}};var B=I(),z=I('@'),W=I(':'),G=I('.'),J=I(),K=I(),$=I('\n'),X=I(),Q=I('+'),Z=I('#'),ee=I(),te=I('mailto:'),ne=I('?'),ae=I('/'),oe=I('_'),se=I(),ie=I(),de=I(),le=I('{'),_e=I('['),ue=I('<'),ce=I('('),pe=I('}'),he=I(']'),ge=I('>'),fe=I(')'),ye=I('&');E.Base=H,E.DOMAIN=B,E.AT=z,E.COLON=W,E.DOT=G,E.PUNCTUATION=J,E.LOCALHOST=K,E.NL=$,E.NUM=X,E.PLUS=Q,E.POUND=Z,E.QUERY=ne,E.PROTOCOL=ee,E.MAILTO=te,E.SLASH=ae,E.UNDERSCORE=oe,E.SYM=se,E.TLD=ie,E.WS=de,E.OPENBRACE=le,E.OPENBRACKET=_e,E.OPENANGLEBRACKET=ue,E.OPENPAREN=ce,E.CLOSEBRACE=pe,E.CLOSEBRACKET=he,E.CLOSEANGLEBRACKET=ge,E.CLOSEPAREN=fe,E.AMPERSAND=ye},function(L){var A=function(){return this}();try{A=A||Function('return this')()||(1,eval)('this')}catch(I){'object'==typeof window&&(A=window)}L.exports=A},function(L,E,A){'use strict';var I=this&&this.__decorate||function(ee,te,ne,ae){var oe=arguments.length,se=3>oe?te:null===ae?ae=Object.getOwnPropertyDescriptor(te,ne):ae,ie;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)se=Reflect.decorate(ee,te,ne,ae);else for(var de=ee.length-1;0<=de;de--)(ie=ee[de])&&(se=(3>oe?ie(se):3<oe?ie(te,ne,se):ie(te,ne))||se);return 3<oe&&se&&Object.defineProperty(te,ne,se),se},R=this&&this.__awaiter||function(ee,te,ne,ae){return new(ne||(ne=Promise))(function(oe,se){function ie(_e){try{le(ae.next(_e))}catch(ue){se(ue)}}function de(_e){try{le(ae['throw'](_e))}catch(ue){se(ue)}}function le(_e){_e.done?oe(_e.value):new ne(function(ue){ue(_e.value)}).then(ie,de)}le((ae=ae.apply(ee,te||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(9),W=A(12),G=A(4),J=A(3),K=A(19),$=A(2);var X;(function(ee){ee[ee.ADD_CONTACTS='Add Contacts']='ADD_CONTACTS',ee[ee.CHOOSE_CONTACT='Choose contacts to add to conversation']='CHOOSE_CONTACT',ee[ee.TOTAL_CONTACTS='Total {{number}} Contacts in Conversation']='TOTAL_CONTACTS',ee[ee.TOTAL_CONTACTS_MAX='Total {{number}} Contacts in Conversation (out of {{maximum}})']='TOTAL_CONTACTS_MAX',ee[ee.SEARCH_PLACEHOLDER='Find Contacts']='SEARCH_PLACEHOLDER',ee[ee.INITIAL_MESSAGE='Find your contacts using the search bar above']='INITIAL_MESSAGE',ee[ee.NO_MATCHES='No contacts match your search']='NO_MATCHES',ee[ee.ADD='Add']='ADD'})(X||(X={}));class Q{static _create(){return new H.Metadata(Z,X)}static get instance(){return this._instance||(this._instance=this._create())}}Q._instance=null,E.CTCLAddConversationContactsMetadata=Q;class Z extends W.CTCLComponent{constructor(){super(),this.setMetadata(Q.instance)}static get is(){return'ct-cl-add-conversation-contacts'}initialize(){return R(this,void 0,void 0,function*(){return this.conversation=yield this.layer.getCurrentConversation(),this.conversation?void this.layer.setBackHandler(()=>{this._back()}):this._back()})}setupListeners(){this.setupConnectionStatusListener(),this.addListener(G.ChatEvents.ConversationParticipantsChanged,(ee)=>{this.conversation&&this.conversation.id===ee.conversation.id&&(this.conversation.participants=ee.conversation.participants,this.forceRedraw())}),this.addListener(z.BaseEvents.ConnectionStatusChange,(ee)=>{ee.status===B.ConnectionStatus.Disconnected&&(this.dismissWaitingMessage(),this._back())},{dontSuppress:!0})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;height:100%;font-size:1em}:host .contact-list{flex:1 1 auto;display:flex;flex-direction:column;height:100%}:host .contact-list .header .action{cursor:pointer}:host .contact-list .user-list{flex:1 1 auto;display:flex;flex-direction:column;overflow:auto}:host .contact-list .user-list #user-list{display:flex;flex-direction:column;flex:1}:host .contact-list .footer{flex:0 0 auto;background:var(--secondary-color, #f2f2f2);border-top:var(--secondary-border, 1px solid #ddd);display:flex;padding:10px 20px}:host .contact-list .footer .button{flex:1 1;margin:0 5px}
        `}generateComponentMarkup(){const ee=this.conversation.participants.map((ae)=>ae.jid),te=this.layer.config.behaviour.maxConversationParticipants,ne={excludeUsers:ee,allowSearch:this.allowSearch,requireSearch:this.requireSearch,searchPlaceholder:this.translateI18nItem(X.SEARCH_PLACEHOLDER),initialMessage:this.translateI18nItem(X.INITIAL_MESSAGE),noMatchesMessage:this.translateI18nItem(X.NO_MATCHES),allowSelection:!0,maxSelections:te-ee.length,onChangeSelection:(ae)=>{this.selectedParticipantCount=ae.length},onClickUser:(ae)=>{this.layer.showContactInfo(ae,null,!1)},onClickGroup:(ae)=>this.layer.showRoleUsersModal(ae)};return window.__CTRender('div',{class:'contact-list'},this._renderHeader(),window.__CTRender('div',{class:'user-list'},window.__CTRender($.CTUserList,Object.assign({id:'user-list'},ne))),this._renderFooter())}_renderHeader(){const ee=this.layer.config.behaviour.maxConversationParticipants||0,te=0===ee?this.translateI18nItem(X.TOTAL_CONTACTS):this.translateI18nItem(X.TOTAL_CONTACTS_MAX),ne=this.conversation.participants.length-1+this.selectedParticipantCount,ae=null!==this.showCountFrom&&ne>=this.showCountFrom?te.replace('{{number}}',ne.toString()).replace('{{maximum}}',(ee-1).toString()):this.translateI18nItem(X.CHOOSE_CONTACT);return window.__CTRender(K.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'left-action'},window.__CTRender($.CTIcon,{class:'action',width:'20',height:'20',icon:B.Icons.COMMON.ChevronLeft,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},this.translateI18nItem(X.ADD_CONTACTS)),window.__CTRender('div',{slot:'sub-heading'},ae))}_renderFooter(){return window.__CTRender('div',{class:'footer'},window.__CTRender($.CTButton,{type:'primary',class:'button',disabled:!this.isOnline||0===this.selectedParticipantCount,onClick:this._add.bind(this)},this.translateI18nItem(X.ADD)))}_back(){return R(this,void 0,void 0,function*(){yield this._clearSelectedUsers(),this.emitComponentEvent('go-back')})}_add(){return R(this,void 0,void 0,function*(){const ee=yield this._getSelectedUsers(),te=new Map;for(const oe of ee)oe.name?oe.users.map((se)=>te.set(se.jid.toLowerCase(),se)):te.set(oe.jid.toLowerCase(),oe);const ne=Array.from(te.keys()),ae=ne.map((oe)=>({jid:oe,role:B.ChatRole.Participant}));(yield this.layer.addParticipantsToConversation(this.conversation,ae))&&this._back()})}_getSelectedUsers(){return R(this,void 0,void 0,function*(){const ee=this.shadowRoot.querySelector('#user-list');if(!ee)return[];const te=yield ee.getSelections();return J.sortUsersByName(te)})}_clearSelectedUsers(){return R(this,void 0,void 0,function*(){const ee=this.shadowRoot.querySelector('#user-list');ee&&(yield ee.clearSelections())})}}I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],Z.prototype,'allowSearch',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],Z.prototype,'requireSearch',void 0),I([N.prop({type:N.NullableNumber,attribute:!0,default:null})],Z.prototype,'showCountFrom',void 0),I([N.prop({type:Object,attribute:!1,default:null})],Z.prototype,'conversation',void 0),I([N.prop({type:Number,attribute:!1,default:0})],Z.prototype,'selectedParticipantCount',void 0),E.CTCLAddConversationContacts=Z,Z.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(he,ge,fe,ye){var Te=arguments.length,Ce=3>Te?ge:null===ye?ye=Object.getOwnPropertyDescriptor(ge,fe):ye,Me;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Ce=Reflect.decorate(he,ge,fe,ye);else for(var ve=he.length-1;0<=ve;ve--)(Me=he[ve])&&(Ce=(3>Te?Me(Ce):3<Te?Me(ge,fe,Ce):Me(ge,fe))||Ce);return 3<Te&&Ce&&Object.defineProperty(ge,fe,Ce),Ce},R=this&&this.__awaiter||function(he,ge,fe,ye){return new(fe||(fe=Promise))(function(Te,Ce){function Me(Ee){try{Le(ye.next(Ee))}catch(Se){Ce(Se)}}function ve(Ee){try{Le(ye['throw'](Ee))}catch(Se){Ce(Se)}}function Le(Ee){Ee.done?Te(Ee.value):new fe(function(Se){Se(Ee.value)}).then(Me,ve)}Le((ye=ye.apply(he,ge||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(25),z=A(1),W=A(12),G=A(26),J=A(4),K=A(5),$=A(10),X=A(3),Q=A(8),Z=A(20),ee=A(3),te=A(19),ne=A(2),ae=A(209),oe=A(161),se=A(27),ie=A(14),de=A(48),le=A(50),_e={once:!0};var ue;(function(he){he[he.DIRECT_CONVERSATION='Direct Conversation']='DIRECT_CONVERSATION',he[he.NAMED_CONVERSATION='Named Conversation']='NAMED_CONVERSATION',he[he.SELF_CONVERSATION='Conversation with self']='SELF_CONVERSATION',he[he.CONTACTS_IN_CONVERSATION='{{number}} contact(s) in this conversation']='CONTACTS_IN_CONVERSATION',he[he.INFO='Info']='INFO',he[he.EDIT_INFO='Edit Info']='EDIT_INFO',he[he.LEAVE='Leave']='LEAVE',he[he.COMFIRM_LEAVE='Are you sure you wish to leave this conversation?']='COMFIRM_LEAVE',he[he.END='End']='END',he[he.COMFIRM_END='Are you sure you wish to end this conversation?']='COMFIRM_END',he[he.DELETE='Delete']='DELETE',he[he.DELETE_CONFIRM='Are you sure you wish to delete this conversation? This will remove all messages from your device.']='DELETE_CONFIRM',he[he.RESPONSES='View Responses']='RESPONSES',he[he.PROVISIONAL_MESSAGE='This conversation will be created when you send your first message']='PROVISIONAL_MESSAGE',he[he.SCROLL_TO_TOP_FOR_MORE='Scroll to top to fetch more']='SCROLL_TO_TOP_FOR_MORE',he[he.AT_START='At start of conversation']='AT_START',he[he.LOADING_IMAGE='loading image...']='LOADING_IMAGE',he[he.IMAGE_REFETCH='Download image']='IMAGE_REFETCH',he[he.IMAGE_ERROR='Image unable to download, press to retry']='IMAGE_ERROR',he[he.MESSAGE_PLACEHOLDER='Message']='MESSAGE_PLACEHOLDER',he[he.CONFIRM_REPLACE_IMAGE='You have already selected an image to attach. Do you want to replace this with a different image?']='CONFIRM_REPLACE_IMAGE',he[he.SEND_ERROR='Unable to send message']='SEND_ERROR',he[he.FETCH_ERROR_NOT_ONLINE='Unable to fetch messages whilst offline']='FETCH_ERROR_NOT_ONLINE'})(ue||(ue={}));class ce{static _create(){return new H.Metadata(pe,ue)}static get instance(){return this._instance||(this._instance=this._create())}}ce._instance=null,E.CTCLChatMessageListMetadata=ce;class pe extends W.CTCLComponent{constructor(){super(),this._isInitialising=!1,this._chatListScrollable=null,this._chatListFetchMore=null,this._chatScrollToBottom=null,this._messageTextbox=null,this._isInitialFetch=!0,this._rawChatEntries=[],this._processedChatEntries=[],this._batchSize=null,this._visibleChatEntryBlockSize=null,this._startIdx=null,this._endIdx=null,this._supportsOverscroll=!1,this._suppressScrollHandler=!1,this._newNotificationsCount=0,this._draft=null,this._saveDraftTimeout=null,this._pendingConversationId=null,this._pendingDraft=null,this._maxMessageLength=null,this._description=null,this._priorityDescriptionExpanded=!0,this._deferredEvents=[],this._onForeground=()=>{this.isOnline&&this.visibleChatEntries.forEach((he)=>this.layer.markChatEntryRead(he)),document.removeEventListener('pause',this._onBackground),document.addEventListener('pause',this._onBackground,_e)},this._onBackground=()=>{document.removeEventListener('resume',this._onForeground),document.addEventListener('resume',this._onForeground,_e)},this._onScroll=()=>{if(!this._suppressScrollHandler){const he=this._chatListScrollable.scrollTop,ge=this._chatListScrollable.scrollHeight,fe=this._chatListScrollable.clientHeight,ye=ge-fe;0>=he?(this._suppressScrollHandler=!0,this._stopScroll(0).then(()=>this._handleScrollAtTop())):Math.ceil(he)>=ye&&(this._suppressScrollHandler=!0,this._stopScroll(ye).then(()=>this._handleScrollAtBottom()))}},this._viewInfo=()=>R(this,void 0,void 0,function*(){yield this._saveDraft();const he=this.conversation.type===K.ConversationType.Direct;if(he&&1===this.conversation.participants.length){const ge=this.layer.getCurrentUser();this.layer.showContactInfo(ge,this.conversation,!1)}else if(he&&2===this.conversation.participants.length){const ge=this.layer.getCurrentUserJid(),fe=this.conversation.participants.find((Te)=>!X.jidsMatch(Te.jid,ge)),ye=this._userLookup.get(fe.jid);this.layer.showContactInfo(ye,this.conversation,!1)}else this.emitComponentEvent('go-info')}),this._deleteDirect=()=>R(this,void 0,void 0,function*(){if(yield this.requestConfirmation(this.translateI18nItem(ue.DELETE_CONFIRM))){const he=this._rawChatEntries[this._rawChatEntries.length-1];yield this.layer.markDirectConversationAsDeleted(this.conversation,he?he.date:0)}}),this._openResponses=()=>R(this,void 0,void 0,function*(){yield this.layer.showResponsesModal(this.conversation)}),this.setMetadata(ce.instance)}static get is(){return'ct-cl-chat-message-list'}initialize(he){const ge=(fe)=>super[fe];return R(this,void 0,void 0,function*(){return yield ge('initialize').call(this,he),this._isInitialising=!0,this._userLookup=new G.UserLookup(this.layer),this._batchSize=this.layer.config.behaviour&&this.layer.config.behaviour.chatEntriesFetchBatchSize||null,this._visibleChatEntryBlockSize=this._batchSize||10,this._maxMessageLength=this.layer.config.behaviour&&this.layer.config.behaviour.maxMessageLength||5e3,this._detectOverscrollSupport(),this.conversation=yield this.layer.getCurrentConversation(),this.conversation?this.conversation.isClosed?this._back():void(this._config=new ie.ConversationConfigReader(this.layer,this.conversation),this._draft=this.conversation.draft||null,this._updateSendButton(),this.onRenderComplete(()=>this._getDomNodes()),this.onRenderComplete(()=>this._multilineEllipsis(!1)),this.onRenderComplete(()=>this._setupScrollWatcher(),!0),this.onRenderComplete(()=>this._calcLongDescription(),!0),this.isFetchingMore=!0,this.defer(()=>R(this,void 0,void 0,function*(){yield this._refreshUserLookup(),this.forceRedraw(),this.defer(()=>R(this,void 0,void 0,function*(){this.layer.isConversationBeingPurged(this.conversation.id)||(yield this._fetchMoreChatEntries(!0)),this.defer(()=>{this._isInitialising=!1,this._deferredEvents.forEach((fe)=>this.emitEvent(fe.eventType,fe.data))})}))})),this._autoFocusMessageTextboxOnDesktop(),this.layer.setBackHandler(()=>{this._back()})):this._back()})}setupListeners(){this.addListener(J.ChatEvents.ConversationPurged,(he)=>R(this,void 0,void 0,function*(){he.conversation.id===this.conversation.id&&this._fetchMoreChatEntries()})),this.addListener(J.ChatEvents.AutoReconnected,({resumed:he})=>R(this,void 0,void 0,function*(){if(this._isInitialising)return void this._deferredEvents.push({eventType:J.ChatEvents.AutoReconnected,data:{resumed:he}});this._isInitialising=!0,yield this._resetForConversationChange(),yield this._fetchMoreChatEntries(!0),this._suppressScrollHandler=!1;const ge=yield this.layer.getCurrentConversation();ge&&ge.id===this.conversation.id&&(this.conversation.preview=this._processedChatEntries[this._processedChatEntries.length-1],this.conversation.hasUnread=!1,yield this.layer.updateConversation(this.conversation)),this.isOnline&&this.visibleChatEntries.forEach((fe)=>this.layer.markChatEntryRead(fe)),this._removeDeferredEvent(J.ChatEvents.AutoReconnected),this.defer(()=>{this._isInitialising=!1,this._deferredEvents.forEach((fe)=>this.emitEvent(fe.eventType,fe.data))})}),{dontSuppress:!0}),this.setupConnectionStatusListener(),this.addListener(J.ChatEvents.ConversationAdded,(he)=>R(this,void 0,void 0,function*(){if(this._pendingConversationId&&this._pendingConversationId===he.conversation.id){const ge=X.deepCloneObject(he.conversation);this._draft=this._pendingDraft,this._pendingDraft=null,yield this.layer.setCurrentConversation(ge)}})),this.addListener(J.ChatEvents.ConversationParticipantsChanged,(he)=>R(this,void 0,void 0,function*(){this.conversation&&this.conversation.id===he.conversation.id&&(this.conversation.participants=he.participants,yield this._refreshUserLookup(),this.forceRedraw())})),this.addListener(J.ChatEvents.ChatEntryReceived,(he)=>R(this,void 0,void 0,function*(){if(this._isInitialising)return void this._deferredEvents.push({eventType:J.ChatEvents.ChatEntryReceived,data:he});if(yield this.layer.belongsToCurrentConversation(he.chatEntry)){yield this._appendChatEntry(he.chatEntry),this.conversation=yield this.layer.getCurrentConversation(),this.conversation.hasUnread=!1;const ge={};he.chatEntry.date>this.conversation.preview.date&&(this.conversation.preview=he.chatEntry,ge.preview=he.chatEntry),yield this.layer.updateConversation(this.conversation,ge),this._calcLongDescription(),this.isOnline&&(yield this.layer.markChatEntryRead(he.chatEntry))}this._removeDeferredEvent(J.ChatEvents.ChatEntryReceived)})),this.addListener(J.ChatEvents.ChatEntryUpdated,(he)=>R(this,void 0,void 0,function*(){return this._isInitialising?void this._deferredEvents.push({eventType:J.ChatEvents.ChatEntryUpdated,data:he}):void((yield this.layer.belongsToCurrentConversation(he.chatEntry))&&he.chatEntry.type===z.ChatEntryType.Chat&&(setTimeout(()=>{this._updateChatEntry(he.chatEntry)},1e3),this._removeDeferredEvent(J.ChatEvents.ChatEntryUpdated)))})),this.addListener(J.ChatEvents.CurrentConversationChanged,()=>R(this,void 0,void 0,function*(){this._resetForConversationChange(),this.conversation=yield this.layer.getCurrentConversation();this.conversation&&(yield this._refreshUserLookup(),this.isFetchingMore=!0,this.defer(()=>R(this,void 0,void 0,function*(){yield this._fetchMoreChatEntries(),this._pendingConversationId&&this._pendingConversationId===this.conversation.id&&(this._pendingConversationId=null,(this._draft||this.media&&this.media.length)&&(this.sending=!1,this._sendMessage()))})))})),this.addListener(J.ChatEvents.ConversationDeleted,()=>{this._clearDraft(),this.emitComponentEvent('go-end')}),this.addListener(J.ChatEvents.ThumbnailLoaded,(he)=>{const ge=this._processedChatEntries.findIndex((fe)=>fe.id===he.id);-1<ge&&5>this._processedChatEntries.length-ge&&setTimeout(()=>this._scrollToBottom(!1),500)}),document.removeEventListener('pause',this._onBackground),document.addEventListener('pause',this._onBackground,_e)}_removeDeferredEvent(he){const ge=this._deferredEvents.findIndex((fe)=>fe.eventType===he);-1<ge&&this._deferredEvents.splice(ge,1)}disconnectedCallback(){super.disconnectedCallback(),this._removeMedia(!0)}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;height:736px;font-size:1em}:host .chat-message-list{position:relative;flex:1 1 auto;display:flex;flex-direction:column;height:736px;overflow-x:hidden;background-color:var(--chat-list-bg-color, #fff)}@media only screen and (min-width: 960px){:host .chat-message-list.desktop{flex-direction:row}:host .chat-message-list.desktop .description-container{flex-basis:40%;flex-direction:column;background:var(--default-bg-color-light, #F1F1F1)}:host .chat-message-list.desktop .description-container .image-thumbnail{align-items:center;width:100%;padding:20px 20px 0;flex:0 1;height:30%}:host .chat-message-list.desktop .description-container #description-text{overflow:initial !important}:host .chat-message-list.desktop .description-container .expander{display:none}}:host .chat-message-list ctcl-response-view{flex-basis:50%;flex:1}:host .chat-message-list .response-container{flex:1}:host .chat-message-list .header .action{cursor:pointer}:host .chat-message-list .audio-attachment{padding:20px;background:var(--default-bg-color-light, #F1F1F1);color:var(--default-bg-color-light-font, --default-font-color)}:host .chat-message-list .priority-description{display:flex;flex-direction:row;flex-shrink:0;background:var(--default-bg-color-light, #F1F1F1);color:var(--default-bg-color-light-font, --default-font-color)}:host .chat-message-list .priority-description .image-thumbnail{height:75px;width:75px;flex:0 0 auto}:host .chat-message-list .priority-description .description-text{font-size:1.333em;padding:15px 10px 0 25px;height:60px;margin-bottom:15px}:host .chat-message-list .priority-description .description-text.collapsed{overflow:hidden}:host .chat-message-list .priority-description .description-text:not(.collapsed){height:auto;max-height:200px;overflow-y:auto !important;text-wrap:normal;-webkit-overflow-scrolling:touch;white-space:pre-line}:host .chat-message-list .priority-description .expander{display:flex;flex-direction:column-reverse;padding:15px}:host .chat-message-list .priority-description .expander>.hidden{display:none}:host .chat-message-list .chat-history{flex:1 1 auto;position:relative;overflow:auto;-webkit-overflow-scrolling:touch}:host .chat-message-list .chat-history .fetch-more{display:flex;justify-content:center;align-items:center;text-align:center;height:80px;overflow:hidden;transition:height var(--animation-normal, .5s) ease-out;color:var(--subtle-font-color, #828688)}:host .chat-message-list .chat-history .fetch-more .error{display:flex;align-items:center}:host .chat-message-list .chat-history .fetch-more .error .icon{margin:0 5px 0 0}:host .chat-message-list .chat-history .fetch-more.no-more{height:0}:host .chat-message-list .chat-history .entry{display:flex}:host .chat-message-list .chat-history .entry.divider{justify-content:center;background:var(--light-header-bg, #f2f2f2);color:var(--light-header-text, #828688);padding:3px 15px;margin:10px 0;font-size:.833em;font-weight:600;text-transform:uppercase}:host .chat-message-list .chat-history .entry.meta{padding:10px;justify-content:center;text-align:center}:host .chat-message-list .chat-history .entry.meta .bubble{display:inline-block;background:var(--light-header-bg, #f2f2f2);color:var(--light-header-text, #828688);font-size:.833em;padding:3px 30px;margin:0 auto;border-radius:10px}:host .chat-message-list .chat-history .entry.meta .bubble .b{font-weight:700}:host .chat-message-list .chat-history .entry.meta+.meta{padding-top:0}:host .chat-message-list .chat-history .entry.chat{padding:10px 0}:host .chat-message-list .chat-history .entry.chat .chat{display:flex;flex-direction:column}:host .chat-message-list .chat-history .entry.chat .chat .bubble{position:relative;display:inline-block;padding:8px;font-size:1em;border-radius:5px}:host .chat-message-list .chat-history .entry.chat .chat .bubble .from{margin:0 0 5px 0}:host .chat-message-list .chat-history .entry.chat .chat .bubble .content{word-break:break-word;white-space:pre-line;word-wrap:break-word}:host .chat-message-list .chat-history .entry.chat .chat .bubble .content a{color:inherit}:host .chat-message-list .chat-history .entry.chat .chat .bubble.emojis-only .content{font-size:36px;line-height:1em}:host .chat-message-list .chat-history .entry.chat .chat .bubble:after{content:"";display:block;position:absolute;top:12px;width:0;height:0}:host .chat-message-list .chat-history .entry.chat .chat .meta{display:flex;font-size:.833em;font-weight:600;padding:2px 5px;color:var(--subtle-font-color, #828688)}:host .chat-message-list .chat-history .entry.chat .chat .meta .chat-status{margin:0 3px 0 0}:host .chat-message-list .chat-history .entry.chat.sent{justify-content:flex-end}:host .chat-message-list .chat-history .entry.chat.sent .chat{margin:0 15px 0 50px;align-items:flex-end}:host .chat-message-list .chat-history .entry.chat.sent .chat .bubble{background:var(--chat-message-bubble-sent-bg, #22b1c8);color:var(--chat-message-bubble-sent-text, #fff)}:host .chat-message-list .chat-history .entry.chat.sent .chat .bubble:after{right:0;margin:0 -12px 0 0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:15px solid var(--chat-message-bubble-sent-bg, #22b1c8)}:host .chat-message-list .chat-history .entry.chat.sent .meta{justify-content:flex-end;align-items:center}:host .chat-message-list .chat-history .entry.chat.received{justify-content:flex-start}:host .chat-message-list .chat-history .entry.chat.received .chat{margin:0 50px 0 15px}:host .chat-message-list .chat-history .entry.chat.received .chat .bubble{background:var(--chat-message-bubble-received-bg, #ebebeb);color:var(--chat-message-bubble-received-text, #212121)}:host .chat-message-list .chat-history .entry.chat.received .chat .bubble .from{color:var(--chat-message-bubble-received-from, #22b1c8)}:host .chat-message-list .chat-history .entry.chat.received .chat .bubble:after{left:0;margin:0 0 0 -12px;border-top:5px solid transparent;border-bottom:5px solid transparent;border-right:15px solid var(--chat-message-bubble-received-bg, #ebebeb)}:host .chat-message-list .chat-history.stop-scroll{overflow:hidden}:host .chat-message-list .chat-scroll-to-bottom{position:absolute;right:0;bottom:65px;display:flex;align-items:center;padding:3px;background:#ffffff;border:var(--secondary-border, #f2f2f2);border-width:1px 0 1px 1px;border-radius:50px 0 0 50px;transform:translateX(100%);cursor:pointer}:host .chat-message-list .chat-scroll-to-bottom .icon{width:34px;height:34px;display:flex;justify-content:center;align-items:center;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border:1px solid var(--primary-font-color, #fff);border-radius:50%}:host .chat-message-list .chat-scroll-to-bottom .number{margin:0 3px;color:var(--primary-color, #22b1c8);font-size:.833em;font-weight:600}:host .chat-message-list .chat-scroll-to-bottom.animate{transition:transform 0.3s ease-out}:host .chat-message-list .chat-scroll-to-bottom.visible{transform:translateX(0)}:host .chat-message-list .pager-ui{background:var(--default-bg-color-light, #F1F1F1);color:var(--default-bg-color-light-font, --default-font-color);flex:1;display:flex;flex-direction:column}:host .chat-message-list .pager-ui .image-thumbnail{padding:20px 20px 0;display:flex;height:25vh;width:50%;align-self:center}:host .chat-message-list .pager-ui .description-text{font-size:1.333em;padding:20px 10px 0 25px;margin-bottom:auto}:host .chat-message-list .pager-ui .meta{display:flex;padding:2px 5px;background:var(--light-header-bg, #ebebeb);color:var(--light-header-text, #828688);padding:3px 30px;margin:0 15% 40px;border-radius:10px;justify-content:center}:host .chat-message-list .pager-ui .meta span{text-align:center}:host .chat-message-list .footer{flex:none;display:flex;align-items:flex-end;padding:10px;background:var(--secondary-color, #f2f2f2);border-top:var(--secondary-border, 1px solid #ddd)}:host .chat-message-list .footer .action{display:flex;justify-content:center;align-items:center;flex:none;width:32px;height:32px;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border-radius:50%;cursor:pointer}:host .chat-message-list .footer .action.disabled{background:var(--subtle-font-color, #828688);cursor:default}:host .chat-message-list .footer .textbox{position:relative;flex:1 1 auto;margin:0 5px;background:transparent}:host .chat-message-list .footer .textbox .media{display:flex;flex-direction:row;justify-content:center;padding:7px 10px;border-bottom:var(--secondary-border, 1px solid #ddd)}:host .chat-message-list .footer .textbox .media .media-item{position:relative}:host .chat-message-list .footer .textbox .media .media-item .media-image{max-height:75px;display:block}:host .chat-message-list .footer .textbox .media .media-item .remove{position:absolute;top:5px;right:5px;color:#ffffff;background:#212121;border-radius:50%;cursor:pointer}:host .chat-message-list .footer .textbox .error{position:absolute;bottom:8px;right:5px;color:var(--conversation-has-error-color, #d93247)}:host .chat-message-list .footer .textbox.disabled{background:var(--secondary-color, #f2f2f2)}
        `}generateComponentMarkup(){const he=this.conversation.participants.find((ge)=>X.jidsMatch(ge.jid,this.layer.getCurrentUserJid()));return![z.ChatRole.Owner].includes(he.role)&&this._config.usePagerUI?window.__CTRender('div',{class:'chat-message-list'},this._renderHeader(),this._renderPagerUI()):window.__CTRender('div',{class:'chat-message-list'},this._renderHeader(),window.__CTRender('div',{class:'chat-message-list desktop'},(this.conversation.attachments&&this.conversation.attachments.length||this.conversation.description)&&this._renderPriorityDescription(),this._config.chatAvailable?this._renderChatEntries():window.__CTRender(le.CTCLResponseView,{conversation:this.conversation})),this._config.chatAvailable&&this._renderScrollToBottom(),this._renderFooter())}_renderHeader(){let he='',ge=this._config.descriptionAtTop;if(!!this._config.namedSettings)he=this.conversation.subject||this._config.name;else if(1===this.conversation.participants.length){const ye=this.layer.getCurrentUser();he=X.formatUserName(ye,X.NameFormat.PREFIX_FIRST_LAST),ge=this.translateI18nItem(ue.SELF_CONVERSATION)}else if(2===this.conversation.participants.length){const ye=this.layer.getCurrentUserJid(),Te=this.conversation.participants.find((Me)=>!X.jidsMatch(Me.jid,ye)),Ce=this._userLookup.get(Te.jid);he=X.formatUserName(Ce,X.NameFormat.PREFIX_FIRST_LAST)||' ',ge=this.translateI18nItem(ue.DIRECT_CONVERSATION)}else 2<this.conversation.participants.length&&(he=this.translateI18nItem(ue.DIRECT_CONVERSATION),ge=this.translateI18nItem(ue.CONTACTS_IN_CONVERSATION).replace('{{number}}',(this.conversation.participants.length-1).toString()));const fe=this.conversation.isProvisional||this.conversation.hideBefore?z.Icons.COMMON.CircleCross:z.Icons.COMMON.ChevronLeft;return window.__CTRender(te.CTCLHeader,{class:'header',backgroundColor:this._config.colorCode},window.__CTRender('div',{slot:'left-action'},window.__CTRender(ne.CTIcon,{class:'action',width:'20',height:'20',icon:fe,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},he),window.__CTRender('div',{slot:'sub-heading'},ge),window.__CTRender('div',{slot:'right-action'},this._renderRightAction()))}_renderRightAction(){return this.conversation.type===K.ConversationType.Direct?this._renderInfo():this._renderMenu()}_renderInfo(){if(1===this.conversation.participants.length)return null;const he=[new ne.MenuItem(this.translateI18nItem(ue.INFO),this._viewInfo)];return this.conversation.hideBefore?window.__CTRender(ne.CTMenu,{menuItems:he}):((!this.conversation.isProvisional||0===this.conversation.hideBefore)&&this._config.participantCanDelete&&he.push(new ne.MenuItem(this.translateI18nItem(ue.DELETE),this._deleteDirect)),0<he.length?window.__CTRender(ne.CTMenu,{menuItems:he}):null)}_renderMenu(){const he=this.layer.getCurrentUserJid(),ge=this.conversation.participants.find((Me)=>X.jidsMatch(Me.jid,he));if(!ge)return null;const fe=[z.ChatRole.Owner].includes(ge.role)&&this._config.ownerCanEditAfterSend,ye=this._config.participantCanLeave,Te=[z.ChatRole.Owner].includes(ge.role)&&this._config.ownerCanCloseEarly,Ce=[];return fe?Ce.push(new ne.MenuItem(this.translateI18nItem(ue.EDIT_INFO),this._editInfo.bind(this))):Ce.push(new ne.MenuItem(this.translateI18nItem(ue.INFO),this._viewInfo)),this._config.alert&&[z.ChatRole.Owner].includes(ge.role)&&this._config.chatAvailable&&Ce.push(new ne.MenuItem(this.translateI18nItem(ue.RESPONSES),this._openResponses,!1)),ye&&Ce.push(new ne.MenuItem(this.translateI18nItem(ue.LEAVE),this._leave.bind(this),!this.isOnline)),Te&&Ce.push(new ne.MenuItem(this.translateI18nItem(ue.END),this._end.bind(this),!this.isOnline)),0<Ce.length?window.__CTRender(ne.CTMenu,{menuItems:Ce}):null}_renderChatEntries(){const he=this._processedChatEntries[this._processedChatEntries.length-1],ge=he&&he.id||'';return window.__CTRender('div',{id:'chat-history',class:'chat-history'},this.conversation.isProvisional&&this._renderProvisionalMessage(),!this.conversation.isProvisional&&this.mightHaveMore&&this._renderFetchMore(),!this.conversation.isProvisional&&this.visibleChatEntries.map((fe)=>{const ye=fe.id===ge;return this._renderEntry(fe,ye)}))}_renderFetchMore(){const he=['fetch-more'];return this.isFetchingMore&&he.push('fetching'),this.noMoreToFetch&&he.push('no-more'),window.__CTRender('div',{id:'fetch-more',key:'fetch-more',class:he.join(' ')},!!this.fetchError&&window.__CTRender('div',{class:'error'},window.__CTRender(ne.CTIcon,{class:'icon',width:'16',height:'16',icon:z.Icons.COMMON.AlertWarning}),this.fetchError),!this.fetchError&&!this.noMoreToFetch&&!this.isFetchingMore&&this.translateI18nItem(ue.SCROLL_TO_TOP_FOR_MORE),this.isFetchingMore&&window.__CTRender(ne.CTIcon,{width:'16',height:'16',icon:z.Icons.COMMON.LoadingSpinner,spin:!0}),this.noMoreToFetch&&this.translateI18nItem(ue.AT_START))}_renderProvisionalMessage(){return window.__CTRender('div',{class:'entry meta'},window.__CTRender('div',{class:'bubble'},this.translateI18nItem(ue.PROVISIONAL_MESSAGE)))}_renderEntry(he,ge){const fe=['entry',he.type.toString()];he.type===z.ChatEntryType.Chat&&fe.push(he.mine?'sent':'received');const ye=this._generateDomIdFromEntryId(he.id);return window.__CTRender('div',{id:ye,key:he.id,class:fe.join(' ')},he.type===z.ChatEntryType.Meta&&this._renderMetaMessage(he),he.type===z.ChatEntryType.Chat&&this._renderChatMessage(he,ge),he.type===z.ChatEntryType.Divider&&this._renderDivider(he))}_renderDivider(he){return window.__CTRender('span',null,X.getFriendlyDate(he.date,this))}_renderChatMessage(he,ge){const fe=['bubble'];this._isOnlyEmojis(he.body)&&fe.push('emojis-only');const ye=this._userLookup.get(he.from);return window.__CTRender('div',{class:'chat'},window.__CTRender('div',{class:fe.join(' ')},!1===he.mine&&window.__CTRender('div',{class:'from'},X.formatUserName(ye,X.NameFormat.PREFIX_FIRST_LAST)||he.from),he.attachments&&0<he.attachments.length&&this._renderMedia(he,he.attachments[0],ge),'string'==typeof he.body&&0<he.body.length&&window.__CTRender('div',{class:'content'},this.renderHtml(Q.linkifyText(he.body.trim()),this._generateDomIdFromEntryId(he.id)))),window.__CTRender('div',{class:'meta'},window.__CTRender('div',{class:'chat-status'},this._renderChatMessageStatus(he)),window.__CTRender('div',{class:'chat-time'},window.__CTRender('span',{class:'hour-min'},X.getFriendlyTime(he.date)))))}_renderChatMessageStatus(he){if(!this._shouldUseChatMarkers())return null;if(!he.mine)return null;const ge=he.receivedBy&&0<he.receivedBy.length,fe=he.readBy&&0<he.readBy.length;return fe?window.__CTRender(ne.CTIcon,{width:'10',height:'10',icon:z.Icons.COMMON.Tick}):ge?window.__CTRender(ne.CTIcon,{width:'10',height:'10',icon:z.Icons.COMMON.TickHollow}):null}_renderMetaMessage(he){const ge=this.layer.getCurrentUserJid(),fe=this.conversation.participants.find((Te)=>X.jidsMatch(Te.jid,ge));if(![z.ChatRole.Owner].includes(fe.role)&&!1===this._config.participantAlertResponsesVisible&&he.instigator!==ge&&he.action===K.ChatMetaActivityType.ACK)return null;const ye=$.getChatMetaActivitySummaryText(he,this._userLookup,ge,this,!0);return window.__CTRender('div',{class:'bubble'},this.renderHtml(ye,this._generateDomIdFromEntryId(he.id)))}_renderMedia(he,ge,fe){return window.__CTRender('div',null,window.__CTRender(oe.CTCLThumbnail,{chatMessage:he,attachment:ge,isLastEntry:fe}))}_renderScrollToBottom(){return this.conversation?!0===this.conversation.isProvisional?null:0===this._rawChatEntries.length?null:(this.onRenderComplete(()=>{this._chatScrollToBottom&&this._chatScrollToBottom.classList.add('animate')},!0),window.__CTRender('div',{id:'chat-scroll-to-bottom',class:'chat-scroll-to-bottom',onClick:()=>this._scrollToBottom(!0)},window.__CTRender('div',{class:'icon'},window.__CTRender(ne.CTIcon,{icon:K.Icons.UI.ScrollToBottom,width:16,height:16})),window.__CTRender('div',{class:'number'},this._newNotificationsCount))):null}_multilineEllipsis(he){this._description&&ae.clamp(this._description,{clamp:he})}_calcLongDescription(){this._description&&(this._description.classList.remove('collapsed'),this.hasLongDescription=60<this._description.clientHeight,this.forceRedraw())}_renderPriorityDescription(){const he=this.conversation.attachments.find((fe)=>fe.type===K.SupportedAttachmentType.AUDIO),ge=this.conversation.attachments.find((fe)=>fe.type===K.SupportedAttachmentType.IMAGE);return window.__CTRender('div',{class:'description-container'},he&&window.__CTRender('div',{class:'audio-attachment'},window.__CTRender(de.CTCLAttachmentHandler,{uri:he.local||he.path,type:K.SupportedAttachmentType.AUDIO,conversationId:this.conversation.id,preventRemoteStart:!0})),window.__CTRender('div',{class:'priority-description'},ge&&window.__CTRender('div',{class:'image-thumbnail'},window.__CTRender(de.CTCLAttachmentHandler,{uri:ge.local||ge.path,type:K.SupportedAttachmentType.IMAGE,allowOpenImageInFullScreen:this._config.allowOpenInFullScreen,conversationId:this.conversation.id})),window.__CTRender('div',{id:'description-text',class:'description-text'},this.conversation.description),this.hasLongDescription&&window.__CTRender('div',{class:'expander'},window.__CTRender(ne.CTIcon,{id:'priority-description-collapsed-icon',class:'hidden',width:'16',height:'16',icon:z.Icons.COMMON.ChevronDown,onClick:()=>this._togglePriorityDescriptionExpansion()}),window.__CTRender(ne.CTIcon,{id:'priority-description-expanded-icon',width:'16',height:'16',icon:z.Icons.COMMON.ChevronUp,onClick:()=>this._togglePriorityDescriptionExpansion()}))))}_renderFooter(){if(this.conversation.disallowReply||!1===this._config.chatAvailable)return null;const he=this._draft&&this._draft.body||'',ge=this._draft&&!0===this._draft.error,fe=['action','attach'],ye=['textbox'],Te=['action','send'];(this.sendButtonDisabled||!this.isOnline)&&Te.push('disabled'),this.sending&&(fe.push('disabled'),ye.push('disabled'));const Ce=ge||this.sendError;return window.__CTRender('div',{class:'footer'},this._config.canSendAttachmentsWithinConversation&&window.__CTRender('div',{class:fe.join(' '),onClick:this._attachMedia.bind(this)},window.__CTRender(ne.CTIcon,{width:'16',height:'16',icon:K.Icons.UI.Attachment})),window.__CTRender('div',{class:ye.join(' ')},this.media&&0<this.media.length&&window.__CTRender('div',{class:'media'},this.media.map((Me)=>this._renderDraftMedia(Me))),window.__CTRender(ne.CTGrowingTextbox,{id:'message',key:'message',value:he,placeholder:this.translateI18nItem(ue.MESSAGE_PLACEHOLDER),maxHeight:200,maxLength:this._maxMessageLength,transparent:!0,disabled:this.sending,onFocus:this._onFocusMessage.bind(this),onChange:this._onMessageChanged.bind(this),onSubmit:this._sendMessage.bind(this)}),Ce&&window.__CTRender('div',{class:'error'},window.__CTRender(ne.CTIcon,{width:'16',height:'16',icon:K.Icons.UI.Error}))),window.__CTRender('div',{class:Te.join(' '),onClick:this._sendMessage.bind(this)},!this.sending&&window.__CTRender(ne.CTIcon,{width:'16',height:'16',icon:K.Icons.UI.SendMessage}),this.sending&&window.__CTRender(ne.CTIcon,{width:'16',height:'16',icon:z.Icons.COMMON.LoadingSpinner,spin:!0})))}_renderDraftMedia(he){const ge=this._getDraftAttachmentSrc(he);return window.__CTRender('div',{class:'media-item'},window.__CTRender('img',{class:'media-image',src:ge}),!this.sending&&window.__CTRender('div',{class:'remove'},window.__CTRender(ne.CTIcon,{width:'16',height:'16',icon:z.Icons.COMMON.CircleCross,onClick:(fe)=>this._removeMediaItem(fe)})))}_renderPagerUI(){const he=this.conversation.attachments.find((ye)=>ye.type===K.SupportedAttachmentType.AUDIO),ge=this.conversation.attachments.find((ye)=>ye.type===K.SupportedAttachmentType.IMAGE),fe=this.conversation.acknowledgements.find((ye)=>ye.jid===this.layer.getCurrentUserJid());return window.__CTRender('div',{class:'pager-ui'},he&&window.__CTRender('div',{class:'audio-attachment'},window.__CTRender(de.CTCLAttachmentHandler,{uri:he.local||he.path,type:K.SupportedAttachmentType.AUDIO,conversationId:this.conversation.id,preventRemoteStart:!0})),ge&&window.__CTRender('div',{class:'image-thumbnail'},window.__CTRender(de.CTCLAttachmentHandler,{uri:ge.local||he.path,type:K.SupportedAttachmentType.IMAGE,allowOpenImageInFullScreen:this._config.allowOpenInFullScreen,conversationId:this.conversation.id})),window.__CTRender('div',{id:'description-text',class:'description-text'},this.conversation.description),fe&&window.__CTRender('div',{class:'meta'},window.__CTRender('span',null,'You responded with: ',window.__CTRender('strong',null,fe.value),' at ',window.__CTRender('strong',{class:'hour-min'},X.getFriendlyTime(parseInt(''+fe.ts))))))}_onMessageChanged(){return R(this,void 0,void 0,function*(){this._updateDraft(),this._updateSendButton()})}_onFocusMessage(){return R(this,void 0,void 0,function*(){this.sendError=!1,ee.isAndroid()&&this._chatListScrollable.scrollTop>this._chatListScrollable.scrollHeight/2&&setTimeout(()=>this._scrollToBottom(!0),500),this._updateDraft()})}_removeMediaItem(he){he.stopPropagation(),this._removeMedia(!0)}_sendMessage(){return R(this,void 0,void 0,function*(){if(this.isOnline&&!this.sending&&!this.sendButtonDisabled&&this._messageTextbox){this.sendError=!1,this.sending=!0;try{if(this.conversation.isProvisional)this._pendingConversationId=yield this.layer.createConversationFromProvisional(this.conversation),this._pendingDraft=this._draft;else{const he=this._draft&&this._draft.body?this._draft.body:this._messageTextbox.getValue(),ge=this.media.length&&this.media[0].path||null,ye=this._shouldUseChatMarkers(),Te=yield this.layer.sendConversationMessage(this.conversation,he,ge&&[ge]||[],ye);this._appendChatEntry(Te,!0),this._messageTextbox.clear(),yield this._removeMedia(!1),this._clearDraft(),this._updateSendButton(),this.sending=!1,this._autoFocusMessageTextboxOnDesktop()}}catch(he){const ge=this.translateI18nItem(ue.SEND_ERROR),fe=this.translateI18nItem(ue.SEND_ERROR);this.layer.error(ge,fe,he),he.message&&he.message._id&&this.layer.deleteConversationMessageById(he.message._id,!1),this.sendError=!0,this.sending=!1,this._updateDraft()}}})}_back(){return R(this,void 0,void 0,function*(){this.emitEvent(J.ChatEvents.RemotelyStopAudioPlayer),yield this._removeMedia(!0),yield this._saveDraft(),yield this.layer.clearCurrentConversation(),this.layer.purgeConversation(this.conversation),this.emitComponentEvent('go-back')})}_editInfo(){return R(this,void 0,void 0,function*(){yield this._saveDraft(),this.emitComponentEvent('go-info')})}_leave(){return R(this,void 0,void 0,function*(){if(yield this.requestConfirmation(this.translateI18nItem(ue.COMFIRM_LEAVE))){const he=yield this.layer.leaveConversation(this.conversation);he&&(this.showWaitingMessage(this.translateI18nItem(Z.CommonMetadata.getI18nItem(Z.CommonI18nKeys.PLEASE_WAIT))),this.addListener(J.ChatEvents.ConversationClosed,()=>R(this,void 0,void 0,function*(){this.dismissWaitingMessage(),this._clearDraft(),yield this.layer.clearCurrentConversation(),this.emitComponentEvent('go-leave')}),{onceOnly:!0}))}})}_end(){return R(this,void 0,void 0,function*(){if(yield this.requestConfirmation(this.translateI18nItem(ue.COMFIRM_END))){const he=yield this.layer.endConversation(this.conversation);he&&(this.showWaitingMessage(this.translateI18nItem(Z.CommonMetadata.getI18nItem(Z.CommonI18nKeys.PLEASE_WAIT))),this.addListener(J.ChatEvents.ConversationClosed,()=>R(this,void 0,void 0,function*(){this.dismissWaitingMessage(),this._clearDraft(),yield this.layer.clearCurrentConversation(),this.emitComponentEvent('go-end')}),{onceOnly:!0}))}})}_refreshUserLookup(){return R(this,void 0,void 0,function*(){return yield this._userLookup.populate([this.conversation],this._rawChatEntries)})}_detectOverscrollSupport(){const he=document.createElement('div');document.documentElement.appendChild(he),he.style.WebkitOverflowScrolling='touch',this._supportsOverscroll='getComputedStyle'in window&&'touch'===window.getComputedStyle(he)['-webkit-overflow-scrolling'],document.documentElement.removeChild(he)}_getDomNodes(){const he=this.shadowRoot;this._chatListScrollable=he.querySelector('#chat-history'),this._chatListFetchMore=he.querySelector('#fetch-more'),this._chatScrollToBottom=he.querySelector('#chat-scroll-to-bottom'),this._messageTextbox=he.querySelector('#message'),this._description=he.querySelector('#description-text')}_generateDomIdFromEntryId(he){return`entry_${(he||'').replace(/[:.]/g,'_')}`}_setupScrollWatcher(){this._chatListScrollable&&setTimeout(()=>{this._chatListScrollable.removeEventListener('scroll',this._onScroll),this._chatListScrollable.addEventListener('scroll',this._onScroll)},500)}_stopScroll(he){return R(this,void 0,void 0,function*(){return this._supportsOverscroll?new Promise((ge)=>{this._chatListScrollable.classList.add('stop-scroll'),this._chatListScrollable.scrollTop=he,setTimeout(()=>{this._chatListScrollable.classList.remove('stop-scroll'),ge()},0)}):Promise.resolve()})}_scrollToBottom(he){return R(this,void 0,void 0,function*(){const ge=this._processedChatEntries.length,fe=ge-1;if(this._endIdx<fe)return 1==fe-this._endIdx?(this._endIdx+=1,this._calculateStartIdxBasedOnEndIdx(),void this._updateVisibleChatEntries().then(()=>this._scrollToBottom(he))):void this._setMostRecentChatEntriesVisible();if(!this._chatListScrollable)return;this._hideScrollToBottom();const ye=this._chatListScrollable.scrollTop,Te=this._chatListScrollable.scrollHeight,Ce=this._chatListScrollable.clientHeight,Me=Te-Ce;if(ye>=Me)return Promise.resolve();if(he){const ve=300;return new Promise((Le)=>{const Ee=this._chatListScrollable.scrollTop,be=20;let De=0;const Ae=(Re,we,ke,Ye)=>{return(Re/=Ye/2,1>Re)?ke/2*Re*Re+we:(Re--,-ke/2*(Re*(Re-2)-1)+we)},Ie=()=>{De+=be,this._chatListScrollable.scrollTop=Ae(De,Ee,Me-Ee,ve),De<ve?setTimeout(Ie,be):Le()};Ie()})}return this._chatListScrollable.scrollTop=Me,Promise.resolve()})}_handleScrollAtTop(){if(this.isFetchingMore)return;if(!this.visibleChatEntries||0===this.visibleChatEntries.length)return;const he=this.visibleChatEntries[0],ge=this._processedChatEntries.findIndex((ye)=>ye.id===he.id);return 0===ge&&!this.noMoreToFetch?void this._fetchMoreChatEntries():void(this._offsetVisibleIndexes(-this._visibleChatEntryBlockSize),this._processIndexChanges(he.id))}_handleScrollAtBottom(){if(!this.visibleChatEntries||0===this.visibleChatEntries.length)return;const he=this.visibleChatEntries[this.visibleChatEntries.length-1],ge=this._processedChatEntries.findIndex((ye)=>ye.id===he.id),fe=ge===this._processedChatEntries.length-1;return fe?(this._hideScrollToBottom(),void(this._suppressScrollHandler=!1)):void(this._offsetVisibleIndexes(this._visibleChatEntryBlockSize),this._processIndexChanges(he.id))}_offsetVisibleIndexes(he){this._startIdx=Math.max(0,this._startIdx+he),this._calculateEndIdxBasedOnStartIdx()}_calculateStartIdxBasedOnEndIdx(){this._startIdx=Math.max(0,this._endIdx-3*this._visibleChatEntryBlockSize)}_calculateEndIdxBasedOnStartIdx(){this._endIdx=Math.min(this._processedChatEntries.length-1,this._startIdx+3*this._visibleChatEntryBlockSize)}_processIndexChanges(he){if(!this._chatListScrollable)return;const ge=this._getMessageBoundsTop(he);this._updateVisibleChatEntries().then(()=>{const fe=this._getMessageTop(he);this._chatListScrollable.scrollTop=fe-ge,this._suppressScrollHandler=!1})}_getMessageTop(he){const ge=this._generateDomIdFromEntryId(he),fe=this.shadowRoot.querySelector(`#${ge}`);return fe&&fe.offsetTop||0}_getMessageBoundsTop(he){const ge=this._generateDomIdFromEntryId(he),fe=this._chatListScrollable.getBoundingClientRect().top||0,ye=this.shadowRoot.querySelector(`#${ge}`),Te=ye&&ye.getBoundingClientRect().top||0;return Te-fe}_resetForConversationChange(){return R(this,void 0,void 0,function*(){this._rawChatEntries=[],this._processedChatEntries=[],this.visibleChatEntries=[],this.fetchError=null,this.noMoreToFetch=!1,this.mightHaveMore=!0})}_fetchMoreChatEntries(he=!1){return R(this,void 0,void 0,function*(){if(!this.noMoreToFetch&&(this._config.usePagerUI||this._chatListScrollable)){clearTimeout(this.layer.messageQueueProcessorDebounce),this.isFetchingMore=!0,this.fetchError=null;const ge=this._rawChatEntries&&this._rawChatEntries[0]||null;this._isInitialFetch=he||null===ge;try{let fe=yield this.layer.fetchConversationEntries(this.conversation,ge,this._batchSize||10);fe.length?(fe=fe.filter((ye)=>!ye.placeholder),this.isOnline&&fe.forEach((ye)=>this.layer.markChatEntryRead(ye)),yield this._updateChatEntries([...fe,...this._rawChatEntries]),this._isInitialFetch?this._setMostRecentChatEntriesVisible():(this._startIdx=0,this._calculateEndIdxBasedOnStartIdx(),this._processIndexChanges(ge.id)),this.isFetchingMore=!1,this._isInitialFetch&&this.conversation.hasUnread&&(this.conversation.hasUnread=!1,yield this.layer.updateConversation(this.conversation))):(this.isFetchingMore=!1,this.noMoreToFetch=!0,this._suppressScrollHandler=!1),this._isInitialFetch&&fe.length<(this._batchSize||Number.MAX_VALUE)&&(this.mightHaveMore=!1)}catch(fe){if(fe instanceof B.NotConnectedError)this.fetchError=this.translateI18nItem(ue.FETCH_ERROR_NOT_ONLINE),this.isFetchingMore=!1;else throw fe}}})}_setMostRecentChatEntriesVisible(){this._endIdx=this._processedChatEntries.length-1,this._calculateStartIdxBasedOnEndIdx(),this._updateVisibleChatEntries().then(()=>this._scrollToBottom(!1))}_updateVisibleChatEntries(){return new Promise((he)=>{this._startIdx=Math.max(this._startIdx,0),this._endIdx=Math.min(this._endIdx,this._processedChatEntries.length-1),this.visibleChatEntries=this._processedChatEntries.slice(this._startIdx,this._endIdx+1),this.onRenderComplete(()=>he(),!0)})}_updateChatEntries(he){return R(this,void 0,void 0,function*(){this._rawChatEntries=he,this._processedChatEntries=yield this._generateProcessedChatEntries(he),yield this._refreshUserLookup()})}_updateChatEntry(he){return R(this,void 0,void 0,function*(){const ge=this._rawChatEntries.findIndex((ye)=>ye.id===he.id);if(-1!==ge){const fe=this._rawChatEntries.map((ye,Te)=>Te===ge?he:ye);yield this._updateChatEntries(fe),yield this._updateVisibleChatEntries()}})}_appendChatEntry(he,ge=!1){return R(this,void 0,void 0,function*(){this._rawChatEntries.find((fe)=>fe.id===he.id)||(yield this._updateChatEntries([...this._rawChatEntries,he]),this._isNearBottom()||ge?yield this._scrollToBottom(!0):(this._newNotificationsCount+=1,this._showScrollToBottom()))})}_generateProcessedChatEntries(he){return R(this,void 0,void 0,function*(){const ge=[];let fe=null;for(let ye=he.length-1;0<=ye;ye--){const Te=he[ye],Ce=new Date(Te.date);null!=fe&&fe.toDateString()!==Ce.toDateString()&&this._addDivider(ge,fe),ge.unshift(Te),fe=Ce}return ge.sort((ye,Te)=>ye.date-Te.date)})}_addDivider(he,ge){const fe=ge.setHours(0,0,0,0);he.unshift({id:`divider_${fe}`,type:z.ChatEntryType.Divider,date:fe,to:this.conversation.roomJid})}_shouldUseChatMarkers(){return this.conversation.type===K.ConversationType.Direct&&2===this.conversation.participants.length}_isOnlyEmojis(he){if(!he)return!1;return 0===he.replace(new RegExp('(?:[\u2700-\u27BF]|(?:\uD83C[\uDDE6-\uDDFF]){2}|[\uD800-\uDBFF][\uDC00-\uDFFF]|[#-9]\uFE0F?\u20E3|\u3299|\u3297|\u303D|\u3030|\u24C2|\uD83C[\uDD70-\uDD71]|\uD83C[\uDD7E-\uDD7F]|\uD83C\uDD8E|\uD83C[\uDD91-\uDD9A]|\uD83C[\uDDE6-\uDDFF]|[\uD83C[\uDE01-\uDE02]|\uD83C\uDE1A|\uD83C\uDE2F|[\uD83C[\uDE32-\uDE3A]|[\uD83C[\uDE50-\uDE51]|\u203C|\u2049|[\u25AA-\u25AB]|\u25B6|\u25C0|[\u25FB-\u25FE]|\xA9|\xAE|\u2122|\u2139|\uD83C\uDC04|[\u2600-\u26FF]|\u2B05|\u2B06|\u2B07|\u2B1B|\u2B1C|\u2B50|\u2B55|\u231A|\u231B|\u2328|\u23CF|[\u23E9-\u23F3]|[\u23F8-\u23FA]|\uD83C\uDCCF|\u2934|\u2935|[\u2190-\u21FF])','g'),'').length}_isNearBottom(){if(this._chatListScrollable){const he=this._chatListScrollable.scrollHeight,ge=this._chatListScrollable.clientHeight,ye=this._chatListScrollable.scrollTop;return he-ge-ye<=100}}_showScrollToBottom(){this._chatScrollToBottom&&(this.onRenderComplete(()=>{this._chatScrollToBottom.querySelector('.number').textContent=this._newNotificationsCount&&0<this._newNotificationsCount?this._newNotificationsCount.toString():''},!0),this._chatScrollToBottom.classList.add('visible'))}_hideScrollToBottom(){this._chatScrollToBottom&&(this._chatScrollToBottom.classList.remove('visible'),this._newNotificationsCount=0,setTimeout(()=>{const he=this._chatScrollToBottom.querySelector('.number');he&&(he.textContent='')},300))}_attachMedia(){return R(this,void 0,void 0,function*(){this.sending||(0<this.media.length?(yield this.requestConfirmation(this.translateI18nItem(ue.CONFIRM_REPLACE_IMAGE)))&&this._doAttachMedia():this._doAttachMedia())})}_doAttachMedia(){return R(this,void 0,void 0,function*(){const he=yield this.layer.captureOrSelectMedia();he.base64=yield se.getThumbnail(he.path,75,75,100),yield this._removeMedia(!0),this.media=[he],this._updateDraft(),this._updateSendButton()})}_removeMedia(he){return R(this,void 0,void 0,function*(){0<this.media.length&&(he&&(yield this.layer.cancelMediaSeletion(this.media[0].path)),this.media=[],this._updateDraft(),this._updateSendButton())})}_getDraftAttachmentSrc(he){if(he.base64){if(he.base64.startsWith('data:')&&he.base64.includes('base64'))return he.base64;if(he.mimeType)return`data:${he.mimeType};base64,${he.base64}`}return he.path?ee.normalizeLocalFilePaths(he.path):''}_updateDraft(){if(!this._messageTextbox)return;const he=this._messageTextbox.getValue();let ge=null;!he||(ge=ge||{},ge.body=he,ge.error=this.sendError),JSON.stringify(ge)!==JSON.stringify(this._draft)&&(this._draft=null===ge?null:ge,this._saveDraft(!0),this.forceRedraw())}_clearDraft(){this._draft=null,this._saveDraft()}_saveDraft(he=!1){return R(this,void 0,void 0,function*(){clearTimeout(this._saveDraftTimeout),he?this._saveDraftTimeout=setTimeout(()=>{this.layer.saveConversationDraft(this.conversation,this._draft)},2e3):yield this.layer.saveConversationDraft(this.conversation,this._draft)})}_updateSendButton(){const he=this._draft&&'string'==typeof this._draft.body&&0<this._draft.body.length;this.sendButtonDisabled=!he&&0===this.media.length}_autoFocusMessageTextboxOnDesktop(){X.isDesktop()&&!0===this._config.chatAvailable&&this.onRenderComplete(()=>{this.defer(()=>{this._messageTextbox.focus()})},!0)}_togglePriorityDescriptionExpansion(){if(this._description){const he=this.shadowRoot.querySelector('#priority-description-collapsed-icon'),ge=this.shadowRoot.querySelector('#priority-description-expanded-icon');ge.classList.toggle('hidden'),he.classList.toggle('hidden'),this._description.classList.toggle('collapsed'),this._description.classList.contains('collapsed')?(this._description.scrollTop=0,this._multilineEllipsis(2)):this._multilineEllipsis(!1)}}}I([N.prop({type:Object,attribute:!1,default:null})],pe.prototype,'conversation',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],pe.prototype,'visibleChatEntries',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],pe.prototype,'isFetchingMore',void 0),I([N.prop({type:String,attribute:!1,default:null})],pe.prototype,'fetchError',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],pe.prototype,'mightHaveMore',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],pe.prototype,'noMoreToFetch',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],pe.prototype,'media',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],pe.prototype,'sendButtonDisabled',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],pe.prototype,'sending',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],pe.prototype,'sendError',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],pe.prototype,'hasLongDescription',void 0),E.CTCLChatMessageList=pe,pe.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(ne,ae,oe,se){var ie=arguments.length,de=3>ie?ae:null===se?se=Object.getOwnPropertyDescriptor(ae,oe):se,le;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)de=Reflect.decorate(ne,ae,oe,se);else for(var _e=ne.length-1;0<=_e;_e--)(le=ne[_e])&&(de=(3>ie?le(de):3<ie?le(ae,oe,de):le(ae,oe))||de);return 3<ie&&de&&Object.defineProperty(ae,oe,de),de},R=this&&this.__awaiter||function(ne,ae,oe,se){return new(oe||(oe=Promise))(function(ie,de){function le(ce){try{ue(se.next(ce))}catch(pe){de(pe)}}function _e(ce){try{ue(se['throw'](ce))}catch(pe){de(pe)}}function ue(ce){ce.done?ie(ce.value):new oe(function(pe){pe(ce.value)}).then(le,_e)}ue((se=se.apply(ne,ae||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(12),W=A(4),G=A(10),J=A(3),K=A(9),$=A(19),X=A(2),Q=A(14);var Z;(function(ne){ne[ne.CONTACT_INFORMATION='Contact Information']='CONTACT_INFORMATION',ne[ne.START_DIRECT_CONVERSATION='Direct Conversation']='START_DIRECT_CONVERSATION',ne[ne.USER_TYPE='User Type']='USER_TYPE',ne[ne.ACCESS_RIGHTS='Access Rights']='ACCESS_RIGHTS',ne[ne.PARTICIPANT='Participant']='PARTICIPANT',ne[ne.PARTICIPANT_RIGHTS='Read/Reply']='PARTICIPANT_RIGHTS',ne[ne.ADMIN='Admin']='ADMIN',ne[ne.ADMIN_RIGHTS='Add/Remove Participants']='ADMIN_RIGHTS',ne[ne.OWNER='Owner']='OWNER',ne[ne.OWNER_RIGHTS='Add/Remove/Promote/Demote Anybody']='OWNER_RIGHTS',ne[ne.REMOVE_FROM_CONVERSATION='Remove From This Conversation']='REMOVE_FROM_CONVERSATION',ne[ne.CONFIRM_DIRECT_CONVERSATION='Are you sure you wish to start or resume a direct conversation with this contact?']='CONFIRM_DIRECT_CONVERSATION',ne[ne.CONFIRM_CHANGE_ROLE='Are you sure you wish to change the role of this contact?']='CONFIRM_CHANGE_ROLE',ne[ne.CONFIRM_REMOVE='Are you sure you wish to remove this contact from the conversation?']='CONFIRM_REMOVE'})(Z||(Z={}));class ee{static _create(){return new H.Metadata(te,Z)}static get instance(){return this._instance||(this._instance=this._create())}}ee._instance=null,E.CTCLContactInfoMetadata=ee;class te extends z.CTCLComponent{constructor(){super(),this._animationDuration=500,this._goChatFunction=null,this.setMetadata(ee.instance)}static get is(){return'ct-cl-contact-info'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){this.setupConnectionStatusListener(),this.addListener(W.ChatEvents.ConversationParticipantsChanged,(ne)=>{this.conversation&&this.conversation.id===ne.conversation.id&&(this.conversation.participants=ne.conversation.participants,this.forceRedraw())}),this.addListener(K.BaseEvents.ConnectionStatusChange,(ne)=>{ne.status===B.ConnectionStatus.Disconnected&&this.dismissWaitingMessage()},{dontSuppress:!0})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex-direction:column;position:fixed;top:0;left:0;height:100%;width:100%;background:#ffffff;font-size:1em;transform:translateY(100%);will-change:transform;z-index:99997}:host .contact-info{flex:1 1 auto;display:flex;flex-direction:column;height:100%;background-color:var(--list-bg);color:var(--default-font-color)}:host .contact-info .header .action{cursor:pointer}:host .contact-info .user-info{display:flex;flex-direction:column;align-items:center;flex:none;padding:10px 40px 20px 40px}:host .contact-info .user-info .avatar{margin:0 0 10px 0}:host .contact-info .user-info .name{font-size:1.333em}:host .contact-info .user-info .job-title{font-size:1.333em;font-weight:300;color:var(--subtle-font-color, #828688)}:host .contact-info .user-info .group{font-size:1.333em;font-weight:300;font-style:italic;color:var(--subtle-font-color, #828688)}:host .contact-info .user-info .telephone{font-size:1.333em;color:var(--primary-color, #22b1c8);text-decoration:none}:host .contact-info .user-info .actions{margin:20px 0 0 0}:host .contact-info .conversation-context{display:flex;flex-direction:column;flex:1 1 auto}:host .contact-info .conversation-context .roles{flex:1 1 auto}:host .contact-info .conversation-context .roles .row{display:flex;align-items:center;border-bottom:var(--secondary-border, 1px solid #ddd)}:host .contact-info .conversation-context .roles .row .r{margin:0 0 0 auto;text-align:right}:host .contact-info .conversation-context .roles .row.header{flex:none;background:var(--light-header-bg, #f2f2f2);color:var(--light-header-text, #828688);font-size:.833em;font-weight:600;text-transform:uppercase;padding:7px 20px}:host .contact-info .conversation-context .roles .row.role{padding:10px 20px;cursor:pointer}:host .contact-info .conversation-context .roles .row.role .l{position:relative;padding:0 0 0 30px}:host .contact-info .conversation-context .roles .row.role .l .radio{position:absolute;display:flex;justify-content:center;align-items:center;left:0;top:50%;transform:translateY(-50%);width:18px;height:18px;border:2px solid var(--default-font-color, #212121);border-radius:50%}:host .contact-info .conversation-context .roles .row.role .r{font-size:.833em;color:var(--subtle-font-color, #828688)}:host .contact-info .conversation-context .roles .row.disabled{opacity:0.5;cursor:not-allowed}:host .contact-info .conversation-context .roles .row.selected .l .radio:before{content:"";display:block;width:6px;height:6px;background-color:var(--default-font-color, #212121);border-radius:50%}:host .contact-info .conversation-context .footer{flex:none;padding:10px;text-align:center}:host([animate]){transition:transform var(--animation-normal, .5s) ease-out}:host([showing]){transform:translateY(0)}
        `}generateComponentMarkup(){return this.contact?window.__CTRender('div',{class:'contact-info'},this._renderHeader(),this._renderContactInfo(),this.conversation&&this._renderConversationContext()):null}_renderHeader(){return window.__CTRender($.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'left-action'},window.__CTRender(X.CTIcon,{class:'action',width:'20',height:'20',icon:B.Icons.COMMON.ChevronLeft,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},J.formatUserName(this.contact,J.NameFormat.PREFIX_INITIAL_LAST)),window.__CTRender('div',{slot:'sub-heading'},this.translateI18nItem(Z.CONTACT_INFORMATION)))}_renderContactInfo(){return window.__CTRender('div',{class:'user-info'},window.__CTRender(X.CTUserAvatar,{class:'avatar',user:this.contact,size:90}),window.__CTRender('div',{class:'name'},J.formatUserName(this.contact,J.NameFormat.PREFIX_FIRST_LAST)),this.contact.jobTitle&&window.__CTRender('div',{class:'job-title'},this.contact.jobTitle),this.layer.config.roles.enableRoles&&this.contact.group&&window.__CTRender('div',{class:'group'},this.contact.group),this.contact.telephone&&window.__CTRender('a',{class:'telephone',href:`tel:${this.contact.telephone}`},this.contact.telephone),this.allowStartDirect&&window.__CTRender('div',{class:'actions'},window.__CTRender(X.CTButton,{type:'secondary',width:'auto',disabled:!this.isOnline,onClick:this._startDirectConversation.bind(this)},this.translateI18nItem(Z.START_DIRECT_CONVERSATION))))}_renderConversationContext(){const ne=this._getParticipant(this.contact.jid);if(!ne)return null;const ae=this._config.namedSettings&&this._config.ownerCanEditAfterSend,oe=this.layer.getCurrentUserJid(),se=this._getParticipant(oe),ie=se.role,de=ie===B.ChatRole.Owner,le=ie===B.ChatRole.Owner||ie===B.ChatRole.Administrator&&ne.role===B.ChatRole.Participant;return window.__CTRender('div',{class:'conversation-context'},ae&&window.__CTRender('div',{class:'roles'},window.__CTRender('div',{class:'row header'},window.__CTRender('div',{class:'l'},this.translateI18nItem(Z.USER_TYPE)),window.__CTRender('div',{class:'r'},this.translateI18nItem(Z.ACCESS_RIGHTS))),this._renderRoleType(ne,B.ChatRole.Owner,Z.OWNER,Z.OWNER_RIGHTS,de),this._renderRoleType(ne,B.ChatRole.Administrator,Z.ADMIN,Z.ADMIN_RIGHTS,de),this._renderRoleType(ne,B.ChatRole.Participant,Z.PARTICIPANT,Z.PARTICIPANT_RIGHTS,de)),ae&&le&&window.__CTRender('div',{class:'footer'},window.__CTRender(X.CTButton,{type:'dangerous',width:'auto',disabled:!this.isOnline,onClick:()=>this._removeFromConversation(ne)},this.translateI18nItem(Z.REMOVE_FROM_CONVERSATION))))}_renderRoleType(ne,ae,oe,se,ie){const le=ne.role===ae,_e=['row','role'];return ie&&this.isOnline||_e.push('disabled'),le&&_e.push('selected'),window.__CTRender('div',{class:_e.join(' '),onClick:(()=>{ie&&ae!==ne.role&&this._changeRole(ne,ae)}).bind(this)},window.__CTRender('div',{class:'l'},window.__CTRender('div',{class:'radio'}),this.translateI18nItem(oe)),window.__CTRender('div',{class:'r'},this.translateI18nItem(se)))}_back(){this.dismiss()}_startDirectConversation(){return R(this,void 0,void 0,function*(){if(this.isOnline&&(yield this.requestConfirmation(this.translateI18nItem(Z.CONFIRM_DIRECT_CONVERSATION)))){const ne=this.layer.getCurrentUserJid(),ae=G.buildConversationParticipants(null,null,[ne,this.contact.jid]),oe=yield this.layer.getDirectConversationByParticipants(ae);if(oe)yield this.layer.setCurrentConversation(oe),yield this.dismiss(!1),this._callGoChatFunction();else{const se=G.createProvisionalDirectConversation(ae,this.layer.doesDirectConversationExistInConfiguration());yield this.layer.setProvisionalConversation(se),yield this.dismiss(!1),this._callGoChatFunction()}}})}_changeRole(ne,ae){return R(this,void 0,void 0,function*(){!this.isOnline||(yield this.requestConfirmation(this.translateI18nItem(Z.CONFIRM_CHANGE_ROLE)))&&(yield this.layer.changeParticipantRoleInConversation(this.conversation,ne,ae))})}_removeFromConversation(ne){return R(this,void 0,void 0,function*(){if(this.isOnline&&(yield this.requestConfirmation(this.translateI18nItem(Z.CONFIRM_REMOVE)))){const ae=yield this.layer.removeParticipantsFromConversation(this.conversation,[ne]);ae&&this.dismiss(!1)}})}show(ne,ae=null,oe=!0,se=!0,ie=null){return R(this,void 0,void 0,function*(){this.animate=se,this.contact=ne,this.conversation=ae,this._config=new Q.ConversationConfigReader(this.layer,this.conversation),this.showing=!0,this._goChatFunction=ie,this.allowStartDirect=!!this.layer.doesDirectConversationExistInConfiguration(),this.layer.setBackHandler(()=>{this._back()}),yield J.sleep(se?this._animationDuration:0)})}dismiss(ne=!0){return R(this,void 0,void 0,function*(){this.animate=ne,this.showing=!1,this.layer.popBackHandler(),yield J.sleep(ne?this._animationDuration:0),this.contact=null,this.conversation=null,this.allowStartDirect=!1})}_getParticipant(ne){return this.conversation&&this.conversation.participants.find((ae)=>J.jidsMatch(ae.jid,ne))||null}_callGoChatFunction(){'function'==typeof this._goChatFunction&&this._goChatFunction(),this._goChatFunction=null}}I([N.prop({type:Boolean,attribute:!0,default:!0})],te.prototype,'animate',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],te.prototype,'showing',void 0),I([N.prop({type:Object,attribute:!1,default:null})],te.prototype,'contact',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],te.prototype,'allowStartDirect',void 0),I([N.prop({type:Object,attribute:!1,default:null})],te.prototype,'conversation',void 0),E.CTCLContactInfo=te,te.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(ne,ae,oe,se){var ie=arguments.length,de=3>ie?ae:null===se?se=Object.getOwnPropertyDescriptor(ae,oe):se,le;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)de=Reflect.decorate(ne,ae,oe,se);else for(var _e=ne.length-1;0<=_e;_e--)(le=ne[_e])&&(de=(3>ie?le(de):3<ie?le(ae,oe,de):le(ae,oe))||de);return 3<ie&&de&&Object.defineProperty(ae,oe,de),de},R=this&&this.__awaiter||function(ne,ae,oe,se){return new(oe||(oe=Promise))(function(ie,de){function le(ce){try{ue(se.next(ce))}catch(pe){de(pe)}}function _e(ce){try{ue(se['throw'](ce))}catch(pe){de(pe)}}function ue(ce){ce.done?ie(ce.value):new oe(function(pe){pe(ce.value)}).then(le,_e)}ue((se=se.apply(ne,ae||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(12),W=A(26),G=A(4),J=A(3),K=A(8),$=A(19),X=A(2),Q=A(14);var Z;(function(ne){ne[ne.INFORMATION='Information']='INFORMATION',ne[ne.DIRECT_CONVERSATION='Direct Conversation']='DIRECT_CONVERSATION',ne[ne.NAMED_CONVERSATION='Named Conversation']='NAMED_CONVERSATION',ne[ne.CURRENT_ROLE_ADMINISTRATOR='You are an Admin of this conversation']='CURRENT_ROLE_ADMINISTRATOR',ne[ne.CURRENT_ROLE_OWNER='You are an Owner of this conversation']='CURRENT_ROLE_OWNER',ne[ne.ADMIN='Admin']='ADMIN',ne[ne.OWNER='Owner']='OWNER',ne[ne.CONTACT_LIST_HEADER='Contacts in this conversation']='CONTACT_LIST_HEADER',ne[ne.ADD_MORE_CONTACTS='Add More Contacts']='ADD_MORE_CONTACTS',ne[ne.SUBJECT='Subject']='SUBJECT',ne[ne.DESCRIPTION_OPTIONAL='Description (optional)']='DESCRIPTION_OPTIONAL',ne[ne.EDIT='Edit details']='EDIT',ne[ne.SAVE='Save']='SAVE',ne[ne.CANCEL='Cancel']='CANCEL'})(Z||(Z={}));class ee{static _create(){return new H.Metadata(te,Z)}static get instance(){return this._instance||(this._instance=this._create())}}ee._instance=null,E.CTCLConversationInfoMetadata=ee;class te extends z.CTCLComponent{constructor(){super(),this._me=null,this._namedConversationSubject='',this._namedConversationDescription='',this.setMetadata(ee.instance)}static get is(){return'ct-cl-conversation-info'}initialize(){return R(this,void 0,void 0,function*(){return this.isLoading=!0,this.conversation=yield this.layer.getCurrentConversation(),this._config=new Q.ConversationConfigReader(this.layer,this.conversation),this.conversation?void(this._getCurrentUserParticipant(),this._namedConversationSubject=this.conversation.subject,this._namedConversationDescription=this.conversation.description,this.defer(()=>R(this,void 0,void 0,function*(){this._userLookup=new W.UserLookup(this.layer),yield this._userLookup.populate([this.conversation]),this._createUserList(),this.isLoading=!1})),this.layer.setBackHandler(()=>{this._back()})):yield this._back()})}_createUserList(){const ne=this.conversation.participants.filter((se)=>!J.jidsMatch(se.jid,this._me.jid)),ae=ne.map((se)=>this._userLookup.get(se.jid)).filter((se)=>null!==se),oe=J.sortUsersByName(ae);this.usersToDisplay=oe}_getCurrentUserParticipant(){const ne=this.layer.getCurrentUserJid();this._me=this.conversation.participants.find((ae)=>J.jidsMatch(ae.jid,ne))||null}setupListeners(){this.setupConnectionStatusListener(),this.addListener(G.ChatEvents.ConversationUpdated,(ne)=>R(this,void 0,void 0,function*(){this.conversation&&this.conversation.id===ne.conversation.id&&(this.conversation=ne.conversation,yield this._userLookup.populate([this.conversation]),this._createUserList())})),this.addListener(G.ChatEvents.ConversationParticipantsChanged,(ne)=>R(this,void 0,void 0,function*(){this.conversation&&this.conversation.id===ne.conversation.id&&(this.isLoading=!0,this.conversation.participants=ne.participants,this._getCurrentUserParticipant(),yield this._userLookup.populate([this.conversation]),this._createUserList(),this.isLoading=!1)}))}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;height:100%;font-size:1em}:host .conversation-info{flex:1 1 auto;display:flex;flex-direction:column;height:100%}:host .conversation-info .header .action{cursor:pointer}:host .conversation-info .role{flex:none;background:var(--dark-header-bg, #212121);color:var(--dark-header-text, #f2f2f2);padding:7px 20px}:host .conversation-info .scrollable{flex:1 1 auto;display:flex;flex-direction:column;overflow:auto}:host .conversation-info .scrollable .named-info{flex:none}:host .conversation-info .scrollable .named-info .subject,:host .conversation-info .scrollable .named-info .description{padding:10px 20px;color:var(--subtle-font-color, #828688)}:host .conversation-info .scrollable .named-info .subject.form-item,:host .conversation-info .scrollable .named-info .description.form-item{padding:10px 10px 5px 10px}:host .conversation-info .scrollable .named-info .description,:host .conversation-info .scrollable .named-info .buttons{border-top:1px solid var(--light-header-bg, #f2f2f2)}:host .conversation-info .scrollable .named-info .buttons{display:flex;justify-content:center;padding:10px}:host .conversation-info .scrollable .named-info .buttons .button+.button{margin:0 0 0 10px}:host .conversation-info .scrollable .participants{flex:1 1 auto}:host .conversation-info .scrollable .participants .heading{flex:none;background:var(--light-header-bg, #f2f2f2);color:var(--light-header-text, #828688);font-size:.833em;font-weight:600;text-transform:uppercase;padding:7px 20px}:host .conversation-info .scrollable .participants ct-icon{margin-top:20px}:host .conversation-info .scrollable .participants .participant-list{flex:1 1 auto}:host .conversation-info .scrollable .participants .participant-list .participant{position:relative;cursor:pointer}:host .conversation-info .scrollable .participants .participant-list .participant .badges{position:absolute;top:50%;right:10px;transform:translateY(-50%)}:host .conversation-info .scrollable .participants .participant-list .participant .badges .badge{display:inline-block;font-size:.75em;font-weight:300;text-transform:uppercase;padding:3px 10px;border-radius:4px;margin:0 0 0 5px;line-height:1em}:host .conversation-info .scrollable .participants .participant-list .participant .badges .badge.admin{background:#303233;color:#ffffff}:host .conversation-info .scrollable .participants .participant-list .participant .badges .badge.owner{background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff)}:host .conversation-info .scrollable .footer{flex:none;padding:10px;text-align:center}
        `}generateComponentMarkup(){if(this.conversation&&this._me){const ne=this._config.namedSettings,ae=ne&&[B.ChatRole.Owner].includes(this._me.role)&&this._config.ownerCanEditAfterSend,oe=ne&&[B.ChatRole.Administrator,B.ChatRole.Owner].includes(this._me.role)&&this._config.ownerCanAddAdditionalContacts;return window.__CTRender('div',{class:'conversation-info'},this._renderHeader(),ne&&this._renderMyRole(),window.__CTRender('div',{class:'scrollable'},ne&&this._renderNamedConversationInfo(ae),!this.editMode&&window.__CTRender('div',{class:'participants'},window.__CTRender('div',{class:'heading'},this.translateI18nItem(Z.CONTACT_LIST_HEADER)),this.isLoading?window.__CTRender(X.CTIcon,{width:'16',height:'16',icon:B.Icons.COMMON.LoadingSpinner,spin:!0}):this._renderParticipants()),!this.editMode&&oe&&this._renderFooter()))}}_renderHeader(){const ne=this._config.name;return window.__CTRender($.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'left-action'},window.__CTRender(X.CTIcon,{class:'action',width:'20',height:'20',icon:B.Icons.COMMON.ChevronLeft,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},this.translateI18nItem(Z.INFORMATION)),window.__CTRender('div',{slot:'sub-heading'},ne))}_renderMyRole(){const ne=this._getCurrentRoleString();return ne&&window.__CTRender('div',{class:'role'},ne)}_renderNamedConversationInfo(ne){if(ne&&this.editMode){const ae=this._config.maxSubjectLength,oe=this._config.maxDescriptionLength;return window.__CTRender('div',{class:'named-info'},window.__CTRender('div',{class:'form-item subject'},window.__CTRender(X.CTTextbox,{type:'text',name:'subject',max:ae,required:!0,fullBorder:!0,defaultValue:this._namedConversationSubject,placeholder:this._config.subjectFieldLabel,callback:(se)=>this._onChangeNamedConversationDetail(se)})),window.__CTRender('div',{class:'form-item description'},window.__CTRender(X.CTTextbox,{type:'textarea',name:'description',max:oe,fullBorder:!0,defaultValue:this._namedConversationDescription,placeholder:this.translateI18nItem(Z.DESCRIPTION_OPTIONAL),callback:(se)=>this._onChangeNamedConversationDetail(se)})),window.__CTRender('div',{class:'buttons'},window.__CTRender(X.CTButton,{class:'button',type:'primary',width:'auto',disabled:this.saveDisabled||!this.isOnline,onClick:this._saveChanges.bind(this)},this.translateI18nItem(Z.SAVE)),window.__CTRender(X.CTButton,{class:'button',type:'secondary',width:'auto',disabled:!this.isOnline,onClick:this._cancelChanges.bind(this)},this.translateI18nItem(Z.CANCEL))))}return window.__CTRender('div',{class:'named-info'},window.__CTRender('div',{class:'subject'},this.conversation.subject),this.conversation.description&&window.__CTRender('div',{class:'description'},this.conversation.description),ne&&window.__CTRender('div',{class:'buttons'},window.__CTRender(X.CTButton,{class:'button',type:'secondary',width:'auto',disabled:!this.isOnline,onClick:this._enterEditMode.bind(this)},this.translateI18nItem(Z.EDIT))))}_renderParticipants(){return window.__CTRender('div',{class:'participant-list'},this.usersToDisplay.map((ne)=>this._renderContact(ne)))}_renderContact(ne){if(!ne)return null;const ae=this.conversation.participants.find((le)=>J.jidsMatch(le.jid,ne.jid))||null;if(!ae)return null;const oe=this._config.namedSettings,se=oe&&this._getRoleString(ae)||null,ie=oe&&this._getRoleClass(ae)||null,de=K.buildStyles({});return se&&(de.paddingRight='60px'),window.__CTRender('div',{class:'participant',onClick:()=>this._showContactInfo(ne)},window.__CTRender(X.CTUserTile,{user:ne,detailStyle:de},se&&window.__CTRender('div',{class:'badges',slot:'additional'},window.__CTRender('div',{class:`badge ${ie}`},se))))}_renderFooter(){return window.__CTRender('div',{class:'footer'},window.__CTRender(X.CTButton,{type:'secondary',width:'auto',disabled:!this.isOnline,onClick:this._addContacts.bind(this)},this.translateI18nItem(Z.ADD_MORE_CONTACTS)))}_enterEditMode(){this.saveDisabled=!0,this.editMode=!0}_onChangeNamedConversationDetail(ne){ne&&'subject'===ne.key&&(this._namedConversationSubject=ne.value),ne&&'description'===ne.key&&(this._namedConversationDescription=ne.value);const ae=!this._config.subjectRequired||0<this._namedConversationSubject.trim().length,oe=!this._config.descriptionRequired||0<this._namedConversationDescription.trim().length,se=this.conversation.subject!==this._namedConversationSubject||this.conversation.description!==this._namedConversationDescription;this.saveDisabled=!ae||!oe||!se}_saveChanges(){return R(this,void 0,void 0,function*(){this.saveDisabled||(yield this.layer.updateNamedConversation(this.conversation,this._namedConversationSubject.trim(),this._namedConversationDescription.trim()))&&(this.editMode=!1)})}_cancelChanges(){this._namedConversationSubject=this.conversation.subject,this._namedConversationDescription=this.conversation.description,this.editMode=!1}_back(){return R(this,void 0,void 0,function*(){this.conversation&&(yield this.layer.setCurrentConversation(this.conversation)),this.emitComponentEvent('go-back')})}_addContacts(){this.emitComponentEvent('go-add-contacts')}_goChat(){this.emitComponentEvent('go-chat')}_showContactInfo(ne){this.layer.showContactInfo(ne,this.conversation,!0,this._goChat.bind(this))}_getCurrentRoleString(){switch(this._me&&this._me.role){case B.ChatRole.Administrator:return this.translateI18nItem(Z.CURRENT_ROLE_ADMINISTRATOR);case B.ChatRole.Owner:return this.translateI18nItem(Z.CURRENT_ROLE_OWNER);default:return null;}}_getRoleString(ne){switch(ne&&ne.role){case B.ChatRole.Administrator:return this.translateI18nItem(Z.ADMIN);case B.ChatRole.Owner:return this.translateI18nItem(Z.OWNER);default:return null;}}_getRoleClass(ne){switch(ne&&ne.role){case B.ChatRole.Administrator:return'admin';case B.ChatRole.Owner:return'owner';default:return null;}}}I([N.prop({type:Object,attribute:!1,default:null})],te.prototype,'conversation',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],te.prototype,'editMode',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],te.prototype,'saveDisabled',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],te.prototype,'usersToDisplay',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],te.prototype,'isLoading',void 0),E.CTCLConversationInfo=te,te.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(ie,de,le,_e){var ue=arguments.length,ce=3>ue?de:null===_e?_e=Object.getOwnPropertyDescriptor(de,le):_e,pe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ce=Reflect.decorate(ie,de,le,_e);else for(var he=ie.length-1;0<=he;he--)(pe=ie[he])&&(ce=(3>ue?pe(ce):3<ue?pe(de,le,ce):pe(de,le))||ce);return 3<ue&&ce&&Object.defineProperty(de,le,ce),ce},R=this&&this.__awaiter||function(ie,de,le,_e){return new(le||(le=Promise))(function(ue,ce){function pe(fe){try{ge(_e.next(fe))}catch(ye){ce(ye)}}function he(fe){try{ge(_e['throw'](fe))}catch(ye){ce(ye)}}function ge(fe){fe.done?ue(fe.value):new le(function(ye){ye(fe.value)}).then(pe,he)}ge((_e=_e.apply(ie,de||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(12),W=A(26),G=A(4),J=A(5),K=A(3),$=A(10),X=A(19),Q=A(2),Z=A(33),ee=A(8),te=A(61),ne=A(14);var ae;(function(ie){ie[ie.CONVERSATIONS='Conversations']='CONVERSATIONS',ie[ie.NO_UNREAD='No Unread Conversations']='NO_UNREAD',ie[ie.UNREAD_COUNT='{{number}} Unread Conversation(s)']='UNREAD_COUNT',ie[ie.NO_CONVERSATIONS='You do not have any conversations']='NO_CONVERSATIONS',ie[ie.NO_MATCH='No conversations match that filter']='NO_MATCH',ie[ie.FILTER_PLACEHOLDER='Filter by Subject & Participant']='FILTER_PLACEHOLDER',ie[ie.SUBJECT='Subject']='SUBJECT',ie[ie.EXPIRED='Expired']='EXPIRED',ie[ie.YOU='You']='YOU',ie[ie.CLOSED='Closed']='CLOSED'})(ae||(ae={}));class oe{static _create(){return new H.Metadata(se,ae)}static get instance(){return this._instance||(this._instance=this._create())}}oe._instance=null,E.CTCLConversationListMetadata=oe;class se extends z.CTCLComponent{constructor(){super(),this.TILE_HEIGHT=70,this._filterType='',this._filterTerm='',this._contentLimit=100,this._onFilterChange=(ie,de)=>{this._filterType=ie,this._filterTerm=de,this._updateVirtualList()},this.setMetadata(oe.instance),this._virtualList=new Z.VirtualList(this,[],{itemHeight:this.TILE_HEIGHT,itemKeyGetter:(ie)=>ie.id})}static get is(){return'ct-cl-conversation-list'}initialize(ie){const de=(le)=>super[le];return R(this,void 0,void 0,function*(){yield de('initialize').call(this,ie),this._userLookup=new W.UserLookup(this.layer),this.isFetching=!0,this.defer(()=>R(this,void 0,void 0,function*(){yield this._updateConversations()})),this.layer.setBackHandler(()=>{this.layer.moveTaskToBack()})})}setupListeners(){this.addListeners([G.ChatEvents.ConversationAdded,G.ChatEvents.ConversationUpdated,G.ChatEvents.ConversationRemoved],()=>R(this,void 0,void 0,function*(){this.debounce('update',()=>R(this,void 0,void 0,function*(){yield this._updateConversations()}))}))}_generateFilterItems(){const ie=this.layer.getConfiguredConversations().map((de)=>de.name);return this._allConversations.forEach((de)=>{de.config&&!ie.includes(de.config.name)&&ie.push(de.config.name)}),ie.sort(),ie}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}@-moz-keyframes blinker{0%{opacity:1.0}50%{opacity:0.25}100%{opacity:1.0}}@-webkit-keyframes blinker{0%{opacity:1.0}50%{opacity:0.25}100%{opacity:1.0}}@keyframes blinker{0%{opacity:1.0}50%{opacity:0.25}100%{opacity:1.0}}:host{display:block;height:100%;font-size:1em}:host .conversation-list{flex:1 1 auto;display:flex;flex-direction:column;height:100%}:host .conversation-list .header .action{cursor:pointer}:host .conversation-list .filter{flex:0 0 55px;display:flex;justify-content:center;align-items:center;background:var(--secondary-color, #f2f2f2);border-bottom:var(--secondary-border, 1px solid #ddd);padding:0 20px}:host .conversation-list .filter .search-box{width:80%;font-size:.833em}:host .conversation-list .column-headings{display:none;background:var(--secondary-color, #f2f2f2);border-bottom:var(--secondary-border, 1px solid #ddd);color:var(--subtle-font-color);align-items:center;padding:5px 10px}@media only screen and (min-width: 960px){:host .conversation-list .column-headings{display:flex;flex:0 0 auto}}:host .conversation-list .column-headings div.type{flex-basis:6vw}:host .conversation-list .column-headings div.from-to{flex-basis:20vw}:host .conversation-list .column-headings div.subject{flex-basis:30vw}:host .conversation-list .column-headings div.last-response{flex-basis:30vw}:host .conversation-list .column-headings div.raised-at{flex-basis:10vw}:host .conversation-list .column-headings div span{text-transform:uppercase}:host .conversation-list .fetching,:host .conversation-list .no-conversations{flex:1 1 auto;display:flex;justify-content:center;align-items:flex-start;text-align:center;height:100%;padding:25px 10px;background:var(--list-bg, #f2f2f2);color:var(--subtle-font-color, #828688)}:host .conversation-list .conversations{flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch;background:var(--list-bg, #f2f2f2)}:host .conversation-list .conversations .conversations-content .conversation{cursor:pointer}:host .conversation-list .conversations .conversations-content .conversation .avatar{flex:none;display:flex;flex-direction:column;justify-content:center;align-items:center;width:40px;height:40px;background:var(--avatar-bg, #7b7e80);color:var(--avatar-color, #fff);border-radius:50%}:host .conversation-list .conversations .conversations-content .conversation .avatar.group{background:var(--group-avatar-bg, #22b1c8);color:var(--group-avatar-color, #fff)}:host .conversation-list .conversations .conversations-content .conversation .avatar.group .icon{margin:-2px 0 2px 0}:host .conversation-list .conversations .conversations-content .conversation .avatar.group .count{line-height:0.8em;font-size:1.333em;letter-spacing:-1px}:host .conversation-list .conversations .conversations-content .conversation .avatar.group .count.small{font-size:1em}:host .conversation-list .conversations .conversations-content .conversation .avatar.group .count.smallest{font-size:.833em}:host .conversation-list .conversations .conversations-content .conversation .avatar.closed{background:none;justify-content:flex-start}:host .conversation-list .conversations .conversations-content .conversation .avatar.closed .badge{background:#303233;color:#ffffff;font-size:.75em;font-weight:300;text-transform:uppercase;padding:3px 4px;margin:5px 0 0 0;border-radius:4px;line-height:1em}:host .conversation-list .conversations .conversations-content .conversation .avatar.closed .badge.blink{-webkit-animation-name:blinker;-webkit-animation-duration:3s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:infinite;-moz-animation-name:blinker;-moz-animation-duration:3s;-moz-animation-timing-function:linear;-moz-animation-iteration-count:infinite;animation-name:blinker;animation-duration:3s;animation-timing-function:linear;animation-iteration-count:infinite}:host .conversation-list .conversations .conversations-content .conversation .expanded{display:none}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .expanded{display:flex;flex-basis:20vw;overflow:hidden;flex-direction:column}:host .conversation-list .conversations .conversations-content .conversation .expanded div.from,:host .conversation-list .conversations .conversations-content .conversation .expanded div.to{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}}:host .conversation-list .conversations .conversations-content .conversation .subject{display:flex;align-items:center;overflow:hidden}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .subject{flex-basis:20vw;padding-right:20px}}:host .conversation-list .conversations .conversations-content .conversation .subject .badge{flex:none;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);font-size:.75em;font-weight:300;text-transform:uppercase;margin:0 5px 0 0;padding:3px 4px;border-radius:4px;line-height:1em}:host .conversation-list .conversations .conversations-content .conversation .subject .badge.blink{-webkit-animation-name:blinker;-webkit-animation-duration:1s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:infinite;-moz-animation-name:blinker;-moz-animation-duration:1s;-moz-animation-timing-function:linear;-moz-animation-iteration-count:infinite;animation-name:blinker;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite}:host .conversation-list .conversations .conversations-content .conversation .subject .title{flex:1 1 auto;font-size:1.333em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .subject .title{display:none}}:host .conversation-list .conversations .conversations-content .conversation .subject .icon{flex:none;margin:0 0 0 10px}:host .conversation-list .conversations .conversations-content .conversation .subject .icon.pending{color:var(--conversation-has-draft-color, #7e8080)}:host .conversation-list .conversations .conversations-content .conversation .subject .icon.error{color:var(--conversation-has-error-color, #d93247)}:host .conversation-list .conversations .conversations-content .conversation .subject .icon.remove{color:var(--subtle-font-color, #828688);cursor:pointer}:host .conversation-list .conversations .conversations-content .conversation .description{display:none}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .description{display:flex;flex-basis:30vw;flex-direction:column;overflow:hidden;padding-right:20px;justify-content:center}:host .conversation-list .conversations .conversations-content .conversation .description div.subject-desc{font-size:1.333em}:host .conversation-list .conversations .conversations-content .conversation .description div.subject-desc,:host .conversation-list .conversations .conversations-content .conversation .description div.user-desc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}}:host .conversation-list .conversations .conversations-content .conversation .preview{display:flex;align-items:center;flex-direction:row;padding-right:20px;color:var(--conversation-read-text, #828688)}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .preview{flex:0 0 30vw}}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview{flex:1 1 auto;display:flex;align-items:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview{display:none}}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .entry{flex:1 1 auto;display:flex;align-items:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .entry .message{text-overflow:ellipsis;overflow:hidden}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .entry .message.has-attachment{display:flex;align-items:center}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .entry .message.has-attachment .icon{margin:0 3px 0 5px;color:var(--subtle-font-color, #828688)}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .entry .message.has-attachment .label{font-size:.833em;color:var(--subtle-font-color, #828688)}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .when{flex:none;margin:0 0 0 10px}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .marker{flex:none;margin:0 0 0 5px;width:16px}:host .conversation-list .conversations .conversations-content .conversation .preview .mobile-preview .marker:before{display:block;content:"";width:10px;height:10px;margin:0 auto;border-radius:50%;background:var(--conversation-read-marker-bg, #fff);border:var(--conversation-read-marker-border, 1px solid #ddd)}:host .conversation-list .conversations .conversations-content .conversation .preview .desktop-preview{display:none}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation .preview .desktop-preview{display:flex;flex-basis:30vw;flex-direction:column;overflow:hidden;justify-content:center}:host .conversation-list .conversations .conversations-content .conversation .preview .desktop-preview div.entry div.message{font-size:1.1em}}:host .conversation-list .conversations .conversations-content .conversation div.raised-on{display:none}@media only screen and (min-width: 960px){:host .conversation-list .conversations .conversations-content .conversation div.raised-on{display:flex;flex-basis:10vw;flex-direction:row;overflow:hidden;align-content:center}:host .conversation-list .conversations .conversations-content .conversation div.raised-on span{margin:auto 0}:host .conversation-list .conversations .conversations-content .conversation div.raised-on div.marker{margin:auto 0 auto 5px;flex:none;width:16px}:host .conversation-list .conversations .conversations-content .conversation div.raised-on div.marker:before{display:block;content:"";width:10px;height:10px;margin:0 auto;border-radius:50%;background:var(--conversation-read-marker-bg, #fff);border:var(--conversation-read-marker-border, 1px solid #ddd)}}:host .conversation-list .conversations .conversations-content .conversation.unread .subject .title{font-weight:600}:host .conversation-list .conversations .conversations-content .conversation.unread .description .subject-desc{font-weight:600}:host .conversation-list .conversations .conversations-content .conversation.unread .preview .entry,:host .conversation-list .conversations .conversations-content .conversation.unread .raised-on .entry{color:var(--conversation-unread-text, #212121)}:host .conversation-list .conversations .conversations-content .conversation.unread .preview .marker:before,:host .conversation-list .conversations .conversations-content .conversation.unread .raised-on .marker:before{background:var(--conversation-unread-marker-bg, #22b1c8);border:var(--conversation-unread-marker-border, 1px solid #22b1c8)}:host .conversation-list .conversations .conversations-content .conversation.closed{position:relative;cursor:default}:host .conversation-list .conversations .conversations-content .conversation.closed .subject{color:var(--subtle-font-color, #828688)}:host .conversation-list .conversations .conversations-content .conversation.closed .subject .title{font-weight:400}:host .conversation-list .conversations .conversations-content .conversation.closed .preview .entry{color:var(--subtle-font-color, #828688)}:host .conversation-list .conversations .conversations-content .conversation.closed .preview .when{color:var(--subtle-font-color, #828688)}:host .conversation-list .conversations .conversations-content .conversation.closed .preview .marker{display:none}
        `}generateComponentMarkup(){return window.__CTRender('div',{class:'conversation-list'},this._renderHeader(),window.__CTRender('div',{class:'filter'},window.__CTRender(te.CTSelectionTextFilter,{placeholder:this.translateI18nItem(ae.FILTER_PLACEHOLDER),selectionItems:this.filterItems,onSearch:this._onFilterChange})),window.__CTRender('div',{class:'column-headings'},window.__CTRender('div',{class:'type'},window.__CTRender('span',null,'Type')),window.__CTRender('div',{class:'from-to'},window.__CTRender('span',null,'From / To')),window.__CTRender('div',{class:'subject'},window.__CTRender('span',null,'Subject / Description')),window.__CTRender('div',{class:'last-response'},window.__CTRender('span',null,'Response / Time')),window.__CTRender('div',{class:'raised-at'},window.__CTRender('span',null,'Raised'))),this.isFetching&&window.__CTRender('div',{class:'fetching'},window.__CTRender(Q.CTIcon,{width:'16',height:'16',icon:B.Icons.COMMON.LoadingSpinner,spin:!0})),!this.isFetching&&this._renderConversations())}_renderHeader(){const ie=this._virtualList.items.filter((ue)=>{return ue.hasUnread&&!ue.isClosed}),de=ie.length,le=this.translateI18nItem(ae.CONVERSATIONS),_e=0===de?this.translateI18nItem(ae.NO_UNREAD):this.translateI18nItem(ae.UNREAD_COUNT).replace('{{number}}',de.toString());return window.__CTRender(X.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'heading'},le),window.__CTRender('div',{slot:'sub-heading'},_e),window.__CTRender('div',{slot:'right-action'},this._renderRightAction()))}_renderRightAction(){return 0===this.layer.getConfiguredConversations().length?null:this.updatingUserDirectory?window.__CTRender(Q.CTIcon,{class:'action',width:'20',height:'20',icon:B.Icons.COMMON.LoadingSpinner,spin:!0}):window.__CTRender(Q.CTIcon,{class:'action',width:'20',height:'20',icon:B.Icons.COMMON.PlusSign,onClick:this._startNew.bind(this)})}_renderConversations(){return this._allConversations&&0!==this._allConversations.length?0===this._virtualList.items.length?window.__CTRender('div',{class:'no-conversations'},this.translateI18nItem(ae.NO_MATCH)):this._virtualList.render(this._renderConversation.bind(this),'conversations','conversations-content'):window.__CTRender('div',{class:'no-conversations'},this.translateI18nItem(ae.NO_CONVERSATIONS))}_renderConversation(ie,de){const le=new ne.ConversationConfigReader(this.layer,ie),_e=['conversation',ie.hasUnread?'unread':'read'];ie.isClosed&&_e.push('closed'),ie.isClosed||'function'!=typeof this._onClickConversation||_e.push('clickable');const ue=this.layer.getCurrentUserJid(),ce=$.getConversationTitle(ie,this._userLookup,ue,this.translateI18nItem(ae.YOU)),pe=ie.description?ie.description.substr(0,100):null,he=this._userLookup.get(ie.instigator).displayName,ge=$.generateConversationTitleFromParticipants(this._userLookup,ie.participants.filter((Le)=>Le.jid!==ue),ue).substr(0,100),fe=ie.preview&&(0===K.daysFromNow(ie.preview.date)?K.getFriendlyTime(ie.preview.date):K.getFriendlyDate(ie.preview.date,this))||null,ye=0===K.daysFromNow(ie.createdTime)?K.getFriendlyTime(ie.createdTime):K.getFriendlyDate(ie.createdTime,this);let Te=le.name,Ce=le.colorCode;$.isExpiredConversation(ie)?(Te=le.name,Ce='#CCC'):le.alert&&(Te=le.name,Ce=le.colorCode);const Me=ee.buildStyles({backgroundColor:Ce,color:Ce?ee.decideTextColorFromBgColor(Ce):'#FFF'}),ve=['badge'];if(le.alert){const Le=this.layer.getCurrentUserJid();ie.instigator===Le||le.autoIncludeMembersInRoles.length&&le.autoIncludeMembersInRoles.includes(this.layer.getCurrentUser().group)||$.isExpiredConversation(ie)||ie.acknowledgements&&ie.acknowledgements.find((Ee)=>Ee.jid===Le)||ve.push('blink')}return window.__CTRender('div',Object.assign({class:_e.join(' ')},de,{onClick:(Le)=>this._onClickConversation(ie,Le,le)}),window.__CTRender(Q.CTAvatarTile,{height:`${this.TILE_HEIGHT}px`,hatched:ie.isClosed},this._renderAvatar(ie,le),window.__CTRender('div',{class:'subject'},le.namedSettings&&!ie.isClosed&&window.__CTRender('div',{class:ve.join(' '),style:Me},Te),window.__CTRender('div',{class:'expanded'},window.__CTRender('div',{class:'from'},'From: ',he),window.__CTRender('div',{class:'to'},'To: ',ge)),window.__CTRender('div',{class:'title'},ce),this._renderSubjectLineIcon(ie)),window.__CTRender('div',{class:'description'},window.__CTRender('div',{class:'subject-desc'},ce),window.__CTRender('div',{class:'user-desc'},pe)),ie.preview&&window.__CTRender('div',{class:'preview'},window.__CTRender('div',{class:'mobile-preview'},this._renderPreviewLine(ie.preview),window.__CTRender('div',{class:'when'},fe),window.__CTRender('div',{class:'marker'})),window.__CTRender('div',{class:'desktop-preview'},this._renderPreviewLine(ie.preview),window.__CTRender('div',{class:'when'},fe))),window.__CTRender('div',{class:'raised-on'},window.__CTRender('span',null,ye),window.__CTRender('div',{class:'marker'}))))}_renderAvatar(ie,de){const le=this.layer.getCurrentUserJid(),_e=ie.participants.filter((ce)=>!K.jidsMatch(ce.jid,le));if(ie.isClosed)return window.__CTRender('div',{slot:'avatar',class:'avatar closed'},window.__CTRender('div',{class:'badge'},this.translateI18nItem(ae.CLOSED)));if(de.alert&&de.autoAlert)return window.__CTRender('div',{slot:'avatar',class:'avatar individual'},window.__CTRender(Q.CTUserAvatar,{bgColor:ie.isClosed?null:de.colorCode,defaultIcon:J.Icons.UI.AlertBellRinging}));if(de.alert&&!de.autoAlert)return window.__CTRender('div',{slot:'avatar',class:'avatar individual'},window.__CTRender(Q.CTUserAvatar,{bgColor:ie.isClosed?null:de.colorCode,defaultIcon:J.Icons.UI.AlertBell}));const ue=1===_e.length;if(ue){const ce=this._userLookup.get(_e[0].jid);return window.__CTRender('div',{slot:'avatar',class:'avatar individual'},window.__CTRender(Q.CTUserAvatar,{bgColor:ie.isClosed?null:de.colorCode||K.getCSSVariable('--primary-color'),user:ce}))}const ce=_e.length.toString().length;let pe='';return 3===ce?pe='small':4===ce&&(pe='smallest'),window.__CTRender('div',{slot:'avatar',class:'avatar group'},window.__CTRender(Q.CTIcon,{class:'icon',width:'12',height:'12',icon:B.Icons.COMMON.Users}),window.__CTRender('div',{class:`count ${pe}`},'+ ',_e.length))}_renderSubjectLineIcon(ie){if(ie.isClosed)return window.__CTRender('div',{class:'icon remove'},window.__CTRender(Q.CTIcon,{width:'16',height:'16',icon:B.Icons.COMMON.CircleCross,onClick:(de)=>this._removeConversation(ie,de)}));return ie.draft?!0===ie.draft.error?window.__CTRender('div',{class:'icon error'},window.__CTRender(Q.CTIcon,{width:'16',height:'16',icon:J.Icons.UI.Error})):ie.draft?window.__CTRender('div',{class:'icon pending'},window.__CTRender(Q.CTIcon,{width:'16',height:'16',icon:J.Icons.UI.Pencil})):void 0:null}_renderPreviewLine(ie){if(!ie)return null;return window.__CTRender('div',{class:'entry'},(()=>{switch(ie.type){case B.ChatEntryType.Meta:const le=this.layer.getCurrentUserJid(),ue=$.getChatMetaActivitySummaryText(ie,this._userLookup,le,this,!1);return window.__CTRender('div',{class:'message'},ue);case B.ChatEntryType.Chat:const ce=ie,pe=this._userLookup.get(ce.from),he=ce.mine?this.translateI18nItem(ae.YOU):K.formatUserName(pe,K.NameFormat.PREFIX_INITIAL_LAST)||ce.from,ge=ce.attachments&&0<ce.attachments.length,fe=['message'];ge&&fe.push('has-attachment');const ye=$.getChatMessageTextForPreview(ce,this);return window.__CTRender('div',{class:fe.join(' ')},he,':',' ',ge&&window.__CTRender('div',{class:'icon'},window.__CTRender(Q.CTIcon,{width:'14',height:'14',icon:J.Icons.UI.Attachment})),ge&&window.__CTRender('span',{class:'label'},ye),!ge&&ye);}})())}_startNew(){return R(this,void 0,void 0,function*(){if(this.layer.config.behaviour.updateUsersOnNewConversationClick){this.updatingUserDirectory=!0;try{yield this.layer.updateUserDirectory()}catch(ie){console.error(ie)}finally{this.updatingUserDirectory=!1,this.emitComponentEvent('go-new-conversation')}}else this.emitComponentEvent('go-new-conversation')})}_onClickConversation(ie,de,le){return R(this,void 0,void 0,function*(){if(de.stopPropagation(),!ie.isClosed)return yield this.layer.setCurrentConversation(ie,!1),!le.alert||ie.instigator===this.layer.getCurrentUserJid()||le.autoIncludeMembersInRoles.length&&le.autoIncludeMembersInRoles.includes(this.layer.getCurrentUser().group)||$.isExpiredConversation(ie)||ie.acknowledgements&&ie.acknowledgements.find((_e)=>_e.jid===this.layer.getCurrentUserJid())?void this.emitComponentEvent('go-chat'):void(yield this.layer.showConversationAlert(ie,!0))})}_removeConversation(ie,de){return R(this,void 0,void 0,function*(){de.stopPropagation();ie.isClosed&&(yield this.layer.removeConversationById(ie.id))})}_updateConversations(){return R(this,void 0,void 0,function*(){const ie=yield this.layer.getConversations();this._allConversations=ie.filter((de)=>!de.hideBefore),yield this._userLookup.populate(this._allConversations),this._updateVirtualList(),this.filterItems=this._generateFilterItems()})}_updateVirtualList(){return R(this,void 0,void 0,function*(){this.isFetching=!0;const ie=this.layer.getCurrentUserJid(),de=$.prepareConversationsForList(this._userLookup,this._allConversations,ie,this._filterType,this._filterTerm,this.layer);this._conversationHash=$.sortConversationsIntoHash(this._userLookup,this._allConversations,ie,this._filterType,this._filterTerm,this.layer),this._virtualList.setItems(de),this.filterItems=this._generateFilterItems(),this.isFetching=!1})}}I([N.prop({type:N.Stroolean,attribute:!1,default:!0})],se.prototype,'isFetching',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],se.prototype,'updatingUserDirectory',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],se.prototype,'filterItems',void 0),E.CTCLConversationList=se,se.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(pe,he,ge,fe){var ye=arguments.length,Te=3>ye?he:null===fe?fe=Object.getOwnPropertyDescriptor(he,ge):fe,Ce;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Te=Reflect.decorate(pe,he,ge,fe);else for(var Me=pe.length-1;0<=Me;Me--)(Ce=pe[Me])&&(Te=(3>ye?Ce(Te):3<ye?Ce(he,ge,Te):Ce(he,ge))||Te);return 3<ye&&Te&&Object.defineProperty(he,ge,Te),Te},R=this&&this.__awaiter||function(pe,he,ge,fe){return new(ge||(ge=Promise))(function(ye,Te){function Ce(Le){try{ve(fe.next(Le))}catch(Ee){Te(Ee)}}function Me(Le){try{ve(fe['throw'](Le))}catch(Ee){Te(Ee)}}function ve(Le){Le.done?ye(Le.value):new ge(function(Ee){Ee(Le.value)}).then(Ce,Me)}ve((fe=fe.apply(pe,he||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(9),W=A(12),G=A(5),J=A(10),K=A(3),$=A(19),X=A(2),Q=A(4),Z=A(1),ee=A(20),te=A(149),ne=A(58),ae=A(14),oe=A(106),se=A(104),ie=A(186),de=A(107);var le;(function(pe){pe[pe.SELECT_CONTACTS='Select Contacts']='SELECT_CONTACTS',pe[pe.CHOOSE_CONTACT='']='CHOOSE_CONTACT',pe[pe.TOTAL_CONTACTS='Total {{number}} Contacts Added']='TOTAL_CONTACTS',pe[pe.TOTAL_CONTACTS_MAX='Total {{number}} Contacts Added (out of {{maximum}})']='TOTAL_CONTACTS_MAX',pe[pe.SEARCH_PLACEHOLDER='Find Contacts']='SEARCH_PLACEHOLDER',pe[pe.INITIAL_MESSAGE='Find your contacts using the search bar above']='INITIAL_MESSAGE',pe[pe.NO_MATCHES='No contacts match your search']='NO_MATCHES',pe[pe.DIRECT='Direct']='DIRECT',pe[pe.NAMED='Named']='NAMED',pe[pe.NAMED_CONVERSATION='Named Conversation']='NAMED_CONVERSATION',pe[pe.ADD_SUBJECT_AND_DESCRIPTION='Add a Subject & Description']='ADD_SUBJECT_AND_DESCRIPTION',pe[pe.SUBJECT='Subject']='SUBJECT',pe[pe.DESCRIPTION_OPTIONAL='Description (optional)']='DESCRIPTION_OPTIONAL',pe[pe.CREATE='Create']='CREATE',pe[pe.CREATING_CONVERSATION='Creating conversation']='CREATING_CONVERSATION',pe[pe.THIS_PRIORITY_WILL_POP_UP_WARNING='Selecting this priority will cause a pop-up on the recipient\'s device, are you sure?']='THIS_PRIORITY_WILL_POP_UP_WARNING',pe[pe.WARN_NO_CONTACTS='You have not selected any contacts. Are you sure you wish to proceed?']='WARN_NO_CONTACTS',pe[pe.OPTIONS='Options']='OPTIONS',pe[pe.PARTICIPANT_ERROR='You cannot create this conversation without selecting contacts first.']='PARTICIPANT_ERROR'})(le||(le={}));class _e{static _create(){return new H.Metadata(ce,le)}static get instance(){return this._instance||(this._instance=this._create())}}_e._instance=null,E.CTCLNewConversationMetadata=_e;var ue;(function(pe){pe[pe.CONTACT_LIST=0]='CONTACT_LIST',pe[pe.NAMED_CONVERSATION_DETAILS=1]='NAMED_CONVERSATION_DETAILS'})(ue||(ue={}));class ce extends W.CTCLComponent{constructor(){super(),this._namedConversationSubject='',this._namedConversationDescription='',this._pendingConversationId=null,this._alertResponseOption=G.defaultAlertResponseOption,this._newPageOptions=te.generateDefaultNewPage(),this._attachments=[],this._startDirectConversation=()=>R(this,void 0,void 0,function*(){const pe=yield this._getConversationParticipants(!1);yield this._resetUserList();const he=yield this.layer.getDirectConversationByParticipants(pe);if(he)yield this.layer.setCurrentConversation(he),this.emitComponentEvent('go-chat');else{const ge=J.createProvisionalDirectConversation(pe,this._config.constructConfigurationToSend());yield this.layer.setProvisionalConversation(ge),this.emitComponentEvent('go-chat')}}),this._goToNamedConversationDetailsStep=()=>R(this,void 0,void 0,function*(){this.step=ue.NAMED_CONVERSATION_DETAILS}),this._onReplyTemplateChange=(pe)=>{const he=this._config.alertResponseOptions[pe];this._alertResponseOption=he?he:G.defaultAlertResponseOption},this._setImgAttachment=(pe)=>{this._attachments.filter((he)=>he.type===G.SupportedAttachmentType.IMAGE).forEach((he,ge)=>this._attachments.splice(ge,1)),pe&&this._attachments.push({path:pe,type:G.SupportedAttachmentType.IMAGE})},this._setAudioAttachment=(pe)=>{const he=!this._config.subjectRequired||0<this._namedConversationSubject.trim().length,ge=!this._config.descriptionRequired||0<this._namedConversationDescription.trim().length;he&&ge&&(this.createNamedConversationDisabled=!1),this.isRecording=!1,this._attachments.filter((fe)=>fe.type===G.SupportedAttachmentType.AUDIO).forEach((fe,ye)=>this._attachments.splice(ye,1)),pe&&this._attachments.push({path:pe,type:G.SupportedAttachmentType.AUDIO})},this._setVideoAttachment=(pe)=>{this._attachments.filter((he)=>he.type===G.SupportedAttachmentType.VIDEO).forEach((he,ge)=>this._attachments.splice(ge,1)),pe&&this._attachments.push({path:pe,type:G.SupportedAttachmentType.VIDEO})},this._onEnableChatChange=(pe)=>{this._newPageOptions.enableChat=pe},this.setMetadata(_e.instance)}static get is(){return'ct-cl-new-conversation'}initialize(){return R(this,void 0,void 0,function*(){this.layer.setBackHandler(()=>{this._back()})})}setupListeners(){this.setupConnectionStatusListener(),this.addListener(Q.ChatEvents.ConversationAdded,(pe)=>R(this,void 0,void 0,function*(){this._pendingConversationId&&this._pendingConversationId===pe.conversation.id&&(this._pendingConversationId=null,yield this._resetUserList(),yield this.layer.setCurrentConversation(pe.conversation),yield this.dismissWaitingMessage(),this.emitComponentEvent('go-chat'))})),this.addListener(z.BaseEvents.ConnectionStatusChange,(pe)=>{pe.status===B.ConnectionStatus.Disconnected&&this.dismissWaitingMessage()},{dontSuppress:!0}),this.addListener(Q.ChatEvents.AudioRecordingStarted,()=>{this.isRecording=!0,this.createNamedConversationDisabled=!0})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;height:100%;font-size:1em}:host hr{display:block;height:1px;border:0;border-top:1px solid var(--default-border-color, #ddd);margin:10px 5px;padding:0}:host .new-conversation{flex:1 1 auto;display:flex;flex-direction:column;height:100%}:host .new-conversation .header .action{cursor:pointer}:host .new-conversation .contact-list{flex:1 1 auto;display:flex;flex-direction:column;overflow:auto}:host .new-conversation .contact-list #user-list{display:flex;flex-direction:column;flex:1}:host .new-conversation .contact-list.hidden{display:none}:host .new-conversation .named-conversation-details{flex:1 1 auto;display:flex;flex-direction:column;overflow:auto;background:var(--secondary-color, #f2f2f2);padding:10px}:host .new-conversation .named-conversation-details.hidden{display:none}:host .new-conversation .named-conversation-details .priority-type-description{text-align:center;padding:15px 30px 0 30px}:host .new-conversation .footer{flex:0 0 auto;background:var(--secondary-color, #f2f2f2);border-top:var(--secondary-border, 1px solid #ddd);display:flex;padding:10px 20px}:host .new-conversation .footer .button{flex:1 1;margin:0 5px;font-size:1.4em}
        `}generateComponentMarkup(){return window.__CTRender('div',{class:'new-conversation'},this._renderHeader(),this._renderContactList(),this._renderNamedConversationDetails(),this._renderFooter())}_renderHeader(){const pe=this.layer.config.behaviour.maxConversationParticipants||0,he=0===pe?this.translateI18nItem(le.TOTAL_CONTACTS):this.translateI18nItem(le.TOTAL_CONTACTS_MAX),ge=null!==this.showCountFrom&&this.selectedParticipantCount>=this.showCountFrom?he.replace('{{number}}',this.selectedParticipantCount.toString()).replace('{{maximum}}',(pe-1).toString()):this.translateI18nItem(le.CHOOSE_CONTACT);let fe='',ye='';return this.step===ue.CONTACT_LIST&&(fe=this.translateI18nItem(le.SELECT_CONTACTS),ye=ge),this.step===ue.NAMED_CONVERSATION_DETAILS&&(fe=this._config.name,ye=this._config.shortDescription),window.__CTRender($.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'left-action'},window.__CTRender(X.CTIcon,{class:'action',width:'20',height:'20',icon:B.Icons.COMMON.ChevronLeft,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},fe),ye&&window.__CTRender('div',{slot:'sub-heading'},ye))}_renderContactList(){const pe=this.layer.getCurrentUserJid(),he=this.layer.config.behaviour.maxConversationParticipants,ge={excludeUsers:[pe],allowSearch:this.allowSearch,requireSearch:this.requireSearch,searchPlaceholder:this.translateI18nItem(le.SEARCH_PLACEHOLDER),initialMessage:this.translateI18nItem(le.INITIAL_MESSAGE),noMatchesMessage:this.translateI18nItem(le.NO_MATCHES),allowSelection:!0,maxSelections:he-1,onChangeSelection:(ye)=>{this.selectedParticipantCount=ye.length},onClickUser:(ye)=>{ye.users||this.layer.showContactInfo(ye,null,!1)},onClickGroup:(ye)=>this.layer.showRoleUsersModal(ye)},fe=['contact-list'];return this.step!==ue.CONTACT_LIST&&fe.push('hidden'),window.__CTRender('div',{class:fe.join(' ')},window.__CTRender(X.CTUserList,Object.assign({id:'user-list'},ge)))}_renderNamedConversationDetails(){if(!this._config)return null;const pe=['named-conversation-details'];this.step!==ue.NAMED_CONVERSATION_DETAILS&&pe.push('hidden');const he=this._config.maxSubjectLength,ge=this._config.maxDescriptionLength;return window.__CTRender('div',{class:pe.join(' ')},window.__CTRender('div',{class:'form-item subject'},window.__CTRender(X.CTTextbox,{type:'text',name:'subject',max:he,required:this._config.subjectRequired,fullBorder:!0,placeholder:this._config.subjectFieldLabel,callback:(fe)=>this._onChangeNamedConversationDetail(fe)})),window.__CTRender('div',{class:'form-item description'},window.__CTRender(X.CTTextbox,{type:'textarea',name:'description',max:ge,required:this._config.descriptionRequired,fullBorder:!0,placeholder:this._config.descriptionFieldLabel,callback:(fe)=>this._onChangeNamedConversationDetail(fe)})),this._renderResponseOptions(),this._config.image&&window.__CTRender('div',null,window.__CTRender('hr',null),window.__CTRender(oe.CTCLImageAttachment,{callback:this._setImgAttachment}),window.__CTRender('hr',null)),this._config.audio&&window.__CTRender('div',null,window.__CTRender(se.CTCLAudioAttachment,{callback:this._setAudioAttachment,allowAttach:this._config.attachPreRecordedFile,allowRecorc:this._config.attachLiveRecordedAudio}),window.__CTRender('hr',null)),this._config.video&&window.__CTRender('div',null,window.__CTRender(de.CTCLVideoAttachment,{callback:this._setVideoAttachment}),window.__CTRender('hr',null)),'user-choice'===this._config.chatAvailable&&window.__CTRender(ie.CTSingleCheckbox,{label:'Enable chat',value:!0,callback:this._onEnableChatChange}))}_renderResponseOptions(){if(!this._config.alertResponseOptions)return null;const pe=[...this._config.alertResponseOptions];0===this._config.alertResponseOptions.length&&pe.push(G.defaultAlertResponseOption);const he=pe.map((ge,fe)=>({key:fe,value:ge.name}));return window.__CTRender('div',null,window.__CTRender('div',{class:'form-item priority'},window.__CTRender(X.CTSelectionList,{name:'priority',options:he,selected:0,forceDropdown:!0,onSelect:this._onReplyTemplateChange})))}_renderFooter(){return window.__CTRender('div',{class:'footer'},this._renderFooterButtons())}_renderFooterButtons(){if(this.step===ue.CONTACT_LIST){const pe=this.layer.getConfiguredConversations().map((he)=>({primaryText:he.name,subtitleText:he.shortDescription,action:()=>this._startNewConversation(he)}));return[window.__CTRender(ne.CTActionSheet,{buttons:pe,openSheetButtonText:'Create'})]}return this.step===ue.NAMED_CONVERSATION_DETAILS?[window.__CTRender(X.CTButton,{type:'primary',class:'button',disabled:!this.isOnline||this.createNamedConversationDisabled,onClick:this._startNamedConversation.bind(this)},this.translateI18nItem(le.CREATE))]:void 0}_back(){return R(this,void 0,void 0,function*(){this.step===ue.CONTACT_LIST&&(yield this._resetUserList(),this.emitComponentEvent('go-back')),this.step===ue.NAMED_CONVERSATION_DETAILS&&(this.step=ue.CONTACT_LIST,setTimeout(()=>{const pe=this.shadowRoot.querySelector('#user-list');pe&&pe.forceRecalcList()},250))})}_startNewConversation(pe){if(this._config=new ae.ConversationConfigReader(this.layer,null,pe),0===this.selectedParticipantCount&&this._config.errorWhenNoContacts){const he=new Z.DefaultAlerts(this).AlertErrorWithOkayButton(this.translateI18nItem(ee.CommonMetadata.getI18nItem(ee.CommonI18nKeys.ERROR)),this.translateI18nItem(le.PARTICIPANT_ERROR),1,{okay:()=>{}});this.emitEvent(Q.ChatEvents._Request_RaiseAlert,he)}else if(0===this.selectedParticipantCount&&this._config.warnWhenNoContacts){const he=new Z.DefaultAlerts(this).AlertYesNoQuestion(this.translateI18nItem(ee.CommonMetadata.getI18nItem(ee.CommonI18nKeys.ARE_YOU_SURE)),this.translateI18nItem(le.WARN_NO_CONTACTS),1,{yes:()=>{this._config.namedSettings?this._goToNamedConversationDetailsStep():this._startDirectConversation()},no:()=>{}});this.emitEvent(Q.ChatEvents._Request_RaiseAlert,he)}else this._config.namedSettings?this._goToNamedConversationDetailsStep():this._startDirectConversation()}_onChangeNamedConversationDetail(pe){pe&&'subject'===pe.key&&(this._namedConversationSubject=pe.value),pe&&'description'===pe.key&&(this._namedConversationDescription=pe.value);const he=!this._config.subjectRequired||0<this._namedConversationSubject.trim().length,ge=!this._config.descriptionRequired||0<this._namedConversationDescription.trim().length;this.isRecording||(this.createNamedConversationDisabled=!he||!ge),this.forceRedraw()}_startNamedConversation(){return R(this,void 0,void 0,function*(){if(!this.createNamedConversationDisabled)if(!this._config.suppressAlertModalWarning&&this._config.autoAlert){const pe=new Z.DefaultAlerts(this).AlertYesNoQuestion(this.translateI18nItem(ee.CommonMetadata.getI18nItem(ee.CommonI18nKeys.ARE_YOU_SURE)),this.translateI18nItem(le.THIS_PRIORITY_WILL_POP_UP_WARNING),1,{yes:()=>R(this,void 0,void 0,function*(){this._completeStartNamedConversation()}),no:()=>R(this,void 0,void 0,function*(){})});this.emitEvent(Q.ChatEvents._Request_RaiseAlert,pe)}else this._completeStartNamedConversation()})}_completeStartNamedConversation(){return R(this,void 0,void 0,function*(){const pe=yield this._getConversationParticipants(!0);yield this.showWaitingMessage(this.translateI18nItem(le.CREATING_CONVERSATION)),this._pendingConversationId=yield this.layer.createConversation(pe,this._namedConversationSubject.trim(),this._namedConversationDescription.trim(),this._config.defaultConversationExpiryTTL,this._config.defaultConversationActivityTTL,this._config.constructConfigurationToSend(this._alertResponseOption,this._config.chatAvailable),this._attachments)})}_getSelectedUsers(){return R(this,void 0,void 0,function*(){const pe=this.shadowRoot.querySelector('#user-list');if(!pe)return[];const he=yield pe.getSelections();return K.sortUsersByName(he)})}_resetUserList(){return R(this,void 0,void 0,function*(){const pe=this.shadowRoot.querySelector('#user-list');pe&&(yield pe.reset())})}_getConversationParticipants(pe){return R(this,void 0,void 0,function*(){const he=this.layer.getCurrentUserJid(),ge=yield this._getSelectedUsers(),fe=new Map;for(const Me of ge)Me.name?Me.users.map((ve)=>fe.set(ve.jid.toLowerCase(),ve)):fe.set(Me.jid.toLowerCase(),Me);const ye=Array.from(fe.keys()),Te=pe?[he]:null,Ce=pe?ye:[he,...ye];return J.buildConversationParticipants(Te,null,Ce)})}}I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],ce.prototype,'allowSearch',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],ce.prototype,'requireSearch',void 0),I([N.prop({type:N.NullableNumber,attribute:!0,default:null})],ce.prototype,'showCountFrom',void 0),I([N.prop({type:Number,attribute:!1,default:0})],ce.prototype,'selectedParticipantCount',void 0),I([N.prop({type:Number,attribute:!1,default:ue.CONTACT_LIST})],ce.prototype,'step',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],ce.prototype,'createNamedConversationDisabled',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],ce.prototype,'isRecording',void 0),E.CTCLNewConversation=ce,ce.register()},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(70),R=A.n(I),N=A(71);E['default']=A.i(N.a)(R.a)},function(L,E){'use strict';function I(){const G=window.navigator.userAgent;return /Android/i.test(G)?'android':/iPhone|iPad|iPod/i.test(G)?'ios':/Electron/i.test(G)?'electron':/Chrome/i.test(G)?'chrome':/Safari/i.test(G)?'safari':/Edge/i.test(G)?'edge':z.MSInputMethodContext&&W.documentMode?'ie':null}Object.defineProperty(E,'__esModule',{value:!0});const z=window,W=document;E.getPlatformName=I,E.isElectron=function(){return'electron'===I()},E.isWindows=function(){return-1!==navigator.userAgent.toUpperCase().indexOf('WINDOWS')},E.isDevice=function(){const G=I();return'android'===G||'ios'===G},E.isBrowser=function(){const G=I();return'chrome'===G||'safari'===G||'ie'===G||'edge'===G}},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q};Object.defineProperty(E,'__esModule',{value:!0});const R=A(24),N=A(0),H=A(91);window.__CTRender=window.skate.h;const B=[H.OverridingStylesMixin,H.ComponentStylesMixin,H.RenderMixin],z=B.reduce((G,J)=>J(G),R.Component);class W extends z{renderHtml(G,J){(void 0===G||null===G)&&(G='');const K=-1!==G.indexOf('<')||-1!==G.indexOf('>')||-1!==G.indexOf('&lt;')||-1!==G.indexOf('&gt;');if(!K)return G;const $=`html_${J||performance.now().toString().replace('.','')}`,X=R.h('span',{id:$,class:'user-html',style:{display:'inline-block'}});return this.onRenderComplete(()=>{if(this.shadowRoot){const Q=this.shadowRoot.querySelector(`#${$}`);Q&&(Q.innerHTML=G)}},!0),X}onRenderComplete(G,J=!1){this.addEventListener('render-complete',function K(){G(),J&&this.removeEventListener('render-complete',K)})}renderedCallback(){super.renderedCallback(),this.dispatchEvent(new CustomEvent('render-complete'))}forceRedraw(){this._renderTrigger=new Date().getTime()}static register(){if(null===this.is)return void console.error('Could not register component, please ensure that it has a static is property');const G=customElements.get(this.is);G||customElements.define(this.is,this)}}W.is=null,I([N.prop({type:Number,attribute:!1,default:0})],W.prototype,'_renderTrigger',void 0),E.CTBaseComponent=W},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class I{static addInstance(R,N){I.ensureRegistrationsObject(),window.__CTLayers[R]={instance:N,isReady:!1}}static getInstance(R){I.ensureRegistrationsObject();const N=window.__CTLayers[R];return!N?null:N.instance}static onReady(R,N){I.ensureRegistrationsObject();const H=window.__CTLayers[R],B=!!H&&H.isReady;B?setTimeout(()=>{N()},0):document.addEventListener(`base-layer-ready:${R}`,()=>{setTimeout(()=>{N()},0)})}static fireReady(R){I.ensureRegistrationsObject();const N=window.__CTLayers[R];!N||(N.isReady=!0),document.dispatchEvent(new CustomEvent(`base-layer-ready:${R}`,{detail:{layer:N.instance}}))}static ensureRegistrationsObject(){window.__CTLayers||(window.__CTLayers={})}}E.LayerRegistration=I,window.CtLayerRegistration=I},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(11);var R;(function(B){B[B.PLEASE_WAIT='Please wait...']='PLEASE_WAIT',B[B.ERROR='Error']='ERROR',B[B.ERROR_OCCURED='An error occurred']='ERROR_OCCURED',B[B.YES='Yes']='YES',B[B.NO='No']='NO',B[B.OKAY='Okay']='OKAY'})(R||(R={}));class N{static _create(){return new I.Metadata(H,R)}static get instance(){return this._instance||(this._instance=this._create())}}N._instance=null,E.DefaultAlertsMetadata=N;class H{constructor(B){this._translationProvider=B,this._metadata=N.instance}AlertWaiting(B){return{id:this.generateId(),raisedOn:new Date().getTime(),priority:1,type:'info',title:this._translate(R.PLEASE_WAIT),body:B,showLoadingAnimation:!0}}AlertErrorWithOkayButton(B=this._translate(R.ERROR),z=this._translate(R.OKAY),W=1,G={}){return{id:this.generateId(),raisedOn:new Date().getTime(),priority:W,type:'error',title:B,body:z,buttons:[{text:this._translate(R.OKAY),action:G.okay,type:'primary'}]}}AlertYesNoQuestion(B,z,W=0,G={}){return{id:this.generateId(),raisedOn:new Date().getTime(),priority:W,type:'question',title:B,body:z,buttons:[{text:this._translate(R.NO),action:G.no,type:'primary'},{text:this._translate(R.YES),action:G.yes,type:'primary'}]}}AlertQuestion(B,z,W=0,G){return{id:this.generateId(),raisedOn:new Date().getTime(),priority:W,type:'question',title:B,body:z,buttons:G}}AlertAcknowledge(B,z,W=0,G={},J=this._translate(R.OKAY)){return{id:this.generateId(),raisedOn:new Date().getTime(),priority:W,type:'success',title:B,body:z,buttons:[{text:J,action:G.okay,type:'primary'}]}}generateId(){return'alert_'+new Date().getTime().toString()}_translate(B){return this._translationProvider.translateI18nItem(this._metadata.getI18nItem(B))}}E.DefaultAlerts=H},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R.COMMON={StatusOnline:{viewBox:'0 0 1024 1024',paths:['M470.923457,555.52087 L517.156966,555.52087 L678.97425,987.033627 L309.106173,987.033627 L470.923457,555.52087 Z M581.144144,581.041767 L537.561355,537.458979 C548.780687,526.239647 555.684891,510.828477 555.684891,493.87619 C555.684891,459.848327 528.068075,432.231511 494.040212,432.231511 C459.950704,432.231511 432.395532,459.848327 432.395532,493.87619 C432.395532,510.828477 439.238091,526.239647 450.457423,537.458979 L406.874635,581.041767 C384.559261,558.726393 370.750852,527.904054 370.750852,493.87619 C370.750852,425.75882 425.922841,370.586831 494.040212,370.586831 C562.095938,370.586831 617.329571,425.75882 617.329571,493.87619 C617.329571,527.904054 603.459518,558.726393 581.144144,581.041767 Z M494.040212,185.652792 L493.916922,185.652792 C664.179527,185.652792 802.14032,323.67523 802.14032,493.87619 C802.14032,579.007493 767.680944,656.063343 711.892509,711.851778 L668.309721,668.268989 C712.940469,623.638241 740.495641,561.993561 740.495641,493.937835 C740.495641,357.764738 630.213309,247.359117 494.040212,247.359117 C357.80547,247.359117 247.461493,357.764738 247.461493,493.937835 C247.461493,561.993561 274.95502,623.638241 319.647413,668.268989 L276.064625,711.851778 C220.337834,656.063343 185.816814,579.007493 185.816814,493.87619 C185.816814,323.67523 323.777607,185.652792 494.040212,185.652792 Z M494.040212,0.718753674 C766.386406,0.718753674 987.197648,221.529996 987.197648,493.87619 C987.197648,630.049288 931.964016,753.338647 842.702519,842.600143 L799.119731,799.017354 C877.22354,720.97519 925.552969,613.097001 925.552969,493.87619 C925.552969,255.557859 732.296898,62.3634333 494.040212,62.3634333 C255.72188,62.3634333 62.5274544,255.557859 62.5274544,493.87619 C62.5274544,613.097001 110.733594,720.97519 188.899048,799.017354 L145.316259,842.600143 C56.0547631,753.338647 0.882774838,630.049288 0.882774838,493.87619 C0.882774838,221.529996 221.632372,0.718753674 494.040212,0.718753674 Z']},StatusOffline:{viewBox:'0 0 1024 1024',paths:['M586.678306,210.286115 C562.139482,203.996961 536.419525,200.652792 509.916922,200.652792 L510.040212,200.652792 C339.777607,200.652792 201.816814,338.67523 201.816814,508.87619 C201.816814,535.342777 205.153389,561.028843 211.426433,585.537988 L264.560722,532.403699 C263.833299,524.67956 263.461493,516.852047 263.461493,508.937835 C263.461493,372.764738 373.80547,262.359117 510.040212,262.359117 C517.95418,262.359117 525.7807,262.732021 533.503206,263.461215 L586.678306,210.286115 Z M806.86787,425.990261 C814.213724,452.364232 818.14032,480.162284 818.14032,508.87619 C818.14032,594.007493 783.680944,671.063343 727.892509,726.851778 L684.309721,683.268989 C728.940469,638.638241 756.495641,576.993561 756.495641,508.937835 C756.495641,498.546495 755.853446,488.305204 754.606559,478.251572 L806.86787,425.990261 Z','M729.725748,67.238671 C663.573003,34.2656239 588.970927,15.7187537 510.040212,15.7187537 C237.632372,15.7187537 16.8827748,236.529996 16.8827748,508.87619 C16.8827748,587.810373 35.420918,662.415536 68.3909758,728.573445 L114.711707,682.252714 C91.4312107,629.204161 78.5274544,570.558265 78.5274544,508.87619 C78.5274544,270.557859 271.72188,77.3634333 510.040212,77.3634333 C571.684303,77.3634333 630.316005,90.2960769 683.367584,113.596835 L729.725747,67.2386739 L729.725748,67.238671 Z M948.986253,283.87188 C983.639793,351.333945 1003.19765,427.822772 1003.19765,508.87619 C1003.19765,645.049288 947.964016,768.338647 858.702519,857.600143 L815.119731,814.017354 C893.22354,735.97519 941.552969,628.097001 941.552969,508.87619 C941.552969,445.074231 927.701805,384.506419 902.844202,330.013931 L948.98625,283.871881 L948.986253,283.87188 Z','M568.387956,664.470175 L694.97425,1002.03363 L325.106173,1002.03363 L381.675174,851.182956 L568.387956,664.470175 Z M38.537334,1018.85532 L3.14468065,983.537334 L984.462666,0.144680652 L1019.85532,35.462666 L38.537334,1018.85532 Z']},LoadingSpinner:{viewBox:'0 0 1024 1024',paths:['M1005.714 512c0 272.571-221.143 493.714-493.714 493.714s-493.714-221.143-493.714-493.714c0-248 182.857-453.143 420.571-488.571v130.286c-166.857 33.714-292.571 181.714-292.571 358.286 0 201.714 164 365.714 365.714 365.714s365.714-164 365.714-365.714c0-176.571-125.714-324.571-292.571-358.286v-130.286c237.714 35.429 420.571 240.571 420.571 488.571z']},Menu:{viewBox:'0 0 1024 1024',paths:['M64 192h896v128h-896v-128z','M64 448h896v128h-896v-128z','M64 704h896v128h-896v-128z']},ChevronDown:{viewBox:'0 0 1024 1024',paths:['M614.286 420.571q0 7.429-5.714 13.143l-266.286 266.286q-5.714 5.714-13.143 5.714t-13.143-5.714l-266.286-266.286q-5.714-5.714-5.714-13.143t5.714-13.143l28.571-28.571q5.714-5.714 13.143-5.714t13.143 5.714l224.571 224.571 224.571-224.571q5.714-5.714 13.143-5.714t13.143 5.714l28.571 28.571q5.714 5.714 5.714 13.143z']},ChevronLeft:{viewBox:'0 0 1024 1024',paths:['M669.143 172l-303.429 303.429 303.429 303.429q10.857 10.857 10.857 25.714t-10.857 25.714l-94.857 94.857q-10.857 10.857-25.714 10.857t-25.714-10.857l-424-424q-10.857-10.857-10.857-25.714t10.857-25.714l424-424q10.857-10.857 25.714-10.857t25.714 10.857l94.857 94.857q10.857 10.857 10.857 25.714t-10.857 25.714z']},ChevronRight:{viewBox:'0 0 1024 1024',paths:['M632.571 501.143l-424 424q-10.857 10.857-25.714 10.857t-25.714-10.857l-94.857-94.857q-10.857-10.857-10.857-25.714t10.857-25.714l303.429-303.429-303.429-303.429q-10.857-10.857-10.857-25.714t10.857-25.714l94.857-94.857q10.857-10.857 25.714-10.857t25.714 10.857l424 424q10.857 10.857 10.857 25.714t-10.857 25.714z']},ChevronUp:{viewBox:'0 0 1024 1024',paths:['M614.286 676.571q0 7.429-5.714 13.143l-28.571 28.571q-5.714 5.714-13.143 5.714t-13.143-5.714l-224.571-224.571-224.571 224.571q-5.714 5.714-13.143 5.714t-13.143-5.714l-28.571-28.571q-5.714-5.714-5.714-13.143t5.714-13.143l266.286-266.286q5.714-5.714 13.143-5.714t13.143 5.714l266.286 266.286q5.714 5.714 5.714 13.143z']},ClearTextbox:{viewBox:'0 0 1024 1024',paths:['M1014.662 822.66c-0.004-0.004-0.008-0.008-0.012-0.010l-310.644-310.65 310.644-310.65c0.004-0.004 0.008-0.006 0.012-0.010 3.344-3.346 5.762-7.254 7.312-11.416 4.246-11.376 1.824-24.682-7.324-33.83l-146.746-146.746c-9.148-9.146-22.45-11.566-33.828-7.32-4.16 1.55-8.070 3.968-11.418 7.31 0 0.004-0.004 0.006-0.008 0.010l-310.648 310.652-310.648-310.65c-0.004-0.004-0.006-0.006-0.010-0.010-3.346-3.342-7.254-5.76-11.414-7.31-11.38-4.248-24.682-1.826-33.83 7.32l-146.748 146.748c-9.148 9.148-11.568 22.452-7.322 33.828 1.552 4.16 3.97 8.072 7.312 11.416 0.004 0.002 0.006 0.006 0.010 0.010l310.65 310.648-310.65 310.652c-0.002 0.004-0.006 0.006-0.008 0.010-3.342 3.346-5.76 7.254-7.314 11.414-4.248 11.376-1.826 24.682 7.322 33.83l146.748 146.746c9.15 9.148 22.452 11.568 33.83 7.322 4.16-1.552 8.070-3.97 11.416-7.312 0.002-0.004 0.006-0.006 0.010-0.010l310.648-310.65 310.648 310.65c0.004 0.002 0.008 0.006 0.012 0.008 3.348 3.344 7.254 5.762 11.414 7.314 11.378 4.246 24.684 1.826 33.828-7.322l146.746-146.748c9.148-9.148 11.57-22.454 7.324-33.83-1.552-4.16-3.97-8.068-7.314-11.414z']},CircleCross:{viewBox:'0 0 1024 1024',paths:['M512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512-229.23-512-512-512zM512 928c-229.75 0-416-186.25-416-416s186.25-416 416-416 416 186.25 416 416-186.25 416-416 416z','M672 256l-160 160-160-160-96 96 160 160-160 160 96 96 160-160 160 160 96-96-160-160 160-160z']},Info:{viewBox:'0 0 1024 1024',paths:['M448 304c0-26.4 21.6-48 48-48h32c26.4 0 48 21.6 48 48v32c0 26.4-21.6 48-48 48h-32c-26.4 0-48-21.6-48-48v-32z','M640 768h-256v-64h64v-192h-64v-64h192v256h64z','M512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512-229.23-512-512-512zM512 928c-229.75 0-416-186.25-416-416s186.25-416 416-416 416 186.25 416 416-186.25 416-416 416z']},RequiredField:{viewBox:'0 0 1024 1024',paths:['M1022.442 406.048c-4.274-13.2-16.566-22.142-30.442-22.142l-343.458-0.012-106.122-325.128c-4.296-13.164-16.572-22.072-30.42-22.072s-26.124 8.908-30.42 22.072l-106.12 325.128-343.46 0.012c-13.876 0-26.168 8.942-30.444 22.142-4.274 13.2 0.446 27.65 11.688 35.784l277.736 200.922-106.056 325.026c-4.298 13.174 0.37 27.618 11.568 35.784 11.198 8.162 26.378 8.194 37.606 0.070l277.902-201.006 277.9 201.004c5.598 4.048 12.176 6.072 18.754 6.072 6.62 0 13.236-2.048 18.854-6.142 11.198-8.166 15.868-22.61 11.568-35.784l-106.056-325.024 277.734-200.922c11.242-8.132 15.962-22.582 11.688-35.784z']},ShowPassword:{viewBox:'0 0 1024 1024',paths:['M512 192c-223.318 0-416.882 130.042-512 320 95.118 189.958 288.682 320 512 320 223.312 0 416.876-130.042 512-320-95.116-189.958-288.688-320-512-320zM764.45 361.704c60.162 38.374 111.142 89.774 149.434 150.296-38.292 60.522-89.274 111.922-149.436 150.296-75.594 48.218-162.89 73.704-252.448 73.704-89.56 0-176.858-25.486-252.452-73.704-60.158-38.372-111.138-89.772-149.432-150.296 38.292-60.524 89.274-111.924 149.434-150.296 3.918-2.5 7.876-4.922 11.86-7.3-9.96 27.328-15.41 56.822-15.41 87.596 0 141.382 114.616 256 256 256 141.382 0 256-114.618 256-256 0-30.774-5.452-60.268-15.408-87.598 3.978 2.378 7.938 4.802 11.858 7.302v0zM512 416c0 53.020-42.98 96-96 96s-96-42.98-96-96 42.98-96 96-96 96 42.982 96 96z']},AlertQuestion:{viewBox:'0 0 1024 1024',paths:['M512 786.286v-109.714q0-8-5.143-13.143t-13.143-5.143h-109.714q-8 0-13.143 5.143t-5.143 13.143v109.714q0 8 5.143 13.143t13.143 5.143h109.714q8 0 13.143-5.143t5.143-13.143zM658.286 402.286q0-50.286-31.714-93.143t-79.143-66.286-97.143-23.429q-138.857 0-212 121.714-8.571 13.714 4.571 24l75.429 57.143q4 3.429 10.857 3.429 9.143 0 14.286-6.857 30.286-38.857 49.143-52.571 19.429-13.714 49.143-13.714 27.429 0 48.857 14.857t21.429 33.714q0 21.714-11.429 34.857t-38.857 25.714q-36 16-66 49.429t-30 71.714v20.571q0 8 5.143 13.143t13.143 5.143h109.714q8 0 13.143-5.143t5.143-13.143q0-10.857 12.286-28.286t31.143-28.286q18.286-10.286 28-16.286t26.286-20 25.429-27.429 16-34.571 7.143-46.286zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z']},AlertWarning:{viewBox:'0 0 1024 1024',paths:['M585.143 785.714v-108.571c0-10.286-8-18.857-18.286-18.857h-109.714c-10.286 0-18.286 8.571-18.286 18.857v108.571c0 10.286 8 18.857 18.286 18.857h109.714c10.286 0 18.286-8.571 18.286-18.857zM584 572l10.286-262.286c0-3.429-1.714-8-5.714-10.857-3.429-2.857-8.571-6.286-13.714-6.286h-125.714c-5.143 0-10.286 3.429-13.714 6.286-4 2.857-5.714 8.571-5.714 12l9.714 261.143c0 7.429 8.571 13.143 19.429 13.143h105.714c10.286 0 18.857-5.714 19.429-13.143zM576 38.286l438.857 804.571c12.571 22.286 12 49.714-1.143 72s-37.143 36-62.857 36h-877.714c-25.714 0-49.714-13.714-62.857-36s-13.714-49.714-1.143-72l438.857-804.571c12.571-23.429 37.143-38.286 64-38.286s51.429 14.857 64 38.286z']},Search:{viewBox:'0 0 1024 1024',paths:['M658.286 475.429c0-141.143-114.857-256-256-256s-256 114.857-256 256 114.857 256 256 256 256-114.857 256-256zM950.857 950.857c0 40-33.143 73.143-73.143 73.143-19.429 0-38.286-8-51.429-21.714l-196-195.429c-66.857 46.286-146.857 70.857-228 70.857-222.286 0-402.286-180-402.286-402.286s180-402.286 402.286-402.286 402.286 180 402.286 402.286c0 81.143-24.571 161.143-70.857 228l196 196c13.143 13.143 21.143 32 21.143 51.429z']},Filter:{viewBox:'0 0 1024 1024',paths:['M869.49 192l-293.49 293.49v296.542l-128 32v-328.542l-293.49-293.49h714.98zM1024 128h-1024l384 384v384l256-64v-320l384-384z']},UserIconEmpty:{viewBox:'0 0 1024 1024',paths:['M686.286 448c80.571 23.429 191.429 102.857 191.429 362.857 0 117.714-87.429 213.143-194.857 213.143h-488c-107.429 0-194.857-95.429-194.857-213.143 0-260 110.857-339.429 191.429-362.857-28.571-45.143-45.143-98.286-45.143-155.429 0-161.143 131.429-292.571 292.571-292.571s292.571 131.429 292.571 292.571c0 57.143-16.571 110.286-45.143 155.429zM438.857 73.143c-121.143 0-219.429 98.286-219.429 219.429s98.286 219.429 219.429 219.429 219.429-98.286 219.429-219.429-98.286-219.429-219.429-219.429zM682.857 950.857c66.857 0 121.714-62.286 121.714-140 0-180-60.571-292.571-173.714-298.286-51.429 45.143-118.286 72.571-192 72.571s-140.571-27.429-192-72.571c-113.143 5.714-173.714 118.286-173.714 298.286 0 77.714 54.857 140 121.714 140h488z']},PlusSign:{viewBox:'0 0 1024 1024',paths:['M804.571 420.571v109.714q0 22.857-16 38.857t-38.857 16h-237.714v237.714q0 22.857-16 38.857t-38.857 16h-109.714q-22.857 0-38.857-16t-16-38.857v-237.714h-237.714q-22.857 0-38.857-16t-16-38.857v-109.714q0-22.857 16-38.857t38.857-16h237.714v-237.714q0-22.857 16-38.857t38.857-16h109.714q22.857 0 38.857 16t16 38.857v237.714h237.714q22.857 0 38.857 16t16 38.857z']},Tick:{viewBox:'0 0 1024 1024',paths:['M864 128l-480 480-224-224-160 160 384 384 640-640z']},TickHollow:{viewBox:'0 0 1024 1024',paths:['M397.434 917.696l-397.868-391.6 197.378-194.27 200.49 197.332 429.62-422.852 197.378 194.27-626.998 617.12zM107.912 526.096l289.524 284.962 518.656-510.482-89.036-87.632-429.62 422.852-200.49-197.334-89.034 87.634z']},Cross:{viewBox:'0 0 1024 1024',paths:['M1014.662 822.66c-0.004-0.004-0.008-0.008-0.012-0.010l-310.644-310.65 310.644-310.65c0.004-0.004 0.008-0.006 0.012-0.010 3.344-3.346 5.762-7.254 7.312-11.416 4.246-11.376 1.824-24.682-7.324-33.83l-146.746-146.746c-9.148-9.146-22.45-11.566-33.828-7.32-4.16 1.55-8.070 3.968-11.418 7.31 0 0.004-0.004 0.006-0.008 0.010l-310.648 310.652-310.648-310.65c-0.004-0.004-0.006-0.006-0.010-0.010-3.346-3.342-7.254-5.76-11.414-7.31-11.38-4.248-24.682-1.826-33.83 7.32l-146.748 146.748c-9.148 9.148-11.568 22.452-7.322 33.828 1.552 4.16 3.97 8.072 7.312 11.416 0.004 0.002 0.006 0.006 0.010 0.010l310.65 310.648-310.65 310.652c-0.002 0.004-0.006 0.006-0.008 0.010-3.342 3.346-5.76 7.254-7.314 11.414-4.248 11.376-1.826 24.682 7.322 33.83l146.748 146.746c9.15 9.148 22.452 11.568 33.83 7.322 4.16-1.552 8.070-3.97 11.416-7.312 0.002-0.004 0.006-0.006 0.010-0.010l310.648-310.65 310.648 310.65c0.004 0.002 0.008 0.006 0.012 0.008 3.348 3.344 7.254 5.762 11.414 7.314 11.378 4.246 24.684 1.826 33.828-7.322l146.746-146.748c9.148-9.148 11.57-22.454 7.324-33.83-1.552-4.16-3.97-8.068-7.314-11.414z']},MenuDots:{viewBox:'0 0 1024 1024',paths:['M384 192c0-70.692 57.308-128 128-128s128 57.308 128 128c0 70.692-57.308 128-128 128s-128-57.308-128-128zM384 512c0-70.692 57.308-128 128-128s128 57.308 128 128c0 70.692-57.308 128-128 128s-128-57.308-128-128zM384 832c0-70.692 57.308-128 128-128s128 57.308 128 128c0 70.692-57.308 128-128 128s-128-57.308-128-128z']},User:{viewBox:'0 0 1024 1024',paths:['M576 706.612v-52.78c70.498-39.728 128-138.772 128-237.832 0-159.058 0-288-192-288s-192 128.942-192 288c0 99.060 57.502 198.104 128 237.832v52.78c-217.102 17.748-384 124.42-384 253.388h896c0-128.968-166.898-235.64-384-253.388z']},Users:{viewBox:'0 0 1408 1024',paths:['M768 705.306v-13.256c92.524-35.408 160-145.59 160-276.050 0-159.058-100.29-288-224-288-123.712 0-224 128.942-224 288 0 130.46 67.476 240.642 160 276.050v13.256c-217.102 8.874-384 62.21-384 126.694v128h896v-128c0-64.484-166.898-117.82-384-126.694z','M1152 448.592v-5.078c73.032-20.754 128-111.146 128-219.514 0-123.712-71.634-224-160-224s-160 100.288-160 224c0 108.37 54.968 198.76 128 219.514v5.078c-31.81 1.172-62.054 4.074-89.878 8.412-6.28 68.208-28.092 131.24-61.738 182.996h471.616v-96c0-49.414-112.006-90.1-256-95.408z','M409.878 457.004c-27.824-4.338-58.070-7.24-89.878-8.412v-5.078c73.032-20.754 128-111.146 128-219.514 0-123.712-71.634-224-160-224s-160 100.288-160 224c0 108.37 54.968 198.76 128 219.514v5.078c-143.994 5.308-256 45.994-256 95.408v96h471.618c-33.646-51.756-55.458-114.788-61.74-182.996z']}}})(I=E.Icons||(E.Icons={}))},function(L,E,A){'use strict';var I=this&&this.__decorate||function(ne,ae,oe,se){var ie=arguments.length,de=3>ie?ae:null===se?se=Object.getOwnPropertyDescriptor(ae,oe):se,le;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)de=Reflect.decorate(ne,ae,oe,se);else for(var _e=ne.length-1;0<=_e;_e--)(le=ne[_e])&&(de=(3>ie?le(de):3<ie?le(ae,oe,de):le(ae,oe))||de);return 3<ie&&de&&Object.defineProperty(ae,oe,de),de},R=this&&this.__awaiter||function(ne,ae,oe,se){return new(oe||(oe=Promise))(function(ie,de){function le(ce){try{ue(se.next(ce))}catch(pe){de(pe)}}function _e(ce){try{ue(se['throw'](ce))}catch(pe){de(pe)}}function ue(ce){ce.done?ie(ce.value):new oe(function(pe){pe(ce.value)}).then(le,_e)}ue((se=se.apply(ne,ae||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(27),W=A(2),G=A(1),J=A(5),K=A(3),$=A(49),X=A(4),Q=A(51);var Z;(function(ne){ne[ne.LOADING='loading']='LOADING',ne[ne.IMAGE_FILE='image-file']='IMAGE_FILE',ne[ne.AUDIO_FILE='audio-file']='AUDIO_FILE',ne[ne.VIDEO_FILE='video-file']='VIDEO_FILE',ne[ne.ERROR='error']='ERROR'})(Z||(Z={}));var ee;(function(ne){ne[ne.ERROR_DEFAULT='There was an error loading the attachment.']='ERROR_DEFAULT',ne[ne.ERROR_NO_URI='No attachment URI provided']='ERROR_NO_URI',ne[ne.ERROR_FAILED_DOWNLOAD='Attachment failed to download.']='ERROR_FAILED_DOWNLOAD',ne[ne.ERROR_CANNOT_LOAD_AUDIO='Unable to load audio file.']='ERROR_CANNOT_LOAD_AUDIO',ne[ne.ERROR_UNSUPPORTED_ATTACHMENT='Unsupported attachment type.']='ERROR_UNSUPPORTED_ATTACHMENT',ne[ne.ERROR_TAP_TO_RETRY='Tap to retry.']='ERROR_TAP_TO_RETRY'})(ee||(ee={}));let te=class extends B.CTCLComponent{constructor(){super(...arguments),this._allowRetry=!0,this._options={},this._defaultOptions={height:150,width:150,quality:100},this._processRemoteAttachment=()=>R(this,void 0,void 0,function*(){try{this.state=Z.LOADING;const ae=this.type===J.SupportedAttachmentType.VIDEO,oe=yield this.layer.downloadFileWithoutCatch(this.uri,ae);this._processAttachmentAfterDownload(oe)}catch(ae){this._errorMessage=this.translateI18nItem(ee.ERROR_FAILED_DOWNLOAD),this._allowRetry=!0,this.state=Z.ERROR}}),this._openImageFullScreen=()=>R(this,void 0,void 0,function*(){!K.isDesktop()&&this.allowOpenImageInFullScreen&&(yield this.layer.showMediaFullscreen(this._fullImgFilepath))})}initialize(){return R(this,void 0,void 0,function*(){this._options=Object.assign({},this._options,this._defaultOptions),this.uri&&this.uri.includes('http')?this._processRemoteAttachment():this.uri?this._processAttachmentAfterDownload(this.uri,!0):(this._errorMessage=this.translateI18nItem(ee.ERROR_NO_URI),this._allowRetry=!1,this.state=Z.ERROR)})}setupListeners(){}_processAttachmentAfterDownload(ae,oe=!1){return R(this,void 0,void 0,function*(){switch(oe||this.emitEvent(X.ChatEvents.AttachmentDownloadComplete,new X.AttachmentDownloadComplete(ae,this.conversationId,this.type)),this.type){case J.SupportedAttachmentType.AUDIO:setTimeout(()=>{this.file=ae,this.state=Z.AUDIO_FILE,oe||this.emitEvent(X.ChatEvents.AudioAttachmentDownloadComplete,new X.AudioAttachmentDownloadComplete(this.file))},1e3);break;case J.SupportedAttachmentType.IMAGE:this.file=this.uri.includes('data:image')?this.uri:yield z.getThumbnail(ae,this._options.width,this._options.height,this._options.quality),this._fullImgFilepath=ae,this.state=Z.IMAGE_FILE;break;case J.SupportedAttachmentType.VIDEO:this.file=ae,this.state=Z.VIDEO_FILE;break;default:throw new Error(this.translateI18nItem(ee.ERROR_UNSUPPORTED_ATTACHMENT));}})}generateComponentMarkup(){let ae;switch(this.state){case Z.AUDIO_FILE:ae=this._renderAudio();break;case Z.IMAGE_FILE:ae=this._renderImage();break;case Z.VIDEO_FILE:ae=this._renderVideo();break;case Z.ERROR:ae=this._renderError();break;case Z.LOADING:default:ae=this._renderLoading();}return window.__CTRender('div',{class:'container'},ae)}_renderLoading(){return window.__CTRender(W.CTIcon,{width:'16',height:'16',icon:G.Icons.COMMON.LoadingSpinner,spin:!0})}_renderError(){return window.__CTRender('div',{class:'error',onClick:this._allowRetry?this._processRemoteAttachment:null},window.__CTRender(W.CTIcon,{width:'16',height:'16',icon:G.Icons.COMMON.AlertWarning}),window.__CTRender('p',null,this._errorMessage||this.translateI18nItem(ee.ERROR_DEFAULT),this._allowRetry&&` ${this.translateI18nItem(ee.ERROR_TAP_TO_RETRY)}`))}_renderImage(){return window.__CTRender('img',{src:this.file,onClick:this._openImageFullScreen})}_renderAudio(){return window.__CTRender($.CTCLAudioRecorderPlayer,{showRecord:!1,source:this.file,stream:this.stream,volumeToPlayAt:this.volumeToPlayAt,disablePlay:this.disablePlay,preventRemoteStart:this.preventRemoteStart})}_renderVideo(){return window.__CTRender(Q.CTCLVideoRecorderPlayer,{source:this.file,showRecord:!1,allowRemoval:!1,showControls:!0})}};I([N.prop({type:String,attribute:!1,default:''})],te.prototype,'uri',void 0),I([N.prop({type:String,attribute:!1,default:''})],te.prototype,'type',void 0),I([N.prop({type:String,attribute:!1,default:''})],te.prototype,'file',void 0),I([N.prop({type:String,attribute:!1,default:Z.LOADING})],te.prototype,'state',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],te.prototype,'allowOpenImageInFullScreen',void 0),I([N.prop({type:String,attribute:!1,default:''})],te.prototype,'conversationId',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],te.prototype,'disablePlay',void 0),I([N.prop({type:String,attribute:!1,default:J.VolumeStream.Music})],te.prototype,'stream',void 0),I([N.prop({type:Number,attribute:!1,default:-1})],te.prototype,'volumeToPlayAt',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],te.prototype,'preventRemoteStart',void 0),te=I([H.component({tag:'ctcl-attachment-handler',styles:[`:host{display:block;width:100%;height:100%}:host div.container{height:100%;align-items:center;display:flex;justify-content:center}:host div.container div.error{display:flex;align-items:center}:host div.container div.error ct-icon{margin-right:10px}:host div.container img{height:100%}
    `],i18nKeys:ee})],te),E.CTCLAttachmentHandler=te},function(L,E,A){'use strict';var I=this&&this.__decorate||function(te,ne,ae,oe){var se=arguments.length,ie=3>se?ne:null===oe?oe=Object.getOwnPropertyDescriptor(ne,ae):oe,de;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ie=Reflect.decorate(te,ne,ae,oe);else for(var le=te.length-1;0<=le;le--)(de=te[le])&&(ie=(3>se?de(ie):3<se?de(ne,ae,ie):de(ne,ae))||ie);return 3<se&&ie&&Object.defineProperty(ne,ae,ie),ie},R=this&&this.__awaiter||function(te,ne,ae,oe){return new(ae||(ae=Promise))(function(se,ie){function de(ue){try{_e(oe.next(ue))}catch(ce){ie(ce)}}function le(ue){try{_e(oe['throw'](ue))}catch(ce){ie(ce)}}function _e(ue){ue.done?se(ue.value):new ae(function(ce){ce(ue.value)}).then(de,le)}_e((oe=oe.apply(te,ne||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(2),W=A(5),G=A(8),J=A(56),K=A(4),$=A(151),X=A(1),Q=A(20);var Z;(function(te){te[te.NO_RECORDING_SOURCE='No microphone has been detected on your system.']='NO_RECORDING_SOURCE',te[te.GENERAL_ERROR='There was an error trying to record audio.']='GENERAL_ERROR'})(Z||(Z={}));let ee=class extends B.CTCLComponent{constructor(){super(...arguments),this._player=new J.SimpleAudioPlayer((ne)=>this._statusCallback(ne)),this._recorder=new $.SimpleAudioRecorder((ne)=>this._onRecordingFinished(ne),(ne)=>this._onRecordingError(ne)),this._currentlyRecording=!1,this._removeAudio=()=>R(this,void 0,void 0,function*(){this.source='',this.currentTime=0,this.duration=0,this.onAudioRemoved&&this.onAudioRemoved()}),this._play=(ne=200)=>this._buffer(()=>{this.emitEvent(K.ChatEvents.MuteAlertToPlayOtherAudio),this._timer||(this._timer=setInterval(()=>this.currentTime+=200,200)),setTimeout(()=>{this.disablePlay=!1,this._player.play()},ne)}),this._pause=()=>this._buffer(()=>{this.disablePlay=!1,clearInterval(this._timer),delete this._timer,this._player.pause(),this.emitEvent(K.ChatEvents.ResumeAlertAfterPlayingAudio)}),this._stop=()=>this._buffer(()=>{clearInterval(this._timer),delete this._timer,this._player.stop(!0),this.currentTime=0,this.emitEvent(K.ChatEvents.ResumeAlertAfterPlayingAudio)}),this._startRecording=()=>this._buffer(()=>{this._currentlyRecording?(this._currentlyRecording=!1,this._recorder.stop(),this.emitEvent(K.ChatEvents.AudioRecordingStopped),this._stopRecordingIndicator()):(this._startRecordingIndicator(),this.emitEvent(K.ChatEvents.AudioRecordingStarted),this._currentlyRecording=!0,this._recorder.start())}),this._onRecordingFinished=(ne)=>{ne?(this.source=ne,this.initPlayer(this.source),this.onRecordingFinished&&this.onRecordingFinished(this.source)):this.source=''},this._onRecordingError=(ne)=>{this._stopRecordingIndicator();let ae=Z.GENERAL_ERROR;ne===$.AudioRecorderError.NoAudioDevicesFound?ae=Z.NO_RECORDING_SOURCE:void 0;const oe=new X.DefaultAlerts(this).AlertErrorWithOkayButton(this.translateI18nItem(Q.CommonMetadata.getI18nItem(Q.CommonI18nKeys.ERROR)),this.translateI18nItem(ae),1,{okay:()=>{}});this.emitEvent(K.ChatEvents._Request_RaiseAlert,oe)},this._startRecordingIndicator=()=>{let ne=!0;this._recordBtn&&(setTimeout(()=>this._recordBtn.classList.add('flash'),100),this._flashTimer=setInterval(()=>{ne?this._recordBtn.classList.remove('flash'):this._recordBtn.classList.add('flash'),ne=!ne},500))},this._stopRecordingIndicator=()=>{clearInterval(this._flashTimer),this._recordBtn&&this._recordBtn.classList.remove('flash')}}initialize(){return R(this,void 0,void 0,function*(){this.source&&this.initPlayer(this.source)})}setupListeners(){!1===this.preventRemoteStart&&(this.addListener(K.ChatEvents.RemotelyStartAudioPlayer,()=>{this._play(1e3)}),this.addEventListener(K.ChatEvents.RemotelyStopAudioPlayer,()=>{this._stop()}))}_buffer(ne,ae=200){(!this._bufferTime||new Date().valueOf()>this._bufferTime+ae)&&(this._bufferTime=new Date().valueOf(),ne())}initPlayer(ne){this._player.setAudio(ne,1,this.volumeToPlayAt,this.stream,(ae)=>this.duration=ae,()=>this.isReady=!0)}_statusCallback(ne){this.mediaStatus=ne,this.mediaStatus===J.MediaStatus.MEDIA_STOPPED&&(this.disablePlay=!1,clearInterval(this._timer),delete this._timer,this.currentTime=0,this.emitEvent(K.ChatEvents.ResumeAlertAfterPlayingAudio))}_millisToMinutesAndSeconds(ne){if(0===ne)return`0:00`;const ae=Math.floor(ne/6e4),oe=Math.round(ne%6e4/1e3);return`${ae}:${10>oe?'0':''}${oe}`}disconnectedCallback(){super.disconnectedCallback(),this._player.stop(!0),this._player.release()}generateComponentMarkup(){const ne=!this.source,ae=this._currentlyRecording||this.disablePlay?!1:this.showRecord&&this.source||!!this.source,oe=!this._currentlyRecording&&ae&&(this.mediaStatus===J.MediaStatus.MEDIA_RUNNING||this.mediaStatus===J.MediaStatus.MEDIA_PAUSED),se=this.allowRemoval&&this.source&&this.mediaStatus!==J.MediaStatus.MEDIA_RUNNING;return window.__CTRender('div',{class:'container'},window.__CTRender('div',{class:'controls'},this.showRecord&&window.__CTRender('div',{class:`action ${ne?'':'disabled'}`,ref:(ie)=>this._recordBtn=ie},window.__CTRender(z.CTIcon,{color:'red',width:'16',height:'16',icon:W.Icons.UI.CircleFilled,onClick:this._startRecording})),window.__CTRender('div',{class:`action ${ae?'':'disabled'}`},this.mediaStatus===J.MediaStatus.MEDIA_RUNNING?window.__CTRender(z.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Pause,onClick:ae?this._pause:null}):window.__CTRender(z.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Play,onClick:ae?this._play:null})),window.__CTRender('div',{class:`action ${oe?'':'disabled'}`},window.__CTRender(z.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.SquareFilled,onClick:oe?this._stop:null})),this.allowRemoval&&this.source&&window.__CTRender('div',{class:`action ${se?'':'disabled'}`},window.__CTRender(z.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Cross,onClick:se?this._removeAudio:null}))),this.source&&window.__CTRender('div',{class:'progress'},window.__CTRender('div',{class:'length left'},window.__CTRender('span',null,this._millisToMinutesAndSeconds(this.currentTime))),window.__CTRender('div',{class:'bar'},window.__CTRender('span',{style:G.buildStyles({width:`${100*(this.currentTime/this.duration)}%`})})),window.__CTRender('div',{class:'length right'},window.__CTRender('span',null,this._millisToMinutesAndSeconds(this.duration)))))}};I([N.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'showRecord',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'allowRemoval',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'disablePlay',void 0),I([N.prop({type:String,attribute:!1,default:''})],ee.prototype,'source',void 0),I([N.prop({type:Number,attribute:!1,default:0})],ee.prototype,'mediaStatus',void 0),I([N.prop({type:Number,attribute:!1,default:0})],ee.prototype,'currentTime',void 0),I([N.prop({type:Number,attribute:!1,default:0})],ee.prototype,'duration',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'isReady',void 0),I([N.prop({type:String,attribute:!1,default:W.VolumeStream.Music})],ee.prototype,'stream',void 0),I([N.prop({type:Number,attribute:!1,default:-1})],ee.prototype,'volumeToPlayAt',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'preventRemoteStart',void 0),I([N.prop({type:Function,attribute:!1,default:null})],ee.prototype,'onAudioRemoved',void 0),I([N.prop({type:Function,attribute:!1,default:null})],ee.prototype,'onRecordingFinished',void 0),ee=I([H.component({tag:'ctcl-audio-recorder-player',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex:1}:host div.container{display:flex;flex:1}:host div.container div.progress{display:flex;width:100%;align-items:center;margin:auto 0}:host div.container div.progress div.bar{display:flex;flex:1;background-color:var(--default-border-color, #ddd);height:3px;width:100%}:host div.container div.progress div.bar span{display:inline-block;height:3px;background-color:var(--primary-color, #22b1c8);transition:all 100ms linear}:host div.container div.progress div.length{font-size:0.8em}:host div.container div.progress div.length.left{margin-right:10px}:host div.container div.progress div.length.right{margin-left:10px}:host div.container div.controls{display:flex;align-items:center;justify-content:center}:host div.container div.controls div.action{display:flex;justify-content:center;align-items:center;flex:none;width:36px;height:36px;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border-radius:50%;cursor:pointer;margin-right:10px;transition:background 300ms ease-in;transition:opacity 300ms linear}:host div.container div.controls div.action.disabled{background:var(--subtle-font-color, #828688);cursor:default}:host div.container div.controls div.action.flash{opacity:0.5}
    `],i18nKeys:Z})],ee),E.CTCLAudioRecorderPlayer=ee},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(2),W=A(26),G=A(3),J=A(1),K=A(14),$=A(8);let X=class extends B.CTCLComponent{constructor(){super(...arguments),this._renderUserLine=(Z)=>{const ee=this._userLookup.get(Z.jid),te=this.conversation.receivedList.find((oe)=>oe.jid===Z.jid),ne=this.conversation.acknowledgements.find((oe)=>oe.jid===Z.jid);let ae='#aaa';if(ne){const oe=this._config.alertResponseOptionTemplates.find((se)=>se.value===ne.value);ae=oe?oe.color||'#aaa':'#aaa'}return window.__CTRender('div',{class:'user-row'},window.__CTRender('div',{class:'user'},window.__CTRender(z.CTUserAvatar,{user:ee}),window.__CTRender('span',null,ee.displayName)),te&&window.__CTRender('div',{class:'received'},window.__CTRender('div',{class:'pill'},window.__CTRender('span',{class:'ts'},this._renderTime(te.ts)))),ne&&window.__CTRender('div',{class:'response'},window.__CTRender('div',{class:'pill',style:$.buildStyles({backgroundColor:ae})},window.__CTRender('span',{class:'res'},ne.value),window.__CTRender('span',{class:'ts'},this._renderTime(ne.ts)))))}}initialize(){return R(this,void 0,void 0,function*(){this._userLookup=new W.UserLookup(this.layer),yield this._userLookup.populate([this.conversation]),this._config=new K.ConversationConfigReader(this.layer,this.conversation)})}setupListeners(){}generateComponentMarkup(){return this.conversation?window.__CTRender('div',{class:'container'},window.__CTRender('div',{class:'headings'},window.__CTRender('div',{class:'user'},window.__CTRender('span',null,'Participant')),window.__CTRender('div',{class:'received'},window.__CTRender('span',null,'Received')),window.__CTRender('div',{class:'response'},window.__CTRender('span',null,'Responded'))),window.__CTRender('div',{class:'user-list'},this.conversation.participants.filter((Z)=>Z.role!==J.ChatRole.Owner).map(this._renderUserLine))):null}_renderTime(Z){let ee=Z;return'string'==typeof Z&&(ee=parseInt(Z)),Z&&(0===G.daysFromNow(ee)?G.getFriendlyTime(ee):G.getFriendlyDate(ee,this))||null}};I([N.prop({type:Object,attribute:!1,default:null})],X.prototype,'conversation',void 0),X=I([H.component({tag:'ctcl-response-view',styles:[`/*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;width:100%;flex:1 1}:host div.container{display:flex;flex-direction:column;width:100%}:host div.container div.headings{display:flex;background:var(--secondary-color, #f2f2f2);border-top:var(--secondary-border, 1px solid #ddd);border-bottom:var(--secondary-border, 1px solid #ddd);color:var(--subtle-font-color);align-items:center;padding:5px 10px}@media only screen and (min-width: 960px){:host div.container div.headings{border-top:none}}:host div.container div.headings div.user{padding-left:10px;flex-basis:40%}:host div.container div.headings div.received{flex-basis:30%}:host div.container div.headings div.response{flex-basis:30%}:host div.container div.headings div span{text-transform:uppercase}:host div.container div.user-list{display:flex;flex-direction:column;height:100%;overflow-y:scroll}:host div.container div.user-list div.user-row{display:flex;flex-shrink:0;padding:10px 20px;align-items:center;border-bottom:1px solid var(--default-border-color, #ddd)}@media only screen and (max-width: 640px){:host div.container div.user-list div.user-row{font-size:0.8em}}:host div.container div.user-list div.user-row div.user{display:flex;flex-basis:40%;padding-right:10px;align-items:center;color:var(--default-font-color, #212121)}:host div.container div.user-list div.user-row div.user ct-user-avatar{margin-right:20px}:host div.container div.user-list div.user-row div.received{flex-basis:30%;padding-right:10px}:host div.container div.user-list div.user-row div.received div.pill{background-color:#aaa}:host div.container div.user-list div.user-row div.response{flex-basis:30%}:host div.container div.user-list div.user-row div.pill{color:var(--tertiary-font-color, white);padding:5px 20px;border-radius:20px;display:flex;justify-content:space-around;align-items:center}:host div.container div.user-list div.user-row div.pill span.res{font-weight:bold;margin-right:5px}
    `]})],X),E.CTCLResponseView=X},function(L,E,A){'use strict';var I=this&&this.__decorate||function($,X,Q,Z){var ee=arguments.length,te=3>ee?X:null===Z?Z=Object.getOwnPropertyDescriptor(X,Q):Z,ne;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)te=Reflect.decorate($,X,Q,Z);else for(var ae=$.length-1;0<=ae;ae--)(ne=$[ae])&&(te=(3>ee?ne(te):3<ee?ne(X,Q,te):ne(X,Q))||te);return 3<ee&&te&&Object.defineProperty(X,Q,te),te},R=this&&this.__awaiter||function($,X,Q,Z){return new(Q||(Q=Promise))(function(ee,te){function ne(se){try{oe(Z.next(se))}catch(ie){te(ie)}}function ae(se){try{oe(Z['throw'](se))}catch(ie){te(ie)}}function oe(se){se.done?ee(se.value):new Q(function(ie){ie(se.value)}).then(ne,ae)}oe((Z=Z.apply($,X||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(2),W=A(5),G=A(152),J=A(4);let K=class extends B.CTCLComponent{constructor(){super(...arguments),this._initVideoElm=(X)=>{this._videoElm=X,this._videoElm.onplay=this._onPlay,this._videoElm.onpause=this._onEndOrPause,this._videoElm.onended=this._onEndOrPause},this._onPlay=()=>{this.emitEvent(J.ChatEvents.MuteAlertToPlayOtherAudio)},this._onEndOrPause=()=>{this.emitEvent(J.ChatEvents.ResumeAlertAfterPlayingAudio)},this._startRecording=()=>{this.recording?(this.recording=!1,this._recorder.stop(),this._stopRecordingIndicator()):(this.recording=!0,this.showControls=!1,this._startRecordingIndicator(),this._recorder=new G.SimpleVideoRecorder(this._videoElm,this._onVideoRecordingFinished),this._recorder.start())},this._onVideoRecordingFinished=(X)=>{this.showControls=!0,this.source=X,this._videoElm.src=X,this._videoElm.muted=!1,this.onRecordingFinished&&this.onRecordingFinished(X)},this._remove=()=>{this.source='',this._videoElm.src='',this.showControls=!1,this.onVideoRemoved&&this.onVideoRemoved()},this._startRecordingIndicator=()=>{let X=!0;this._recordBtn&&(setTimeout(()=>this._recordBtn.classList.add('flash'),100),this._flashTimer=setInterval(()=>{X?this._recordBtn.classList.remove('flash'):this._recordBtn.classList.add('flash'),X=!X},500))},this._stopRecordingIndicator=()=>{clearInterval(this._flashTimer),this._recordBtn&&this._recordBtn.classList.remove('flash')}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}disconnectedCallback(){super.disconnectedCallback(),this._videoElm.pause()}generateComponentMarkup(){const X=this.showRecord,Q=this.allowRemoval&&''!==this.source;return window.__CTRender('div',{class:'container'},window.__CTRender('div',{class:'controls'},this.showRecord&&window.__CTRender('div',{class:`action ${X?'':'disabled'}`,ref:(Z)=>this._recordBtn=Z},window.__CTRender(z.CTIcon,{color:'red',width:'16',height:'16',icon:W.Icons.UI.CircleFilled,onClick:this._startRecording})),this.allowRemoval&&window.__CTRender('div',{class:`action ${Q?'':'disabled'}`},window.__CTRender(z.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Cross,onClick:Q?this._remove:null}))),window.__CTRender('div',{class:'player'},window.__CTRender('video',{ref:this._initVideoElm,width:320,height:240,controls:this.showControls,autoplay:this.autoplay,src:this.source})))}};I([N.prop({type:Boolean,attribute:!1,default:!0})],K.prototype,'showRecord',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],K.prototype,'allowRemoval',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],K.prototype,'recording',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],K.prototype,'showControls',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],K.prototype,'autoplay',void 0),I([N.prop({type:String,attribute:!1,default:''})],K.prototype,'source',void 0),I([N.prop({type:Function,attribute:!1,default:null})],K.prototype,'onVideoRemoved',void 0),I([N.prop({type:Function,attribute:!1,default:null})],K.prototype,'onRecordingFinished',void 0),K=I([H.component({tag:'ctcl-video-recorder-player',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex:1}:host div.container{display:flex;flex:1;justify-content:space-between}:host div.container div.controls{display:flex;align-items:flex-start;justify-content:center}:host div.container div.controls div.action{display:flex;justify-content:center;align-items:center;flex:none;width:36px;height:36px;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border-radius:50%;cursor:pointer;margin-right:10px;transition:background 300ms ease-in;transition:opacity 300ms linear}:host div.container div.controls div.action.disabled{background:var(--subtle-font-color, #828688);cursor:default}:host div.container div.controls div.action.flash{opacity:0.5}:host div.container div.player{display:flex;width:100%;align-items:center;margin:auto 0;justify-content:center}
    `]})],K),E.CTCLVideoRecorderPlayer=K},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(){super()}}E.BaseChatEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(52);class R extends I.BaseChatEventArgs{constructor(N){super(),this.chatEntry=N}}E.ChatEntryEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(52);class R extends I.BaseChatEventArgs{constructor(N){super(),this.conversation=N}}E.ConversationEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N,H,B){super(),this.conversation=N,this.pendingCount=H,this.instigator=B}}E.PriorityConversationAcknowledgedEventArgs=R},function(L,E,A){'use strict';var I=this&&this.__awaiter||function($,X,Q,Z){return new(Q||(Q=Promise))(function(ee,te){function ne(se){try{oe(Z.next(se))}catch(ie){te(ie)}}function ae(se){try{oe(Z['throw'](se))}catch(ie){te(ie)}}function oe(se){se.done?ee(se.value):new Q(function(ie){ie(se.value)}).then(ne,ae)}oe((Z=Z.apply($,X||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(3),N=A(22),H=A(5),B=N.getSource('Media'),z=N.getSource('fileEncryption'),W=N.getSource('mediaproperties'),G=N.getSource('volumecontrol');var J;(function($){$[$.MEDIA_NONE=0]='MEDIA_NONE',$[$.MEDIA_STARTING=1]='MEDIA_STARTING',$[$.MEDIA_RUNNING=2]='MEDIA_RUNNING',$[$.MEDIA_PAUSED=3]='MEDIA_PAUSED',$[$.MEDIA_STOPPED=4]='MEDIA_STOPPED'})(J=E.MediaStatus||(E.MediaStatus={}));E.SimpleAudioPlayer=class{constructor($){this._totalLoops=1,this._loopsRemaining=0,this._loopIndefinitely=!1,this._audioStream=H.VolumeStream.Notification,this._volumeToPlayAt=-1,this._notifiedReady=!1,this._failTimerWillRetry=!0,this.state=0,this._reportDuration=()=>I(this,void 0,void 0,function*(){this._durationCallback&&this._durationCallback((yield this.duration()))}),this._mediaStatusUpdate=(X)=>{this._updateMediaState(X),X===J.MEDIA_STOPPED&&(!0===this._forceStop?(clearTimeout(this._delayTimer),this._resetVolume(()=>delete this._previousVolume)):this._checkIfVolumeHasChanged(()=>this._loop()),clearTimeout(this._failTimer)),X===J.MEDIA_RUNNING&&clearTimeout(this._failTimer),X===J.MEDIA_STARTING&&(this._failTimer=setTimeout(()=>{this._failTimerWillRetry&&(this.play(),this._failTimerWillRetry=!1)},5e3))},this._loop=()=>{!this._forceStop&&this._loopIndefinitely?this._delayTimer=setTimeout(()=>{!this._forceStop&&this._media&&this.play()},2e3):(this._loopsRemaining--,0<this._loopsRemaining?this._delayTimer=setTimeout(()=>this._forceStop?null:this.play(),2e3):this._resetVolume(()=>delete this._previousVolume))},this._isMobile=R.isMobile(),this._volumeControl=G,$&&(this._callbackOnStateChange=$)}_init($){this._media&&(this._forceStop=!0,this.stop()),this._audioSrc=this._getAssetPath($),this._isMobile?(this._notifiedReady=!1,this._media=new B(this._audioSrc,()=>{this._readyCallback&&!1===this._notifiedReady&&(this._notifiedReady=!0,this._readyCallback())},(X)=>{X.code&&1===X.code&&this._loadingFromAssets&&(this.setAudio('pager_responder_alert.m4a',this._totalLoops,this._volumeToPlayAt,this._audioStream),setTimeout(()=>this.play(),500))},this._mediaStatusUpdate),this._durationCallback&&(this._audioSrc.includes('encrypted')?z.getAudioFileDuration((X)=>{this._duration=1e3*Math.ceil(X),this._reportDuration()},(X)=>{console.error('Media properties error:',X)},this._getAssetPath(this._audioSrc,!0)):W.getProperties((X)=>{this._duration=1e3*Math.ceil(X.duration),this._reportDuration()},(X)=>{console.error('Media properties error:',X)},this._getAssetPath(this._audioSrc,!0)))):window.cti&&(this._audioElm=document.createElement('audio'),this._audioElm.setAttribute('preload','true'),this._audioElm.onloadeddata=()=>I(this,void 0,void 0,function*(){yield this._reportDuration(),this._readyCallback&&!1===this._notifiedReady&&(this._notifiedReady=!0,this._readyCallback())}),this._audioElm.setAttribute('src',this._audioSrc),this._audioElm.onended=this._loop,this._audioElm.onplay=()=>this._updateMediaState(J.MEDIA_RUNNING),this._audioElm.onpause=()=>this._updateMediaState(J.MEDIA_PAUSED),this._audioElm.onended=()=>this._updateMediaState(J.MEDIA_STOPPED),this._media=this._audioElm)}_getAssetPath($,X=!1){this._loadingFromAssets=!1;let Q='';if(!0===X&&(Q='file://'),$.includes('/')||$.includes('\\'))return $.includes('file://')?$:`${Q}${$}`;this._loadingFromAssets=!0;const Z=window,ee=Z.cti?Z.cti.store.schema.assetDir||'user-assets/':'';return Z.cti?`${ee}${$}`:$}_updateMediaState($){this.state=$,this._callbackOnStateChange&&this._callbackOnStateChange(this.state)}_getAndSetVolume($){this._volumeControl.getDeviceVolume((X)=>{this._previousVolume===void 0&&(this._previousVolume=parseFloat(X)),this._volumeControl.setDeviceVolume(()=>this._media.setStreamId($,this._audioStream.toString()),()=>this.stop(),this._volumeToPlayAt/100,this._audioStream)},()=>this.stop(),this._audioStream)}_resetVolume($=()=>{}){-1!==this._volumeToPlayAt&&this._volumeControl&&this._volumeControl.setDeviceVolume($,()=>{},this._previousVolume,this._audioStream)}_checkIfVolumeHasChanged($=()=>{}){-1!==this._volumeToPlayAt&&this._volumeControl?this._volumeControl.getDeviceVolume((X)=>{const Q=parseFloat(X);Math.ceil(100*Q)===this._volumeToPlayAt?$():this._volumeControl.setDeviceVolume($,()=>this.stop(),this._volumeToPlayAt/100,this._audioStream)},$,this._audioStream):$()}setAudio($,X=1,Q=-1,Z=H.VolumeStream.Notification,ee,te){this._durationCallback=ee,this._readyCallback=te,this._init($),this._totalLoops=X,this._loopsRemaining=this._totalLoops,this._loopIndefinitely=!(0!==this._loopsRemaining),this._volumeToPlayAt=Q,this._audioStream=Z,this._updateMediaState(J.MEDIA_NONE)}play(){this._forceStop=!1,this._audioSrc&&this._media&&(-1!==this._volumeToPlayAt&&this._volumeControl?this._getAndSetVolume(()=>this._media.play()):setTimeout(()=>this._media.play(),100))}stop($=!1){this._audioSrc&&this._media&&(this._forceStop=$,this._updateMediaState(J.MEDIA_STOPPED),this._media.stop?this._media.stop():(this._media.pause(),this._audioElm.currentTime=0),this._loopsRemaining=this._totalLoops)}pause(){this._audioSrc&&this._media&&(this._updateMediaState(J.MEDIA_PAUSED),this._media.pause())}duration(){return I(this,void 0,void 0,function*(){if(this._audioSrc){if(R.isMobile())return this._duration;if(this._audioElm.duration===Infinity){for(;this._audioElm.duration===Infinity;)yield new Promise(($)=>setTimeout($,100)),this._audioElm.currentTime=1e7*Math.random();return 1e3*this._audioElm.duration}return 1e3*this._audioElm.duration}return 0})}release(){this._media&&this._media.release&&this._media.release()}reset(){clearTimeout(this._delayTimer),delete this._delayTimer,this._audioSrc='',this._audioElm=null,this._media=null,this._duration=0,this.state=J.MEDIA_NONE,this._totalLoops=1,this._loopsRemaining=0,this._loopIndefinitely=!1,this._audioStream=H.VolumeStream.Notification,this._previousVolume=null,this._volumeToPlayAt=-1,this._forceStop=null}}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Music='music']='Music',R[R.Notification='notification']='Notification',R[R.Ring='ring']='Ring',R[R.Alarm='alarm']='Alarm',R[R.Voice='voice']='Voice',R[R.System='system']='System',R[R.Dtmf='dtmf']='Dtmf'})(I=E.VolumeStream||(E.VolumeStream={}))},function(L,E,A){'use strict';var I=this&&this.__decorate||function(K,$,X,Q){var Z=arguments.length,ee=3>Z?$:null===Q?Q=Object.getOwnPropertyDescriptor($,X):Q,te;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ee=Reflect.decorate(K,$,X,Q);else for(var ne=K.length-1;0<=ne;ne--)(te=K[ne])&&(ee=(3>Z?te(ee):3<Z?te($,X,ee):te($,X))||ee);return 3<Z&&ee&&Object.defineProperty($,X,ee),ee},R=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(2),W=A(8);var G;(function(K){K[K.CANCEL='Cancel']='CANCEL'})(G||(G={}));let J=class extends B.CTCLComponent{constructor(){super(...arguments),this._toggle=()=>{this.open=!this.open},this._action=($)=>{this._toggle(),$&&$()},this._renderActionSheetButton=($,X=!1)=>{return window.__CTRender(z.CTButton,{type:'action-sheet',class:'button',disabled:$.disabled,onClick:()=>this._action($.action)},window.__CTRender('p',{class:`${$.subtitleText?'hasSubtitle':''}`},$.primaryText),$.subtitleText&&window.__CTRender('span',{class:'subtitle'},$.subtitleText))}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}generateComponentMarkup(){return this.buttons&&this.buttons.length?1===this.buttons.length?window.__CTRender('div',{class:'container'},window.__CTRender(z.CTButton,{type:`${this.openSheetBackgroundColor?'none':'primary'}`,textColor:this.openSheetBackgroundColor?W.decideTextColorFromBgColor(this.openSheetBackgroundColor):null,style:W.buildStyles({backgroundColor:this.openSheetBackgroundColor}),class:'button',disabled:this.buttons[0].disabled,onClick:()=>this._action(this.buttons[0].action)},this.buttons[0].primaryText)):window.__CTRender('div',{class:'container'},window.__CTRender(z.CTButton,{type:`${this.openSheetBackgroundColor?'none':'primary'}`,textColor:this.openSheetBackgroundColor?W.decideTextColorFromBgColor(this.openSheetBackgroundColor):null,style:W.buildStyles({backgroundColor:this.openSheetBackgroundColor}),class:'button',onClick:this._toggle},this.openSheetButtonText),window.__CTRender('div',{class:`sheet-bg ${this.open?'':'hidden'}`},window.__CTRender('div',{class:'sheet-buttons'},window.__CTRender('div',{class:`inner-sheet-buttons ${this.open?'':'hidden'}`},window.__CTRender('div',{class:'inner-buttons'},this.buttons.map(($)=>this._renderActionSheetButton($))),window.__CTRender('div',{class:'close'},window.__CTRender(z.CTButton,{type:'action-sheet',class:'button',onClick:this._toggle},this.translateI18nItem(G.CANCEL))))))):null}};I([N.prop({type:Boolean,attribute:!1,default:!1})],J.prototype,'open',void 0),I([N.prop({type:Array,attribute:!1,default:[{text:'Sample'}]})],J.prototype,'buttons',void 0),I([N.prop({type:String,attribute:!1,default:'Open'})],J.prototype,'openSheetButtonText',void 0),I([N.prop({type:String,attribute:!1,default:''})],J.prototype,'openSheetBackgroundColor',void 0),J=I([H.component({tag:'ct-action-sheet',styles:[`/*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;width:100%}:host div.container ct-button{font-size:1.4em}:host div.container div.sheet-bg{display:flex;position:absolute;top:0;left:0;height:100%;width:100%;background-color:rgba(0,0,0,0.3);transition:all 0.1s ease-in;opacity:1;overflow:hidden}:host div.container div.sheet-bg.hidden{opacity:0;pointer-events:none}:host div.container div.sheet-bg div.sheet-buttons{display:flex;flex-direction:column;justify-content:flex-end;flex:1;padding:10px 20px}:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons{transform:translateY(0);transition:all 0.3s ease-in-out}:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.inner-buttons,:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.close{border-radius:10px;overflow:hidden}:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.inner-buttons ct-button,:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.close ct-button{border-bottom:1px solid var(--action-sheet-border-color, #ddd);border-radius:0}:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.inner-buttons ct-button:last-child,:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.close ct-button:last-child{border-bottom:0}:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons div.close{margin-top:10px}:host div.container div.sheet-bg div.sheet-buttons div.inner-sheet-buttons.hidden{transform:translateY(100%)}
    `],i18nKeys:G})],J),E.CTActionSheet=J},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(1),B=A(8),z=A(2);class W extends N.CTLayerComponent{constructor(){super(...arguments),this._rippleTimeout=null}static get is(){return'ct-button'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}@keyframes ripple{100%{transform:scale(2);opacity:0}}:host{display:block;position:relative;border-radius:10px;overflow:hidden}:host button{position:relative;background:transparent;color:#000;padding:0.55em 1em;border:1px solid transparent;font-family:inherit;font-size:inherit;font-weight:inherit;outline:none;cursor:pointer;overflow:hidden;width:100%;height:100%;min-height:45px;border-radius:inherit}:host button .button-content{pointer-events:none;display:inline-flex;justify-content:center;align-items:center}:host button .button-content .icon{display:block}:host button .button-content .label{display:block}:host button .button-content .icon+.label{margin:0 0 0 5px}:host button .ripple{background-color:white;border-radius:50%;opacity:0.4;transform:scale(0.01);position:absolute;pointer-events:none}:host button .ripple.animate{animation:ripple 0.6s ease-out}:host button.primary{background-color:var(--button-primary-bg, #22b1c8);border:var(--button-primary-border, 1px solid #22b1c8);color:var(--button-primary-text, #fff)}:host button.primary .ripple{background-color:var(--button-primary-ripple, #fff)}:host button.secondary{background-color:var(--button-secondary-bg, rgba(0,0,0,0));border:var(--button-secondary-border, 1px solid #22b1c8);color:var(--button-secondary-text, #22b1c8)}:host button.secondary .ripple{background-color:var(--button-secondary-ripple, #22b1c8)}:host button.tertiary{background-color:var(--button-tertiary-bg, #ddd);border:var(--button-tertiary-border, 1px solid #ddd);color:var(--button-tertiary-text, #000)}:host button.tertiary .ripple{background-color:var(--button-tertiary-ripple, #fff)}:host button.invert-primary{background:var(--button-invert-primary-bg, #fff);border:var(--button-invert-primary-border, 1px solid #fff);color:var(--button-invert-primary-text, #f2f2f2)}:host button.invert-primary .ripple{background-color:var(--button-invert-primary-ripple, #f2f2f2)}:host button.invert-secondary{background:var(--button-invert-secondary-bg, rgba(0,0,0,0));border:var(--button-invert-secondary-border, 1px solid #fff);color:var(--button-invert-secondary-text, #fff)}:host button.invert-secondary .ripple{background-color:var(--button-invert-secondary-ripple, #fff)}:host button.selected{background-color:var(--button-selected-bg, #22b1c8);border:var(--button-selected-border, 1px solid #22b1c8);color:var(--button-selected-text, #fff)}:host button.selected .ripple{background-color:var(--button-selected-ripple, #fff)}:host button.cancel{background-color:var(--button-cancel-bg, rgba(0,0,0,0));border:var(--button-cancel-border, 1px solid #fff);color:var(--button-cancel-text, #000)}:host button.cancel .ripple{background-color:var(--button-cancel-ripple, #000)}:host button.warning{background-color:var(--button-warning-bg, #fdb851);border:var(--button-warning-border, #fdb851);color:var(--button-warning-text, #fff)}:host button.warning .ripple{background-color:var(--button-warning-ripple, #fff)}:host button.dangerous{background-color:var(--button-dangerous-bg, #ce0a24);border:var(--button-dangerous-border, #ce0a24);color:var(--button-dangerous-text, #fff)}:host button.dangerous .ripple{background-color:var(--button-dangerous-ripple, #fff)}:host button.headerBack{background-color:#231f20;border:none;color:white}:host button.headerBack .ripple{background-color:white}:host button.transparent{background-color:transparent;border:none}:host button.large{padding:1.25em 1em}:host button[disabled]{opacity:0.5;cursor:not-allowed}:host button.action-sheet{background-color:var(--action-sheet-button-bg, #fff);color:var(--button-primary-bg, #22b1c8)}:host button.action-sheet div.label{display:flex;flex-direction:column;justify-content:flex-start}::slotted(p){margin:0}::slotted(p.hasSubtitle){padding-top:6px}::slotted(span){padding-bottom:10px;font-size:0.7em;color:var(--action-sheet-subtitle-color, #828688)}
        `}generateComponentMarkup(){const G=[this.type];this.selected&&G.push('selected'),this.large&&G.push('large'),this.isWaiting&&G.push('waiting'),this.isTransparent&&G.push('transparent');const J=H.Icons.COMMON.LoadingSpinner,K=B.buildStyles();return!this.width||(K.width=this.width),!this.textColor||(K.color=this.textColor),window.__CTRender('button',{class:G.join(' '),style:K,disabled:this.isWaiting||this.disabled,onClick:($)=>this.handleButtonClick($)},window.__CTRender('div',{class:'button-content'},B.renderIf(!this.isWaiting&&!!this.icon,window.__CTRender(z.CTIcon,{icon:this.icon,color:this.iconColor,width:this.iconWidth,height:this.iconHeight,class:'icon'})),B.renderIfElse(this.isWaiting,window.__CTRender(z.CTIcon,{icon:J,color:this.iconColor,width:this.iconHeight,height:this.iconHeight,spin:!0,class:'icon'}),window.__CTRender('div',{class:'label'},window.__CTRender('slot',null)))))}handleButtonClick(G){if(!this.disabled&&(this._ripple(G.offsetX,G.offsetY,G.target),'function'==typeof this.onClick)){const J=Object.create(G,{target:{value:this}});this.onClick(J)}}_ripple(G,J,K){const $=K.querySelector('.ripple');$&&$.remove();const X=K.clientWidth,Q=K.clientHeight,Z=Math.max(X,Q);clearTimeout(this._rippleTimeout),this._rippleTimeout=setTimeout(()=>{const ne=document.createElement('span');ne.classList.add('ripple'),ne.style.width=`${Z}px`,ne.style.height=`${Z}px`,ne.style.left=`${G-Z/2}px`,ne.style.top=`${J-Z/2}px`,K.insertBefore(ne,K.firstChild),ne.addEventListener('animationend',()=>{ne.remove()}),ne.classList.add('animate')},0)}}I([N.prop({type:String,attribute:!0,default:'primary'})],W.prototype,'type',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],W.prototype,'selected',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],W.prototype,'disabled',void 0),I([N.prop({type:String,attribute:!0,default:null})],W.prototype,'width',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],W.prototype,'large',void 0),I([N.prop({type:String,attribute:!0})],W.prototype,'textColor',void 0),I([N.prop({type:String,attribute:!0,default:'auto'})],W.prototype,'iconColor',void 0),I([N.prop({type:String,attribute:!0,default:'18px'})],W.prototype,'iconWidth',void 0),I([N.prop({type:String,attribute:!0,default:'18px'})],W.prototype,'iconHeight',void 0),I([N.prop({type:Function,attribute:!0})],W.prototype,'onClick',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],W.prototype,'isTransparent',void 0),I([N.prop({type:Object,attribute:!1,default:null})],W.prototype,'icon',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],W.prototype,'isWaiting',void 0),E.CTButton=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(8),B=A(2),z=A(1);class W extends N.CTLayerComponent{static get is(){return'ct-group-avatar'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host .bg{position:relative;flex:none;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:50%;overflow:hidden;background:var(--avatar-bg, #7b7e80);color:var(--avatar-color, #fff)}:host .bg .image{position:absolute;top:0;left:0;border-radius:50%}
        `}generateComponentMarkup(){const G=H.buildStyles({width:`${this.size}px`,height:`${this.size}px`}),J=Math.floor(this.size/2);return window.__CTRender('div',{class:'bg',style:G},window.__CTRender(B.CTIcon,{icon:z.Icons.COMMON.Users,width:J,height:J}),this.group.icon&&window.__CTRender('img',{class:'image',src:this.group.icon,width:this.size,height:this.size}))}}I([N.prop({type:Number,attribute:!1,default:40})],W.prototype,'size',void 0),I([N.prop({type:Object,attribute:!1})],W.prototype,'group',void 0),E.CTGroupAvatar=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(K,$,X,Q){var Z=arguments.length,ee=3>Z?$:null===Q?Q=Object.getOwnPropertyDescriptor($,X):Q,te;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ee=Reflect.decorate(K,$,X,Q);else for(var ne=K.length-1;0<=ne;ne--)(te=K[ne])&&(ee=(3>Z?te(ee):3<Z?te($,X,ee):te($,X))||ee);return 3<Z&&ee&&Object.defineProperty($,X,ee),ee},R=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(2),W=A(1),G=A(3);let J=class extends B.CTCLComponent{constructor(){super(...arguments),this._delay=200,this._onSelectChange=($)=>{const X=$.currentTarget.value;this._selectValue=X,this.highlightSelection=X!==this.defaultSelectionValue,this.onSearch&&this.onSearch(X,this._textValue)},this._onSearch=($)=>{const X=$.currentTarget.value,Q=0===X.length;Q?(this.cancelDebounce('search'),this.showClear=!1,this._textValue='',this.onSearch&&this.onSearch(this._selectValue,'')):(this.showClear=!0,this.debounce('search',()=>{this._textValue=X,'function'==typeof this.onSearch&&this.onSearch(this._selectValue,X)},this._delay))},this._clear=()=>{this._input.value='',this._textValue='',this.showClear=!1,this.onSearch&&this.onSearch(this._selectValue,'')}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}generateComponentMarkup(){return window.__CTRender('div',{class:'container'},window.__CTRender('div',{class:`select ${this.highlightSelection?'highlight':''}`},window.__CTRender('select',{onChange:this._onSelectChange,ref:($)=>this._select=$},window.__CTRender('option',null,this.defaultSelectionValue),this.selectionItems.map(($)=>window.__CTRender('option',null,$))),window.__CTRender(z.CTIcon,{class:'select-icon',width:'12',height:'12',color:this.highlightSelection?G.getCSSVariable('--header-text'):'auto',icon:W.Icons.COMMON.ChevronDown})),window.__CTRender('input',{type:'text',placeholder:this.placeholder,oninput:this._onSearch,ref:($)=>this._input=$}),this.showClear&&window.__CTRender(z.CTIcon,{class:'clear',width:'12',height:'12',icon:W.Icons.COMMON.CircleCross,onClick:this._clear}))}};I([N.prop({type:String,attribute:!1,default:'All'})],J.prototype,'defaultSelectionValue',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],J.prototype,'selectionItems',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],J.prototype,'highlightSelection',void 0),I([N.prop({type:String,attribute:!1,default:''})],J.prototype,'placeholder',void 0),I([N.prop({type:Function,attribute:!1,defaul:null})],J.prototype,'onSearch',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],J.prototype,'showClear',void 0),J=I([H.component({tag:'ct-selection-text-filter',styles:[`/*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex:1}:host div.container{display:flex;flex:1;height:40px;border-radius:20px;border:1px solid var(--select-border-color, #ddd);background-color:var(--default-bg-color-light, #fff);position:relative;color:var(--default-bg-color-light-font, #212121)}:host div.container div.select>select,:host div.container input{outline:0;font-size:1em;padding:0 10px;border:0}:host div.container div.select{border-top-left-radius:20px;border-bottom-left-radius:20px;border-top-right-radius:0;border-bottom-right-radius:0;flex:0 0 30%;width:30%;height:100%;position:relative;border-right:1px solid var(--select-border-color, #ddd)}:host div.container div.select select{border-top-left-radius:20px;border-bottom-left-radius:20px;-webkit-appearance:none;padding-right:26px;width:100%;height:100%;cursor:pointer;background-color:transparent;color:inherit}:host div.container div.select.highlight,:host div.container div.select.highlight>select{color:var(--primary-color, #22b1c8);font-weight:bold}:host div.container input{flex:1;border-top-right-radius:20px;border-bottom-right-radius:20px;padding-right:26px;margin:0;border-top-left-radius:0;border-bottom-left-radius:0;background-color:transparent;color:inherit}:host div.container input::placeholder{color:var(--select-placeholder-color, #828688)}:host div.container input::-webkit-input-placeholder{color:var(--select-placeholder-color, #828688)}:host div.container ct-icon.select-icon{pointer-events:none}:host div.container ct-icon.clear,:host div.container ct-icon.select-icon{position:absolute;top:0;right:0;height:100%;padding:0 7px;cursor:pointer}
    `]})],J),E.CTSelectionTextFilter=J},function(L,E,A){(function(I,R){var N;(function(H,B){L.exports=B()})(this,function(){'use strict';function H(Ze){return'function'==typeof Ze||'object'==typeof Ze&&null!==Ze}function B(Ze){return'function'==typeof Ze}function J(){return'undefined'==typeof Pe?X():function(){Pe(Q)}}function X(){var Ze=setTimeout;return function(){return Ze(Q,1)}}function Q(){for(var Ze=0;Ze<Ne;Ze+=2){var et=ze[Ze],nt=ze[Ze+1];et(nt),ze[Ze]=void 0,ze[Ze+1]=void 0}Ne=0}function ee(Ze,et){var nt=arguments,at=this,ot=new this.constructor(ne);void 0===ot[Ve]&&Le(ot);var st=at._state;return st?function(){var dt=nt[st-1];He(function(){return Ce(st,ot,dt,at._result)})}():ge(at,ot,Ze,et),ot}function te(Ze){var et=this;if(Ze&&'object'==typeof Ze&&Ze.constructor===et)return Ze;var nt=new et(ne);return ue(nt,Ze),nt}function ne(){}function ae(){return new TypeError('You cannot resolve a promise with itself')}function oe(){return new TypeError('A promises callback cannot return that same promise.')}function se(Ze){try{return Ze.then}catch(et){return $e.error=et,$e}}function ie(Ze,et,nt,at){try{Ze.call(et,nt,at)}catch(ot){return ot}}function de(Ze,et,nt){He(function(at){var ot=!1,st=ie(nt,et,function(dt){ot||(ot=!0,et===dt?pe(at,dt):ue(at,dt))},function(dt){ot||(ot=!0,he(at,dt))},'Settle: '+(at._label||' unknown promise'));!ot&&st&&(ot=!0,he(at,st))},Ze)}function le(Ze,et){et._state===Je?pe(Ze,et._result):et._state===Ke?he(Ze,et._result):ge(et,void 0,function(nt){return ue(Ze,nt)},function(nt){return he(Ze,nt)})}function _e(Ze,et,nt){et.constructor===Ze.constructor&&nt===ee&&et.constructor.resolve===te?le(Ze,et):nt===$e?(he(Ze,$e.error),$e.error=null):void 0===nt?pe(Ze,et):B(nt)?de(Ze,et,nt):pe(Ze,et)}function ue(Ze,et){Ze===et?he(Ze,ae()):H(et)?_e(Ze,et,se(et)):pe(Ze,et)}function ce(Ze){Ze._onerror&&Ze._onerror(Ze._result),fe(Ze)}function pe(Ze,et){Ze._state!==Ge||(Ze._result=et,Ze._state=Je,0!==Ze._subscribers.length&&He(fe,Ze))}function he(Ze,et){Ze._state!==Ge||(Ze._state=Ke,Ze._result=et,He(ce,Ze))}function ge(Ze,et,nt,at){var ot=Ze._subscribers,st=ot.length;Ze._onerror=null,ot[st]=et,ot[st+Je]=nt,ot[st+Ke]=at,0===st&&Ze._state&&He(fe,Ze)}function fe(Ze){var et=Ze._subscribers,nt=Ze._state;if(0!==et.length){for(var at=void 0,ot=void 0,st=Ze._result,dt=0;dt<et.length;dt+=3)at=et[dt],ot=et[dt+nt],at?Ce(nt,at,ot,st):ot(st);Ze._subscribers.length=0}}function ye(){this.error=null}function Te(Ze,et){try{return Ze(et)}catch(nt){return Xe.error=nt,Xe}}function Ce(Ze,et,nt,at){var ot=B(nt),st,dt,lt,_t;if(!ot)st=at,lt=!0;else if(st=Te(nt,at),st===Xe?(_t=!0,dt=st.error,st.error=null):lt=!0,et===st)return void he(et,oe());et._state!==Ge||(ot&&lt?ue(et,st):_t?he(et,dt):Ze===Je?pe(et,st):Ze===Ke&&he(et,st))}function Me(Ze,et){try{et(function(at){ue(Ze,at)},function(at){he(Ze,at)})}catch(nt){he(Ze,nt)}}function ve(){return Qe++}function Le(Ze){Ze[Ve]=Qe++,Ze._state=void 0,Ze._result=void 0,Ze._subscribers=[]}function Ee(Ze,et){this._instanceConstructor=Ze,this.promise=new Ze(ne),this.promise[Ve]||Le(this.promise),Oe(et)?(this._input=et,this.length=et.length,this._remaining=et.length,this._result=Array(this.length),0===this.length?pe(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&pe(this.promise,this._result))):he(this.promise,Se())}function Se(){return new Error('Array Methods must be provided an Array')}function Ie(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor')}function Re(){throw new TypeError('Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.')}function we(Ze){this[Ve]=ve(),this._result=this._state=void 0,this._subscribers=[],ne!==Ze&&('function'!=typeof Ze&&Ie(),this instanceof we?Me(this,Ze):Re())}var Ye=Array.isArray?Array.isArray:function(Ze){return'[object Array]'===Object.prototype.toString.call(Ze)};var Oe=Ye,Ne=0,Pe=void 0,xe=void 0,He=function(et,nt){ze[Ne]=et,ze[Ne+1]=nt,Ne+=2,2==Ne&&(xe?xe(Q):We())},je='undefined'==typeof window?void 0:window,Fe=je||{},Ue=Fe.MutationObserver||Fe.WebKitMutationObserver,Be='undefined'==typeof self&&'undefined'!=typeof I&&'[object process]'==={}.toString.call(I),qe='undefined'!=typeof Uint8ClampedArray&&'undefined'!=typeof importScripts&&'undefined'!=typeof MessageChannel,ze=Array(1e3),We=void 0;We=Be?function(){return function(){return I.nextTick(Q)}}():Ue?function(){var Ze=0,et=new Ue(Q),nt=document.createTextNode('');return et.observe(nt,{characterData:!0}),function(){nt.data=Ze=++Ze%2}}():qe?function(){var Ze=new MessageChannel;return Ze.port1.onmessage=Q,function(){return Ze.port2.postMessage(0)}}():void 0!==je||0?X():function(){try{var et=A(210);return Pe=et.runOnLoop||et.runOnContext,J()}catch(nt){return X()}}();var Ve=Math.random().toString(36).substring(16),Ge=void 0,Je=1,Ke=2,$e=new ye,Xe=new ye,Qe=0;return Ee.prototype._enumerate=function(){for(var Ze=this.length,et=this._input,nt=0;this._state===Ge&&nt<Ze;nt++)this._eachEntry(et[nt],nt)},Ee.prototype._eachEntry=function(Ze,et){var nt=this._instanceConstructor,at=nt.resolve;if(at===te){var ot=se(Ze);if(ot===ee&&Ze._state!==Ge)this._settledAt(Ze._state,et,Ze._result);else if('function'!=typeof ot)this._remaining--,this._result[et]=Ze;else if(nt===we){var st=new nt(ne);_e(st,Ze,ot),this._willSettleAt(st,et)}else this._willSettleAt(new nt(function(dt){return dt(Ze)}),et)}else this._willSettleAt(at(Ze),et)},Ee.prototype._settledAt=function(Ze,et,nt){var at=this.promise;at._state===Ge&&(this._remaining--,Ze===Ke?he(at,nt):this._result[et]=nt),0===this._remaining&&pe(at,this._result)},Ee.prototype._willSettleAt=function(Ze,et){var nt=this;ge(Ze,void 0,function(at){return nt._settledAt(Je,et,at)},function(at){return nt._settledAt(Ke,et,at)})},we.all=function(Ze){return new Ee(this,Ze).promise},we.race=function(Ze){var et=this;return Oe(Ze)?new et(function(nt,at){for(var ot=Ze.length,st=0;st<ot;st++)et.resolve(Ze[st]).then(nt,at)}):new et(function(nt,at){return at(new TypeError('You must pass an array to race.'))})},we.resolve=te,we.reject=function(Ze){var et=this,nt=new et(ne);return he(nt,Ze),nt},we._setScheduler=function(Ze){xe=Ze},we._setAsap=function(Ze){He=Ze},we._asap=He,we.prototype={constructor:we,then:ee,catch:function(et){return this.then(null,et)}},we.polyfill=function(){var Ze;if('undefined'!=typeof R)Ze=R;else if('undefined'!=typeof self)Ze=self;else try{Ze=Function('return this')()}catch(at){throw new Error('polyfill failed because global object is unavailable in this environment')}var et=Ze.Promise;if(et){var nt=null;try{nt=Object.prototype.toString.call(et.resolve())}catch(at){}if('[object Promise]'===nt&&!et.cast)return}Ze.Promise=we},we.Promise=we,we})}).call(E,A(206),A(35))},function(L,E,A){'use strict';function I(){return function(W){this.j=[],this.T=W||null}}E.__esModule=!0,E.stateify=E.TokenState=E.CharacterState=void 0;var N=A(28),H=I();H.prototype={defaultTransition:!1,on:function(G,J){if(G instanceof Array){for(var K=0;K<G.length;K++)this.j.push([G[K],J]);return this}return this.j.push([G,J]),this},next:function(G){for(var J=0;J<this.j.length;J++){var K=this.j[J],$=K[0],X=K[1];if(this.test(G,$))return X}return this.defaultTransition},accepts:function(){return!!this.T},test:function(G,J){return G===J},emit:function(){return this.T}};var B=(0,N.inherits)(H,I(),{test:function(G,J){return G===J||J instanceof RegExp&&J.test(G)}}),z=(0,N.inherits)(H,I(),{jump:function(G){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,K=this.next(new G(''));return K===this.defaultTransition?(K=new this.constructor(J),this.on(G,K)):J&&(K.T=J),K},test:function(G,J){return G instanceof J}});E.CharacterState=B,E.TokenState=z,E.stateify=function(W,G,J,K){for(var $=0,X=W.length,Q=G,Z=[],ee;$<X&&(ee=Q.next(W[$]));)Q=ee,$++;if($>=X)return[];for(;$<X-1;)ee=new B(K),Z.push(ee),Q.on(W[$],ee),Q=ee,$++;return ee=new B(J),Z.push(ee),Q.on(W[X-1],ee),Z}},function(L,E){'use strict';E.__esModule=!0,E.createTokenClass=function(){return function(R){R&&(this.v=R)}}},function(L,E,A){'use strict';(function(I){function N(){return B.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function H(Be,qe){if(N()<qe)throw new RangeError('Invalid typed array length');return B.TYPED_ARRAY_SUPPORT?(Be=new Uint8Array(qe),Be.__proto__=B.prototype):(null===Be&&(Be=new B(qe)),Be.length=qe),Be}function B(Be,qe,ze){if(!B.TYPED_ARRAY_SUPPORT&&!(this instanceof B))return new B(Be,qe,ze);if('number'==typeof Be){if('string'==typeof qe)throw new Error('If encoding is specified then the first argument must be a string');return J(this,Be)}return z(this,Be,qe,ze)}function z(Be,qe,ze,We){if('number'==typeof qe)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&qe instanceof ArrayBuffer?X(Be,qe,ze,We):'string'==typeof qe?K(Be,qe,ze):Q(Be,qe)}function W(Be){if('number'!=typeof Be)throw new TypeError('"size" argument must be a number');else if(0>Be)throw new RangeError('"size" argument must not be negative')}function G(Be,qe,ze,We){return W(qe),0>=qe?H(Be,qe):void 0===ze?H(Be,qe):'string'==typeof We?H(Be,qe).fill(ze,We):H(Be,qe).fill(ze)}function J(Be,qe){if(W(qe),Be=H(Be,0>qe?0:0|Z(qe)),!B.TYPED_ARRAY_SUPPORT)for(var ze=0;ze<qe;++ze)Be[ze]=0;return Be}function K(Be,qe,ze){if(('string'!=typeof ze||''===ze)&&(ze='utf8'),!B.isEncoding(ze))throw new TypeError('"encoding" must be a valid string encoding');var We=0|te(qe,ze);Be=H(Be,We);var Ve=Be.write(qe,ze);return Ve!==We&&(Be=Be.slice(0,Ve)),Be}function $(Be,qe){var ze=0>qe.length?0:0|Z(qe.length);Be=H(Be,ze);for(var We=0;We<ze;We+=1)Be[We]=255&qe[We];return Be}function X(Be,qe,ze,We){if(qe.byteLength,0>ze||qe.byteLength<ze)throw new RangeError('\'offset\' is out of bounds');if(qe.byteLength<ze+(We||0))throw new RangeError('\'length\' is out of bounds');return qe=void 0===ze&&void 0===We?new Uint8Array(qe):void 0===We?new Uint8Array(qe,ze):new Uint8Array(qe,ze,We),B.TYPED_ARRAY_SUPPORT?(Be=qe,Be.__proto__=B.prototype):Be=$(Be,qe),Be}function Q(Be,qe){if(B.isBuffer(qe)){var ze=0|Z(qe.length);return(Be=H(Be,ze),0===Be.length)?Be:(qe.copy(Be,0,0,ze),Be)}if(qe){if('undefined'!=typeof ArrayBuffer&&qe.buffer instanceof ArrayBuffer||'length'in qe)return'number'!=typeof qe.length||Pe(qe.length)?H(Be,0):$(Be,qe);if('Buffer'===qe.type&&je(qe.data))return $(Be,qe.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function Z(Be){if(Be>=N())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+N().toString(16)+' bytes');return 0|Be}function te(Be,qe){if(B.isBuffer(Be))return Be.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Be)||Be instanceof ArrayBuffer))return Be.byteLength;'string'!=typeof Be&&(Be=''+Be);var ze=Be.length;if(0===ze)return 0;for(var We=!1;;)switch(qe){case'ascii':case'latin1':case'binary':return ze;case'utf8':case'utf-8':case void 0:return we(Be).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*ze;case'hex':return ze>>>1;case'base64':return Oe(Be).length;default:if(We)return we(Be).length;qe=(''+qe).toLowerCase(),We=!0;}}function ne(Be,qe,ze){var We=!1;if((void 0===qe||0>qe)&&(qe=0),qe>this.length)return'';if((void 0===ze||ze>this.length)&&(ze=this.length),0>=ze)return'';if(ze>>>=0,qe>>>=0,ze<=qe)return'';for(Be||(Be='utf8');;)switch(Be){case'hex':return Te(this,qe,ze);case'utf8':case'utf-8':return he(this,qe,ze);case'ascii':return fe(this,qe,ze);case'latin1':case'binary':return ye(this,qe,ze);case'base64':return pe(this,qe,ze);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return Ce(this,qe,ze);default:if(We)throw new TypeError('Unknown encoding: '+Be);Be=(Be+'').toLowerCase(),We=!0;}}function ae(Be,qe,ze){var We=Be[qe];Be[qe]=Be[ze],Be[ze]=We}function oe(Be,qe,ze,We,Ve){if(0===Be.length)return-1;if('string'==typeof ze?(We=ze,ze=0):2147483647<ze?ze=2147483647:-2147483648>ze&&(ze=-2147483648),ze=+ze,isNaN(ze)&&(ze=Ve?0:Be.length-1),0>ze&&(ze=Be.length+ze),ze>=Be.length){if(Ve)return-1;ze=Be.length-1}else if(0>ze)if(Ve)ze=0;else return-1;if('string'==typeof qe&&(qe=B.from(qe,We)),B.isBuffer(qe))return 0===qe.length?-1:se(Be,qe,ze,We,Ve);if('number'==typeof qe)return qe&=255,B.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?Ve?Uint8Array.prototype.indexOf.call(Be,qe,ze):Uint8Array.prototype.lastIndexOf.call(Be,qe,ze):se(Be,[qe],ze,We,Ve);throw new TypeError('val must be string, number or Buffer')}function se(Be,qe,ze,We,Ve){function Ge(nt,at){return 1==Je?nt[at]:nt.readUInt16BE(at*Je)}var Je=1,Ke=Be.length,$e=qe.length;if(void 0!==We&&(We=(We+'').toLowerCase(),'ucs2'===We||'ucs-2'===We||'utf16le'===We||'utf-16le'===We)){if(2>Be.length||2>qe.length)return-1;Je=2,Ke/=2,$e/=2,ze/=2}var Xe;if(Ve){var Qe=-1;for(Xe=ze;Xe<Ke;Xe++)if(Ge(Be,Xe)!==Ge(qe,-1==Qe?0:Xe-Qe))-1!=Qe&&(Xe-=Xe-Qe),Qe=-1;else if(-1==Qe&&(Qe=Xe),Xe-Qe+1===$e)return Qe*Je}else for(ze+$e>Ke&&(ze=Ke-$e),Xe=ze;0<=Xe;Xe--){for(var Ze=!0,et=0;et<$e;et++)if(Ge(Be,Xe+et)!==Ge(qe,et)){Ze=!1;break}if(Ze)return Xe}return-1}function ie(Be,qe,ze,We){ze=+ze||0;var Ve=Be.length-ze;We?(We=+We,We>Ve&&(We=Ve)):We=Ve;var Ge=qe.length;if(0!=Ge%2)throw new TypeError('Invalid hex string');We>Ge/2&&(We=Ge/2);for(var Je=0,Ke;Je<We;++Je){if(Ke=parseInt(qe.substr(2*Je,2),16),isNaN(Ke))return Je;Be[ze+Je]=Ke}return Je}function de(Be,qe,ze,We){return Ne(we(qe,Be.length-ze),Be,ze,We)}function le(Be,qe,ze,We){return Ne(ke(qe),Be,ze,We)}function _e(Be,qe,ze,We){return le(Be,qe,ze,We)}function ue(Be,qe,ze,We){return Ne(Oe(qe),Be,ze,We)}function ce(Be,qe,ze,We){return Ne(Ye(qe,Be.length-ze),Be,ze,We)}function pe(Be,qe,ze){return 0===qe&&ze===Be.length?xe.fromByteArray(Be):xe.fromByteArray(Be.slice(qe,ze))}function he(Be,qe,ze){ze=Math.min(Be.length,ze);for(var We=[],Ve=qe;Ve<ze;){var Ge=Be[Ve],Je=null,Ke=239<Ge?4:223<Ge?3:191<Ge?2:1;if(Ve+Ke<=ze){var $e,Xe,Qe,Ze;1==Ke?128>Ge&&(Je=Ge):2==Ke?($e=Be[Ve+1],128==(192&$e)&&(Ze=(31&Ge)<<6|63&$e,127<Ze&&(Je=Ze))):3==Ke?($e=Be[Ve+1],Xe=Be[Ve+2],128==(192&$e)&&128==(192&Xe)&&(Ze=(15&Ge)<<12|(63&$e)<<6|63&Xe,2047<Ze&&(55296>Ze||57343<Ze)&&(Je=Ze))):4==Ke?($e=Be[Ve+1],Xe=Be[Ve+2],Qe=Be[Ve+3],128==(192&$e)&&128==(192&Xe)&&128==(192&Qe)&&(Ze=(15&Ge)<<18|(63&$e)<<12|(63&Xe)<<6|63&Qe,65535<Ze&&1114112>Ze&&(Je=Ze))):void 0}null===Je?(Je=65533,Ke=1):65535<Je&&(Je-=65536,We.push(55296|1023&Je>>>10),Je=56320|1023&Je),We.push(Je),Ve+=Ke}return ge(We)}function ge(Be){var qe=Be.length;if(qe<=Fe)return String.fromCharCode.apply(String,Be);for(var ze='',We=0;We<qe;)ze+=String.fromCharCode.apply(String,Be.slice(We,We+=Fe));return ze}function fe(Be,qe,ze){var We='';ze=Math.min(Be.length,ze);for(var Ve=qe;Ve<ze;++Ve)We+=String.fromCharCode(127&Be[Ve]);return We}function ye(Be,qe,ze){var We='';ze=Math.min(Be.length,ze);for(var Ve=qe;Ve<ze;++Ve)We+=String.fromCharCode(Be[Ve]);return We}function Te(Be,qe,ze){var We=Be.length;(!qe||0>qe)&&(qe=0),(!ze||0>ze||ze>We)&&(ze=We);for(var Ve='',Ge=qe;Ge<ze;++Ge)Ve+=Re(Be[Ge]);return Ve}function Ce(Be,qe,ze){for(var We=Be.slice(qe,ze),Ve='',Ge=0;Ge<We.length;Ge+=2)Ve+=String.fromCharCode(We[Ge]+256*We[Ge+1]);return Ve}function Me(Be,qe,ze){if(0!=Be%1||0>Be)throw new RangeError('offset is not uint');if(Be+qe>ze)throw new RangeError('Trying to access beyond buffer length')}function ve(Be,qe,ze,We,Ve,Ge){if(!B.isBuffer(Be))throw new TypeError('"buffer" argument must be a Buffer instance');if(qe>Ve||qe<Ge)throw new RangeError('"value" argument is out of bounds');if(ze+We>Be.length)throw new RangeError('Index out of range')}function Le(Be,qe,ze,We){0>qe&&(qe=65535+qe+1);for(var Ve=0,Ge=Math.min(Be.length-ze,2);Ve<Ge;++Ve)Be[ze+Ve]=(qe&255<<8*(We?Ve:1-Ve))>>>8*(We?Ve:1-Ve)}function Ee(Be,qe,ze,We){0>qe&&(qe=4294967295+qe+1);for(var Ve=0,Ge=Math.min(Be.length-ze,4);Ve<Ge;++Ve)Be[ze+Ve]=255&qe>>>8*(We?Ve:3-Ve)}function Se(Be,qe,ze,We){if(ze+We>Be.length)throw new RangeError('Index out of range');if(0>ze)throw new RangeError('Index out of range')}function be(Be,qe,ze,We,Ve){return Ve||Se(Be,qe,ze,4,3.4028234663852886e38,-3.4028234663852886e38),He.write(Be,qe,ze,We,23,4),ze+4}function De(Be,qe,ze,We,Ve){return Ve||Se(Be,qe,ze,8,1.7976931348623157e308,-1.7976931348623157e308),He.write(Be,qe,ze,We,52,8),ze+8}function Ae(Be){if(Be=Ie(Be).replace(Ue,''),2>Be.length)return'';for(;0!=Be.length%4;)Be+='=';return Be}function Ie(Be){return Be.trim?Be.trim():Be.replace(/^\s+|\s+$/g,'')}function Re(Be){return 16>Be?'0'+Be.toString(16):Be.toString(16)}function we(Be,qe){qe=qe||Infinity;for(var We=Be.length,Ve=null,Ge=[],Je=0,ze;Je<We;++Je){if(ze=Be.charCodeAt(Je),55295<ze&&57344>ze){if(!Ve){if(56319<ze){-1<(qe-=3)&&Ge.push(239,191,189);continue}else if(Je+1===We){-1<(qe-=3)&&Ge.push(239,191,189);continue}Ve=ze;continue}if(56320>ze){-1<(qe-=3)&&Ge.push(239,191,189),Ve=ze;continue}ze=(Ve-55296<<10|ze-56320)+65536}else Ve&&-1<(qe-=3)&&Ge.push(239,191,189);if(Ve=null,128>ze){if(0>(qe-=1))break;Ge.push(ze)}else if(2048>ze){if(0>(qe-=2))break;Ge.push(192|ze>>6,128|63&ze)}else if(65536>ze){if(0>(qe-=3))break;Ge.push(224|ze>>12,128|63&ze>>6,128|63&ze)}else if(1114112>ze){if(0>(qe-=4))break;Ge.push(240|ze>>18,128|63&ze>>12,128|63&ze>>6,128|63&ze)}else throw new Error('Invalid code point')}return Ge}function ke(Be){for(var qe=[],ze=0;ze<Be.length;++ze)qe.push(255&Be.charCodeAt(ze));return qe}function Ye(Be,qe){for(var Ge=[],Je=0,ze,We,Ve;Je<Be.length&&!(0>(qe-=2));++Je)ze=Be.charCodeAt(Je),We=ze>>8,Ve=ze%256,Ge.push(Ve),Ge.push(We);return Ge}function Oe(Be){return xe.toByteArray(Ae(Be))}function Ne(Be,qe,ze,We){for(var Ve=0;Ve<We&&!(Ve+ze>=qe.length||Ve>=Be.length);++Ve)qe[Ve+ze]=Be[Ve];return Ve}function Pe(Be){return Be!==Be}var xe=A(194),He=A(196),je=A(197);E.Buffer=B,E.SlowBuffer=function(Be){return+Be!=Be&&(Be=0),B.alloc(+Be)},E.INSPECT_MAX_BYTES=50,B.TYPED_ARRAY_SUPPORT=I.TYPED_ARRAY_SUPPORT===void 0?function(){try{var Be=new Uint8Array(1);return Be.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Be.foo()&&'function'==typeof Be.subarray&&0===Be.subarray(1,1).byteLength}catch(qe){return!1}}():I.TYPED_ARRAY_SUPPORT,E.kMaxLength=N(),B.poolSize=8192,B._augment=function(Be){return Be.__proto__=B.prototype,Be},B.from=function(Be,qe,ze){return z(null,Be,qe,ze)},B.TYPED_ARRAY_SUPPORT&&(B.prototype.__proto__=Uint8Array.prototype,B.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&B[Symbol.species]===B&&Object.defineProperty(B,Symbol.species,{value:null,configurable:!0})),B.alloc=function(Be,qe,ze){return G(null,Be,qe,ze)},B.allocUnsafe=function(Be){return J(null,Be)},B.allocUnsafeSlow=function(Be){return J(null,Be)},B.isBuffer=function(qe){return!!(null!=qe&&qe._isBuffer)},B.compare=function(qe,ze){if(!B.isBuffer(qe)||!B.isBuffer(ze))throw new TypeError('Arguments must be Buffers');if(qe===ze)return 0;for(var We=qe.length,Ve=ze.length,Ge=0,Je=Math.min(We,Ve);Ge<Je;++Ge)if(qe[Ge]!==ze[Ge]){We=qe[Ge],Ve=ze[Ge];break}return We<Ve?-1:Ve<We?1:0},B.isEncoding=function(qe){switch((qe+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},B.concat=function(qe,ze){if(!je(qe))throw new TypeError('"list" argument must be an Array of Buffers');if(0===qe.length)return B.alloc(0);var We;if(ze===void 0)for(ze=0,We=0;We<qe.length;++We)ze+=qe[We].length;var Ve=B.allocUnsafe(ze),Ge=0;for(We=0;We<qe.length;++We){var Je=qe[We];if(!B.isBuffer(Je))throw new TypeError('"list" argument must be an Array of Buffers');Je.copy(Ve,Ge),Ge+=Je.length}return Ve},B.byteLength=te,B.prototype._isBuffer=!0,B.prototype.swap16=function(){var qe=this.length;if(0!=qe%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var ze=0;ze<qe;ze+=2)ae(this,ze,ze+1);return this},B.prototype.swap32=function(){var qe=this.length;if(0!=qe%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var ze=0;ze<qe;ze+=4)ae(this,ze,ze+3),ae(this,ze+1,ze+2);return this},B.prototype.swap64=function(){var qe=this.length;if(0!=qe%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var ze=0;ze<qe;ze+=8)ae(this,ze,ze+7),ae(this,ze+1,ze+6),ae(this,ze+2,ze+5),ae(this,ze+3,ze+4);return this},B.prototype.toString=function(){var qe=0|this.length;return 0==qe?'':0===arguments.length?he(this,0,qe):ne.apply(this,arguments)},B.prototype.equals=function(qe){if(!B.isBuffer(qe))throw new TypeError('Argument must be a Buffer');return this===qe||0===B.compare(this,qe)},B.prototype.inspect=function(){var qe='',ze=E.INSPECT_MAX_BYTES;return 0<this.length&&(qe=this.toString('hex',0,ze).match(/.{2}/g).join(' '),this.length>ze&&(qe+=' ... ')),'<Buffer '+qe+'>'},B.prototype.compare=function(qe,ze,We,Ve,Ge){if(!B.isBuffer(qe))throw new TypeError('Argument must be a Buffer');if(void 0===ze&&(ze=0),void 0===We&&(We=qe?qe.length:0),void 0===Ve&&(Ve=0),void 0===Ge&&(Ge=this.length),0>ze||We>qe.length||0>Ve||Ge>this.length)throw new RangeError('out of range index');if(Ve>=Ge&&ze>=We)return 0;if(Ve>=Ge)return-1;if(ze>=We)return 1;if(ze>>>=0,We>>>=0,Ve>>>=0,Ge>>>=0,this===qe)return 0;for(var Je=Ge-Ve,Ke=We-ze,$e=Math.min(Je,Ke),Xe=this.slice(Ve,Ge),Qe=qe.slice(ze,We),Ze=0;Ze<$e;++Ze)if(Xe[Ze]!==Qe[Ze]){Je=Xe[Ze],Ke=Qe[Ze];break}return Je<Ke?-1:Ke<Je?1:0},B.prototype.includes=function(qe,ze,We){return-1!==this.indexOf(qe,ze,We)},B.prototype.indexOf=function(qe,ze,We){return oe(this,qe,ze,We,!0)},B.prototype.lastIndexOf=function(qe,ze,We){return oe(this,qe,ze,We,!1)},B.prototype.write=function(qe,ze,We,Ve){if(void 0===ze)Ve='utf8',We=this.length,ze=0;else if(void 0===We&&'string'==typeof ze)Ve=ze,We=this.length,ze=0;else if(isFinite(ze))ze|=0,isFinite(We)?(We|=0,void 0===Ve&&(Ve='utf8')):(Ve=We,We=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Ge=this.length-ze;if((void 0===We||We>Ge)&&(We=Ge),0<qe.length&&(0>We||0>ze)||ze>this.length)throw new RangeError('Attempt to write outside buffer bounds');Ve||(Ve='utf8');for(var Je=!1;;)switch(Ve){case'hex':return ie(this,qe,ze,We);case'utf8':case'utf-8':return de(this,qe,ze,We);case'ascii':return le(this,qe,ze,We);case'latin1':case'binary':return _e(this,qe,ze,We);case'base64':return ue(this,qe,ze,We);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ce(this,qe,ze,We);default:if(Je)throw new TypeError('Unknown encoding: '+Ve);Ve=(''+Ve).toLowerCase(),Je=!0;}},B.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Fe=4096;B.prototype.slice=function(qe,ze){var We=this.length;qe=~~qe,ze=ze===void 0?We:~~ze,0>qe?(qe+=We,0>qe&&(qe=0)):qe>We&&(qe=We),0>ze?(ze+=We,0>ze&&(ze=0)):ze>We&&(ze=We),ze<qe&&(ze=qe);var Ve;if(B.TYPED_ARRAY_SUPPORT)Ve=this.subarray(qe,ze),Ve.__proto__=B.prototype;else{var Ge=ze-qe;Ve=new B(Ge,void 0);for(var Je=0;Je<Ge;++Je)Ve[Je]=this[Je+qe]}return Ve},B.prototype.readUIntLE=function(qe,ze,We){qe|=0,ze|=0,We||Me(qe,ze,this.length);for(var Ve=this[qe],Ge=1,Je=0;++Je<ze&&(Ge*=256);)Ve+=this[qe+Je]*Ge;return Ve},B.prototype.readUIntBE=function(qe,ze,We){qe|=0,ze|=0,We||Me(qe,ze,this.length);for(var Ve=this[qe+--ze],Ge=1;0<ze&&(Ge*=256);)Ve+=this[qe+--ze]*Ge;return Ve},B.prototype.readUInt8=function(qe,ze){return ze||Me(qe,1,this.length),this[qe]},B.prototype.readUInt16LE=function(qe,ze){return ze||Me(qe,2,this.length),this[qe]|this[qe+1]<<8},B.prototype.readUInt16BE=function(qe,ze){return ze||Me(qe,2,this.length),this[qe]<<8|this[qe+1]},B.prototype.readUInt32LE=function(qe,ze){return ze||Me(qe,4,this.length),(this[qe]|this[qe+1]<<8|this[qe+2]<<16)+16777216*this[qe+3]},B.prototype.readUInt32BE=function(qe,ze){return ze||Me(qe,4,this.length),16777216*this[qe]+(this[qe+1]<<16|this[qe+2]<<8|this[qe+3])},B.prototype.readIntLE=function(qe,ze,We){qe|=0,ze|=0,We||Me(qe,ze,this.length);for(var Ve=this[qe],Ge=1,Je=0;++Je<ze&&(Ge*=256);)Ve+=this[qe+Je]*Ge;return Ge*=128,Ve>=Ge&&(Ve-=Math.pow(2,8*ze)),Ve},B.prototype.readIntBE=function(qe,ze,We){qe|=0,ze|=0,We||Me(qe,ze,this.length);for(var Ve=ze,Ge=1,Je=this[qe+--Ve];0<Ve&&(Ge*=256);)Je+=this[qe+--Ve]*Ge;return Ge*=128,Je>=Ge&&(Je-=Math.pow(2,8*ze)),Je},B.prototype.readInt8=function(qe,ze){return ze||Me(qe,1,this.length),128&this[qe]?-1*(255-this[qe]+1):this[qe]},B.prototype.readInt16LE=function(qe,ze){ze||Me(qe,2,this.length);var We=this[qe]|this[qe+1]<<8;return 32768&We?4294901760|We:We},B.prototype.readInt16BE=function(qe,ze){ze||Me(qe,2,this.length);var We=this[qe+1]|this[qe]<<8;return 32768&We?4294901760|We:We},B.prototype.readInt32LE=function(qe,ze){return ze||Me(qe,4,this.length),this[qe]|this[qe+1]<<8|this[qe+2]<<16|this[qe+3]<<24},B.prototype.readInt32BE=function(qe,ze){return ze||Me(qe,4,this.length),this[qe]<<24|this[qe+1]<<16|this[qe+2]<<8|this[qe+3]},B.prototype.readFloatLE=function(qe,ze){return ze||Me(qe,4,this.length),He.read(this,qe,!0,23,4)},B.prototype.readFloatBE=function(qe,ze){return ze||Me(qe,4,this.length),He.read(this,qe,!1,23,4)},B.prototype.readDoubleLE=function(qe,ze){return ze||Me(qe,8,this.length),He.read(this,qe,!0,52,8)},B.prototype.readDoubleBE=function(qe,ze){return ze||Me(qe,8,this.length),He.read(this,qe,!1,52,8)},B.prototype.writeUIntLE=function(qe,ze,We,Ve){if(qe=+qe,ze|=0,We|=0,!Ve){var Ge=Math.pow(2,8*We)-1;ve(this,qe,ze,We,Ge,0)}var Je=1,Ke=0;for(this[ze]=255&qe;++Ke<We&&(Je*=256);)this[ze+Ke]=255&qe/Je;return ze+We},B.prototype.writeUIntBE=function(qe,ze,We,Ve){if(qe=+qe,ze|=0,We|=0,!Ve){var Ge=Math.pow(2,8*We)-1;ve(this,qe,ze,We,Ge,0)}var Je=We-1,Ke=1;for(this[ze+Je]=255&qe;0<=--Je&&(Ke*=256);)this[ze+Je]=255&qe/Ke;return ze+We},B.prototype.writeUInt8=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,1,255,0),B.TYPED_ARRAY_SUPPORT||(qe=Math.floor(qe)),this[ze]=255&qe,ze+1},B.prototype.writeUInt16LE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,2,65535,0),B.TYPED_ARRAY_SUPPORT?(this[ze]=255&qe,this[ze+1]=qe>>>8):Le(this,qe,ze,!0),ze+2},B.prototype.writeUInt16BE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,2,65535,0),B.TYPED_ARRAY_SUPPORT?(this[ze]=qe>>>8,this[ze+1]=255&qe):Le(this,qe,ze,!1),ze+2},B.prototype.writeUInt32LE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,4,4294967295,0),B.TYPED_ARRAY_SUPPORT?(this[ze+3]=qe>>>24,this[ze+2]=qe>>>16,this[ze+1]=qe>>>8,this[ze]=255&qe):Ee(this,qe,ze,!0),ze+4},B.prototype.writeUInt32BE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,4,4294967295,0),B.TYPED_ARRAY_SUPPORT?(this[ze]=qe>>>24,this[ze+1]=qe>>>16,this[ze+2]=qe>>>8,this[ze+3]=255&qe):Ee(this,qe,ze,!1),ze+4},B.prototype.writeIntLE=function(qe,ze,We,Ve){if(qe=+qe,ze|=0,!Ve){var Ge=Math.pow(2,8*We-1);ve(this,qe,ze,We,Ge-1,-Ge)}var Je=0,Ke=1,$e=0;for(this[ze]=255&qe;++Je<We&&(Ke*=256);)0>qe&&0==$e&&0!==this[ze+Je-1]&&($e=1),this[ze+Je]=255&(qe/Ke>>0)-$e;return ze+We},B.prototype.writeIntBE=function(qe,ze,We,Ve){if(qe=+qe,ze|=0,!Ve){var Ge=Math.pow(2,8*We-1);ve(this,qe,ze,We,Ge-1,-Ge)}var Je=We-1,Ke=1,$e=0;for(this[ze+Je]=255&qe;0<=--Je&&(Ke*=256);)0>qe&&0==$e&&0!==this[ze+Je+1]&&($e=1),this[ze+Je]=255&(qe/Ke>>0)-$e;return ze+We},B.prototype.writeInt8=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,1,127,-128),B.TYPED_ARRAY_SUPPORT||(qe=Math.floor(qe)),0>qe&&(qe=255+qe+1),this[ze]=255&qe,ze+1},B.prototype.writeInt16LE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,2,32767,-32768),B.TYPED_ARRAY_SUPPORT?(this[ze]=255&qe,this[ze+1]=qe>>>8):Le(this,qe,ze,!0),ze+2},B.prototype.writeInt16BE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,2,32767,-32768),B.TYPED_ARRAY_SUPPORT?(this[ze]=qe>>>8,this[ze+1]=255&qe):Le(this,qe,ze,!1),ze+2},B.prototype.writeInt32LE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,4,2147483647,-2147483648),B.TYPED_ARRAY_SUPPORT?(this[ze]=255&qe,this[ze+1]=qe>>>8,this[ze+2]=qe>>>16,this[ze+3]=qe>>>24):Ee(this,qe,ze,!0),ze+4},B.prototype.writeInt32BE=function(qe,ze,We){return qe=+qe,ze|=0,We||ve(this,qe,ze,4,2147483647,-2147483648),0>qe&&(qe=4294967295+qe+1),B.TYPED_ARRAY_SUPPORT?(this[ze]=qe>>>24,this[ze+1]=qe>>>16,this[ze+2]=qe>>>8,this[ze+3]=255&qe):Ee(this,qe,ze,!1),ze+4},B.prototype.writeFloatLE=function(qe,ze,We){return be(this,qe,ze,!0,We)},B.prototype.writeFloatBE=function(qe,ze,We){return be(this,qe,ze,!1,We)},B.prototype.writeDoubleLE=function(qe,ze,We){return De(this,qe,ze,!0,We)},B.prototype.writeDoubleBE=function(qe,ze,We){return De(this,qe,ze,!1,We)},B.prototype.copy=function(qe,ze,We,Ve){if(We||(We=0),Ve||0===Ve||(Ve=this.length),ze>=qe.length&&(ze=qe.length),ze||(ze=0),0<Ve&&Ve<We&&(Ve=We),Ve===We)return 0;if(0===qe.length||0===this.length)return 0;if(0>ze)throw new RangeError('targetStart out of bounds');if(0>We||We>=this.length)throw new RangeError('sourceStart out of bounds');if(0>Ve)throw new RangeError('sourceEnd out of bounds');Ve>this.length&&(Ve=this.length),qe.length-ze<Ve-We&&(Ve=qe.length-ze+We);var Ge=Ve-We,Je;if(this===qe&&We<ze&&ze<Ve)for(Je=Ge-1;0<=Je;--Je)qe[Je+ze]=this[Je+We];else if(1e3>Ge||!B.TYPED_ARRAY_SUPPORT)for(Je=0;Je<Ge;++Je)qe[Je+ze]=this[Je+We];else Uint8Array.prototype.set.call(qe,this.subarray(We,We+Ge),ze);return Ge},B.prototype.fill=function(qe,ze,We,Ve){if('string'==typeof qe){if('string'==typeof ze?(Ve=ze,ze=0,We=this.length):'string'==typeof We&&(Ve=We,We=this.length),1===qe.length){var Ge=qe.charCodeAt(0);256>Ge&&(qe=Ge)}if(void 0!==Ve&&'string'!=typeof Ve)throw new TypeError('encoding must be a string');if('string'==typeof Ve&&!B.isEncoding(Ve))throw new TypeError('Unknown encoding: '+Ve)}else'number'==typeof qe&&(qe&=255);if(0>ze||this.length<ze||this.length<We)throw new RangeError('Out of range index');if(We<=ze)return this;ze>>>=0,We=We===void 0?this.length:We>>>0,qe||(qe=0);var Je;if('number'==typeof qe)for(Je=ze;Je<We;++Je)this[Je]=qe;else{var Ke=B.isBuffer(qe)?qe:we(new B(qe,Ve).toString()),$e=Ke.length;for(Je=0;Je<We-ze;++Je)this[Je+ze]=Ke[Je%$e]}return this};var Ue=/[^+\/0-9A-Za-z-_]/g}).call(E,A(35))},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(se,ie,de,le){return new(de||(de=Promise))(function(_e,ue){function ce(ge){try{he(le.next(ge))}catch(fe){ue(fe)}}function pe(ge){try{he(le['throw'](ge))}catch(fe){ue(fe)}}function he(ge){ge.done?_e(ge.value):new de(function(fe){fe(ge.value)}).then(ce,pe)}he((le=le.apply(se,ie||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(0),N=A(25),H=A(1),B=A(17),z=A(103),W=A(160),G=A(5),J=A(7),K=A(4),$=A(154),X=A(20),Q=A(3),Z=A(10),ee=A(116),te=A(14),ne=A(56),ae=A(153);class oe extends R.BaseLayer{constructor(se,ie,de){if(super(se,ie),this.VERSION='1.0.0',this.bootstrapper=null,this._allConversations=null,this._currentConversation=null,this._conversationsBeingPurged=[],this._pendingConversationAlerts=[],this._isFetchingChatEntries=!1,this.name=se,this.config=this._checkConfigForPreferences(ie),!this.config.xmpp)throw new Error('What are you doing not specifying XMPP configuration?');this.config.xmpp.mam&&(this.config.xmpp.mam.autoFetch=!1),this.config.xmpp.updateUserDirectoryOnLogin=!0,this.config.xmpp.bringToForegroundOnVoipPush=!1;const le=de&&de.store||new W.Store(se,this.logger,ie),_e=de&&de.comms||new z.Comms(se,ie.xmpp,le,this.logger,this);this.bootstrapper=this.bootstrap(_e,le),this.bootstrapper.then(()=>{this.on(K.ChatEvents.ForceQuitConversation,(ue)=>I(this,void 0,void 0,function*(){const ce=yield this.getCurrentConversation();ce&&ce.id===ue.conversation.id&&(yield this.clearCurrentConversation(),yield this.purgeConversation(ce))})),this.on(K.ChatEvents.PriorityConversationNotification,(ue)=>{ue.conversation&&!this._pendingConversationAlerts.find((ce)=>ce.id===ue.conversation.id)&&this._pendingConversationAlerts.push(ue.conversation)}),this.on(K.ChatEvents.PriorityConversationAcknowledged,(ue)=>{const ce=this._pendingConversationAlerts.findIndex((pe)=>pe.id===ue.conversation.id);-1<ce&&this._pendingConversationAlerts.splice(ce,1)})}),window.simpleAudioPlayer=new ne.SimpleAudioPlayer,window.vibrationController=new ae.VibrationController}_checkConfigForPreferences(se){function ie(de,le=null){return de?de&&!1==de instanceof Array&&Object.keys(de).includes('readFromPreferences')?de.readFromPreferences:de:le}return se.xmpp=ie(se.xmpp,{}),se.behaviour=ie(se.behaviour,{}),se.conversationTypes=ie(se.conversationTypes,[]),se.roles=ie(se.roles,{}),se.priorities=ie(se.priorities,[]),se}generateCommonComponents(se){return I(this,void 0,void 0,function*(){this._contactInfoModal=document.querySelector('ct-cl-contact-info'),this._contactInfoModal||(this._contactInfoModal=document.createElement('ct-cl-contact-info'),this._contactInfoModal.owner=this.name,se.appendChild(this._contactInfoModal)),this._alertModal=document.querySelector('ct-cl-conversation-alert'),this._alertModal||(this._alertModal=document.createElement('ct-cl-conversation-alert'),this._alertModal.owner=this.name,se.appendChild(this._alertModal)),this._roleInfoModal=document.querySelector('ct-cl-role-users-modal'),this._roleInfoModal||(this._roleInfoModal=document.createElement('ct-cl-role-users-modal'),this._roleInfoModal.owner=this.name,se.appendChild(this._roleInfoModal)),this._responseModal=document.querySelector('ctcl-responses-modal'),this._responseModal||(this._responseModal=document.createElement('ctcl-responses-modal'),this._responseModal.owner=this.name,se.appendChild(this._responseModal))})}getHandlers(){return J.get(this)}mute(){this.emit(K.ChatEvents.Mute)}getCurrentXmppDisplayName(){const se=this.getCurrentUser();return se&&Q.formatUserName(se,Q.NameFormat.PREFIX_INITIAL_LAST)||''}getCurrentUser(){return this.comms.user}loadAllConversations(){return I(this,void 0,void 0,function*(){const se=yield this.store.loadConversations(),ie=yield this.store.getLatestIdentifier(),de=0===ie?1:10,_e=yield this._sendIqCommand(J.ChatMessageType.FetchConversations,{timestamp:ie,max:de});_e.data&&_e.data.lastIdentifier&&(yield this.store.updateLatestIdentifier(_e.data.lastIdentifier));const ue=_e.data&&_e.data.conversations||[],ce=[...se];0<ue.length&&(ue.forEach((pe)=>{const he=ce.findIndex((ge)=>ge.id===pe.id);-1===he?ce.push(pe):ce[he]=pe}),yield this.store.saveConversations(ce)),ce.forEach((pe)=>{pe.preview&&pe.preview.date>(pe.hideBefore||pe.lastHideBefore)&&(pe.lastHideBefore=pe.hideBefore||pe.lastHideBefore,pe.hideBefore=0)}),this._allConversations=ce})}getConversations(){return I(this,void 0,void 0,function*(){return Q.deepCloneArray(this._allConversations||[])})}getConversationById(se){return I(this,void 0,void 0,function*(){const ie=yield this.getConversations();return ie.find((de)=>de.id===se)||null})}getConversationByRoomJid(se){return I(this,void 0,void 0,function*(){const ie=yield this.getConversations();return ie.find((de)=>de.roomJid===se)||null})}getDirectConversationByParticipants(se){return I(this,void 0,void 0,function*(){const ie=new Map,de=yield this.getConversations();de.filter((_e)=>_e.type===G.ConversationType.Direct).forEach((_e)=>{ie.set(Z.getParticipantHash(_e.participants),_e)});const le=Z.getParticipantHash(se);return ie.get(le)||null})}createConversationFromProvisional(se){return I(this,void 0,void 0,function*(){return se.isProvisional?this.createConversation(se.participants,se.subject,se.description,se.expiryTTL,se.activityTTL,se.config):null})}addConversation(se,ie){return I(this,void 0,void 0,function*(){const de=this._allConversations.findIndex((le)=>le.id===se.id);-1!==de||(se.preview=ie,this._allConversations.push(se),yield this.store.saveConversations(this._allConversations),this.emit(K.ChatEvents.ConversationAdded,new K.ConversationEventArgs(se)))})}updateConversation(se,ie={}){return I(this,void 0,void 0,function*(){const de=this._allConversations.findIndex((ue)=>ue.id===se.id);if(-1!==de){const le=this._allConversations[de];ie.preview&&((!le.preview||ie.preview.date>le.preview.date)&&(se.preview=ie.preview,!ie.overrideHasUnread&&(se.hasUnread=!0)),se.hideBefore&&(se.lastHideBefore=se.hideBefore,se.hideBefore=0)),this._allConversations[de]=Q.deepCloneObject(se),yield this.store.saveConversations(this._allConversations);const _e=yield this.getCurrentConversation();_e&&_e.id===se.id&&(yield this.setCurrentConversation(se)),this.emit(K.ChatEvents.ConversationUpdated,new K.ConversationEventArgs(se)),ie.isParticipantChange&&this.emit(K.ChatEvents.ConversationParticipantsChanged,new K.ConversationParticiantsEventArgs(se,se.participants))}})}saveConversationDraft(se,ie){return I(this,void 0,void 0,function*(){const de=this._allConversations.find((le)=>le.id===se.id);de&&(ie?de.draft=ie:delete de.draft,yield this.updateConversation(de))})}closeConversation(se,ie){return I(this,void 0,void 0,function*(){se.participants=[],se.isClosed=!0,yield this.comms.clearStoredConversationMessages(se),yield this.comms.clearStoredConversationAttachments(se),yield this.updateConversation(se,{preview:ie}),yield this._alertModal.conversationClosed(se),this.emit(K.ChatEvents.ConversationClosed,new K.ConversationEventArgs(se))})}priorityAlert(se){return I(this,void 0,void 0,function*(){const ie=new te.ConversationConfigReader(this,se);let de=!0;if(ie.alert&&(de=ie.alert&&!1===ie.autoAlert,se.instigator!==this.getCurrentUserJid()&&!Z.isExpiredConversation(se))){if(ie.autoIncludeMembersInRoles&&se.participants.find((le)=>le.jid===this.getCurrentUserJid()).role===H.ChatRole.Owner)return de;ie.alert&&ie.autoAlert&&(window.cti&&(window.cti.store.variables.default_urgent_volume=ie.alertVolume),yield this.sendConversationReceived(se),yield this.emit(K.ChatEvents.PriorityConversationNotification,new ee.PriorityConversationNotificationEventArgs(se,!!ie.alert,ie.autoAlert,!0))),ie.alert&&ie.autoAlert&&(yield this.store.addToPendingAlerts(se),yield this.showConversationAlert(null,!0))}return de})}reopenConversation(se,ie,de){return I(this,void 0,void 0,function*(){se.participants=ie,se.isClosed=!1,yield this.updateConversation(se,{preview:de,isParticipantChange:!0}),this.emit(K.ChatEvents.ConversationAdded,new K.ConversationEventArgs(se))})}getCurrentConversation(){return I(this,void 0,void 0,function*(){return this._currentConversation})}setCurrentConversation(se,ie=!1){return I(this,void 0,void 0,function*(){const de=this._currentConversation&&this._currentConversation.id||'';this._currentConversation=se,ie&&(yield this.comms.clearStoredConversationMessages(se)),se.id!==de&&this.emit(K.ChatEvents.CurrentConversationChanged)})}setProvisionalConversation(se){return I(this,void 0,void 0,function*(){if(se.isProvisional){const ie=this._currentConversation&&this._currentConversation.id||'';this._currentConversation=se,se.id!==ie&&this.emit(K.ChatEvents.CurrentConversationChanged)}})}belongsToCurrentConversation(se){return I(this,void 0,void 0,function*(){const ie=yield this.getCurrentConversation();return!!ie&&Q.jidsMatch(se.to,ie.roomJid)})}clearCurrentConversation(){return I(this,void 0,void 0,function*(){this._currentConversation=null})}removeConversationById(se){return I(this,void 0,void 0,function*(){const ie=this._allConversations.findIndex((le)=>le.id===se);if(-1!==ie){const de=this._allConversations[ie];de.isClosed&&(this._allConversations.splice(ie,1),yield this.store.saveConversations(this._allConversations),this.emit(K.ChatEvents.ConversationRemoved))}})}fetchConversationEntries(se,ie=null,de=0){return I(this,void 0,void 0,function*(){if(!se||se.isClosed||se.isProvisional)return[];this._isFetchingChatEntries=!0;let le=ie&&ie.id||null;const _e=null===le;null===le?this.logger.log(B.LoggerTypes.Mam,`%c FETCHING INITIAL CHAT ENTRIES FOR CONVERSATION: %c${se.id}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;'):this.logger.log(B.LoggerTypes.Mam,`%c FETCHING EARLIER CHAT ENTRIES FOR CONVERSATION: %c${se.id} (before ${le})`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;');let ue=[];if(_e&&(ue=yield this._getChatEntriesFromMessageStore(se),ue.length&&(le=ue[0].id),this.logger.log(B.LoggerTypes.Mam,`%c FETCHED ${ue.length} ENTRIES FROM THE STORE`,'color: #669; font-weight: bold;',ue)),ue.length<de){_e&&this.logger.log(B.LoggerTypes.Mam,`%c ...NOT ENOUGH ENTRIES FOUND IN THE STORE, SUPPLEMENTING WITH MAM MESSAGES`,'color: #669; font-weight: bold;');const ce=(yield this._getChatEntriesFromMam(se,le,de-ue.length))||[];ue=[...ce,...ue]}return this.logger.log(B.LoggerTypes.Mam,`%c FETCHED ${ue.length} CHAT ENTRIES`,'color: #669; font-weight: bold;',ue),this._isFetchingChatEntries=!1,this.emit(K.ChatEvents.ChatEntriesFetched,new K.ConversationEventArgs(se)),se.hideBefore||se.lastHideBefore?ue.filter((ce)=>ce.date>(se.hideBefore||se.lastHideBefore)):ue})}fetchAllConversationEntries(se){return I(this,void 0,void 0,function*(){return!se||se.isClosed||se.isProvisional?[]:yield this._getChatEntriesFromMessageStore(se)})}sendConversationMessage(se,ie,de,le){return I(this,void 0,void 0,function*(){const _e=yield this.sendRoomChatMessage(se.id,ie,de,le,!0),ue=_e._id,ce=_e.ts,pe=this.getCurrentUserJid(),ge=se.roomJid,fe=_e.attachments.map((Te)=>({remote:Te.get,local:Te.path})),ye=Z.createChatMessage(ue,ce,pe,pe,ge,ie,fe);return ce>se.preview.date&&(se.preview=ye),se.hasUnread=!1,se.hideBefore&&se.preview.date>(se.hideBefore||se.lastHideBefore)&&(se.lastHideBefore=se.hideBefore||se.lastHideBefore,se.hideBefore=0),yield this.updateConversation(se),yield this.updateLatestIdentifier(_e),ye})}deleteConversationMessageById(se,ie=!0){return I(this,void 0,void 0,function*(){yield this.comms.deleteMessageById(se,ie)})}updateLatestIdentifier(se){return I(this,void 0,void 0,function*(){const ie=parseInt(se.archive_id,10);yield this.store.updateLatestIdentifier(ie)})}showContactInfo(se,ie,de,le=null){return I(this,void 0,void 0,function*(){yield this._contactInfoModal.show(se,ie,de,!0,le)})}showRoleUsersModal(se,ie=!0){return I(this,void 0,void 0,function*(){yield this._roleInfoModal.show(se,ie)})}showResponsesModal(se,ie=!0){return I(this,void 0,void 0,function*(){yield this._responseModal.show(se,ie)})}updateUserDirectory(){return I(this,void 0,void 0,function*(){return yield this.comms.updateUserDirectory()})}dismissContactInfo(){return I(this,void 0,void 0,function*(){yield this._contactInfoModal.dismiss()})}showConversationAlert(se,ie){return I(this,void 0,void 0,function*(){yield this._alertModal.show(se,ie)})}dismissConversationAlert(){return I(this,void 0,void 0,function*(){yield this._alertModal.dismiss()})}setShowChatFunction(se){this._alertModal.setShowChatFunction(se)}markDirectConversationAsDeleted(se,ie){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const de={conversation:se,timestamp:ie||se.preview.date},le=yield this._sendIqCommand(J.ChatMessageType.HideDirectConversation,de);return le.updated&&le.updated.$attributes.id===se.id})}createConversation(se,ie,de,le,_e,ue,ce=[]){return I(this,void 0,void 0,function*(){const pe=new te.ConversationConfigReader(this,null,ue),he=[];for(let ye=0;ye<pe.autoIncludeMembersInRoles.length;ye++){const Te=pe.autoIncludeMembersInRoles[ye],Ce=yield this.searchUsers(Te,['group']);Ce.filter((Me)=>Me.group===Te).map((Me)=>({jid:Me.jid,role:H.ChatRole.Owner})).forEach((Me)=>{se.find((ve)=>ve.jid.toLowerCase()===Me.jid.toLowerCase())||he.push(Me)})}const ge={type:pe.namedSettings?G.ConversationType.Named:G.ConversationType.Direct,participants:[...se,...he],subject:ie,description:de,config:ue,attachments:ce};if(pe.priorityPush&&(ge.priority=pe.priorityPush),0<pe.defaultConversationExpiryTTL&&(ge.expiry_ttl=pe.defaultConversationExpiryTTL),0<pe.defaultConversationActivityTTL&&(ge.activity_ttl=pe.defaultConversationActivityTTL),ge.attachments&&ge.attachments.length)try{for(let ye=0;ye<ge.attachments.length;ye++){const Te=yield this.comms.uploadFile(ce[ye].path);ge.attachments[ye].path=Te}}catch(ye){return this.logger.log(B.LoggerTypes.MessageSent,ye.toString(),'Unable to upload attachment:',ge.attachments),this.error(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.UPLOAD_ERROR_TITLE)),this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.UPLOAD_ERROR_DESCRIPTION))),null}const fe=yield this._sendIqCommand(J.ChatMessageType.CreateConversation,ge);return fe?!0===fe.data.exists?(this.error('Unable to create conversation','A direct conversation between these participants already exists.'),null):fe.data.newConversationId:null})}updateNamedConversation(se,ie,de){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const _e=yield this._sendIqCommand(J.ChatMessageType.UpdateConversation,{conversation:se,newSubject:ie,newDescription:de});return this.dismissWaitingMessage(),!!_e})}addParticipantsToConversation(se,ie){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const le=yield this._sendIqCommand(J.ChatMessageType.AddParticipants,{conversation:se,participants:ie});return this.dismissWaitingMessage(),!!le})}removeParticipantsFromConversation(se,ie){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const le=yield this._sendIqCommand(J.ChatMessageType.RemoveParticipants,{conversation:se,participants:ie});return this.dismissWaitingMessage(),!!le})}changeParticipantRoleInConversation(se,ie,de){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const _e=yield this._sendIqCommand(J.ChatMessageType.ChangeParticipantRole,{conversation:se,participant:ie,newRole:de});return this.dismissWaitingMessage(),!!_e})}leaveConversation(se){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const de=yield this._sendIqCommand(J.ChatMessageType.LeaveConversation,{conversation:se});return this.dismissWaitingMessage(),!!de})}endConversation(se){return I(this,void 0,void 0,function*(){this.showWaitingMessage(this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.PLEASE_WAIT)));const de=yield this._sendIqCommand(J.ChatMessageType.EndConversation,{conversation:se});return this.dismissWaitingMessage(),!!de})}getConfiguredPriorityById(se){return this.config.priorities.find((ie)=>ie.id===se)}captureOrSelectMedia(){return I(this,void 0,void 0,function*(){if(!this.config.externalFunctions||'function'!=typeof this.config.externalFunctions.captureOrSelectMedia)throw this.error('External function not implemented','External function \'captureOrSelectMedia\' is not implemented'),new Error('External function \'captureOrSelectMedia\' is not implemented');try{return yield this.config.externalFunctions.captureOrSelectMedia()}catch(se){throw this.error('Could not attach media',se||'An unspecified error occured'),se}})}cancelMediaSeletion(se){return I(this,void 0,void 0,function*(){if(!this.config.externalFunctions||'function'!=typeof this.config.externalFunctions.cancelMediaSeletion)throw this.error('External function not implemented','External function \'cancelMediaSeletion\' is not implemented'),new Error('External function \'cancelMediaSeletion\' is not implemented');try{yield this.config.externalFunctions.cancelMediaSeletion(se)}catch(ie){throw this.error('Could not attach media',ie||'An unspecified error occured'),ie}})}hasMediaFullscreenHandler(){return this.config.externalFunctions&&'function'==typeof this.config.externalFunctions.showMediaFullscreen}showMediaFullscreen(se){return I(this,void 0,void 0,function*(){if(this.hasMediaFullscreenHandler())try{yield this.config.externalFunctions.showMediaFullscreen(se)}catch(ie){throw this.error('Could not show media fullscreen',ie||'An unspecified error occured'),ie}})}sendConversationReceived(se){return I(this,void 0,void 0,function*(){const ie=yield this._sendIqCommand(J.ChatMessageType.ReceivedConversation,se);return!!ie})}sendConversationAcknowledgement(se,ie){return I(this,void 0,void 0,function*(){const le=yield this._sendIqCommand(J.ChatMessageType.AcknowledgeConversation,{conversation:se,value:ie});return!!le})}addToPendingAlerts(se){return I(this,void 0,void 0,function*(){return this.store.addToPendingAlerts(se)})}getNewestPendingAlert(){const se=this.store.getPendingAlerts();return 0<se.length?se[0]:null}clearPendingAlert(se){return I(this,void 0,void 0,function*(){return yield this.store.clearPendingAlert(se)})}getPendingAlertCount(){return this.store.getPendingAlerts().filter((se)=>!Z.isExpiredConversation(se)).length}purgeAllConversations(){return I(this,void 0,void 0,function*(){if(!this.config.behaviour.maxChatEntriesToStore)return;let se=0;this.logger.shouldLog(B.LoggerTypes.CleanUp)&&(se=new Date().getTime()),this.logger.log(B.LoggerTypes.CleanUp,'\uD83D\uDEAE Purging all conversations...');const ie=yield this.comms.getAllMessages();let de=[];for(const le of this._allConversations){const _e=ie.filter((pe)=>`${le.id}@${this.comms.getMucHost()}`===pe.recipient_id||`${le.id}@${this.comms.getMucHost()}`===pe.sender_id),ue=_e.sort((pe,he)=>{return pe.ts-he.ts}),ce=ue.splice(0,ue.length-this.config.behaviour.maxChatEntriesToStore);de=[...de,...ce]}for(const le of de)yield this.deleteConversationMessageById(le._id,!0);if(this.logger.shouldLog(B.LoggerTypes.CleanUp)){const le=new Date().getTime(),_e=le-se;this.logger.log(B.LoggerTypes.CleanUp,` Purged ${de.length} messages in ${_e}ms.`)}})}_executePurge(se){return I(this,void 0,void 0,function*(){this._conversationsBeingPurged.push(se.id);const ie=yield this.comms.findChatEntriesToPurge(se);this.logger.debug(B.LoggerTypes.Other,`Purging ${ie.length} messages(s) from conversation ${se.id}`);for(const de of ie)yield this.deleteConversationMessageById(de._id,!0);this._conversationsBeingPurged=this._conversationsBeingPurged.filter((de)=>de!==se.id),this.emit(K.ChatEvents.ConversationPurged,new K.ConversationEventArgs(se))})}purgeConversation(se){return I(this,void 0,void 0,function*(){return se?this.config.behaviour.maxChatEntriesToStore?this._currentConversation&&se.id===this._currentConversation.id||this._pendingConversationAlerts.find((ie)=>ie.id===se.id)?void 0:new Promise((ie)=>I(this,void 0,void 0,function*(){this._isFetchingChatEntries||this.isProcessing()?this.on(K.ChatEvents.MessageProcessorQueueEmpty,()=>I(this,void 0,void 0,function*(){yield this._executePurge(se),ie()}),!0):(yield this._executePurge(se),ie())})):void 0:void 0})}isConversationBeingPurged(se){return this._conversationsBeingPurged.includes(se)}getConfiguredConversations(){return this.config.conversationTypes?this.config.conversationTypes.sort((se,ie)=>se.sortOrder>ie.sortOrder?1:se.sortOrder<ie.sortOrder?-1:se.name>ie.name?1:se.name<ie.name?-1:0):[]}doesDirectConversationExistInConfiguration(){return this.config.conversationTypes.find((se)=>!se.behaviour.namedSettings)}_sendIqCommand(se,ie){return I(this,void 0,void 0,function*(){return this.sendIq(this.config.xmpp.iq.host,'set',se,ie)})}_getChatEntriesFromMessageStore(se){return I(this,void 0,void 0,function*(){const ie=yield this.comms.getChatHistory(se.roomJid),de=yield Promise.all(ie.map((le)=>I(this,void 0,void 0,function*(){return yield Z.convertToChatEntry(le,this)})));return de.filter((le)=>null!==le)})}_getChatEntriesFromMam(se,ie=null,de=null){return I(this,void 0,void 0,function*(){const le=this.getConnectionStatus();if(le!==H.ConnectionStatus.Connected)throw new N.NotConnectedError(le);try{let _e=se.hideBefore||se.lastHideBefore||null;return _e&&_e++,yield this.comms.fetchConversationMessages(se,ie,de,_e)}catch(_e){const ue=this.translateI18nItem(X.CommonMetadata.getI18nItem(X.CommonI18nKeys.FETCH_ERROR));return this.error(ue,_e),[]}})}static getUniqueTranslationKeys(se=!1,...ie){return[...R.BaseLayer.getUniqueTranslationKeys(se,...ie),...$.getChatI18nKeys(se,...ie)].filter((de,le,_e)=>{return _e.indexOf(de)===le}).sort()}setStatusBarColor(se){const ie=window;ie.cti&&ie.StatusBar&&ie.StatusBar.backgroundColorByHexString(se)}}E.ChatLayer=oe,window.CtChatLayer=oe},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Z,ee,te,ne){var ae=arguments.length,oe=3>ae?ee:null===ne?ne=Object.getOwnPropertyDescriptor(ee,te):ne,se;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)oe=Reflect.decorate(Z,ee,te,ne);else for(var ie=Z.length-1;0<=ie;ie--)(se=Z[ie])&&(oe=(3>ae?se(oe):3<ae?se(ee,te,oe):se(ee,te))||oe);return 3<ae&&oe&&Object.defineProperty(ee,te,oe),oe},R=this&&this.__awaiter||function(Z,ee,te,ne){return new(te||(te=Promise))(function(ae,oe){function se(le){try{de(ne.next(le))}catch(_e){oe(_e)}}function ie(le){try{de(ne['throw'](le))}catch(_e){oe(_e)}}function de(le){le.done?ae(le.value):new te(function(_e){_e(le.value)}).then(se,ie)}de((ne=ne.apply(Z,ee||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(1),B=A(12),z=A(3),W=A(19),G=A(2),J=A(15),K=A(33),$=A(8);var X;(function(Z){Z[Z.NO_USERS='There are no users for this role.']='NO_USERS',Z[Z.USERS='Users']='USERS'})(X||(X={}));let Q=class extends B.CTCLComponent{constructor(){super(...arguments),this._chatGroup=null,this._animationDuration=500,this._goChatFunction=null,this.TILE_HEIGHT=70}initialize(){return R(this,void 0,void 0,function*(){this._virtualList=new K.VirtualList(this,[],{itemHeight:this.TILE_HEIGHT,itemKeyGetter:(ee)=>ee.jid}),this._virtualList.setItems([])})}setupListeners(){this.setupConnectionStatusListener()}generateComponentMarkup(){return window.__CTRender('div',{class:'contact-info'},this._renderHeader(),window.__CTRender('div',{class:'user-list-items'},this._renderUsers()))}_renderHeader(){return window.__CTRender(W.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'left-action'},window.__CTRender(G.CTIcon,{class:'action',width:'20',height:'20',icon:H.Icons.COMMON.ChevronLeft,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},`${this._chatGroup?this._chatGroup.name:''} ${this.translateI18nItem(X.USERS)}`),window.__CTRender('div',{slot:'sub-heading'}))}_renderUsers(){const ee=this.usersToDisplay.length;return 0===ee?window.__CTRender('div',{class:'no-users'},this.translateI18nItem(X.NO_USERS)):this._virtualList.render(this._renderItem.bind(this),'users','users-content')}_renderItem(ee,te){const ae=$.buildStyles({paddingRight:'36px'});return window.__CTRender('div',Object.assign({class:['user'].join(' ')},te),window.__CTRender(G.CTUserTile,{user:ee,nameFormat:this.nameFormat,height:`${this.TILE_HEIGHT}px`,detailStyle:ae}))}_back(){this.dismiss()}show(ee,te=!0){return R(this,void 0,void 0,function*(){this._chatGroup=ee,this.usersToDisplay=this._chatGroup.users,this._virtualList.setItems(this.usersToDisplay),this.animate=te,this.showing=!0,this.layer.setBackHandler(()=>{this._back()}),yield z.sleep(te?this._animationDuration:0)})}dismiss(ee=!0){return R(this,void 0,void 0,function*(){this.animate=ee,this.showing=!1,this.layer.popBackHandler(),yield z.sleep(ee?this._animationDuration:0),this._chatGroup=null,this.usersToDisplay=[],this._virtualList.setItems([])})}};I([N.prop({type:Object,attribute:!1,default:z.NameFormat.PREFIX_FIRST_LAST})],Q.prototype,'nameFormat',void 0),I([N.prop({type:Boolean,attribute:!0,default:!0})],Q.prototype,'animate',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],Q.prototype,'showing',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],Q.prototype,'usersToDisplay',void 0),Q=I([J.component({tag:'ct-cl-role-users-modal',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex-direction:column;position:fixed;top:0;left:0;height:100%;width:100%;background:#ffffff;font-size:1em;transform:translateY(100%);will-change:transform;z-index:99997}:host .contact-info{flex:1 1 auto;display:flex;flex-direction:column;height:100%;background-color:var(--list-bg);color:var(--default-font-color)}:host .contact-info .header .action{cursor:pointer}:host .contact-info .user-list-items{position:relative;display:flex;flex-direction:column;flex:1 1 auto;height:100%;overflow:hidden}:host .contact-info .user-list-items .users-loading-bg{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;background:var(--list-bg, #f2f2f2);z-index:-1}:host .contact-info .user-list-items .users{flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch}:host .contact-info .user-list-items .users .user{position:relative}:host .contact-info .user-list-items .users .user .selection{position:absolute;top:0;right:0;height:100%;display:flex;justify-content:center;align-items:center;padding:0 20px;cursor:pointer}:host .contact-info .user-list-items .users .user .selection .checkbox{display:flex;justify-content:center;align-items:center;width:16px;height:16px;color:var(--subtle-font-color, #828688);border:2px solid var(--subtle-font-color, #828688)}:host .contact-info .user-list-items .users .user.selected .selection .checkbox{border:0}:host .contact-info .user-list-items .users .user.selection-disabled .selection{opacity:0;cursor:not-allowed}:host .contact-info .user-list-items .users .user.clickable{cursor:pointer}:host([animate]){transition:transform var(--animation-normal, .5s) ease-out}:host([showing]){transform:translateY(0)}
    `],i18nKeys:X})],Q),E.CTCLRoleUsersModal=Q},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(15),B=A(12),z=A(1),W=A(3),G=A(19),J=A(2),K=A(50);var $;(function(Q){Q[Q.RESPONSES='Responses']='RESPONSES'})($||($={}));let X=class extends B.CTCLComponent{constructor(){super(...arguments),this._animationDuration=500}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}show(Z,ee=!0){return R(this,void 0,void 0,function*(){this.conversation=Z,this.animate=ee,this.showing=!0,this.layer.setBackHandler(()=>{this._back()}),yield W.sleep(ee?this._animationDuration:0)})}dismiss(Z=!0){return R(this,void 0,void 0,function*(){this.animate=Z,this.showing=!1,this.layer.popBackHandler(),yield W.sleep(Z?this._animationDuration:0),this.conversation=null})}_back(){this.dismiss()}generateComponentMarkup(){return window.__CTRender('div',{class:'container'},this._renderHeader(),window.__CTRender('div',{class:'user-responses'},this.conversation&&window.__CTRender(K.CTCLResponseView,{conversation:this.conversation})))}_renderHeader(){return window.__CTRender(G.CTCLHeader,{class:'header'},window.__CTRender('div',{slot:'left-action'},window.__CTRender(J.CTIcon,{class:'action',width:'20',height:'20',icon:z.Icons.COMMON.ChevronLeft,onClick:this._back.bind(this)})),window.__CTRender('div',{slot:'heading'},`${this.translateI18nItem($.RESPONSES)}`),window.__CTRender('div',{slot:'sub-heading'}))}};I([N.prop({type:Object,attribute:!1,default:null})],X.prototype,'conversation',void 0),I([N.prop({type:Boolean,attribute:!0,default:!0})],X.prototype,'animate',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],X.prototype,'showing',void 0),X=I([H.component({tag:'ctcl-responses-modal',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex-direction:column;position:fixed;top:0;left:0;height:100%;width:100%;background:#ffffff;font-size:1em;transform:translateY(100%);will-change:transform;z-index:99997}:host .container{flex:1 1 auto;display:flex;flex-direction:column;height:100%;background-color:var(--list-bg);color:var(--default-font-color)}:host .container .header .action{cursor:pointer}:host .container .user-responses{position:relative;display:flex;flex-direction:column;flex:1 1 auto;height:100%;overflow:hidden}:host([animate]){transition:transform var(--animation-normal, .5s) ease-out}:host([showing]){transform:translateY(0)}
    `]})],X),E.CTCLResponsesModal=X},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E['default']=function(){function R(ae){return btoa(unescape(encodeURIComponent(ae)))}function H(){(function(ae){function oe(Fe){return parseInt(Fe)===Fe}function se(Fe){if(!oe(Fe.length))return!1;for(var Ue=0;Ue<Fe.length;Ue++)if(!oe(Fe[Ue])||0>Fe[Ue]||255<Fe[Ue])return!1;return!0}function ie(Fe,Ue){if(Fe.buffer&&ArrayBuffer.isView(Fe)&&'Uint8Array'===Fe.name)return Ue&&(Fe.slice?Fe=Fe.slice():Fe=Array.prototype.slice.call(Fe)),Fe;if(Array.isArray(Fe)){if(!se(Fe))throw new Error('Array contains invalid value: '+Fe);return new Uint8Array(Fe)}if(oe(Fe.length)&&se(Fe))return new Uint8Array(Fe);throw new Error('unsupported array-like object')}function de(Fe){return new Uint8Array(Fe)}function le(Fe,Ue,Be,qe,ze){(null!=qe||null!=ze)&&(Fe.slice?Fe=Fe.slice(qe,ze):Fe=Array.prototype.slice.call(Fe,qe,ze)),Ue.set(Fe,Be)}function _e(Fe){for(var Ue=[],Be=0;Be<Fe.length;Be+=4)Ue.push(Fe[Be]<<24|Fe[Be+1]<<16|Fe[Be+2]<<8|Fe[Be+3]);return Ue}var pe=function(){return{toBytes:function(Be){var qe=[],ze=0;for(Be=encodeURI(Be);ze<Be.length;){var We=Be.charCodeAt(ze++);37===We?(qe.push(parseInt(Be.substr(ze,2),16)),ze+=2):qe.push(We)}return ie(qe)},fromBytes:function(Be){for(var qe=[],ze=0,We;ze<Be.length;)We=Be[ze],128>We?(qe.push(String.fromCharCode(We)),ze++):191<We&&224>We?(qe.push(String.fromCharCode((31&We)<<6|63&Be[ze+1])),ze+=2):(qe.push(String.fromCharCode((15&We)<<12|(63&Be[ze+1])<<6|63&Be[ze+2])),ze+=3);return qe.join('')}}}(),he=function(){var Be='0123456789abcdef';return{toBytes:function(qe){for(var ze=[],We=0;We<qe.length;We+=2)ze.push(parseInt(qe.substr(We,2),16));return ze},fromBytes:function(qe){for(var ze=[],We=0,Ve;We<qe.length;We++)Ve=qe[We],ze.push(Be[(240&Ve)>>4]+Be[15&Ve]);return ze.join('')}}}(),ge={16:10,24:12,32:14},fe=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],ye=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Te=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Ce=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Me=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],ve=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Le=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Ee=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Se=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],be=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239000,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],De=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998000,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Ae=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Ie=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Re=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239000,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],we=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998000,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],ke=function(Fe){if(!(this instanceof ke))throw Error('AES must be instanitated with `new`');Object.defineProperty(this,'key',{value:ie(Fe,!0)}),this._prepare()};ke.prototype._prepare=function(){var Fe=ge[this.key.length];if(null==Fe)throw new Error('invalid key size (must be 16, 24 or 32 bytes)');this._Ke=[],this._Kd=[];for(var Ue=0;Ue<=Fe;Ue++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var Be=4*(Fe+1),qe=this.key.length/4,ze=_e(this.key),Ue=0,We;Ue<qe;Ue++)We=Ue>>2,this._Ke[We][Ue%4]=ze[Ue],this._Kd[Fe-We][Ue%4]=ze[Ue];for(var Ve=0,Ge=qe,Je;Ge<Be;){if(Je=ze[qe-1],ze[0]^=ye[255&Je>>16]<<24^ye[255&Je>>8]<<16^ye[255&Je]<<8^ye[255&Je>>24]^fe[Ve]<<24,Ve+=1,8!=qe)for(var Ue=1;Ue<qe;Ue++)ze[Ue]^=ze[Ue-1];else{for(var Ue=1;Ue<qe/2;Ue++)ze[Ue]^=ze[Ue-1];Je=ze[qe/2-1],ze[qe/2]^=ye[255&Je]^ye[255&Je>>8]<<8^ye[255&Je>>16]<<16^ye[255&Je>>24]<<24;for(var Ue=qe/2+1;Ue<qe;Ue++)ze[Ue]^=ze[Ue-1]}for(var Ue=0,Ke,$e;Ue<qe&&Ge<Be;)Ke=Ge>>2,$e=Ge%4,this._Ke[Ke][$e]=ze[Ue],this._Kd[Fe-Ke][$e]=ze[Ue++],Ge++}for(var Ke=1;Ke<Fe;Ke++)for(var $e=0;4>$e;$e++)Je=this._Kd[Ke][$e],this._Kd[Ke][$e]=Ae[255&Je>>24]^Ie[255&Je>>16]^Re[255&Je>>8]^we[255&Je]},ke.prototype.encrypt=function(Fe){if(16!=Fe.length)throw new Error('invalid plaintext size (must be 16 bytes)');for(var Ue=this._Ke.length-1,Be=[0,0,0,0],qe=_e(Fe),ze=0;4>ze;ze++)qe[ze]^=this._Ke[0][ze];for(var We=1;We<Ue;We++){for(var ze=0;4>ze;ze++)Be[ze]=Ce[255&qe[ze]>>24]^Me[255&qe[(ze+1)%4]>>16]^ve[255&qe[(ze+2)%4]>>8]^Le[255&qe[(ze+3)%4]]^this._Ke[We][ze];qe=Be.slice()}for(var Ve=de(16),ze=0,Ge;4>ze;ze++)Ge=this._Ke[Ue][ze],Ve[4*ze]=255&(ye[255&qe[ze]>>24]^Ge>>24),Ve[4*ze+1]=255&(ye[255&qe[(ze+1)%4]>>16]^Ge>>16),Ve[4*ze+2]=255&(ye[255&qe[(ze+2)%4]>>8]^Ge>>8),Ve[4*ze+3]=255&(ye[255&qe[(ze+3)%4]]^Ge);return Ve},ke.prototype.decrypt=function(Fe){if(16!=Fe.length)throw new Error('invalid ciphertext size (must be 16 bytes)');for(var Ue=this._Kd.length-1,Be=[0,0,0,0],qe=_e(Fe),ze=0;4>ze;ze++)qe[ze]^=this._Kd[0][ze];for(var We=1;We<Ue;We++){for(var ze=0;4>ze;ze++)Be[ze]=Ee[255&qe[ze]>>24]^Se[255&qe[(ze+3)%4]>>16]^be[255&qe[(ze+2)%4]>>8]^De[255&qe[(ze+1)%4]]^this._Kd[We][ze];qe=Be.slice()}for(var Ve=de(16),ze=0,Ge;4>ze;ze++)Ge=this._Kd[Ue][ze],Ve[4*ze]=255&(Te[255&qe[ze]>>24]^Ge>>24),Ve[4*ze+1]=255&(Te[255&qe[(ze+3)%4]>>16]^Ge>>16),Ve[4*ze+2]=255&(Te[255&qe[(ze+2)%4]>>8]^Ge>>8),Ve[4*ze+3]=255&(Te[255&qe[(ze+1)%4]]^Ge);return Ve};var Ye=function(Fe){if(!(this instanceof Ye))throw Error('AES must be instanitated with `new`');this.description='Electronic Code Block',this.name='ecb',this._aes=new ke(Fe)};Ye.prototype.encrypt=function(Fe){if(Fe=ie(Fe),0!=Fe.length%16)throw new Error('invalid plaintext size (must be multiple of 16 bytes)');for(var Ue=de(Fe.length),Be=de(16),qe=0;qe<Fe.length;qe+=16)le(Fe,Be,0,qe,qe+16),Be=this._aes.encrypt(Be),le(Be,Ue,qe);return Ue},Ye.prototype.decrypt=function(Fe){if(Fe=ie(Fe),0!=Fe.length%16)throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');for(var Ue=de(Fe.length),Be=de(16),qe=0;qe<Fe.length;qe+=16)le(Fe,Be,0,qe,qe+16),Be=this._aes.decrypt(Be),le(Be,Ue,qe);return Ue};var Oe=function(Fe,Ue){if(!(this instanceof Oe))throw Error('AES must be instanitated with `new`');if(this.description='Cipher Block Chaining',this.name='cbc',!Ue)Ue=de(16);else if(16!=Ue.length)throw new Error('invalid initialation vector size (must be 16 bytes)');this._lastCipherblock=ie(Ue,!0),this._aes=new ke(Fe)};Oe.prototype.encrypt=function(Fe){if(Fe=ie(Fe),0!=Fe.length%16)throw new Error('invalid plaintext size (must be multiple of 16 bytes)');for(var Ue=de(Fe.length),Be=de(16),qe=0;qe<Fe.length;qe+=16){le(Fe,Be,0,qe,qe+16);for(var ze=0;16>ze;ze++)Be[ze]^=this._lastCipherblock[ze];this._lastCipherblock=this._aes.encrypt(Be),le(this._lastCipherblock,Ue,qe)}return Ue},Oe.prototype.decrypt=function(Fe){if(Fe=ie(Fe),0!=Fe.length%16)throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');for(var Ue=de(Fe.length),Be=de(16),qe=0;qe<Fe.length;qe+=16){le(Fe,Be,0,qe,qe+16),Be=this._aes.decrypt(Be);for(var ze=0;16>ze;ze++)Ue[qe+ze]=Be[ze]^this._lastCipherblock[ze];le(Fe,this._lastCipherblock,0,qe,qe+16)}return Ue};var Ne=function(Fe,Ue,Be){if(!(this instanceof Ne))throw Error('AES must be instanitated with `new`');if(this.description='Cipher Feedback',this.name='cfb',!Ue)Ue=de(16);else if(16!=Ue.length)throw new Error('invalid initialation vector size (must be 16 size)');Be||(Be=1),this.segmentSize=Be,this._shiftRegister=ie(Ue,!0),this._aes=new ke(Fe)};Ne.prototype.encrypt=function(Fe){if(0!=Fe.length%this.segmentSize)throw new Error('invalid plaintext size (must be segmentSize bytes)');for(var Ue=ie(Fe,!0),qe=0,Be;qe<Ue.length;qe+=this.segmentSize){Be=this._aes.encrypt(this._shiftRegister);for(var ze=0;ze<this.segmentSize;ze++)Ue[qe+ze]^=Be[ze];le(this._shiftRegister,this._shiftRegister,0,this.segmentSize),le(Ue,this._shiftRegister,16-this.segmentSize,qe,qe+this.segmentSize)}return Ue},Ne.prototype.decrypt=function(Fe){if(0!=Fe.length%this.segmentSize)throw new Error('invalid ciphertext size (must be segmentSize bytes)');for(var Ue=ie(Fe,!0),qe=0,Be;qe<Ue.length;qe+=this.segmentSize){Be=this._aes.encrypt(this._shiftRegister);for(var ze=0;ze<this.segmentSize;ze++)Ue[qe+ze]^=Be[ze];le(this._shiftRegister,this._shiftRegister,0,this.segmentSize),le(Fe,this._shiftRegister,16-this.segmentSize,qe,qe+this.segmentSize)}return Ue};var Pe=function(Fe,Ue){if(!(this instanceof Pe))throw Error('AES must be instanitated with `new`');if(this.description='Output Feedback',this.name='ofb',!Ue)Ue=de(16);else if(16!=Ue.length)throw new Error('invalid initialation vector size (must be 16 bytes)');this._lastPrecipher=ie(Ue,!0),this._lastPrecipherIndex=16,this._aes=new ke(Fe)};Pe.prototype.encrypt=function(Fe){for(var Ue=ie(Fe,!0),Be=0;Be<Ue.length;Be++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),Ue[Be]^=this._lastPrecipher[this._lastPrecipherIndex++];return Ue},Pe.prototype.decrypt=Pe.prototype.encrypt;var xe=function(Fe){if(!(this instanceof xe))throw Error('Counter must be instanitated with `new`');0===Fe||Fe||(Fe=1),'number'==typeof Fe?(this._counter=de(16),this.setValue(Fe)):this.setBytes(Fe)};xe.prototype.setValue=function(Fe){if('number'!=typeof Fe||parseInt(Fe)!=Fe)throw new Error('invalid counter value (must be an integer)');if(Fe>Number.MAX_SAFE_INTEGER)throw new Error('integer value out of safe range');for(var Ue=15;0<=Ue;--Ue)this._counter[Ue]=Fe%256,Fe=parseInt(Fe/256)},xe.prototype.setBytes=function(Fe){if(Fe=ie(Fe,!0),16!=Fe.length)throw new Error('invalid counter bytes size (must be 16 bytes)');this._counter=Fe},xe.prototype.increment=function(){for(var Fe=15;0<=Fe;Fe--)if(255===this._counter[Fe])this._counter[Fe]=0;else{this._counter[Fe]++;break}};var He=function(Fe,Ue){if(!(this instanceof He))throw Error('AES must be instanitated with `new`');this.description='Counter',this.name='ctr',Ue instanceof xe||(Ue=new xe(Ue)),this._counter=Ue,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ke(Fe)};He.prototype.encrypt=function(Fe){for(var Ue=ie(Fe,!0),Be=0;Be<Ue.length;Be++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),Ue[Be]^=this._remainingCounter[this._remainingCounterIndex++];return Ue},He.prototype.decrypt=He.prototype.encrypt;var je={AES:ke,Counter:xe,ModeOfOperation:{ecb:Ye,cbc:Oe,cfb:Ne,ofb:Pe,ctr:He},utils:{hex:he,utf8:pe},padding:{pkcs7:{pad:function(Fe){Fe=ie(Fe,!0);var Ue=16-Fe.length%16,Be=de(Fe.length+Ue);le(Fe,Be);for(var qe=Fe.length;qe<Be.length;qe++)Be[qe]=Ue;return Be},strip:function(Fe){if(Fe=ie(Fe,!0),16>Fe.length)throw new Error('PKCS#7 invalid length');var Ue=Fe[Fe.length-1];if(16<Ue)throw new Error('PKCS#7 padding byte out of range');for(var Be=Fe.length-Ue,qe=0;qe<Ue;qe++)if(Fe[Be+qe]!==Ue)throw new Error('PKCS#7 invalid padding byte');var ze=de(Be);return le(Fe,ze,0,0,Be),ze}}},_arrayTest:{coerceArray:ie,createArray:de,copyArray:le}};'undefined'!=typeof exports||('function'==typeof define&&A(207)?define(je):(ae.aesjs&&(je._aesjs=ae.aesjs),ae.aesjs=je))})(this)}let z=!1,W=null,G='lunr_index',J='idxBlock',K='docBlock';const $=function(){function ae(se){if(null===se||'object'!=typeof se)return se;var ie=se.constructor();for(var de in se)se.hasOwnProperty(de)&&(ie[de]=se[de]);return ie}var oe=function(se){var ie=new oe.Index;return ie.pipeline.add(oe.trimmer,oe.stopWordFilter,oe.stemmer),se&&se.call(ie,ie),ie};return oe.version='0.9.5',lunr=oe,oe.utils={},oe.utils.warn=function(se){return function(ie){se.console&&console.warn&&console.warn(ie)}}(this),oe.utils.toString=function(se){return void 0===se||null===se?'':se.toString()},oe.EventEmitter=function(){this.events={}},oe.EventEmitter.prototype.addListener=function(){var se=Array.prototype.slice.call(arguments),ie=se.pop();if('function'!=typeof ie)throw new TypeError('last argument must be a function');se.forEach(function(le){this.hasHandler(le)||(this.events[le]=[]),this.events[le].push(ie)},this)},oe.EventEmitter.prototype.removeListener=function(se,ie){if(this.hasHandler(se)){var de=this.events[se].indexOf(ie);-1===de||(this.events[se].splice(de,1),0==this.events[se].length&&delete this.events[se])}},oe.EventEmitter.prototype.emit=function(se){if(this.hasHandler(se)){var ie=Array.prototype.slice.call(arguments,1);this.events[se].forEach(function(de){de.apply(void 0,ie)},this)}},oe.EventEmitter.prototype.hasHandler=function(se){return se in this.events},oe.tokenizer=function(se){if(!arguments.length||null===se||void 0===se)return[];if(Array.isArray(se)){var ie=se.filter(function(le){return null===le||void 0===le?!1:!0});ie=ie.map(function(le){return oe.utils.toString(le).toLowerCase()});var de=[];return ie.forEach(function(le){var _e=le.split(oe.tokenizer.seperator);de=de.concat(_e)},this),de}return se.toString().trim().toLowerCase().split(oe.tokenizer.seperator)},oe.tokenizer.defaultSeperator=/[\s\-]+/,oe.tokenizer.seperator=oe.tokenizer.defaultSeperator,oe.tokenizer.setSeperator=function(se){null!==se&&void 0!==se&&'object'==typeof se&&(oe.tokenizer.seperator=se)},oe.tokenizer.resetSeperator=function(){oe.tokenizer.seperator=oe.tokenizer.defaultSeperator},oe.tokenizer.getSeperator=function(){return oe.tokenizer.seperator},oe.Pipeline=function(){this._queue=[]},oe.Pipeline.registeredFunctions={},oe.Pipeline.registerFunction=function(se,ie){ie in oe.Pipeline.registeredFunctions&&oe.utils.warn('Overwriting existing registered function: '+ie),se.label=ie,oe.Pipeline.registeredFunctions[ie]=se},oe.Pipeline.getRegisteredFunction=function(se){return!0==se in oe.Pipeline.registeredFunctions?oe.Pipeline.registeredFunctions[se]:null},oe.Pipeline.warnIfFunctionNotRegistered=function(se){var ie=se.label&&se.label in this.registeredFunctions;ie||oe.utils.warn('Function is not registered with pipeline. This may cause problems when serialising the index.\n',se)},oe.Pipeline.load=function(se){var ie=new oe.Pipeline;return se.forEach(function(de){var le=oe.Pipeline.getRegisteredFunction(de);if(le)ie.add(le);else throw new Error('Cannot load un-registered function: '+de)}),ie},oe.Pipeline.prototype.add=function(){var se=Array.prototype.slice.call(arguments);se.forEach(function(ie){oe.Pipeline.warnIfFunctionNotRegistered(ie),this._queue.push(ie)},this)},oe.Pipeline.prototype.after=function(se,ie){oe.Pipeline.warnIfFunctionNotRegistered(ie);var de=this._queue.indexOf(se);if(-1===de)throw new Error('Cannot find existingFn');this._queue.splice(de+1,0,ie)},oe.Pipeline.prototype.before=function(se,ie){oe.Pipeline.warnIfFunctionNotRegistered(ie);var de=this._queue.indexOf(se);if(-1===de)throw new Error('Cannot find existingFn');this._queue.splice(de,0,ie)},oe.Pipeline.prototype.remove=function(se){var ie=this._queue.indexOf(se);-1===ie||this._queue.splice(ie,1)},oe.Pipeline.prototype.run=function(se){for(var ie=[],de=se.length,le=this._queue.length,_e=0,ue;_e<de;_e++){ue=se[_e];for(var ce=0;ce<le&&(ue=this._queue[ce](ue,_e,se),void 0!==ue&&null!==ue);ce++);void 0!==ue&&null!==ue&&ie.push(ue)}return ie},oe.Pipeline.prototype.reset=function(){this._queue=[]},oe.Pipeline.prototype.get=function(){return this._queue},oe.Pipeline.prototype.toJSON=function(){return this._queue.map(function(se){return oe.Pipeline.warnIfFunctionNotRegistered(se),se.label})},oe.Index=function(){this._fields=[],this._ref='id',this.pipeline=new oe.Pipeline,this.documentStore=new oe.DocumentStore,this.index={},this.eventEmitter=new oe.EventEmitter,this._idfCache={},this.on('add','remove','update',function(){this._idfCache={}}.bind(this))},oe.Index.prototype.on=function(){var se=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,se)},oe.Index.prototype.off=function(se,ie){return this.eventEmitter.removeListener(se,ie)},oe.Index.load=function(se){se.version!==oe.version&&oe.utils.warn('version mismatch: current '+oe.version+' importing '+se.version);var ie=new this;for(var de in ie._fields=se.fields,ie._ref=se.ref,ie.documentStore=oe.DocumentStore.load(se.documentStore),ie.pipeline=oe.Pipeline.load(se.pipeline),ie.index={},se.index)ie.index[de]=oe.InvertedIndex.load(se.index[de]);return ie},oe.Index.prototype.addField=function(se){return this._fields.push(se),this.index[se]=new oe.InvertedIndex,this},oe.Index.prototype.setRef=function(se){return this._ref=se,this},oe.Index.prototype.saveDocument=function(se){return this.documentStore=new oe.DocumentStore(se),this},oe.Index.prototype.addDoc=function(se,ie){if(se){var ie=void 0===ie||ie,de=se[this._ref];this.documentStore.addDoc(de,se),this._fields.forEach(function(le){var _e=this.pipeline.run(oe.tokenizer(se[le]));this.documentStore.addFieldLength(de,le,_e.length);var ue={};for(var ce in _e.forEach(function(he){he in ue?ue[he]+=1:ue[he]=1},this),ue){var pe=ue[ce];pe=Math.sqrt(pe),this.index[le].addToken(ce,{ref:de,tf:pe})}},this),ie&&this.eventEmitter.emit('add',se,this)}},oe.Index.prototype.removeDocByRef=function(se){if(se&&!1!==this.documentStore.isDocStored()&&this.documentStore.hasDoc(se)){var de=this.documentStore.getDoc(se);this.removeDoc(de,!1)}},oe.Index.prototype.removeDoc=function(se,ie){if(se){var ie=void 0===ie||ie,de=se[this._ref];this.documentStore.hasDoc(de)&&(this.documentStore.removeDoc(de),this._fields.forEach(function(le){var _e=this.pipeline.run(oe.tokenizer(se[le]));_e.forEach(function(ue){this.index[le].removeToken(ue,de)},this)},this),ie&&this.eventEmitter.emit('remove',se,this))}},oe.Index.prototype.updateDoc=function(se,ie){var ie=void 0===ie||ie;this.removeDocByRef(se[this._ref],!1),this.addDoc(se,!1),ie&&this.eventEmitter.emit('update',se,this)},oe.Index.prototype.idf=function(se,ie){var de='@'+ie+'/'+se;if(Object.prototype.hasOwnProperty.call(this._idfCache,de))return this._idfCache[de];var le=this.index[ie].getDocFreq(se),_e=1+Math.log(this.documentStore.length/(le+1));return this._idfCache[de]=_e,_e},oe.Index.prototype.getFields=function(){return this._fields.slice()},oe.Index.prototype.search=function(se,ie){if(!se)return[];se='string'==typeof se?{any:se}:JSON.parse(JSON.stringify(se));var de=null;null!=ie&&(de=JSON.stringify(ie));for(var le=new oe.Configuration(de,this.getFields()).get(),_e={},ue=Object.keys(se),ce=0,pe;ce<ue.length;ce++)pe=ue[ce],_e[pe]=this.pipeline.run(oe.tokenizer(se[pe]));var he={};for(var ge in le){var fe=_e[ge]||_e.any;if(fe){var ye=this.fieldSearch(fe,ge,le),Te=le[ge].boost;for(var Ce in ye)ye[Ce]*=Te;for(var Ce in ye)Ce in he?he[Ce]+=ye[Ce]:he[Ce]=ye[Ce]}}var Me=[],ve;for(var Ce in he)ve={ref:Ce,score:he[Ce]},this.documentStore.hasDoc(Ce)&&(ve.doc=this.documentStore.getDoc(Ce)),Me.push(ve);return Me.sort(function(Le,Ee){return Ee.score-Le.score}),Me},oe.Index.prototype.fieldSearch=function(se,ie,de){var le=de[ie].bool,_e=de[ie].expand,ue=de[ie].boost,ce=null,pe={};if(0!==ue)return se.forEach(function(he){var ge=[he];!0==_e&&(ge=this.index[ie].expandToken(he));var fe={};ge.forEach(function(ye){var Te=this.index[ie].getDocs(ye),Ce=this.idf(ye,ie);if(ce&&'AND'==le){var Me={};for(var ve in ce)ve in Te&&(Me[ve]=Te[ve]);Te=Me}for(var ve in ye==he&&this.fieldSearchStats(pe,ye,Te),Te){var Le=this.index[ie].getTermFrequency(ye,ve),Ee=this.documentStore.getFieldLength(ve,ie),Se=1;0!=Ee&&(Se=1/Math.sqrt(Ee));var be=1;ye!=he&&(be=0.15*(1-(ye.length-he.length)/ye.length));var De=Le*Ce*Se*be;ve in fe?fe[ve]+=De:fe[ve]=De}},this),ce=this.mergeScores(ce,fe,le)},this),ce=this.coordNorm(ce,pe,se.length),ce},oe.Index.prototype.mergeScores=function(se,ie,de){if(!se)return ie;if('AND'==de){var le={};for(var _e in ie)_e in se&&(le[_e]=se[_e]+ie[_e]);return le}for(var _e in ie)_e in se?se[_e]+=ie[_e]:se[_e]=ie[_e];return se},oe.Index.prototype.fieldSearchStats=function(se,ie,de){for(var le in de)le in se?se[le].push(ie):se[le]=[ie]},oe.Index.prototype.coordNorm=function(se,ie,de){for(var le in se)if(le in ie){var _e=ie[le].length;se[le]=se[le]*_e/de}return se},oe.Index.prototype.toJSON=function(){var se={};return this._fields.forEach(function(ie){se[ie]=this.index[ie].toJSON()},this),{version:oe.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:se,pipeline:this.pipeline.toJSON()}},oe.Index.prototype.use=function(se){var ie=Array.prototype.slice.call(arguments,1);ie.unshift(this),se.apply(this,ie)},oe.DocumentStore=function(se){this._save=null===se||void 0===se||se,this.docs={},this.docInfo={},this.length=0},oe.DocumentStore.load=function(se){var ie=new this;return ie.length=se.length,ie.docs=se.docs,ie.docInfo=se.docInfo,ie._save=se.save,ie},oe.DocumentStore.prototype.isDocStored=function(){return this._save},oe.DocumentStore.prototype.addDoc=function(se,ie){this.hasDoc(se)||this.length++,this.docs[se]=!0===this._save?ae(ie):null},oe.DocumentStore.prototype.getDoc=function(se){return!1===this.hasDoc(se)?null:this.docs[se]},oe.DocumentStore.prototype.hasDoc=function(se){return se in this.docs},oe.DocumentStore.prototype.removeDoc=function(se){this.hasDoc(se)&&(delete this.docs[se],delete this.docInfo[se],this.length--)},oe.DocumentStore.prototype.addFieldLength=function(se,ie,de){null===se||void 0===se||!1==this.hasDoc(se)||(!this.docInfo[se]&&(this.docInfo[se]={}),this.docInfo[se][ie]=de)},oe.DocumentStore.prototype.updateFieldLength=function(se,ie,de){null===se||void 0===se||!1==this.hasDoc(se)||this.addFieldLength(se,ie,de)},oe.DocumentStore.prototype.getFieldLength=function(se,ie){return null===se||void 0===se?0:se in this.docs?ie in this.docInfo[se]?this.docInfo[se][ie]:0:0},oe.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},oe.stemmer=function(){var se={ational:'ate',tional:'tion',enci:'ence',anci:'ance',izer:'ize',bli:'ble',alli:'al',entli:'ent',eli:'e',ousli:'ous',ization:'ize',ation:'ate',ator:'ate',alism:'al',iveness:'ive',fulness:'ful',ousness:'ous',aliti:'al',iviti:'ive',biliti:'ble',logi:'log'},ie={icate:'ic',ative:'',alize:'al',iciti:'ic',ical:'ic',ful:'',ness:''},le='[aeiouy]',_e='[^aeiou]'+'[^aeiouy]*',ue=le+'[aeiou]*',fe=new RegExp('^('+_e+')?'+ue+_e),ye=new RegExp('^('+_e+')?'+ue+_e+ue+_e),Te=new RegExp('^('+_e+')?'+ue+_e+'('+ue+')?$'),Ce=new RegExp('^('+_e+')?'+le),Me=/^(.+?)(ss|i)es$/,ve=/^(.+?)([^s])s$/,Le=/^(.+?)eed$/,Ee=/^(.+?)(ed|ing)$/,Se=/.$/,be=/(at|bl|iz)$/,De=new RegExp('([^aeiouylsz])\\1$'),Ae=new RegExp('^'+_e+le+'[^aeiouwxy]$'),Ie=/^(.+?[^aeiou])y$/,Re=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,we=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,ke=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,Ye=/^(.+?)(s|t)(ion)$/,Oe=/^(.+?)e$/,Ne=/ll$/,Pe=new RegExp('^'+_e+le+'[^aeiouwxy]$');return function(je){var Fe,Ue,Be,qe,ze,We,Ve;if(3>je.length)return je;if(Be=je.substr(0,1),'y'==Be&&(je=Be.toUpperCase()+je.substr(1)),qe=Me,ze=ve,qe.test(je)?je=je.replace(qe,'$1$2'):ze.test(je)&&(je=je.replace(ze,'$1$2')),qe=Le,ze=Ee,qe.test(je)){var Ge=qe.exec(je);qe=fe,qe.test(Ge[1])&&(qe=Se,je=je.replace(qe,''))}else if(ze.test(je)){var Ge=ze.exec(je);Fe=Ge[1],ze=Ce,ze.test(Fe)&&(je=Fe,ze=be,We=De,Ve=Ae,ze.test(je)?je+='e':We.test(je)?(qe=Se,je=je.replace(qe,'')):Ve.test(je)&&(je+='e'))}if(qe=Ie,qe.test(je)){var Ge=qe.exec(je);Fe=Ge[1],je=Fe+'i'}if(qe=Re,qe.test(je)){var Ge=qe.exec(je);Fe=Ge[1],Ue=Ge[2],qe=fe,qe.test(Fe)&&(je=Fe+se[Ue])}if(qe=we,qe.test(je)){var Ge=qe.exec(je);Fe=Ge[1],Ue=Ge[2],qe=fe,qe.test(Fe)&&(je=Fe+ie[Ue])}if(qe=ke,ze=Ye,qe.test(je)){var Ge=qe.exec(je);Fe=Ge[1],qe=ye,qe.test(Fe)&&(je=Fe)}else if(ze.test(je)){var Ge=ze.exec(je);Fe=Ge[1]+Ge[2],ze=ye,ze.test(Fe)&&(je=Fe)}if(qe=Oe,qe.test(je)){var Ge=qe.exec(je);Fe=Ge[1],qe=ye,ze=Te,We=Pe,(qe.test(Fe)||ze.test(Fe)&&!We.test(Fe))&&(je=Fe)}return qe=Ne,ze=ye,qe.test(je)&&ze.test(je)&&(qe=Se,je=je.replace(qe,'')),'y'==Be&&(je=Be.toLowerCase()+je.substr(1)),je}}(),oe.Pipeline.registerFunction(oe.stemmer,'stemmer'),oe.stopWordFilter=function(se){if(se&&!0!==oe.stopWordFilter.stopWords[se])return se},oe.clearStopWords=function(){oe.stopWordFilter.stopWords={}},oe.addStopWords=function(se){null==se||!1===Array.isArray(se)||se.forEach(function(ie){oe.stopWordFilter.stopWords[ie]=!0},this)},oe.resetStopWords=function(){oe.stopWordFilter.stopWords=oe.defaultStopWords},oe.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0},oe.stopWordFilter.stopWords=oe.defaultStopWords,oe.Pipeline.registerFunction(oe.stopWordFilter,'stopWordFilter'),oe.trimmer=function(se){if(null===se||void 0===se)throw new Error('token should not be undefined');return se.replace(/^\W+/,'').replace(/\W+$/,'')},oe.Pipeline.registerFunction(oe.trimmer,'trimmer'),oe.InvertedIndex=function(){this.root={docs:{},df:0}},oe.InvertedIndex.load=function(se){var ie=new this;return ie.root=se.root,ie},oe.InvertedIndex.prototype.addToken=function(se,ie,de){for(var de=de||this.root,le=0,_e;le<=se.length-1;)_e=se[le],_e in de||(de[_e]={docs:{},df:0}),le+=1,de=de[_e];var ue=ie.ref;de.docs[ue]?de.docs[ue]={tf:ie.tf}:(de.docs[ue]={tf:ie.tf},de.df+=1)},oe.InvertedIndex.prototype.hasToken=function(se){if(!se)return!1;for(var ie=this.root,de=0;de<se.length;de++){if(!ie[se[de]])return!1;ie=ie[se[de]]}return!0},oe.InvertedIndex.prototype.getNode=function(se){if(!se)return null;for(var ie=this.root,de=0;de<se.length;de++){if(!ie[se[de]])return null;ie=ie[se[de]]}return ie},oe.InvertedIndex.prototype.getDocs=function(se){var ie=this.getNode(se);return null==ie?{}:ie.docs},oe.InvertedIndex.prototype.getTermFrequency=function(se,ie){var de=this.getNode(se);return null==de?0:ie in de.docs?de.docs[ie].tf:0},oe.InvertedIndex.prototype.getDocFreq=function(se){var ie=this.getNode(se);return null==ie?0:ie.df},oe.InvertedIndex.prototype.removeToken=function(se,ie){if(se){var de=this.getNode(se);null==de||ie in de.docs&&(delete de.docs[ie],de.df-=1)}},oe.InvertedIndex.prototype.expandToken=function(se,ie,de){if(null==se||''==se)return[];var ie=ie||[];if(void 0==de&&(de=this.getNode(se),null==de))return ie;for(var le in 0<de.df&&ie.push(se),de)'docs'!=le&&('df'==le||this.expandToken(se+le,ie,de[le]));return ie},oe.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},oe.Configuration=function(se,ie){var se=se||'';if(void 0==ie||null==ie)throw new Error('fields should not be null');this.config={};var de;try{de=JSON.parse(se),this.buildUserConfig(de,ie)}catch(le){oe.utils.warn('user configuration parse failed, will use default configuration'),this.buildDefaultConfig(ie)}},oe.Configuration.prototype.buildDefaultConfig=function(se){this.reset(),se.forEach(function(ie){this.config[ie]={boost:1,bool:'OR',expand:!1}},this)},oe.Configuration.prototype.buildUserConfig=function(se,ie){var de='OR',le=!1;if(this.reset(),'bool'in se&&(de=se.bool||de),'expand'in se&&(le=se.expand||le),'fields'in se){for(var _e in se.fields)if(-1<ie.indexOf(_e)){var ue=se.fields[_e],ce=le;void 0!=ue.expand&&(ce=ue.expand),this.config[_e]={boost:ue.boost||0===ue.boost?ue.boost:1,bool:ue.bool||de,expand:ce}}else oe.utils.warn('field name in user configuration not found in index instance fields');}else this.addAllFields2UserConfig(de,le,ie)},oe.Configuration.prototype.addAllFields2UserConfig=function(se,ie,de){de.forEach(function(le){this.config[le]={boost:1,bool:se,expand:ie}},this)},oe.Configuration.prototype.get=function(){return this.config},oe.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(se){var ie=new this;return ie.elements=se,ie.length=se.length,ie},lunr.SortedSet.prototype.add=function(){var se,ie;for(se=0;se<arguments.length;se++)ie=arguments[se],~this.indexOf(ie)||this.elements.splice(this.locationFor(ie),0,ie);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(se,ie){return this.elements.map(se,ie)},lunr.SortedSet.prototype.forEach=function(se,ie){return this.elements.forEach(se,ie)},lunr.SortedSet.prototype.indexOf=function(se){for(var ie=0,de=this.elements.length,le=de-ie,_e=ie+Math.floor(le/2),ue=this.elements[_e];1<le;){if(ue===se)return _e;ue<se&&(ie=_e),ue>se&&(de=_e),le=de-ie,_e=ie+Math.floor(le/2),ue=this.elements[_e]}return ue===se?_e:-1},lunr.SortedSet.prototype.locationFor=function(se){for(var ie=0,de=this.elements.length,le=de-ie,_e=ie+Math.floor(le/2),ue=this.elements[_e];1<le;)ue<se&&(ie=_e),ue>se&&(de=_e),le=de-ie,_e=ie+Math.floor(le/2),ue=this.elements[_e];return ue>se?_e:ue<se?_e+1:void 0},lunr.SortedSet.prototype.intersect=function(se){for(var ie=new lunr.SortedSet,de=0,le=0,_e=this.length,ue=se.length,ce=this.elements,pe=se.elements;!(de>_e-1||le>ue-1);){if(ce[de]===pe[le]){ie.add(ce[de]),de++,le++;continue}if(ce[de]<pe[le]){de++;continue}if(ce[de]>pe[le]){le++;continue}}return ie},lunr.SortedSet.prototype.clone=function(){var se=new lunr.SortedSet;return se.elements=this.toArray(),se.length=se.elements.length,se},lunr.SortedSet.prototype.union=function(se){var ie,de,le;this.length>=se.length?(ie=this,de=se):(ie=se,de=this),le=ie.clone();for(var _e=0,ue=de.toArray();_e<ue.length;_e++)le.add(ue[_e]);return le},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},oe}();let ee=!0;const te=new Map;let ne='pureJs';self.onmessage=function(ae){function oe(ge){return new Promise((fe,ye)=>{ce(JSON.stringify(ge)).then((Te)=>{if(this.subtle)this.subtle.encrypt({name:'AES-CBC',iv:this._iv},this._key,Te).then((Ce)=>{fe(Ce)}).catch(ye);else{const Ce=new aesjs.ModeOfOperation.ctr(this._key),Me=Ce.encrypt(Te);fe(Me)}}).catch(ye)})}function se(ge){return new Promise((fe,ye)=>{if(this.subtle)this.subtle.decrypt({name:'AES-CBC',iv:this._iv},this._key,ge).then((Te)=>{const Ce=new Uint8Array(Te);pe(Ce).then((Me)=>{fe(JSON.parse(Me))}).catch(ye)}).catch(ye);else{const Te=new aesjs.ModeOfOperation.ctr(this._key),Ce=Te.decrypt(ge);pe(Ce).then((Me)=>{fe(JSON.parse(Me))}).catch(ye)}})}function ie(ge,fe){return new Promise((ye,Te)=>{te.set(ge,{resolve:ye,reject:Te}),self.postMessage({action:'store-record',key:ge,record:fe})})}function de(ge){return new Promise((fe,ye)=>{te.set(ge,{resolve:fe,reject:ye}),self.postMessage({action:'retrieve-record',key:ge})})}function le(ge=1e3){return ee&&console.time('encrypt'),new Promise((fe,ye)=>{function Te(){if(0===Se.length)ee&&console.timeEnd('encrypt'),ee&&console.time('index'),Ee.documentStore.docs={},ee&&console.time('index2'),Ce();else{const De=Se.splice(0,ge),Ae={};De.forEach((Ie)=>{const Re=Le.documentStore.docs[Ie];Ae[Ie]=Re}),ee&&console.time('block'),oe(Ae).then((Ie)=>{ie(K+Me++,Ie).then(()=>{ee&&console.timeEnd('block'),Te()}).catch(ye)}).catch(ye)}}function Ce(){if(0===be.length)Ee.index={},oe(Ee).then((De)=>{ee&&console.timeEnd('index2'),ie(G,De).then(fe).catch(ye)});else{const De=be.shift();ee&&console.time('chunk'),oe({prop:De,data:Ee.index[De]}).then((Ae)=>{ie(J+ve++,Ae).then(()=>{ee&&console.timeEnd('chunk'),Ce()})})}}let Me=0,ve=0;const Le=W.toJSON(),Ee=JSON.parse(JSON.stringify(Le)),Se=Object.keys(Ee.documentStore.docs),be=Object.keys(Ee.index);Te()})}function _e(){return new Promise((ge,fe)=>{function ye(){de(K+Me).then((Le)=>{return Le?void se(Le).then((Ee)=>{Ce.documentStore.docs=Object.assign(Ce.documentStore.docs,Ee),Me++,ye()}).catch(fe):Te()}).catch(fe)}function Te(){de(J+ve).then((Le)=>{return Le?void se(Le).then((Ee)=>{Ce.index[Ee.prop]=Ee.data,ve++,Te()}).catch(fe):ge(Ce)}).catch(fe)}let Ce=null,Me=0,ve=0;de(G).then((Le)=>{return Le?void se(Le).then((Ee)=>{Ce=Ee,ye()}).catch(fe):ge(Ce)}).catch(fe)})}function ue(){return new Promise((ge)=>{de(ne).then((ye)=>{if(ye===void 0){const Te=self.crypto.subtle===void 0;ie(ne,Te).then(()=>{ge(Te)})}else ge(ye)})})}function ce(ge){return new Promise((fe)=>{const Te=new TextEncoder;fe(Te.encode(ge))})}function pe(ge){return new Promise((fe)=>{const Te=new TextDecoder;fe(Te.decode(ge))})}function he(ge){return new Promise((fe)=>{this.subtle?this.subtle.importKey('raw',ge,{name:'AES-CBC'},!1,['encrypt','decrypt']).then((Te)=>{fe(Te)}):fe(ge)})}switch(ae.data.action){case'initialise':const ge=()=>{z=!0,self.postMessage({_id:ae.data._id,action:'initialisation-complete',success:!0,msg:'Successfully initialised the user index.'})},fe=(Ae)=>{self.postMessage({_id:ae.data._id,action:'initialisation-complete',success:!1,msg:Ae})};if(!ae.data.instanceId)return void fe('Error initialising user index database.');ee=!0===ae.data.debug,this._blockSize=ae.data.blockSize||this._blockSize,ue().then((Ae)=>{Ae?(H(),this.subtle=null):this.subtle=self.crypto.subtle,he(ae.data.key).then((Ie)=>{this._key=Ie,this._iv=ae.data.iv,_e().then((Re)=>{Re&&(W=$.Index.load(Re)),ge()}).catch(()=>{fe('Failed reading database for previously stored index.')})}).catch(()=>{fe('Failed importing key for previously stored index.')})}).catch(()=>{fe('Failed detecting crypto type for previously stored index')});break;case'fetch':if(!1==z)return void self.postMessage({_id:ae.data._id,success:!1,action:'index-complete',msg:'Initialisation must be completed before the \'fetch\' action can take place.'});const ye=Date.now();fetch(ae.data.endpoint,{method:'GET',headers:{Authorization:'Basic '+R(`${ae.data.jid}:${ae.data.pass}`)}}).then((Ae)=>{if(200!==Ae.status)throw new Error(`Couldn't download user directory. Status code: '${Ae.status}'.`);return Ae.json()}).then((Ae)=>{const Ie={added:Ae.added||[],updated:Ae.updated||[],removed:Ae.removed||[]};void 0!==Ae.full&&(W=null,Ie.added=Ae.full);const Re=Date.now()-ye,we=[`Downloaded '${Ie.added.length}' additions, '${Ie.updated.length}' updates and '${Ie.removed.length}' deletions in ${Re}ms`];null===W&&(W=$(function(){this.setRef('jid'),this.addField('jid'),this.addField('firstName'),this.addField('lastName'),this.addField('jobTitle'),this.addField('telephone'),this.addField('group'),this.saveDocument(!0)}),we.push(`Created a fresh index`)),0<Ie.added.length&&(Ie.added.forEach((ke)=>W.addDoc(ke)),we.push(`Added '${Ie.added.length}' users to index`)),0<Ie.updated.length&&(Ie.updated.forEach((ke)=>W.updateDoc(ke)),we.push(`Updated '${Ie.updated.length}' users in index`)),0<Ie.removed.length&&(Ie.removed.forEach((ke)=>W.removeDoc(ke)),we.push(`Removed '${Ie.removed.length}' users from index`)),le(2e3).then(()=>{self.postMessage({_id:ae.data._id,success:!0,action:'index-complete',hash:Ae.hash||null,msg:`${we.join(', ')} | Completed in ${Date.now()-ye}ms.`})}).catch(()=>{self.postMessage({_id:ae.data._id,success:!1,action:'index-complete',msg:'Couldn\'t persist updated index.'})})}).catch((Ae)=>{const Ie=`Unable to download user directory from location '${ae.data.endpoint}'`;console.error(Ie,Ae),self.postMessage({_id:ae.data._id,success:!1,action:'index-complete',msg:Ie})});break;case'search':if($.clearStopWords(),!1==z)return void self.postMessage({_id:ae.data._id,success:!1,action:'search-complete',msg:'Initialisation must be completed before the \'search\' action can take place.'});if(null===W)return void self.postMessage({_id:ae.data._id,success:!1,action:'search-complete',msg:'There is no index to be searched, have you updated the index yet?'});const Te=Date.now();let Ce=null;if(Array.isArray(ae.data.fields)&&0<ae.data.fields.length){const Ae={fields:{},bool:'OR',expand:!0};ae.data.fields.forEach((Ie)=>{Ae.fields[Ie]={}}),Ce=W.search(ae.data.query,Ae)}else Ce=W.search(ae.data.query,{expand:!0});const Me=Ce.map((Ae)=>{return Ae.doc});self.postMessage({_id:ae.data._id,success:!0,action:'search-complete',msg:`Found ${Me.length} users in ${Date.now()-Te}ms.`,results:Me});break;case'jid-search':if(!1==z)return void self.postMessage({_id:ae.data._id,success:!1,action:'jid-search-complete',msg:'Initialisation must be completed before the \'jid-search\' action can take place.'});if(null===W)return void self.postMessage({_id:ae.data._id,success:!1,action:'jid-search-complete',msg:'There is no index to be searched, have you updated the index yet?'});const ve=Date.now(),Le=W.search(ae.data.jid,{expand:!0})[0],Ee=void 0===Le?null:Le.doc;self.postMessage({_id:ae.data._id,success:!0,action:'jid-search-complete',msg:null===Ee?`No user with JID '${ae.data.jid}' could be found.`:`Found user with JID '${ae.data.jid}' in ${Date.now()-ve}ms.`,result:Ee});break;case'get-all-users':if(!1==z)return void self.postMessage({_id:ae.data._id,success:!1,action:'get-all-users-complete',msg:'Initialisation must be completed before the \'get-all-users\' action can take place.'});if(null===W)return void self.postMessage({_id:ae.data._id,success:!1,action:'get-all-users-complete',msg:'There is no index available, have you updated the index yet?'});const Se=Date.now(),be=[];for(let Ae in W.documentStore.docs)be.push(W.documentStore.docs[Ae]);self.postMessage({_id:ae.data._id,success:!0,action:'get-all-users-complete',msg:`Fetched '${be.length}' users in ${Date.now()-Se}ms.`,results:be});break;case'store-record-response':case'retrieve-record-response':const De=te.get(ae.data.key);De&&(ae.data.success?De.resolve(ae.data.record):De.reject(ae.data.msg),te.delete(ae.data.key));break;default:self.postMessage({_id:ae.data._id,success:!0,msg:`Invalid action '${ae.data.action}' was specified.`});}}}},function(L,E,A){var I,R,N,H,B,z,W,G,J,K,J,$,J,X,J,Q,J,Z;(function(ee,te){R={id:'strophe-base64',exports:{},loaded:!1},I=function(){return te()}.call(R.exports,A,R.exports,R),R.loaded=!0,!(I===void 0&&(I=R.exports))})(this,function(){var ee='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';return{encode:function(ne){var ae='',ce=0,oe,se,ie,de,le,_e,ue;do oe=ne.charCodeAt(ce++),se=ne.charCodeAt(ce++),ie=ne.charCodeAt(ce++),de=oe>>2,le=(3&oe)<<4|se>>4,_e=(15&se)<<2|ie>>6,ue=63&ie,isNaN(se)?(le=(3&oe)<<4,_e=ue=64):isNaN(ie)&&(ue=64),ae=ae+ee.charAt(de)+ee.charAt(le)+ee.charAt(_e)+ee.charAt(ue);while(ce<ne.length);return ae},decode:function(ne){var ae='',ce=0,oe,se,ie,de,le,_e,ue;ne=ne.replace(/[^A-Za-z0-9\+\/\=]/g,'');do de=ee.indexOf(ne.charAt(ce++)),le=ee.indexOf(ne.charAt(ce++)),_e=ee.indexOf(ne.charAt(ce++)),ue=ee.indexOf(ne.charAt(ce++)),oe=de<<2|le>>4,se=(15&le)<<4|_e>>2,ie=(3&_e)<<6|ue,ae+=String.fromCharCode(oe),64!=_e&&(ae+=String.fromCharCode(se)),64!=ue&&(ae+=String.fromCharCode(ie));while(ce<ne.length);return ae}}}),function(ee,te){H={id:'strophe-sha1',exports:{},loaded:!1},N=function(){return te()}.call(H.exports,A,H.exports,H),H.loaded=!0,!(N===void 0&&(N=H.exports))}(this,function(){function ee(_e,ue){_e[ue>>5]|=128<<24-ue%32,_e[(ue+64>>9<<4)+15]=ue;var ce=Array(80),pe=1732584193,he=-271733879,ge=-1732584194,fe=271733878,ye=-1009589776,Te,Ce,Me,ve,Le,Ee,Se,be;for(Te=0;Te<_e.length;Te+=16){for(ve=pe,Le=he,Ee=ge,Se=fe,be=ye,Ce=0;80>Ce;Ce++)ce[Ce]=16>Ce?_e[Te+Ce]:se(ce[Ce-3]^ce[Ce-8]^ce[Ce-14]^ce[Ce-16],1),Me=oe(oe(se(pe,5),te(Ce,he,ge,fe)),oe(oe(ye,ce[Ce]),ne(Ce))),ye=fe,fe=ge,ge=se(he,30),he=pe,pe=Me;pe=oe(pe,ve),he=oe(he,Le),ge=oe(ge,Ee),fe=oe(fe,Se),ye=oe(ye,be)}return[pe,he,ge,fe,ye]}function te(_e,ue,ce,pe){return 20>_e?ue&ce|~ue&pe:40>_e?ue^ce^pe:60>_e?ue&ce|ue&pe|ce&pe:ue^ce^pe}function ne(_e){return 20>_e?1518500249:40>_e?1859775393:60>_e?-1894007588:-899497514}function ae(_e,ue){var ce=ie(_e);16<ce.length&&(ce=ee(ce,8*_e.length));for(var pe=Array(16),he=Array(16),ge=0;16>ge;ge++)pe[ge]=909522486^ce[ge],he[ge]=1549556828^ce[ge];var fe=ee(pe.concat(ie(ue)),512+8*ue.length);return ee(he.concat(fe),672)}function oe(_e,ue){var ce=(65535&_e)+(65535&ue);return(_e>>16)+(ue>>16)+(ce>>16)<<16|65535&ce}function se(_e,ue){return _e<<ue|_e>>>32-ue}function ie(_e){for(var ue=[],pe=0;pe<8*_e.length;pe+=8)ue[pe>>5]|=(_e.charCodeAt(pe/8)&255)<<24-pe%32;return ue}function de(_e){for(var ue='',pe=0;pe<32*_e.length;pe+=8)ue+=String.fromCharCode(_e[pe>>5]>>>24-pe%32&255);return ue}function le(_e){for(var ce='',ge=0,pe,he;ge<4*_e.length;ge+=3)for(pe=(255&_e[ge>>2]>>8*(3-ge%4))<<16|(255&_e[ge+1>>2]>>8*(3-(ge+1)%4))<<8|255&_e[ge+2>>2]>>8*(3-(ge+2)%4),he=0;4>he;he++)ce+=8*ge+6*he>32*_e.length?'=':'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(63&pe>>6*(3-he));return ce}return{b64_hmac_sha1:function(_e,ue){return le(ae(_e,ue))},b64_sha1:function(_e){return le(ee(ie(_e),8*_e.length))},binb2str:de,core_hmac_sha1:ae,str_hmac_sha1:function(_e,ue){return de(ae(_e,ue))},str_sha1:function(_e){return de(ee(ie(_e),8*_e.length))}}}),function(ee,te){z={id:'strophe-md5',exports:{},loaded:!1},B=function(){return te()}.call(z.exports,A,z.exports,z),z.loaded=!0,!(B===void 0&&(B=z.exports))}(this,function(){var te=function(he,ge){var fe=(65535&he)+(65535&ge);return(he>>16)+(ge>>16)+(fe>>16)<<16|65535&fe},ne=function(he,ge){return he<<ge|he>>>32-ge},ae=function(he){for(var ge=[],fe=0;fe<8*he.length;fe+=8)ge[fe>>5]|=(255&he.charCodeAt(fe/8))<<fe%32;return ge},oe=function(he){for(var ge='',fe=0;fe<32*he.length;fe+=8)ge+=String.fromCharCode(255&he[fe>>5]>>>fe%32);return ge},se=function(he){for(var ge='0123456789abcdef',fe='',ye=0;ye<4*he.length;ye++)fe+=ge.charAt(15&he[ye>>2]>>8*(ye%4)+4)+ge.charAt(15&he[ye>>2]>>8*(ye%4));return fe},ie=function(he,ge,fe,ye,Te,Ce){return te(ne(te(te(ge,he),te(ye,Ce)),Te),fe)},de=function(he,ge,fe,ye,Te,Ce,Me){return ie(ge&fe|~ge&ye,he,ge,Te,Ce,Me)},le=function(he,ge,fe,ye,Te,Ce,Me){return ie(ge&ye|fe&~ye,he,ge,Te,Ce,Me)},_e=function(he,ge,fe,ye,Te,Ce,Me){return ie(ge^fe^ye,he,ge,Te,Ce,Me)},ue=function(he,ge,fe,ye,Te,Ce,Me){return ie(fe^(ge|~ye),he,ge,Te,Ce,Me)},ce=function(he,ge){he[ge>>5]|=128<<ge%32,he[(ge+64>>>9<<4)+14]=ge;for(var fe=1732584193,ye=-271733879,Te=-1732584194,Ce=271733878,Se=0,Me,ve,Le,Ee;Se<he.length;Se+=16)Me=fe,ve=ye,Le=Te,Ee=Ce,fe=de(fe,ye,Te,Ce,he[Se+0],7,-680876936),Ce=de(Ce,fe,ye,Te,he[Se+1],12,-389564586),Te=de(Te,Ce,fe,ye,he[Se+2],17,606105819),ye=de(ye,Te,Ce,fe,he[Se+3],22,-1044525330),fe=de(fe,ye,Te,Ce,he[Se+4],7,-176418897),Ce=de(Ce,fe,ye,Te,he[Se+5],12,1200080426),Te=de(Te,Ce,fe,ye,he[Se+6],17,-1473231341),ye=de(ye,Te,Ce,fe,he[Se+7],22,-45705983),fe=de(fe,ye,Te,Ce,he[Se+8],7,1770035416),Ce=de(Ce,fe,ye,Te,he[Se+9],12,-1958414417),Te=de(Te,Ce,fe,ye,he[Se+10],17,-42063),ye=de(ye,Te,Ce,fe,he[Se+11],22,-1990404162),fe=de(fe,ye,Te,Ce,he[Se+12],7,1804603682),Ce=de(Ce,fe,ye,Te,he[Se+13],12,-40341101),Te=de(Te,Ce,fe,ye,he[Se+14],17,-1502002290),ye=de(ye,Te,Ce,fe,he[Se+15],22,1236535329),fe=le(fe,ye,Te,Ce,he[Se+1],5,-165796510),Ce=le(Ce,fe,ye,Te,he[Se+6],9,-1069501632),Te=le(Te,Ce,fe,ye,he[Se+11],14,643717713),ye=le(ye,Te,Ce,fe,he[Se+0],20,-373897302),fe=le(fe,ye,Te,Ce,he[Se+5],5,-701558691),Ce=le(Ce,fe,ye,Te,he[Se+10],9,38016083),Te=le(Te,Ce,fe,ye,he[Se+15],14,-660478335),ye=le(ye,Te,Ce,fe,he[Se+4],20,-405537848),fe=le(fe,ye,Te,Ce,he[Se+9],5,568446438),Ce=le(Ce,fe,ye,Te,he[Se+14],9,-1019803690),Te=le(Te,Ce,fe,ye,he[Se+3],14,-187363961),ye=le(ye,Te,Ce,fe,he[Se+8],20,1163531501),fe=le(fe,ye,Te,Ce,he[Se+13],5,-1444681467),Ce=le(Ce,fe,ye,Te,he[Se+2],9,-51403784),Te=le(Te,Ce,fe,ye,he[Se+7],14,1735328473),ye=le(ye,Te,Ce,fe,he[Se+12],20,-1926607734),fe=_e(fe,ye,Te,Ce,he[Se+5],4,-378558),Ce=_e(Ce,fe,ye,Te,he[Se+8],11,-2022574463),Te=_e(Te,Ce,fe,ye,he[Se+11],16,1839030562),ye=_e(ye,Te,Ce,fe,he[Se+14],23,-35309556),fe=_e(fe,ye,Te,Ce,he[Se+1],4,-1530992060),Ce=_e(Ce,fe,ye,Te,he[Se+4],11,1272893353),Te=_e(Te,Ce,fe,ye,he[Se+7],16,-155497632),ye=_e(ye,Te,Ce,fe,he[Se+10],23,-1094730640),fe=_e(fe,ye,Te,Ce,he[Se+13],4,681279174),Ce=_e(Ce,fe,ye,Te,he[Se+0],11,-358537222),Te=_e(Te,Ce,fe,ye,he[Se+3],16,-722521979),ye=_e(ye,Te,Ce,fe,he[Se+6],23,76029189),fe=_e(fe,ye,Te,Ce,he[Se+9],4,-640364487),Ce=_e(Ce,fe,ye,Te,he[Se+12],11,-421815835),Te=_e(Te,Ce,fe,ye,he[Se+15],16,530742520),ye=_e(ye,Te,Ce,fe,he[Se+2],23,-995338651),fe=ue(fe,ye,Te,Ce,he[Se+0],6,-198630844),Ce=ue(Ce,fe,ye,Te,he[Se+7],10,1126891415),Te=ue(Te,Ce,fe,ye,he[Se+14],15,-1416354905),ye=ue(ye,Te,Ce,fe,he[Se+5],21,-57434055),fe=ue(fe,ye,Te,Ce,he[Se+12],6,1700485571),Ce=ue(Ce,fe,ye,Te,he[Se+3],10,-1894986606),Te=ue(Te,Ce,fe,ye,he[Se+10],15,-1051523),ye=ue(ye,Te,Ce,fe,he[Se+1],21,-2054922799),fe=ue(fe,ye,Te,Ce,he[Se+8],6,1873313359),Ce=ue(Ce,fe,ye,Te,he[Se+15],10,-30611744),Te=ue(Te,Ce,fe,ye,he[Se+6],15,-1560198380),ye=ue(ye,Te,Ce,fe,he[Se+13],21,1309151649),fe=ue(fe,ye,Te,Ce,he[Se+4],6,-145523070),Ce=ue(Ce,fe,ye,Te,he[Se+11],10,-1120210379),Te=ue(Te,Ce,fe,ye,he[Se+2],15,718787259),ye=ue(ye,Te,Ce,fe,he[Se+9],21,-343485551),fe=te(fe,Me),ye=te(ye,ve),Te=te(Te,Le),Ce=te(Ce,Ee);return[fe,ye,Te,Ce]};return{hexdigest:function(he){return se(ce(ae(he),8*he.length))},hash:function(he){return oe(ce(ae(he),8*he.length))}}}),function(ee,te){G={id:'strophe-utils',exports:{},loaded:!1},W=function(){return te()}.call(G.exports,A,G.exports,G),G.loaded=!0,!(W===void 0&&(W=G.exports))}(this,function(){return{utf16to8:function(te){var oe='',se=te.length,ne,ae;for(ne=0;ne<se;ne++)ae=te.charCodeAt(ne),0<=ae&&127>=ae?oe+=te.charAt(ne):2047<ae?(oe+=String.fromCharCode(224|15&ae>>12),oe+=String.fromCharCode(128|63&ae>>6),oe+=String.fromCharCode(128|63&ae>>0)):(oe+=String.fromCharCode(192|31&ae>>6),oe+=String.fromCharCode(128|63&ae>>0));return oe},addCookies:function(te){var ne,ae,oe,se,ie,de,le;for(ne in te||{})ie='',de='',le='',ae=te[ne],oe='object'==typeof ae,se=escape(unescape(oe?ae.value:ae)),oe&&(ie=ae.expires?';expires='+ae.expires:'',de=ae.domain?';domain='+ae.domain:'',le=ae.path?';path='+ae.path:''),document.cookie=ne+'='+se+ie+de+le}}}),function(ee,te){J=[],!(K=function(){return te()}.apply(E,J))}(this,function(){Function.prototype.bind||(Function.prototype.bind=function(ee){var te=this,ne=Array.prototype.slice,ae=Array.prototype.concat,oe=ne.call(arguments,1);return function(){return te.apply(ee?ee:this,ae.call(oe,ne.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(ee){return'[object Array]'===Object.prototype.toString.call(ee)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(ee){var te=this.length,ne=+arguments[1]||0;for(ne=0>ne?Math.ceil(ne):Math.floor(ne),0>ne&&(ne+=te);ne<te;ne++)if(ne in this&&this[ne]===ee)return ne;return-1})}),Array.prototype.forEach||(Array.prototype.forEach=function(ee,te){var ne,ae;if(null===this)throw new TypeError(' this is null or not defined');var oe=Object(this),se=oe.length>>>0;if('function'!=typeof ee)throw new TypeError(ee+' is not a function');for(1<arguments.length&&(ne=te),ae=0;ae<se;){var ie;ae in oe&&(ie=oe[ae],ee.call(ne,ie,ae,oe)),ae++}}),function(ee,te){J=[N,I,B,W,K],!($=function(){return te.apply(this,arguments)}.apply(E,J))}(this,function(ee,te,ne,ae){function oe(_e,ue){return new le.Builder(_e,ue)}function ie(_e){return new le.Builder('iq',_e)}function de(_e){return new le.Builder('presence',_e)}var le;return le={VERSION:'1.2.12',NS:{HTTPBIND:'http://jabber.org/protocol/httpbind',BOSH:'urn:xmpp:xbosh',CLIENT:'jabber:client',AUTH:'jabber:iq:auth',ROSTER:'jabber:iq:roster',PROFILE:'jabber:iq:profile',DISCO_INFO:'http://jabber.org/protocol/disco#info',DISCO_ITEMS:'http://jabber.org/protocol/disco#items',MUC:'http://jabber.org/protocol/muc',SASL:'urn:ietf:params:xml:ns:xmpp-sasl',STREAM:'http://etherx.jabber.org/streams',FRAMING:'urn:ietf:params:xml:ns:xmpp-framing',BIND:'urn:ietf:params:xml:ns:xmpp-bind',SESSION:'urn:ietf:params:xml:ns:xmpp-session',VERSION:'jabber:iq:version',STANZAS:'urn:ietf:params:xml:ns:xmpp-stanzas',XHTML_IM:'http://jabber.org/protocol/xhtml-im',XHTML:'http://www.w3.org/1999/xhtml'},XHTML:{tags:['a','blockquote','br','cite','em','img','li','ol','p','span','strong','ul','body'],attributes:{a:['href'],blockquote:['style'],br:[],cite:['style'],em:[],img:['src','alt','style','height','width'],li:['style'],ol:['style'],p:['style'],span:['style'],strong:[],ul:['style'],body:[]},css:['background-color','color','font-family','font-size','font-style','font-weight','margin-left','margin-right','text-align','text-decoration'],validTag:function(_e){for(var ue=0;ue<le.XHTML.tags.length;ue++)if(_e==le.XHTML.tags[ue])return!0;return!1},validAttribute:function(_e,ue){if('undefined'!=typeof le.XHTML.attributes[_e]&&0<le.XHTML.attributes[_e].length)for(var ce=0;ce<le.XHTML.attributes[_e].length;ce++)if(ue==le.XHTML.attributes[_e][ce])return!0;return!1},validCSS:function(_e){for(var ue=0;ue<le.XHTML.css.length;ue++)if(_e==le.XHTML.css[ue])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:0.1,addNamespace:function(_e,ue){le.NS[_e]=ue},forEachChild:function(_e,ue,ce){var pe,he;for(pe=0;pe<_e.childNodes.length;pe++)he=_e.childNodes[pe],he.nodeType==le.ElementType.NORMAL&&(!ue||this.isTagEqual(he,ue))&&ce(he)},isTagEqual:function(_e,ue){return _e.tagName==ue},_xmlGenerator:null,_makeGenerator:function(){var _e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&10>document.documentMode?(_e=this._getIEXmlDom(),_e.appendChild(_e.createElement('strophe'))):_e=document.implementation.createDocument('jabber:client','strophe',null),_e},xmlGenerator:function(){return le._xmlGenerator||(le._xmlGenerator=le._makeGenerator()),le._xmlGenerator},_getIEXmlDom:function(){for(var _e=null,ue=['Msxml2.DOMDocument.6.0','Msxml2.DOMDocument.5.0','Msxml2.DOMDocument.4.0','MSXML2.DOMDocument.3.0','MSXML2.DOMDocument','MSXML.DOMDocument','Microsoft.XMLDOM'],ce=0;ce<ue.length&&null==_e;ce++)try{_e=new ActiveXObject(ue[ce])}catch(pe){_e=null}return _e},xmlElement:function(_e){if(!_e)return null;var ue=le.xmlGenerator().createElement(_e),ce,pe,he;for(ce=1;ce<arguments.length;ce++){var ge=arguments[ce];if(ge)if('string'==typeof ge||'number'==typeof ge)ue.appendChild(le.xmlTextNode(ge));else if('object'==typeof ge&&'function'==typeof ge.sort)for(pe=0;pe<ge.length;pe++){var fe=ge[pe];'object'==typeof fe&&'function'==typeof fe.sort&&void 0!==fe[1]&&null!==fe[1]&&ue.setAttribute(fe[0],fe[1])}else if('object'==typeof ge)for(he in ge)ge.hasOwnProperty(he)&&void 0!==ge[he]&&null!==ge[he]&&ue.setAttribute(he,ge[he])}return ue},xmlescape:function(_e){return _e=_e.replace(/\&/g,'&amp;'),_e=_e.replace(/</g,'&lt;'),_e=_e.replace(/>/g,'&gt;'),_e=_e.replace(/'/g,'&apos;'),_e=_e.replace(/"/g,'&quot;'),_e},xmlunescape:function(_e){return _e=_e.replace(/\&amp;/g,'&'),_e=_e.replace(/&lt;/g,'<'),_e=_e.replace(/&gt;/g,'>'),_e=_e.replace(/&apos;/g,'\''),_e=_e.replace(/&quot;/g,'"'),_e},xmlTextNode:function(_e){return le.xmlGenerator().createTextNode(_e)},xmlHtmlNode:function(_e){var ue;if(window.DOMParser){var ce=new DOMParser;ue=ce.parseFromString(_e,'text/xml')}else ue=new ActiveXObject('Microsoft.XMLDOM'),ue.async='false',ue.loadXML(_e);return ue},getText:function(_e){if(!_e)return null;var ue='';0===_e.childNodes.length&&_e.nodeType==le.ElementType.TEXT&&(ue+=_e.nodeValue);for(var ce=0;ce<_e.childNodes.length;ce++)_e.childNodes[ce].nodeType==le.ElementType.TEXT&&(ue+=_e.childNodes[ce].nodeValue);return le.xmlescape(ue)},copyElement:function(_e){var ue,ce;if(_e.nodeType==le.ElementType.NORMAL){for(ce=le.xmlElement(_e.tagName),ue=0;ue<_e.attributes.length;ue++)ce.setAttribute(_e.attributes[ue].nodeName,_e.attributes[ue].value);for(ue=0;ue<_e.childNodes.length;ue++)ce.appendChild(le.copyElement(_e.childNodes[ue]))}else _e.nodeType==le.ElementType.TEXT&&(ce=le.xmlGenerator().createTextNode(_e.nodeValue));return ce},createHtml:function(_e){var ue,ce,pe,he,ge,fe,ye,Te,Ce,Me,ve;if(_e.nodeType==le.ElementType.NORMAL){if(he=_e.nodeName.toLowerCase(),le.XHTML.validTag(he))try{for(ce=le.xmlElement(he),ue=0;ue<le.XHTML.attributes[he].length;ue++)if(ge=le.XHTML.attributes[he][ue],fe=_e.getAttribute(ge),'undefined'!=typeof fe&&null!==fe&&''!==fe&&!1!==fe&&0!==fe)if('style'==ge&&'object'==typeof fe&&'undefined'!=typeof fe.cssText&&(fe=fe.cssText),'style'==ge){for(ye=[],Te=fe.split(';'),pe=0;pe<Te.length;pe++)Ce=Te[pe].split(':'),Me=Ce[0].replace(/^\s*/,'').replace(/\s*$/,'').toLowerCase(),le.XHTML.validCSS(Me)&&(ve=Ce[1].replace(/^\s*/,'').replace(/\s*$/,''),ye.push(Me+': '+ve));0<ye.length&&(fe=ye.join('; '),ce.setAttribute(ge,fe))}else ce.setAttribute(ge,fe);for(ue=0;ue<_e.childNodes.length;ue++)ce.appendChild(le.createHtml(_e.childNodes[ue]))}catch(Le){ce=le.xmlTextNode('')}else for(ce=le.xmlGenerator().createDocumentFragment(),ue=0;ue<_e.childNodes.length;ue++)ce.appendChild(le.createHtml(_e.childNodes[ue]));}else if(_e.nodeType==le.ElementType.FRAGMENT)for(ce=le.xmlGenerator().createDocumentFragment(),ue=0;ue<_e.childNodes.length;ue++)ce.appendChild(le.createHtml(_e.childNodes[ue]));else _e.nodeType==le.ElementType.TEXT&&(ce=le.xmlTextNode(_e.nodeValue));return ce},escapeNode:function(_e){return'string'==typeof _e?_e.replace(/^\s+|\s+$/g,'').replace(/\\/g,'\\5c').replace(/ /g,'\\20').replace(/\"/g,'\\22').replace(/\&/g,'\\26').replace(/\'/g,'\\27').replace(/\//g,'\\2f').replace(/:/g,'\\3a').replace(/</g,'\\3c').replace(/>/g,'\\3e').replace(/@/g,'\\40'):_e},unescapeNode:function(_e){return'string'==typeof _e?_e.replace(/\\20/g,' ').replace(/\\22/g,'"').replace(/\\26/g,'&').replace(/\\27/g,'\'').replace(/\\2f/g,'/').replace(/\\3a/g,':').replace(/\\3c/g,'<').replace(/\\3e/g,'>').replace(/\\40/g,'@').replace(/\\5c/g,'\\'):_e},getNodeFromJid:function(_e){return 0>_e.indexOf('@')?null:_e.split('@')[0]},getDomainFromJid:function(_e){var ue=le.getBareJidFromJid(_e);if(0>ue.indexOf('@'))return ue;var ce=ue.split('@');return ce.splice(0,1),ce.join('@')},getResourceFromJid:function(_e){var ue=_e.split('/');return 2>ue.length?null:(ue.splice(0,1),ue.join('/'))},getBareJidFromJid:function(_e){return _e?_e.split('/')[0]:null},_handleError:function(_e){'undefined'!=typeof _e.stack&&le.fatal(_e.stack),_e.sourceURL?le.fatal('error: '+this.handler+' '+_e.sourceURL+':'+_e.line+' - '+_e.name+': '+_e.message):_e.fileName?le.fatal('error: '+this.handler+' '+_e.fileName+':'+_e.lineNumber+' - '+_e.name+': '+_e.message):le.fatal('error: '+_e.message)},log:function(){},debug:function(_e){this.log(this.LogLevel.DEBUG,_e)},info:function(_e){this.log(this.LogLevel.INFO,_e)},warn:function(_e){this.log(this.LogLevel.WARN,_e)},error:function(_e){this.log(this.LogLevel.ERROR,_e)},fatal:function(_e){this.log(this.LogLevel.FATAL,_e)},serialize:function(_e){var ue;if(!_e)return null;'function'==typeof _e.tree&&(_e=_e.tree());var ce=_e.nodeName,pe,he;for(_e.getAttribute('_realname')&&(ce=_e.getAttribute('_realname')),ue='<'+ce,pe=0;pe<_e.attributes.length;pe++)'_realname'!=_e.attributes[pe].nodeName&&(ue+=' '+_e.attributes[pe].nodeName+'=\''+le.xmlescape(_e.attributes[pe].value)+'\'');if(0<_e.childNodes.length){for(ue+='>',pe=0;pe<_e.childNodes.length;pe++)switch(he=_e.childNodes[pe],he.nodeType){case le.ElementType.NORMAL:ue+=le.serialize(he);break;case le.ElementType.TEXT:ue+=le.xmlescape(he.nodeValue);break;case le.ElementType.CDATA:ue+='<![CDATA['+he.nodeValue+']]>';}ue+='</'+ce+'>'}else ue+='/>';return ue},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(_e,ue){le._connectionPlugins[_e]=ue}},le.Builder=function(_e,ue){('presence'==_e||'message'==_e||'iq'==_e)&&(ue&&!ue.xmlns?ue.xmlns=le.NS.CLIENT:!ue&&(ue={xmlns:le.NS.CLIENT})),this.nodeTree=le.xmlElement(_e,ue),this.node=this.nodeTree},le.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return le.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(_e){for(var ue in _e)_e.hasOwnProperty(ue)&&(void 0===_e[ue]?this.node.removeAttribute(ue):this.node.setAttribute(ue,_e[ue]));return this},c:function(_e,ue,ce){var pe=le.xmlElement(_e,ue,ce);return this.node.appendChild(pe),'string'!=typeof ce&&'number'!=typeof ce&&(this.node=pe),this},cnode:function(_e){var ce=le.xmlGenerator(),ue;try{ue=void 0!==ce.importNode}catch(he){ue=!1}var pe=ue?ce.importNode(_e,!0):le.copyElement(_e);return this.node.appendChild(pe),this.node=pe,this},t:function(_e){var ue=le.xmlTextNode(_e);return this.node.appendChild(ue),this},h:function(_e){var ue=document.createElement('body');ue.innerHTML=_e;for(var ce=le.createHtml(ue);0<ce.childNodes.length;)this.node.appendChild(ce.childNodes[0]);return this}},le.Handler=function(_e,ue,ce,pe,he,ge,fe){this.handler=_e,this.ns=ue,this.name=ce,this.type=pe,this.id=he,this.options=fe||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(le.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.from=this.options.matchBareFromJid?ge?le.getBareJidFromJid(ge):null:ge,this.user=!0},le.Handler.prototype={getNamespace:function(_e){var ue=_e.getAttribute('xmlns');return ue&&this.options.ignoreNamespaceFragment&&(ue=ue.split('#')[0]),ue},namespaceMatch:function(_e){var ue=!1;if(!this.ns)return!0;var ce=this;return le.forEachChild(_e,null,function(pe){ce.getNamespace(pe)===ce.ns&&(ue=!0)}),ue=ue||this.getNamespace(_e)===this.ns,ue},isMatch:function(_e){var ue=_e.getAttribute('from');this.options.matchBareFromJid&&(ue=le.getBareJidFromJid(ue));var ce=_e.getAttribute('type');return!this.namespaceMatch(_e)||this.name&&!le.isTagEqual(_e,this.name)||this.type&&(Array.isArray(this.type)?-1==this.type.indexOf(ce):ce!=this.type)||this.id&&_e.getAttribute('id')!=this.id||this.from&&ue!=this.from?!1:!0},run:function(_e){var ue=null;try{ue=this.handler(_e)}catch(ce){throw le._handleError(ce),ce}return ue},toString:function(){return'{Handler: '+this.handler+'('+this.name+','+this.id+','+this.ns+')}'}},le.TimedHandler=function(_e,ue){this.period=_e,this.handler=ue,this.lastCalled=new Date().getTime(),this.user=!0},le.TimedHandler.prototype={run:function(){return this.lastCalled=new Date().getTime(),this.handler()},reset:function(){this.lastCalled=new Date().getTime()},toString:function(){return'{TimedHandler: '+this.handler+'('+this.period+')}'}},le.Connection=function(_e,ue){this.service=_e,this.options=ue||{};var ce=this.options.protocol||'';for(var pe in this._proto=0===_e.indexOf('ws:')||0===_e.indexOf('wss:')||0===ce.indexOf('ws')?new le.Websocket(this):new le.Bosh(this),this.jid='',this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),ae.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),le._connectionPlugins)if(le._connectionPlugins.hasOwnProperty(pe)){var he=le._connectionPlugins[pe],ge=function(){};ge.prototype=he,this[pe]=new ge,this[pe].init(this)}},le.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this.override=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(_e){var ue='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(ce){var pe=0|16*Math.random(),he='x'==ce?pe:8|3&pe;return he.toString(16)});return'string'==typeof _e||'number'==typeof _e?ue+':'+_e:ue+''},addProtocolErrorHandler:function(_e,ue,ce){this.protocolErrorHandlers[_e][ue]=ce},connect:function(_e,ue,ce,pe,he,ge,fe){this.jid=_e,this.authzid=le.getBareJidFromJid(this.jid),this.authcid=fe||le.getNodeFromJid(this.jid),this.pass=ue,this.servtype='xmpp',this.connect_callback=ce,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=le.getDomainFromJid(this.jid),this._changeConnectStatus(le.Status.CONNECTING,null),this._proto._connect(pe,he,ge)},attach:function(_e,ue,ce,pe,he,ge,fe){if(this._proto instanceof le.Bosh)this._proto._attach(_e,ue,ce,pe,he,ge,fe);else throw{name:'StropheSessionError',message:'The "attach" method can only be used with a BOSH connection.'}},restore:function(_e,ue,ce,pe,he){if(this._sessionCachingSupported())this._proto._restore(_e,ue,ce,pe,he);else throw{name:'StropheSessionError',message:'The "restore" method can only be used with a BOSH connection.'}},_sessionCachingSupported:function(){if(this._proto instanceof le.Bosh){if(!JSON)return!1;try{window.sessionStorage.setItem('_strophe_','_strophe_'),window.sessionStorage.removeItem('_strophe_')}catch(_e){return!1}return!0}return!1},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},nextValidRid:function(){},send:function(_e){if(null!==_e){if('function'==typeof _e.sort)for(var ue=0;ue<_e.length;ue++)this._queueData(_e[ue]);else'function'==typeof _e.tree?this._queueData(_e.tree()):this._queueData(_e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(_e,ue,ce,pe){var he=null,ge=this;'function'==typeof _e.tree&&(_e=_e.tree());var fe=_e.getAttribute('id');if(fe||(fe=this.getUniqueId('sendPresence'),_e.setAttribute('id',fe)),'function'==typeof ue||'function'==typeof ce){var ye=this.addHandler(function(Te){he&&ge.deleteTimedHandler(he);var Ce=Te.getAttribute('type');'error'==Ce?ce&&ce(Te):ue&&ue(Te)},null,'presence',null,fe);pe&&(he=this.addTimedHandler(pe,function(){return ge.deleteHandler(ye),ce&&ce(null),!1}))}return this.send(_e),fe},sendIQ:function(_e,ue,ce,pe){var he=null,ge=this;'function'==typeof _e.tree&&(_e=_e.tree());var fe=_e.getAttribute('id');if(fe||(fe=this.getUniqueId('sendIQ'),_e.setAttribute('id',fe)),'function'==typeof ue||'function'==typeof ce){var ye=this.addHandler(function(Te){he&&ge.deleteTimedHandler(he);var Ce=Te.getAttribute('type');if('result'==Ce)ue&&ue(Te);else if('error'==Ce)ce&&ce(Te);else throw{name:'StropheError',message:'Got bad IQ type of '+Ce}},null,'iq',['error','result'],fe);pe&&(he=this.addTimedHandler(pe,function(){return ge.deleteHandler(ye),ce&&ce(null),!1}))}return this.send(_e),fe},_queueData:function(_e){if(null===_e||!_e.tagName||!_e.childNodes)throw{name:'StropheError',message:'Cannot queue non-DOMElement.'};this._data.push(_e)},_sendRestart:function(){this._data.push('restart'),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(_e,ue){var ce=new le.TimedHandler(_e,ue);return this.addTimeds.push(ce),ce},deleteTimedHandler:function(_e){this.removeTimeds.push(_e)},addHandler:function(_e,ue,ce,pe,he,ge,fe){var ye=new le.Handler(_e,ue,ce,pe,he,ge,fe);return this.addHandlers.push(ye),ye},deleteHandler:function(_e){this.removeHandlers.push(_e);var ue=this.addHandlers.indexOf(_e);0<=ue&&this.addHandlers.splice(ue,1)},registerSASLMechanisms:function(_e){this.mechanisms={},_e=_e||[le.SASLAnonymous,le.SASLExternal,le.SASLMD5,le.SASLOAuthBearer,le.SASLPlain,le.SASLSHA1],_e.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(_e){this.mechanisms[_e.prototype.name]=_e},disconnect:function(_e,ue){if(le.info('Disconnect was called because: '+_e),this.connected){this._changeConnectStatus(le.Status.DISCONNECTING,_e);var ce=!1;this.disconnecting=!0,this.authenticated&&(ce=de({xmlns:le.NS.CLIENT,type:'unavailable'})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(ce,ue)}else le.info('Disconnect was called before Strophe connected to the server'),this._proto._abortAllRequests(),this._doDisconnect(_e)},_changeConnectStatus:function(_e,ue){for(var ce in le._connectionPlugins)if(le._connectionPlugins.hasOwnProperty(ce)){var pe=this[ce];if(pe.statusChanged)try{pe.statusChanged(_e,ue)}catch(he){le.error(''+ce+' plugin caused an exception changing status: '+he)}}if(this.connect_callback)try{this.connect_callback(_e,ue)}catch(he){le._handleError(he),le.error('User connection callback caused an exception: '+he)}},_doDisconnect:function(_e){'number'==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),le.info('_doDisconnect was called'),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(le.Status.DISCONNECTED,_e),this.connected=!1},_dataRecv:function(_e,ue){le.info('_dataRecv called');var ce=this._proto._reqToData(_e);if(null!==ce){this.xmlInput!==le.Connection.prototype.xmlInput&&(ce.nodeName===this._proto.strip&&ce.childNodes.length?this.xmlInput(ce.childNodes[0]):this.xmlInput(ce)),this.rawInput!==le.Connection.prototype.rawInput&&(ue?this.rawInput(ue):this.rawInput(le.serialize(ce)));for(var pe,he;0<this.removeHandlers.length;)he=this.removeHandlers.pop(),pe=this.handlers.indexOf(he),0<=pe&&this.handlers.splice(pe,1);for(;0<this.addHandlers.length;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var ge=ce.getAttribute('type'),fe,ye;if(null!==ge&&'terminate'==ge)return this.disconnecting?void 0:(fe=ce.getAttribute('condition'),ye=ce.getElementsByTagName('conflict'),null===fe?this._changeConnectStatus(le.Status.CONNFAIL,'unknown'):('remote-stream-error'==fe&&0<ye.length&&(fe='conflict'),this._changeConnectStatus(le.Status.CONNFAIL,fe)),void this._doDisconnect(fe));var Te=this;le.forEachChild(ce,null,function(Ce){var Me,ve;for(ve=Te.handlers,Te.handlers=[],Me=0;Me<ve.length;Me++){var Le=ve[Me];try{Le.isMatch(Ce)&&(Te.authenticated||!Le.user)?Le.run(Ce)&&Te.handlers.push(Le):Te.handlers.push(Le)}catch(Ee){le.warn('Removing Strophe handlers due to uncaught exception: '+Ee.message)}}})}},mechanisms:{},_connect_cb:function(_e,ue,ce){le.info('_connect_cb was called'),this.connected=!0;var pe;try{pe=this._proto._reqToData(_e)}catch(Me){if('badformat'!=Me)throw Me;this._changeConnectStatus(le.Status.CONNFAIL,'bad-format'),this._doDisconnect('bad-format')}if(pe){this.xmlInput!==le.Connection.prototype.xmlInput&&(pe.nodeName===this._proto.strip&&pe.childNodes.length?this.xmlInput(pe.childNodes[0]):this.xmlInput(pe)),this.rawInput!==le.Connection.prototype.rawInput&&(ce?this.rawInput(ce):this.rawInput(le.serialize(pe)));var he=this._proto._connect_cb(pe);if(he!==le.Status.CONNFAIL){var ge;if(ge=pe.getElementsByTagNameNS?0<pe.getElementsByTagNameNS(le.NS.STREAM,'features').length:0<pe.getElementsByTagName('stream:features').length||0<pe.getElementsByTagName('features').length,!ge)return void this._proto._no_auth_received(ue);var fe=[],Ce=pe.getElementsByTagName('mechanism'),ye,Te;if(0<Ce.length)for(ye=0;ye<Ce.length;ye++)Te=le.getText(Ce[ye]),this.mechanisms[Te]&&fe.push(this.mechanisms[Te]);return 0===fe.length&&0===pe.getElementsByTagName('auth').length?void this._proto._no_auth_received(ue):void(!1!==this.do_authentication&&this.authenticate(fe))}}},sortMechanismsByPriority:function(_e){var ue,ce,pe,he;for(ue=0;ue<_e.length-1;++ue){for(pe=ue,ce=ue+1;ce<_e.length;++ce)_e[ce].prototype.priority>_e[pe].prototype.priority&&(pe=ce);pe!=ue&&(he=_e[ue],_e[ue]=_e[pe],_e[pe]=he)}return _e},_attemptSASLAuth:function(_e){_e=this.sortMechanismsByPriority(_e||[]);var ue=0,ce=!1;for(ue=0;ue<_e.length;++ue)if(_e[ue].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,'success',null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,'failure',null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,'challenge',null,null),this._sasl_mechanism=new _e[ue],this._sasl_mechanism.onStart(this);var pe=oe('auth',{xmlns:le.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var he=this._sasl_mechanism.onChallenge(this,null);pe.t(te.encode(he))}this.send(pe.tree()),ce=!0;break}return ce},_attemptLegacyAuth:function(){null===le.getNodeFromJid(this.jid)?(this._changeConnectStatus(le.Status.CONNFAIL,'x-strophe-bad-non-anon-jid'),this.disconnect('x-strophe-bad-non-anon-jid')):(this._changeConnectStatus(le.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,'_auth_1'),this.send(ie({type:'get',to:this.domain,id:'_auth_1'}).c('query',{xmlns:le.NS.AUTH}).c('username',{}).t(le.getNodeFromJid(this.jid)).tree()))},authenticate:function(_e){this._attemptSASLAuth(_e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(_e){var ue=te.decode(le.getText(_e)),ce=this._sasl_mechanism.onChallenge(this,ue),pe=oe('response',{xmlns:le.NS.SASL});return''!==ce&&pe.t(te.encode(ce)),this.send(pe.tree()),!0},_auth1_cb:function(){var ue=ie({type:'set',id:'_auth_2'}).c('query',{xmlns:le.NS.AUTH}).c('username',{}).t(le.getNodeFromJid(this.jid)).up().c('password').t(this.pass);return le.getResourceFromJid(this.jid)||(this.jid=le.getBareJidFromJid(this.jid)+'/strophe'),ue.up().c('resource',{}).t(le.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,'_auth_2'),this.send(ue.tree()),!1},_sasl_success_cb:function(_e){if(this._sasl_data['server-signature']){var ce=te.decode(le.getText(_e)),pe=/([a-z]+)=([^,]+)(,|$)/,he=ce.match(pe),ue;if('v'==he[1]&&(ue=he[2]),ue!=this._sasl_data['server-signature'])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}le.info('SASL authentication succeeded.'),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var ge=[],fe=function(ye,Te){for(;ye.length;)this.deleteHandler(ye.pop());return this._sasl_auth1_cb.bind(this)(Te),!1};return ge.push(this._addSysHandler(function(ye){fe.bind(this)(ge,ye)}.bind(this),null,'stream:features',null,null)),ge.push(this._addSysHandler(function(ye){fe.bind(this)(ge,ye)}.bind(this),le.NS.STREAM,'features',null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(_e){this.features=_e;var ue,ce;for(ue=0;ue<_e.childNodes.length;ue++)ce=_e.childNodes[ue],'bind'==ce.nodeName&&(this.do_bind=!0),'session'==ce.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(le.Status.AUTHFAIL,null),!1;var pe=this,he=function(){pe._addSysHandler(pe._sasl_bind_cb.bind(pe),null,null,null,'_bind_auth_2'),pe.override&&(pe.send(ie({type:'set',id:'_override_1'}).c('override',{xmlns:'urn:commontime:infinity:bind',"resource-conflict":'closeold'}).tree()),pe.override=!1);var ge=le.getResourceFromJid(pe.jid);ge?pe.send(ie({type:'set',id:'_bind_auth_2'}).c('bind',{xmlns:le.NS.BIND}).c('resource',{}).t(ge).tree()):pe.send(ie({type:'set',id:'_bind_auth_2'}).c('bind',{xmlns:le.NS.BIND}).tree())};return void 0!==this.streamManagement&&void 0!==this.streamManagement.prevId?(this._addSysHandler(function(){return pe.authenticated=!0,pe._changeConnectStatus(le.Status.CONNECTED,'resumed'),!1},'urn:xmpp:sm:3','resumed'),this._addSysHandler(function(){return he(),!1},'urn:xmpp:sm:3','failed'),this.send(oe('resume',{xmlns:'urn:xmpp:sm:3',previd:this.streamManagement.prevId,h:this.streamManagement.getIncomingCounter()||0}))):he(),!1},_sasl_bind_cb:function(_e){if('error'==_e.getAttribute('type')){le.info('SASL binding failed.');var ue=_e.getElementsByTagName('conflict'),ce;return 0<ue.length&&(ce='conflict',this._doDisconnect(ce)),this._changeConnectStatus(le.Status.AUTHFAIL,ce),!1}var pe=_e.getElementsByTagName('bind'),he;return 0<pe.length?void(he=pe[0].getElementsByTagName('jid'),0<he.length&&(this.jid=le.getText(he[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,'_session_auth_2'),this.send(ie({type:'set',id:'_session_auth_2'}).c('session',{xmlns:le.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(le.Status.CONNECTED,null)))):(le.info('SASL binding failed.'),this._changeConnectStatus(le.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(_e){if('result'==_e.getAttribute('type'))this.authenticated=!0,this._changeConnectStatus(le.Status.CONNECTED,null);else if('error'==_e.getAttribute('type'))return le.info('Session creation failed.'),this._changeConnectStatus(le.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(_e){this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure();const ue=_e.getElementsByTagName('text')[0];let ce=null;return void 0!==ue&&(ce=ue.innerHTML||null),this._changeConnectStatus(le.Status.AUTHFAIL,ce),this.disconnect(ce),!1},_auth2_cb:function(_e){return'result'==_e.getAttribute('type')?(this.authenticated=!0,this._changeConnectStatus(le.Status.CONNECTED,null)):'error'==_e.getAttribute('type')&&(this._changeConnectStatus(le.Status.AUTHFAIL,null),this.disconnect('authentication failed')),!1},_addSysTimedHandler:function(_e,ue){var ce=new le.TimedHandler(_e,ue);return ce.user=!1,this.addTimeds.push(ce),ce},_addSysHandler:function(_e,ue,ce,pe,he){var ge=new le.Handler(_e,ue,ce,pe,he);return ge.user=!1,this.addHandlers.push(ge),ge},_onDisconnectTimeout:function(){return le.info('_onDisconnectTimeout was called'),this._changeConnectStatus(le.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var _e,ue,ce,pe;0<this.addTimeds.length;)this.timedHandlers.push(this.addTimeds.pop());for(;0<this.removeTimeds.length;)ue=this.removeTimeds.pop(),_e=this.timedHandlers.indexOf(ue),0<=_e&&this.timedHandlers.splice(_e,1);var he=new Date().getTime();for(pe=[],_e=0;_e<this.timedHandlers.length;_e++)ue=this.timedHandlers[_e],(this.authenticated||!ue.user)&&(ce=ue.lastCalled+ue.period,0>=ce-he?ue.run()&&pe.push(ue):pe.push(ue));this.timedHandlers=pe,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),1e3))}},le.SASLMechanism=function(_e,ue,ce){this.name=_e,this.isClientFirst=ue,this.priority=ce},le.SASLMechanism.prototype={test:function(){return!0},onStart:function(_e){this._connection=_e},onChallenge:function(){throw new Error('You should implement challenge handling!')},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},le.SASLAnonymous=function(){},le.SASLAnonymous.prototype=new le.SASLMechanism('ANONYMOUS',!1,20),le.SASLAnonymous.prototype.test=function(_e){return null===_e.authcid},le.SASLPlain=function(){},le.SASLPlain.prototype=new le.SASLMechanism('PLAIN',!0,30),le.SASLPlain.prototype.test=function(_e){return null!==_e.authcid},le.SASLPlain.prototype.onChallenge=function(_e){var ue=_e.authzid;return ue+='\0',ue+=_e.authcid,ue+='\0',ue+=_e.pass,ae.utf16to8(ue)},le.SASLSHA1=function(){},le.SASLSHA1.prototype=new le.SASLMechanism('SCRAM-SHA-1',!0,50),le.SASLSHA1.prototype.test=function(_e){return null!==_e.authcid},le.SASLSHA1.prototype.onChallenge=function(_e,ue,ce){var pe=ce||ne.hexdigest(1234567890*Math.random()),he='n='+ae.utf16to8(_e.authcid);return he+=',r=',he+=pe,_e._sasl_data.cnonce=pe,_e._sasl_data['client-first-message-bare']=he,he='n,,'+he,this.onChallenge=function(ge,fe){for(var Re='c=biws,',we=ge._sasl_data['client-first-message-bare']+','+fe+',',ke=ge._sasl_data.cnonce,Ye=/([a-z]+)=([^,]+)(,|$)/,ye,Te,Ce,Me,ve,Le,Ee,Se,be,De,Ae,Ie,Oe;fe.match(Ye);)switch(Oe=fe.match(Ye),fe=fe.replace(Oe[0],''),Oe[1]){case'r':ye=Oe[2];break;case's':Te=Oe[2];break;case'i':Ce=Oe[2];}if(ye.substr(0,ke.length)!==ke)return ge._sasl_data={},ge._sasl_failure_cb();for(Re+='r='+ye,we+=Re,Te=te.decode(Te),Te+='\0\0\0\x01',be=ae.utf16to8(ge.pass),Me=Le=ee.core_hmac_sha1(be,Te),Ee=1;Ee<Ce;Ee++){for(ve=ee.core_hmac_sha1(be,ee.binb2str(Le)),Se=0;5>Se;Se++)Me[Se]^=ve[Se];Le=ve}for(Me=ee.binb2str(Me),De=ee.core_hmac_sha1(Me,'Client Key'),Ae=ee.str_hmac_sha1(Me,'Server Key'),Ie=ee.core_hmac_sha1(ee.str_sha1(ee.binb2str(De)),we),ge._sasl_data['server-signature']=ee.b64_hmac_sha1(Ae,we),Se=0;5>Se;Se++)De[Se]^=Ie[Se];return Re+=',p='+te.encode(ee.binb2str(De)),Re}.bind(this),he},le.SASLMD5=function(){},le.SASLMD5.prototype=new le.SASLMechanism('DIGEST-MD5',!1,40),le.SASLMD5.prototype.test=function(_e){return null!==_e.authcid},le.SASLMD5.prototype._quote=function(_e){return'"'+_e.replace(/\\/g,'\\\\').replace(/"/g,'\\"')+'"'},le.SASLMD5.prototype.onChallenge=function(_e,ue,ce){for(var pe=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,he=ce||ne.hexdigest(''+1234567890*Math.random()),ge='',fe=null,ye='',Ce;ue.match(pe);)switch(Ce=ue.match(pe),ue=ue.replace(Ce[0],''),Ce[2]=Ce[2].replace(/^"(.+)"$/,'$1'),Ce[1]){case'realm':ge=Ce[2];break;case'nonce':ye=Ce[2];break;case'qop':Ce[2];break;case'host':fe=Ce[2];}var Me=_e.servtype+'/'+_e.domain;null!==fe&&(Me=Me+'/'+fe);var ve=ae.utf16to8(_e.authcid+':'+ge+':'+this._connection.pass),Le=ne.hash(ve)+':'+ye+':'+he,Ee='AUTHENTICATE:'+Me,Se='';return Se+='charset=utf-8,',Se+='username='+this._quote(ae.utf16to8(_e.authcid))+',',Se+='realm='+this._quote(ge)+',',Se+='nonce='+this._quote(ye)+',',Se+='nc=00000001,',Se+='cnonce='+this._quote(he)+',',Se+='digest-uri='+this._quote(Me)+',',Se+='response='+ne.hexdigest(ne.hexdigest(Le)+':'+ye+':00000001:'+he+':auth:'+ne.hexdigest(Ee))+',',Se+='qop=auth',this.onChallenge=function(){return''},Se},le.SASLOAuthBearer=function(){},le.SASLOAuthBearer.prototype=new le.SASLMechanism('OAUTHBEARER',!0,60),le.SASLOAuthBearer.prototype.test=function(_e){return null!==_e.authcid},le.SASLOAuthBearer.prototype.onChallenge=function(_e){var ue='n,a=';return ue+=_e.authzid,ue+=',',ue+='\x01',ue+='auth=Bearer ',ue+=_e.pass,ue+='\x01',ue+='\x01',ae.utf16to8(ue)},le.SASLExternal=function(){},le.SASLExternal.prototype=new le.SASLMechanism('EXTERNAL',!0,10),le.SASLExternal.prototype.onChallenge=function(_e){return _e.authcid===_e.authzid?'':_e.authzid},{Strophe:le,$build:oe,$msg:function(_e){return new le.Builder('message',_e)},$iq:ie,$pres:de,SHA1:ee,Base64:te,MD5:ne}}),function(ee,te){J=[$],!(X=function(ne){return te(ne.Strophe,ne.$build)}.apply(E,J))}(this,function(ee,te){return ee.Request=function(ne,ae,oe,se){this.id=++ee._requestId,this.xmlData=ne,this.data=ee.serialize(ne),this.origFunc=ae,this.func=ae,this.rid=oe,this.date=NaN,this.sends=se||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var ie=new Date;return(ie-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var ie=new Date;return(ie-this.dead)/1e3},this.xhr=this._newXHR()},ee.Request.prototype={getResponse:function(){var ne=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(ne=this.xhr.responseXML.documentElement,'parsererror'==ne.tagName)throw ee.error('invalid response received'),ee.error('responseText: '+this.xhr.responseText),ee.error('responseXML: '+ee.serialize(this.xhr.responseXML)),'parsererror';}else if(this.xhr.responseText)throw ee.error('invalid response received'),ee.error('responseText: '+this.xhr.responseText),'badformat';return ne},_newXHR:function(){var ne=null;return window.XMLHttpRequest?(ne=new XMLHttpRequest,ne.overrideMimeType&&ne.overrideMimeType('text/xml; charset=utf-8')):window.ActiveXObject&&(ne=new ActiveXObject('Microsoft.XMLHTTP')),ne.onreadystatechange=this.func.bind(null,this),ne}},ee.Bosh=function(ne){this._conn=ne,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this._requests=[]},ee.Bosh.prototype={strip:null,_buildBody:function(){var ne=te('body',{rid:this.rid++,xmlns:ee.NS.HTTPBIND});return null!==this.sid&&ne.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),ne},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem('strophe-bosh-session'),this._conn.nextValidRid(this.rid)},_connect:function(ne,ae,oe){this.wait=ne||this.wait,this.hold=ae||this.hold,this.errors=0;var se=this._buildBody().attrs({to:this._conn.domain,"xml:lang":'en',wait:this.wait,hold:this.hold,content:'text/xml; charset=utf-8',ver:'1.6',"xmpp:version":'1.0',"xmlns:xmpp":ee.NS.BOSH});oe&&se.attrs({route:oe});var ie=this._conn._connect_cb;this._requests.push(new ee.Request(se.tree(),this._onRequestStateChange.bind(this,ie.bind(this._conn)),se.tree().getAttribute('rid'))),this._throttledRequestHandler()},_attach:function(ne,ae,oe,se,ie,de,le){this._conn.jid=ne,this.sid=ae,this.rid=oe,this._conn.connect_callback=se,this._conn.domain=ee.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=ie||this.wait,this.hold=de||this.hold,this.window=le||this.window,this._conn._changeConnectStatus(ee.Status.ATTACHED,null)},_restore:function(ne,ae,oe,se,ie){var de=JSON.parse(window.sessionStorage.getItem('strophe-bosh-session'));if('undefined'!=typeof de&&null!==de&&de.rid&&de.sid&&de.jid&&('undefined'==typeof ne||null===ne||ee.getBareJidFromJid(de.jid)==ee.getBareJidFromJid(ne)||null===ee.getNodeFromJid(ne)&&ee.getDomainFromJid(de.jid)==ne))this._conn.restored=!0,this._attach(de.jid,de.sid,de.rid,ae,oe,se,ie);else throw{name:'StropheSessionError',message:'_restore: no restoreable session.'}},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem('strophe-bosh-session',JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem('strophe-bosh-session')},_connect_cb:function(ne){var ae=ne.getAttribute('type'),oe,se;if(null!==ae&&'terminate'==ae)return oe=ne.getAttribute('condition'),ee.error('BOSH-Connection failed: '+oe),se=ne.getElementsByTagName('conflict'),null===oe?this._conn._changeConnectStatus(ee.Status.CONNFAIL,'unknown'):('remote-stream-error'==oe&&0<se.length&&(oe='conflict'),this._conn._changeConnectStatus(ee.Status.CONNFAIL,oe)),this._conn._doDisconnect(oe),ee.Status.CONNFAIL;this.sid||(this.sid=ne.getAttribute('sid'));var ie=ne.getAttribute('requests');ie&&(this.window=parseInt(ie,10));var de=ne.getAttribute('hold');de&&(this.hold=parseInt(de,10));var le=ne.getAttribute('wait');le&&(this.wait=parseInt(le,10));var _e=ne.getAttribute('inactivity');_e&&(this.inactivity=parseInt(_e,10))},_disconnect:function(ne){this._sendTerminate(ne)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem('strophe-bosh-session'),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(ne){var ae=this._getRequestStatus(ne),oe;oe=this._conn.protocolErrorHandlers.HTTP[ae],oe&&oe.call(this,ae)},_hitError:function(ne){this.errors++,ee.warn('request errored, status: '+ne+', number of errors: '+this.errors),4<this.errors&&this._conn._onDisconnectTimeout()},_no_auth_received:function(ne){ne=ne?ne.bind(this._conn):this._conn._connect_cb.bind(this._conn);var ae=this._buildBody();this._requests.push(new ee.Request(ae.tree(),this._onRequestStateChange.bind(this,ne.bind(this._conn)),ae.tree().getAttribute('rid'))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var ae;0<this._requests.length;)ae=this._requests.pop(),ae.abort=!0,ae.xhr.abort(),ae.xhr.onreadystatechange=function(){}},_onIdle:function(){var ne=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===ne.length&&!this._conn.disconnecting&&(ee.info('no requests during idle cycle, sending blank request'),ne.push(null)),!this._conn.paused){if(2>this._requests.length&&0<ne.length){for(var ae=this._buildBody(),oe=0;oe<ne.length;oe++)null!==ne[oe]&&('restart'===ne[oe]?ae.attrs({to:this._conn.domain,"xml:lang":'en',"xmpp:restart":'true',"xmlns:xmpp":ee.NS.BOSH}):ae.cnode(ne[oe]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new ee.Request(ae.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),ae.tree().getAttribute('rid'))),this._throttledRequestHandler()}if(0<this._requests.length){var se=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(ee.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),se>Math.floor(ee.TIMEOUT*this.wait)&&(ee.warn('Request '+this._requests[0].id+' timed out, over '+Math.floor(ee.TIMEOUT*this.wait)+' seconds since last activity'),this._throttledRequestHandler())}}},_getRequestStatus:function(ne,ae){var oe;if(4==ne.xhr.readyState)try{oe=ne.xhr.status}catch(se){ee.error('Caught an error while retrieving a request\\\'s status, reqStatus: '+oe)}return'undefined'==typeof oe&&(oe='number'==typeof ae?ae:0),oe},_onRequestStateChange:function(ne,ae){if(ee.debug('request id '+ae.id+'.'+ae.sends+' state changed to '+ae.xhr.readyState),ae.abort)return void(ae.abort=!1);if(4===ae.xhr.readyState){var oe=this._getRequestStatus(ae);if(this.disconnecting&&400<=oe)return this._hitError(oe),void this._callProtocolErrorHandlers(ae);if((0<oe&&500>oe||5<ae.sends)&&(this._removeRequest(ae),ee.debug('request id '+ae.id+' should now be removed')),200==oe){var se=this._requests[0]==ae,ie=this._requests[1]==ae;(ie||se&&0<this._requests.length&&this._requests[0].age()>Math.floor(ee.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(+ae.rid+1),ee.debug('request id '+ae.id+'.'+ae.sends+' got 200'),ne(ae),this.errors=0}else 0===oe||400<=oe&&600>oe||12000<=oe?(ee.error('request id '+ae.id+'.'+ae.sends+' error '+oe+' happened'),this._hitError(oe),this._callProtocolErrorHandlers(ae),400<=oe&&500>oe&&(this._conn._changeConnectStatus(ee.Status.DISCONNECTING,null),this._conn._doDisconnect())):ee.error('request id '+ae.id+'.'+ae.sends+' error '+oe+' happened');(!(0<oe&&500>oe)||5<ae.sends)&&this._throttledRequestHandler()}},_processRequest:function(ne){var ae=this,oe=this._requests[ne],se=this._getRequestStatus(oe,-1);if(oe.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var ie=oe.age(),de=!isNaN(ie)&&ie>Math.floor(ee.TIMEOUT*this.wait),le=null!==oe.dead&&oe.timeDead()>Math.floor(ee.SECONDARY_TIMEOUT*this.wait),_e=4==oe.xhr.readyState&&(1>se||500<=se);if((de||le||_e)&&(le&&ee.error('Request '+this._requests[ne].id+' timed out (secondary), restarting'),oe.abort=!0,oe.xhr.abort(),oe.xhr.onreadystatechange=function(){},this._requests[ne]=new ee.Request(oe.xmlData,oe.origFunc,oe.rid,oe.sends),oe=this._requests[ne]),0===oe.xhr.readyState){ee.debug('request id '+oe.id+'.'+oe.sends+' posting');try{var ue=this._conn.options.contentType||'text/xml; charset=utf-8';oe.xhr.open('POST',this._conn.service,!this._conn.options.sync),'undefined'!=typeof oe.xhr.setRequestHeader&&oe.xhr.setRequestHeader('Content-Type',ue),this._conn.options.withCredentials&&(oe.xhr.withCredentials=!0)}catch(he){return ee.error('XHR open failed.'),this._conn.connected||this._conn._changeConnectStatus(ee.Status.CONNFAIL,'bad-service'),void this._conn.disconnect()}var ce=function(){if(oe.date=new Date,ae._conn.options.customHeaders){var he=ae._conn.options.customHeaders;for(var ge in he)he.hasOwnProperty(ge)&&oe.xhr.setRequestHeader(ge,he[ge])}oe.xhr.send(oe.data)};if(1<oe.sends){var pe=1e3*Math.min(Math.floor(ee.TIMEOUT*this.wait),Math.pow(oe.sends,3));setTimeout(function(){ce()},pe)}else ce();oe.sends++,this._conn.xmlOutput!==ee.Connection.prototype.xmlOutput&&(oe.xmlData.nodeName===this.strip&&oe.xmlData.childNodes.length?this._conn.xmlOutput(oe.xmlData.childNodes[0]):this._conn.xmlOutput(oe.xmlData)),this._conn.rawOutput!==ee.Connection.prototype.rawOutput&&this._conn.rawOutput(oe.data)}else ee.debug('_processRequest: '+(0===ne?'first':'second')+' request has readyState of '+oe.xhr.readyState)},_removeRequest:function(ne){ee.debug('removing request');var ae;for(ae=this._requests.length-1;0<=ae;ae--)ne==this._requests[ae]&&this._requests.splice(ae,1);ne.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(ne){var ae=this._requests[ne];null===ae.dead&&(ae.dead=new Date),this._processRequest(ne)},_reqToData:function(ne){try{return ne.getResponse()}catch(ae){if('parsererror'!=ae)throw ae;this._conn.disconnect('strophe-parsererror')}},_sendTerminate:function(ne){ee.info('_sendTerminate was called');var ae=this._buildBody().attrs({type:'terminate'});ne&&ae.cnode(ne.tree());var oe=new ee.Request(ae.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),ae.tree().getAttribute('rid'));this._requests.push(oe),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?ee.debug('_throttledRequestHandler called with '+this._requests.length+' requests'):ee.debug('_throttledRequestHandler called with undefined requests'),this._requests&&0!==this._requests.length&&(0<this._requests.length&&this._processRequest(0),1<this._requests.length&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},ee}),function(ee,te){J=[$],!(Q=function(ne){return te(ne.Strophe,ne.$build)}.apply(E,J))}(this,function(ee,te){return ee.Websocket=function(ne){this._conn=ne,this.strip='wrapper';var ae=ne.service;if(0!==ae.indexOf('ws:')&&0!==ae.indexOf('wss:')){var oe='';oe+='ws'===ne.options.protocol&&'https:'!==window.location.protocol?'ws':'wss',oe+='://'+window.location.host,oe+=0===ae.indexOf('/')?ae:window.location.pathname+ae,ne.service=oe}},ee.Websocket.prototype={_buildStream:function(){return te('open',{xmlns:ee.NS.FRAMING,to:this._conn.domain,version:'1.0'})},_check_streamerror:function(ne,ae){var oe;if(oe=ne.getElementsByTagNameNS?ne.getElementsByTagNameNS(ee.NS.STREAM,'error'):ne.getElementsByTagName('stream:error'),0===oe.length)return!1;for(var se=oe[0],ie='',le=0,_e;le<se.childNodes.length&&(_e=se.childNodes[le],_e.getAttribute('xmlns')==='urn:ietf:params:xml:ns:xmpp-streams');le++)ie='text'===_e.nodeName?_e.textContent:_e.nodeName;var ue='WebSocket stream error: ';return ue+=ie?ie:'unknown',ee.error(ue),this._conn._changeConnectStatus(ae,ie),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,'xmpp'),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(ne){var ae=this._check_streamerror(ne,ee.Status.CONNFAIL);if(ae)return ee.Status.CONNFAIL},_handleStreamStart:function(ne){var ae=!1,oe=ne.getAttribute('xmlns');'string'==typeof oe?oe!==ee.NS.FRAMING&&(ae='Wrong xmlns in <open />: '+oe):ae='Missing xmlns in <open />';var se=ne.getAttribute('version');return'string'==typeof se?'1.0'!==se&&(ae='Wrong version in <open />: '+se):ae='Missing version in <open />',!ae||(this._conn._changeConnectStatus(ee.Status.CONNFAIL,ae),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(ne){if(0===ne.data.indexOf('<open ')||0===ne.data.indexOf('<?xml')){var ae=ne.data.replace(/^(<\?.*?\?>\s*)*/,'');if(''===ae)return;var oe=new DOMParser().parseFromString(ae,'text/xml').documentElement;this._conn.xmlInput(oe),this._conn.rawInput(ne.data),this._handleStreamStart(oe)&&this._connect_cb(oe)}else if(0===ne.data.indexOf('<close ')){this._conn.rawInput(ne.data),this._conn.xmlInput(ne);var se=ne.getAttribute('see-other-uri');se?(this._conn._changeConnectStatus(ee.Status.REDIRECT,'Received see-other-uri, resetting connection'),this._conn.reset(),this._conn.service=se,this._connect()):(this._conn._changeConnectStatus(ee.Status.CONNFAIL,'Received closing stream'),this._conn._doDisconnect())}else{var ie=this._streamWrap(ne.data),de=new DOMParser().parseFromString(ie,'text/xml').documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(de,null,ne.data)}},_disconnect:function(ne,ae){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED&&(ne&&this._conn.send(ne),!0!==ae)){var oe=te('close',{xmlns:ee.NS.FRAMING});this._conn.xmlOutput(oe);var se=ee.serialize(oe);this._conn.rawOutput(se);try{this.socket.send(se)}catch(ie){ee.info('Couldn\'t send <close /> tag.')}}this._conn._doDisconnect()},_doDisconnect:function(){ee.info('WebSockets _doDisconnect was called'),this._closeSocket()},_streamWrap:function(ne){return'<wrapper>'+ne+'</wrapper>'},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(ne){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(ne){this._conn.connected&&!this._conn.disconnecting?(ee.error('Websocket closed unexpectedly'),this._conn._doDisconnect()):ne&&1006===ne.code&&!this._conn.connected&&this.socket?(ee.error('Websocket closed unexcectedly'),this._conn._changeConnectStatus(ee.Status.CONNFAIL,'The WebSocket connection could not be established or was disconnected.'),this._conn._doDisconnect()):ee.info('Websocket closed')},_no_auth_received:function(ne){ee.error('Server did not send any auth methods'),this._conn._changeConnectStatus(ee.Status.CONNFAIL,'Server did not send any auth methods'),ne&&(ne=ne.bind(this._conn),ne()),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(ne){ee.error('Websocket error '+ne),this._conn._changeConnectStatus(ee.Status.CONNFAIL,'The WebSocket connection could not be established or was disconnected.'),this._disconnect()},_onIdle:function(){if(null!==this.socket){var ne=this._conn._data;if(0<ne.length&&!this._conn.paused){for(var ae=0;ae<ne.length;ae++)if(null!==ne[ae]){var oe,se;oe='restart'===ne[ae]?this._buildStream().tree():ne[ae],se=ee.serialize(oe),this._conn.xmlOutput(oe),this._conn.rawOutput(se),this.socket.send(se)}this._conn._data=[]}}},_onMessage:function(ne){var se='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />',ae,oe;if(ne.data===se)return this._conn.rawInput(se),this._conn.xmlInput(ne),void(this._conn.disconnecting||this._conn._doDisconnect());if(0!==ne.data.search('<open '))oe=this._streamWrap(ne.data),ae=new DOMParser().parseFromString(oe,'text/xml').documentElement;else if(ae=new DOMParser().parseFromString(ne.data,'text/xml').documentElement,!this._handleStreamStart(ae))return;return this._check_streamerror(ae,ee.Status.ERROR)?void 0:this._conn.disconnecting&&'presence'===ae.firstChild.nodeName&&'unavailable'===ae.firstChild.getAttribute('type')?(this._conn.xmlInput(ae),void this._conn.rawInput(ee.serialize(ae))):void this._conn._dataRecv(ae,ne.data)},_onOpen:function(){ee.info('Websocket open');var ne=this._buildStream();this._conn.xmlOutput(ne.tree());var ae=ee.serialize(ne);this._conn.rawOutput(ae),this.socket.send(ae)},_reqToData:function(ne){return ne},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},ee}),function(){J=[$,X,Q],Z=function(te){return te}.apply(E,J),!(Z!==void 0&&(L.exports=Z))}(this)},function(L,E){'use strict';E.a=function(R){const N=R.Strophe;return N.isTagEqual=function(H,B){return(H.tagName||H.node.tagName)===B},N.addConnectionPlugin('streamManagement',{logging:!0,returnWholeStanza:!1,autoSendCountOnEveryIncomingStanza:!1,requestResponseInterval:0,allowResume:!0,_c:null,_NS:'urn:xmpp:sm:3',_isStreamManagementEnabled:!1,_serverProcesssedStanzasCounter:null,_clientProcessedStanzasCounter:null,_clientSentStanzasCounter:null,_originalXMLOutput:null,_requestHandler:null,_incomingHandler:null,_requestResponseIntervalCount:0,_unacknowledgedStanzas:[],_acknowledgedStanzaListeners:[],_counters:{incoming:0,outgoing:0,server:0},addAcknowledgedStanzaListener:function(H){this._acknowledgedStanzaListeners.push(H)},enable:function(H){const B={xmlns:this._NS,resume:this.allowResume};if(H)try{B.max=''+H/1e3}catch(z){console.error(`Couldn't convert '${H}' to milliseconds:`,z)}this._c.send(R.$build('enable',B)),this._c.flush(),this._c.pause()},requestAcknowledgement:function(){this._requestResponseIntervalCount=0,this._c.send(R.$build('r',{xmlns:this._NS}))},getOutgoingCounter:function(){return this._counters.outgoing},getServerProcessedCounter:function(){return this._counters.server},getIncomingCounter:function(){return this._counters.incoming},init:function(H){this._c=H,N.addNamespace('SM',this._NS);const B=localStorage.getItem(this._c.options.instance_id+'_counters');if(null!==B){let z=null;try{z=JSON.parse(B)}catch(W){}null!==z&&(this._counters=z)}this._originalXMLOutput=this._c.xmlOutput,this._c.xmlOutput=this.xmlOutput.bind(this)},statusChanged:function(H,B){(H===N.Status.CONNECTED||H===N.Status.DISCONNECTED)&&(this._requestResponseIntervalCount=0,this._isStreamManagementEnabled=!1,H===N.Status.CONNECTED&&'resumed'!==B&&this._resetCounters(),H===N.Status.CONNECTED&&'resumed'===B&&(this._isStreamManagementEnabled=!0),this._unacknowledgedStanzas=[],this._requestHandler&&this._c.deleteHandler(this._requestHandler),this._incomingHandler&&this._c.deleteHandler(this._incomingHandler),this._requestHandler=this._c.addHandler(this._handleServerRequestHandler.bind(this),this._NS,'r'),this._incomingHandler=this._c.addHandler(this._incomingStanzaHandler.bind(this),null,null))},xmlOutput:function(H){function B(G){return N.isTagEqual(G,'iq')||N.isTagEqual(G,'presence')||N.isTagEqual(G,'message')}if(B(H))this._increaseSentStanzasCounter(H);else if(void 0!==H.children)for(var W=0,z;W<H.children.length;W++)z=H.children[W],B()&&this._increaseSentStanzasCounter(z);return this._originalXMLOutput.call(this._c,H)},_incomingStanzaHandler:function(H){if(N.isTagEqual(H,'enabled')&&H.getAttribute('xmlns')===this._NS&&(this._isStreamManagementEnabled=!0,this._c.resume()),(N.isTagEqual(H,'iq')||N.isTagEqual(H,'presence')||N.isTagEqual(H,'message'))&&(this._increaseReceivedStanzasCounter(),this.autoSendCountOnEveryIncomingStanza&&this._answerProcessedStanzas(),N.isTagEqual(H,'message')&&'error'===H.getAttribute('type')&&--this._counters.outgoing),N.isTagEqual(H,'a')){var B=parseInt(H.getAttribute('h'));this._handleAcknowledgedStanzas(B,this._counters.server),this._counters.server=B,this._persistCounters(),0<this.requestResponseInterval&&(this._requestResponseIntervalCount=0)}return!0},_handleAcknowledgedStanzas:function(H,B){var z=H-B;0>z&&this._throwError('New reported stanza count lower than previous. New: '+H+' - Previous: '+B),z>this._unacknowledgedStanzas.length&&this._throwError('Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledge Count: '+z+' - Unacknowledge Stanza Count: '+this._unacknowledgedStanzas.length+' - New: '+H+' - Previous: '+B);for(var W=0,G;W<z;W++){G=this._unacknowledgedStanzas.shift();for(var J=0;J<this._acknowledgedStanzaListeners.length;J++)this._acknowledgedStanzaListeners[J](G)}this.logging&&0<this._unacknowledgedStanzas.length&&console.warn('Unacknowledged stanzas',this._unacknowledgedStanzas)},_handleServerRequestHandler:function(){return this._answerProcessedStanzas(),!0},_answerProcessedStanzas:function(H){(this._isStreamManagementEnabled||!0===H)&&this._c.send(R.$build('a',{xmlns:this._NS,h:this._counters.incoming}))},_increaseSentStanzasCounter:function(H){this._isStreamManagementEnabled&&(this._unacknowledgedStanzas.push(this.returnWholeStanza?H:H.getAttribute('id')),this._counters.outgoing++,this._persistCounters(),0<this.requestResponseInterval&&(this._requestResponseIntervalCount++,this._requestResponseIntervalCount===this.requestResponseInterval&&this.requestAcknowledgement()))},_increaseReceivedStanzasCounter:function(){this._isStreamManagementEnabled&&(this._counters.incoming++,this._persistCounters())},_persistCounters:function(){localStorage.setItem(this._c.options.instance_id+'_counters',JSON.stringify(this._counters))},_resetCounters:function(){this._counters={incoming:0,outgoing:0,server:0},this._persistCounters()},_throwError:function(H){console.error(H)}}),R}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(69),R=A(31);E.UsersDirectory=class{constructor(H,B=!1){this._instanceId=null,this._worker=null,this._debug=!1,this._db=null,this._dbName=null,this.initialised=!1,this._workerResponseListeners={},this._instanceId=H,this._debug=B,this._dbName=`${H}_user_index`}_onWorkerResponse(H){if(H.data&&this._debug,H.data._id){const B=this._workerResponseListeners[H.data._id];if(!B)return;const z=B(H.data);!0!==z&&delete this._workerResponseListeners[H.data._id]}else switch(H.data.action){case'store-record':const B=this._db.transaction([this._dbName],'readwrite');B.oncomplete=()=>{this._postMessageToWorker({action:'store-record-response',success:!0,key:H.data.key})},B.onerror=(W)=>{console.error(`Failed to put '${H.data.key}'.`),this._postMessageToWorker({key:H.data.key,action:'store-record-response',success:!1,msg:W.toString()})},B.objectStore(this._dbName).put(H.data.record,H.data.key);break;case'retrieve-record':const z=this._db.transaction([this._dbName]).objectStore(this._dbName).get(H.data.key);z.onsuccess=()=>{this._postMessageToWorker({action:'retrieve-record-response',success:!0,key:H.data.key,record:z.result})},z.onerror=(W)=>{console.error(`Failed to get ${H.data.key}:`,W),this._postMessageToWorker({key:H.data.key,action:'retrieve-record-response',success:!1,msg:W.toString(),record:null})};}}_postMessageToWorker(H,B){if(null===this._worker)throw new Error('Worker has not been initialised!');const z=R.generateGuid();B&&(this._workerResponseListeners[z]=B),this._worker.postMessage(Object.assign({},H,{_id:z}))}initialise(H,B){return new Promise((z,W)=>{const G=indexedDB.open(this._dbName);G.onupgradeneeded=(J)=>{J.target.result.createObjectStore(this._dbName)},G.onerror=(J)=>{console.error('Couldn\'t open IndexedDB database.',J)},G.onsuccess=(J)=>{this._db=J.target.result,this._worker=new Worker(window.URL.createObjectURL(new Blob([`const start = ${I.default.toString()}; start.call(self);`],{type:'text/javascript'}))),this._worker.onmessage=this._onWorkerResponse.bind(this),this._postMessageToWorker({action:'initialise',instanceId:this._instanceId,key:H,iv:B,debug:this._debug},(K)=>{return!0===K.success?(this.initialised=!0,z(K.msg)):(console.error(K.msg),this.initialised=!1,this.destroy(!0).then(()=>{W(K.msg)})),!1})}})}update(H,B,z){if(!0!==this.initialised)throw new Error('User index must be initialised first.');return new Promise((W,G)=>{this._postMessageToWorker({action:'fetch',endpoint:z,jid:H,pass:B},(J)=>{return!0===J.success?W(J):(console.error(J.msg),G(J.msg)),!1})})}search(H,B){if(!0!==this.initialised)throw new Error('User index must be initialised first.');return new Promise((z,W)=>{this._postMessageToWorker({action:'search',query:H,fields:B||[]},(G)=>{return!0===G.success?z(G.results):(console.error(G.msg),W(G.msg)),!1})})}getUserByJid(H){if(!0!==this.initialised)throw new Error('User index must be initialised first.');return new Promise((B,z)=>{this._postMessageToWorker({action:'jid-search',jid:H},(W)=>{return!0===W.success?B(W.result):(console.error(W.msg),z(W.msg)),!1})})}getAllUsers(H=!1){if(!0!==this.initialised)throw new Error('User index must be initialised first.');return new Promise((B,z)=>{this._postMessageToWorker({action:'get-all-users'},(W)=>{return!0===W.success?H?B(W.results.filter((G)=>!G.deleted)):B(W.results):(console.error(W.msg),z(W.msg)),!1})})}destroy(H=!1){if(!0!==this.initialised&&!1===H)throw new Error('User index must be initialised first.');return new Promise((B,z)=>{this._db.close();const W=indexedDB.deleteDatabase(this._dbName);W.onerror=()=>{z('Error deleting user directory database.')},W.onsuccess=()=>{this._db=null,this.initialised=!1,B()},W.onblocked=()=>{z('Couldn\'t delete user directory database due to the operation being blocked.')}})}static _resolvePath(H){return H?0===H.indexOf('http')||0===H.indexOf('//')?H:0===H.indexOf('/')?window.location.origin+H:`${window.location.origin}/${H}`:null}}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class I{constructor(R,N,H,B=!0){this._id=null,this._timeout=-1,this._startTime=-1,this._totalTimeRun=-1,this._complete=!1,this._duration=-1,this._callback=null,this._paused=!1,this._pauseable=!1,this._id=R,this._duration=H,this._callback=N,this._startTime=new Date().getTime(),this._timeout=setTimeout(this._callback,this._duration),this._pauseable=!1!==B}_timeDiff(R){return new Date().getTime()-R}cancel(){clearTimeout(this._timeout),this._paused=!1}pause(){clearTimeout(this._timeout),this._totalTimeRun=this._timeDiff(this._startTime),this._complete=this._totalTimeRun>=this._duration,this._complete||(this._paused=!0)}resume(){this._paused=!1,this._timeout=this._complete?-1:setTimeout(this._callback,this._duration-this._totalTimeRun)}end(){this._paused=!1,clearTimeout(this._timeout),this._callback()}restart(){this._paused=!1,this._startTime=new Date().getTime(),this._timeout=setTimeout(this._callback,this._duration)}get paused(){return this._paused}get pauseable(){return this._pauseable}get id(){return this._id}}E.default=I},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class I{constructor(){this.nsResolve=function(R){return'vc'==R?'vcard-temp':null},this.json={}}static fromXml(R){const N=new I;try{N.initFromXML(R)}catch(H){return console.error('Bad vCard: '+H),void 0}return N}static fromJSON(R){const N=new I;return N.initFromJSON(R),N}_extractEmail(R){const N={};return'string'==typeof R.USERID&&(N.address=R.USERID),R.HOME&&(N.home=!0),R.WORK&&(N.work=!0),R.INTERNET&&(N.internet=!0),R.PREF&&(N.pref=!0),R.X400&&(N.x400=!0),N}_extractTelephone(R){const N={};return'string'==typeof R.NUMBER&&(N.number=R.NUMBER),R.HOME&&(N.home=!0),R.WORK&&(N.work=!0),R.VOICE&&(N.voice=!0),R.FAX&&(N.fax=!0),R.PAGER&&(N.pager=!0),R.MSG&&(N.msg=!0),R.CELL&&(N.cell=!0),R.VIDEO&&(N.video=!0),R.BBS&&(N.bbs=!0),R.MODEM&&(N.modem=!0),R.ISDN&&(N.isdn=!0),R.PCS&&(N.pcs=!0),R.PREF&&(N.pref=!0),N}_extractAddress(R){const N={};return'string'==typeof R.POBOX&&(N.poBox=R.POBOX),'string'==typeof R.EXTADD&&(N.extraAddress=R.EXTADD),'string'==typeof R.STREET&&(N.street=R.STREET),'string'==typeof R.LOCALITY&&(N.locality=R.LOCALITY),'string'==typeof R.REGION&&(N.locality=R.REGION),'string'==typeof R.PCODE&&(N.locality=R.PCODE),'string'==typeof R.CTRY&&(N.locality=R.CTRY),R.WORK&&(N.work=!0),R.HOME&&(N.home=!0),R.POSTAL&&(N.postal=!0),R.PARCEL&&(N.parcel=!0),R.DOM&&(N.dom=!0),R.INTL&&(N.intl=!0),R.PREF&&(N.pref=!0),N}initFromXML(R){const N={};'string'==typeof R.VERSION&&(N.version=R.VERSION),'string'==typeof R.FN&&(N.fullName=R.FN),'object'!=typeof R.N||Array.isArray(R.N)||(N.name={},'string'==typeof R.N.FAMILY&&(N.name.family=R.N.FAMILY),'string'==typeof R.N.GIVEN&&(N.name.given=R.N.GIVEN),'string'==typeof R.N.MIDDLE&&(N.name.middle=R.N.MIDDLE),'string'==typeof R.N.PREFIX&&(N.name.prefix=R.N.PREFIX),'string'==typeof R.N.SUFFIX&&(N.name.suffix=R.N.SUFFIX)),'string'==typeof R.NICKNAME&&(N.nickName=R.NICKNAME),'object'!=typeof R.PHOTO||Array.isArray(R.PHOTO)||(N.photo={},'string'==typeof R.PHOTO.TYPE&&(N.photo.type=R.PHOTO.TYPE),'string'==typeof R.PHOTO.BINVAL&&(N.photo.binval=R.PHOTO.BINVAL)),'string'==typeof R.BDAY&&(N.birthday=R.BDAY),'object'==typeof R.ADR&&(N.address=[],Array.isArray(R.ADR)?R.ADR.forEach((H)=>{N.address.push(this._extractAddress(H))}):N.address.push(this._extractAddress(R.ADR))),'object'==typeof R.TEL&&(N.telephone=[],Array.isArray(R.TEL)?R.TEL.forEach((H)=>{N.telephone.push(this._extractTelephone(H))}):N.telephone.push(this._extractTelephone(R.TEL))),'object'==typeof R.EMAIL&&(N.email=[],Array.isArray(R.EMAIL)?R.EMAIL.forEach((H)=>{N.email.push(this._extractEmail(H))}):N.email.push(this._extractEmail(R.EMAIL))),'string'==typeof R.JABBERID&&(N.jabberId=R.JABBERID),'string'==typeof R.MAILER&&(N.mailer=R.MAILER),'string'==typeof R.TZ&&(N.timeZone=R.TZ),'object'!=typeof R.GEO||Array.isArray(R.GEO)||(N.geolocation={},'string'==typeof R.GEO.LAT&&(N.geolocation.lat=R.GEO.LAT),'string'==typeof R.GEO.LON&&(N.geolocation.lng=R.N.GIVEN)),'string'==typeof R.TITLE&&(N.title=R.TITLE),'string'==typeof R.ROLE&&(N.role=R.ROLE),'object'!=typeof R.LOGO||Array.isArray(R.LOGO)||(N.logo={},'string'==typeof R.LOGO.TYPE&&(N.logo.type=R.PHOTO.TYPE),'string'==typeof R.PHOTO.BINVAL&&(N.logo.binval=R.PHOTO.BINVAL),'string'==typeof R.PHOTO.EXTVAL&&(N.logo.extval=R.PHOTO.EXTVAL)),'object'!=typeof R.AGENT||Array.isArray(R.AGENT)||(N.agent={},'string'==typeof R.AGENT.EXTVAL&&(N.agent.extval=R.AGENT.EXTVAL)),'object'!=typeof R.ORG||Array.isArray(R.ORG)||(N.organisation={},'string'==typeof R.ORG.ORGNAME&&(N.organisation.name=R.ORG.ORGNAME),'string'==typeof R.ORG.ORGUNIT&&(N.organisation.unit=R.ORG.ORGUNIT)),'object'==typeof R.CATEGORIES&&(N.categories=[],Array.isArray(R.CATEGORIES)?R.CATEGORIES.forEach((H)=>{N.categories.push({keyword:H.KEYWORD})}):N.telephone.push({keyword:R.CATEGORIES.KEYWORD})),'string'==typeof R.NOTE&&(N.note=R.NOTE),'string'==typeof R.PRODID&&(N.prodid=R.PRODID),'string'==typeof R.REV&&(N.rev=R.REV),'string'==typeof R['SORT-STRING']&&(N.sortString=R['SORT-STRING']),'object'!=typeof R.SOUND||Array.isArray(R.SOUND)||(N.sound={},'string'==typeof R.SOUND.PHONETIC&&(N.sound.phonetic=R.SOUND.PHONETIC),'string'==typeof R.SOUND.BINVAL&&(N.sound.binval=R.SOUND.BINVAL),'string'==typeof R.SOUND.EXTVAL&&(N.sound.extval=R.SOUND.EXTVAL)),'string'==typeof R.UID&&(N.uid=R.UID),'string'==typeof R.URL&&(N.url=R.URL),'string'==typeof R.DESC&&(N.description=R.DESC),'object'!=typeof R.CLASS||Array.isArray(R.CLASS)||(R.CLASS.PUBLIC&&(N.classification='public'),R.CLASS.PRIVATE&&(N.classification='private'),R.CLASS.CONFIDENTIAL&&(N.classification='confidential')),'object'!=typeof R.KEY||Array.isArray(R.KEY)||(N.key={},'string'==typeof R.KEY.CRED&&(N.key.credential=R.KEY.CRED),'string'==typeof R.KEY.TYPE&&(N.key.type=R.KEY.TYPE)),this.json=N}initFromJSON(R){this.json=R}toJSON(){return this.json}toXML(R){const N=new DOMParser().parseFromString('<vCard xmlns="vcard-temp"/>','text/xml'),H=N.firstElementChild;if(this.json.fullName&&this.addNode(H,'FN',this.json.fullName),this.json.name){const z=this.addNode(H,'N');this.json.name.family&&this.addNode(z,'FAMILY',this.json.name.family),this.json.name.given&&this.addNode(z,'GIVEN',this.json.name.given),this.json.name.middle&&this.addNode(z,'MIDDLE',this.json.name.middle),this.json.name.prefix&&this.addNode(z,'PREFIX',this.json.name.prefix),this.json.name.suffix&&this.addNode(z,'SUFFIX',this.json.name.suffix)}if(this.json.nickName&&this.addNode(H,'NICKNAME',this.json.nickName),this.json.photo){const z=this.addNode(H,'PHOTO');this.json.photo.type&&this.addNode(z,'TYPE',this.json.photo.type),this.json.photo.binval&&this.addNode(z,'BINVAL',this.json.photo.binval)}if(this.json.birthday&&this.addNode(H,'BDAY',this.json.birthday),this.json.address&&this.json.address.forEach((z)=>{const W=this.addNode(H,'ADR');z.home&&this.addNode(W,'HOME'),z.work&&this.addNode(W,'WORK'),z.postal&&this.addNode(W,'POSTAL'),z.parcel&&this.addNode(W,'PARCEL'),z.dom&&this.addNode(W,'DOM'),z.intl&&this.addNode(W,'INTL'),z.pref&&this.addNode(W,'PREF'),z.poBox&&this.addNode(W,'POBOX',z.poBox),z.extraAddress&&this.addNode(W,'EXTADD',z.extraAddress),z.street&&this.addNode(W,'STREET',z.street),z.locality&&this.addNode(W,'LOCALITY',z.locality),z.region&&this.addNode(W,'REGION',z.region),z.postcode&&this.addNode(W,'PCODE',z.postcode),z.country&&this.addNode(W,'CTRY',z.country)}),this.json.telephone&&this.json.telephone.forEach((z)=>{const W=this.addNode(H,'TEL');z.home&&this.addNode(W,'HOME'),z.work&&this.addNode(W,'WORK'),z.voice&&this.addNode(W,'VOICE'),z.fax&&this.addNode(W,'FAX'),z.pager&&this.addNode(W,'PAGER'),z.msg&&this.addNode(W,'MSG'),z.cell&&this.addNode(W,'CELL'),z.video&&this.addNode(W,'VIDEO'),z.bbs&&this.addNode(W,'BBS'),z.modem&&this.addNode(W,'MODEM'),z.isdn&&this.addNode(W,'ISDN'),z.pcs&&this.addNode(W,'PCS'),z.pref&&this.addNode(W,'PREF'),z.number&&this.addNode(W,'NUMBER',z.number)}),this.json.email&&this.json.email.forEach((z)=>{const W=this.addNode(H,'EMAIL');z.home&&this.addNode(W,'HOME'),z.work&&this.addNode(W,'WORK'),z.internet&&this.addNode(W,'INTERNET'),z.pref&&this.addNode(W,'PREF'),z.x400&&this.addNode(W,'X400'),z.address&&this.addNode(W,'USERID',z.address)}),this.json.jabberId&&this.addNode(H,'JABBERID',this.json.jabberId),this.json.mailer&&this.addNode(H,'MAILER',this.json.mailer),this.json.timeZone&&this.addNode(H,'TZ',this.json.timeZone),this.json.geolocation){const z=this.addNode(H,'GEO');this.json.geolocation.lat&&this.addNode(z,'LAT',this.json.geolocation.lat),this.json.geolocation.lng&&this.addNode(z,'LON',this.json.geolocation.lng)}if(this.json.title&&this.addNode(H,'TITLE',this.json.title),this.json.role&&this.addNode(H,'ROLE',this.json.role),this.json.logo){const z=this.addNode(H,'LOGO');this.json.logo.type&&this.addNode(z,'TYPE',this.json.logo.type),this.json.logo.binval&&this.addNode(z,'BINVAL',this.json.logo.binval),this.json.logo.extval&&this.addNode(z,'EXTVAL',this.json.logo.extval)}if(this.json.organisation){const z=this.addNode(H,'ORG');this.json.organisation.name&&this.addNode(z,'ORGNAME',this.json.organisation.name),this.json.organisation.unit&&this.addNode(z,'ORGUNIT',this.json.organisation.unit)}if(this.json.categories&&this.json.categories.forEach((z)=>{const W=this.addNode(H,'CATEGORIES');z.keyword&&this.addNode(W,'KEYWORD',z.keyword)}),this.json.note&&this.addNode(H,'NOTE',this.json.note),this.json.productId&&this.addNode(H,'PRODID',this.json.productId),this.json.lastRevised&&this.addNode(H,'REV',this.json.lastRevised),this.json.sortString&&this.addNode(H,'SORT-STRING',this.json.sortString),this.json.sound){const z=this.addNode(H,'SOUND');this.json.sound.phonetic&&this.addNode(z,'PHONETIC',this.json.sound.phonetic),this.json.sound.extval&&this.addNode(z,'EXTVAL',this.json.sound.extval),this.json.sound.binval&&this.addNode(z,'BINVAL',this.json.sound.binval)}if(this.json.uid&&this.addNode(H,'UID',this.json.uid),this.json.url&&this.addNode(H,'URL',this.json.url),this.json.description&&this.addNode(H,'DESC',this.json.description),this.json.classification){const z=this.addNode(H,'CLASS');'public'===this.json.classification&&this.addNode(z,'PUBLIC'),'private'===this.json.classification&&this.addNode(z,'PRIVATE'),'confidential'===this.json.classification&&this.addNode(z,'CONFIDENTIAL')}if(this.json.key){const z=this.addNode(H,'KEY');this.json.key.credential&&this.addNode(z,'CRED',this.json.key.credential),this.json.key.type&&this.addNode(z,'TYPE',this.json.key.type)}let B='';if(R)B=new XMLSerializer().serializeToString(N);else{const z=N.children[0];for(let W=0;W<z.childElementCount;W++){console.log(z.childNodes.item(W));const G=new XMLSerializer().serializeToString(z.childNodes.item(W));B+=G}}return B}addNode(R,N,H){const B=R.ownerDocument.createElement(N);return R.appendChild(B),void 0!==H&&(B.textContent=H),B}}E.VCardSimple=I},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(21),N=A(45),H=A(17),B=A(193),z=A(1),W=A(9),G=A(25),J=A(3),K=A(9),$=A(4);class X{constructor(Q,Z){if(this.messageQueueProcessorDebounce=null,this.suppressMode=!1,this._messageHandlers=new Map,this._messageProcessorQueue=Promise.resolve(),this._suppressModeQueue=[],this._deferredStanzas=[],this._waitingAlertId=null,this._isProcessing=!1,!Z)throw new Error('You must supply a config object');Z.i18n&&Z.i18n.enabled?J.setLocale(Z.i18n.locale||Z.i18n.language||'en-GB'):J.setLocale('en-GB'),this.name=Q,this.config=Z,this._eventListeners={},this.logger=new H.Logger(this.config.logging||[]),this._setUpHandlers(),document.addEventListener('backbutton',()=>{this._backHandler&&this._backHandler()},!1),N.LayerRegistration.addInstance(this.name,this)}static getInstance(Q){return N.LayerRegistration.getInstance(Q)}static onReady(Q,Z){N.LayerRegistration.onReady(Q,Z)}moveTaskToBack(){this.emit(K.BaseEvents.MoveTaskToBack)}setBackHandler(Q){this._oldBackHandler=this._backHandler,this._backHandler=Q}popBackHandler(){this._backHandler=this._oldBackHandler}isProcessing(){return this._isProcessing}bootstrap(Q,Z){return this._buildCommonComponents(),Promise.resolve().then(()=>this._setStore(Z)).then(()=>this._setLogger()).then(()=>this._setComms(Q)).then(()=>this._setupPushNotifications()).then(()=>this._setupCommonEventListeners()).then(()=>N.LayerRegistration.fireReady(this.name)).catch((ee)=>{N.LayerRegistration.fireReady(this.name),setTimeout(()=>{this.error('Error during bootstrap',ee)},100)})}on(Q,Z,ee=!1,te=!1){void 0===this._eventListeners[Q]&&(this._eventListeners[Q]=[]);const ne=J.generateRandomSixString();return this._eventListeners[Q].push({id:ne,oneTimeOnly:ee,allowSuppress:te,callback:(oe)=>I(this,void 0,void 0,function*(){yield Z(oe.detail)})}),()=>{const oe=this._eventListeners[Q].findIndex((se)=>se.id===ne);if(-1!==oe)return this._eventListeners[Q].splice(oe,1)[0]}}emit(Q,Z,ee=!1){return I(this,void 0,void 0,function*(){const te=[Promise.resolve()];this._eventListeners[Q]||(this._eventListeners[Q]=[]),this.logger.log(H.LoggerTypes.Events,`%c RAISING EVENT:%c ${Q} (${this._eventListeners[Q].length} listeners)`,'color: #066; font-weight: bold;','color: #999; font-weight: normal;',{data:Z});const ne=[];for(let ae=0;ae<this._eventListeners[Q].length;ae++){const oe=this._eventListeners[Q][ae];this.suppressMode&&oe.allowSuppress&&!ee||te.push(oe.callback({detail:Z})),!0===oe.oneTimeOnly&&ne.push(ae)}ne.length&&(this._eventListeners[Q]=this._eventListeners[Q].filter((ae,oe)=>!ne.includes(oe))),yield Promise.all(te)})}login(Q,Z){return I(this,void 0,void 0,function*(){return yield this.comms.login(Q,Z)})}attemptReconnect(){this.comms.attemptReconnect()}logout(Q=!1,Z=!0){return I(this,void 0,void 0,function*(){return yield this.comms.logout(Q,Z)})}getSyncedTimestamp(){return this.comms.getSyncedTimestamp()}getConnectionStatus(){return this.comms.getConnectionStatus()}clearAllData(Q=!1){return I(this,void 0,void 0,function*(){try{yield this.store.clearAllData(),yield this.comms.clearAllData(Q)}catch(Z){this.error('Error clearing data',Z)}})}getCurrentUserJid(){return this.comms.username}getCurrentUserResource(){return this.comms.getCurrentUserResource()}getCurrentUser(){return null}getCurrentXmppDisplayName(){return this.comms.username}updateUserDirectory(){return I(this,void 0,void 0,function*(){yield this.comms.updateUserDirectory()})}getUserByJid(Q){return I(this,void 0,void 0,function*(){return yield this.comms.getUserByJid(Q)})}searchUsers(Q='',Z=[]){return I(this,void 0,void 0,function*(){return yield this.comms.searchUsers(Q,Z)})}markChatEntryRead(Q){return I(this,void 0,void 0,function*(){yield this.comms.markMessageRead(Q.id)})}downloadMessageAttachments(Q){return I(this,void 0,void 0,function*(){return Q.attachments&&0!==Q.attachments.length?this.comms.downloadMessageAttachments(Q.id):void 0})}downloadFile(Q){return I(this,void 0,void 0,function*(){try{return yield this.comms.downloadFile(Q)}catch(Z){this.error('Error downloading file',Z)}})}downloadFileWithoutCatch(Q,Z=!1){return I(this,void 0,void 0,function*(){return yield this.comms.downloadFile(Q,Z)})}processXmlStanzaStringsFromMam(Q,Z=!0){return I(this,void 0,void 0,function*(){try{return yield this.comms.processXmlStanzaStringsFromMam(Q,Z)}catch(ee){this.error('Error processing XML stanzas from MAM',ee)}})}error(Q,Z,ee=null){return I(this,void 0,void 0,function*(){yield this.cancelSuppressMode('*'),this.dismissWaitingMessage();const te='string'==typeof Z?Z:Z.message||'Unknown error';this.emit(W.BaseEvents._Request_RaiseAlert,new z.DefaultAlerts(this).AlertErrorWithOkayButton(Q,te,1,{})),this.logger.error(ee||Z)})}getLabel(Q,Z){if(!this.config.labels||!this.config.labels[Q])return null;const ee=this.translate(this.config.labels[Q],!1);return J.tokenReplace(ee,Z)}translate(Q,Z=!1){if(!this.config.i18n||!0!==this.config.i18n.enabled||'function'!=typeof this.config.i18n.translateFn)return Q;if('undefined'!=typeof Q){if(null===Q)return null;if(''===Q)return'';const ee=this.config.i18n.translateFn(Q);return null===ee?!0===Z?null:this.config.i18n.debugMode?` ${Q} `:Q:ee}}translateI18nItem(Q){if(!this.config.i18n||!0!==this.config.i18n.enabled)return Q.key;const Z=this.translate(Q.scopedKey,!0);return null===Z?this.translate(Q.key):Z}getUniqueCommsId(){return this.comms.getUniqueId()}sendMessage(Q,Z,ee,te=[],ne=!1){return I(this,void 0,void 0,function*(){const ae=J.deepCloneObject(ee),oe=yield this._prepareMessage(Q,ae);if(null===oe)return null;try{const se=yield this.comms.sendMessage(Z,oe,te);return J.parseMessagePayload(se,Q)}catch(se){if(ne)throw se;else this.error('Error sending message',se)}})}sendRoomChatMessage(Q,Z,ee=[],te=!0,ne=!1){return I(this,void 0,void 0,function*(){try{return yield this.comms.sendRoomMessage(Q,Z,null,ee,te)}catch(ae){if(ne)throw ae;else this.error('Error sending room chat message',ae)}})}sendRoomMessage(Q,Z,ee,te=!1){return I(this,void 0,void 0,function*(){const ne=J.deepCloneObject(ee),ae=yield this._prepareMessage(Z,ne);if(null===ae)return null;try{const oe=yield this.comms.sendRoomMessage(Q,null,ae);return J.parseMessagePayload(oe,Z)}catch(oe){if(te)throw oe;else this.error('Error sending room message',oe)}})}sendMulticastMessage(Q,Z,ee,te=[],ne=!1){return I(this,void 0,void 0,function*(){const ae=J.deepCloneObject(Z),oe=yield this._prepareMessage(Q,ae);if(null===oe)return null;try{const se=yield this.comms.sendMulticastMessage(ee,oe,te);return J.parseMessagePayload(se,Q)}catch(se){if(ne)throw se;else'object'==typeof se?(this.logger.error(se),this._workOutIfAttachmentTooLarge(se)):this.error('Error sending multicast message',se)}})}sendIq(Q,Z,ee,te,ne=!1){return I(this,void 0,void 0,function*(){const ae=J.deepCloneObject(te),oe=this._getHandlerForMessageType(ee);if(!oe)return null;const se=yield this._prepareIq(ee,ae);if(null===se)return null;let ie=null;try{ie=yield this.comms.sendIq(Q,Z,se)}catch(de){const le=de;if(ne)throw le;else return yield oe.callHandleIqErrorResponse(ae,le)}try{return yield oe.callHandleIqResponse(ae,ie)}catch(de){const le=new G.IQError(de.message||de,ie);if(ne)throw le;else return yield oe.callHandleIqErrorResponse(ae,le)}})}sendMessageToBot(Q,Z,ee=!1){return I(this,void 0,void 0,function*(){const te=J.deepCloneObject(Z);try{yield this._sendBotCommand(Q,te,null)}catch(ne){if(ee)throw ne;else this.error('Error sending bot message',ne)}})}sendBotCommand(Q,Z,ee=!1){return I(this,void 0,void 0,function*(){const te=J.deepCloneObject(Z);try{return yield this.comms.sendBotCommand(Q.toString(),te)}catch(ne){if(ee)throw ne;else this.error('Error sending bot command',ne)}})}setSupportLoggingTypes(Q=['_all_']){return I(this,void 0,void 0,function*(){return this.logger.setTypes(Q),yield this.store.saveLoggerTypes(Q)})}resetSupportLogging(){return I(this,void 0,void 0,function*(){return this.logger.resetTypes(),yield this.store.deleteLoggerTypes()})}showWaitingMessage(Q){return I(this,void 0,void 0,function*(){yield this.dismissWaitingMessage();const Z=new z.DefaultAlerts(this).AlertWaiting(Q);this._waitingAlertId=Z.id,this._alertModalManager.raiseAlert(Z)})}dismissWaitingMessage(){return I(this,void 0,void 0,function*(){this._waitingAlertId&&(this._alertModalManager.dismissAlertById(this._waitingAlertId),this._waitingAlertId=null)})}enableSuppressMode(Q,Z=!1){if('*'===Q)throw new Error('Suppress mode cannot be enabled with the id \'*\'');Z&&this._suppressModeQueue.includes(Q)?this.logger.log(H.LoggerTypes.Other,`%c SUPPRESSION MODE ALREADY EXISTS IN QUEUE %c${Q}`,'color: #696; font-weight: bold;','color: #999; font-weight: normal;'):(this.logger.log(H.LoggerTypes.Other,`%c ADDING TO SUPPRESSION MODE QUEUE %c${Q}`,'color: #696; font-weight: bold;','color: #999; font-weight: normal;'),this._suppressModeQueue.push(Q)),this.logger.log(H.LoggerTypes.Other,'%c\uD83D\uDD07 SUPPRESSION MODE QUEUE','color: #696; font-weight: bold;',this._suppressModeQueue),this.suppressMode||(this.logger.log(H.LoggerTypes.Other,'%c\uD83D\uDD07 ENTERING SUPPRESSION MODE','color: #696; font-weight: bold;'),this.suppressMode=!0)}cancelSuppressMode(Q){return I(this,void 0,void 0,function*(){if(0!==this._suppressModeQueue.length)return this._messageProcessorQueue=this._messageProcessorQueue.then(()=>{return new Promise((Z)=>{if('*'===Q)this.logger.log(H.LoggerTypes.Other,'%c\uD83D\uDD07 CLEARING SUPPRESSION MODE QUEUE','color: #696; font-weight: bold;'),this._suppressModeQueue=[],this.suppressMode=!1;else{const ee=this._suppressModeQueue.indexOf(Q);-1!==ee&&(this.logger.log(H.LoggerTypes.Other,`%c REMOVING FROM SUPPRESSION MODE QUEUE %c${Q}`,'color: #696; font-weight: bold;','color: #999; font-weight: normal;'),this._suppressModeQueue.splice(ee,1),this.logger.log(H.LoggerTypes.Other,'%c\uD83D\uDD07 SUPPRESSION MODE QUEUE','color: #696; font-weight: bold;',this._suppressModeQueue))}if(!0===this.suppressMode&&0===this._suppressModeQueue.length){if(this.logger.log(H.LoggerTypes.Other,'%c\uD83D\uDD0A EXITING SUPPRESSION MODE','color: #696; font-weight: bold;'),this.suppressMode=!1,0<this._deferredStanzas.length){const ee=[...this._deferredStanzas],te=ee.filter((ne)=>ne.eventType===R.CtXmppClient.EVENT_TYPES.NEW_MESSAGE).map((ne)=>ne.payload.data);this._deferredStanzas=[],this.logger.log(H.LoggerTypes.Other,`%c HANDLING ${te.length} DEFERRED MESSAGE(S) RECEIVED DURING SUPPRESSED MODE`,'color: #696; font-weight: bold;',te),ee.forEach((ne)=>{switch(ne.eventType){case R.CtXmppClient.EVENT_TYPES.NEW_MESSAGE:this.handleNewMessage(ne.payload);break;case R.CtXmppClient.EVENT_TYPES.MESSAGE_UPDATED:this.handleMessageUpdate(ne.payload);break;case R.CtXmppClient.EVENT_TYPES.RECEIPT_RECEIVED:this.handleChatMarkerUpdate(ne.payload);}})}else this.logger.log(H.LoggerTypes.Other,`%c NO MESSAGES RECEIVED DURING SUPPRESSED MODE`,'color: #696; font-weight: bold;');this.logger.log(H.LoggerTypes.Other,'%c\uD83C\uDFA8 REDRAWING UIS','color: #696; font-weight: bold;'),this.emit(W.BaseEvents._Request_RedrawAllUIs)}Z()})}),this._messageProcessorQueue})}addDeferredStanza(Q){this._deferredStanzas||(this._deferredStanzas=[]),this.logger.log(H.LoggerTypes.Other,`%c ADDING DEFERRED STANZA %c${Q.id} > ${Q.eventType}`,'color: #696; font-weight: bold;','color: #999; font-weight: normal;',{payload:Q.payload}),this._deferredStanzas.push(Q)}removeDeferredStanza(Q,Z){this._deferredStanzas&&this._deferredStanzas.length&&(!this._deferredStanzas.some((ee)=>ee.id===Q&&ee.eventType===Z)||(this.logger.log(H.LoggerTypes.Other,`%c REMOVING DEFERRED STANZA %c${Q} > ${Z}`,'color: #696; font-weight: bold;','color: #999; font-weight: normal;'),this._deferredStanzas=this._deferredStanzas.filter((ee)=>{return ee.id!==Q||ee.eventType!==Z})))}getHandlerForMessage(Q){const Z=J.getMessageType(Q);return this._getHandlerForMessageType(Z)}setTheme(Q){return I(this,void 0,void 0,function*(){yield this.store.saveTheme(Q),this._setThemeOnHtml(Q)})}_setComms(Q){return new Promise((Z,ee)=>{const te=this.config.xmpp.initTimeout||1e4,ne=setTimeout(()=>{ee(`Comms was not initialised within ${Math.floor(te/1e3)} seconds. Aborting.`)},te);this.comms=Q,this.comms.onLogin((ae)=>{this.comms.getServerVersion(),this.handleLogin(ae)}),this.comms.onLogout((ae)=>{this.handleLogout(ae)}),this.comms.onNewMessage((ae)=>{this.handleNewMessage(ae)}),this.comms.onMessageUpdate((ae)=>{this.handleMessageUpdate(ae)}),this.comms.onChatMarkerUpdate((ae)=>{this.handleChatMarkerUpdate(ae)}),this.comms.onStatusUpdate((ae,oe,se)=>{this.handleConnectionChange(ae,oe,se)}),this.comms.onPresenceUpdate((ae)=>{this.handlePresenceUpdate(ae)}),this.comms.onRoomNewParticipant((ae)=>{this.handleRoomParticipantUpdate(ae)}),this.comms.onRoomParticipantUpdate((ae)=>{this.handleRoomParticipantUpdate(ae)}),this.comms.onStartFetchingMissedMessages(()=>{this.enableSuppressMode('baseLayer#mam',!0)}),this.comms.onFinishedFetchingMissedMessages(()=>{this.cancelSuppressMode('baseLayer#mam')}),this.comms.onInitialized(()=>{Z(),clearTimeout(ne),this.config.xmpp.user.id&&this.config.xmpp.user.password&&this.config.xmpp.user.domain&&(this.showWaitingMessage(`Logging in as ${this.config.xmpp.user.id}`),this._attemptAutoLogin(this.config.xmpp.user.id,this.config.xmpp.user.password,this.config.xmpp.user.domain))})})}_setStore(Q){return new Promise((Z)=>{this.store=Q,this.store.init().then(()=>Z())})}_setLogger(){return new Promise((Q)=>I(this,void 0,void 0,function*(){const Z=yield this.store.getLoggerTypes();Z&&this.logger.setTypes(Z),Q()}))}_setupPushNotifications(){return new Promise((Q)=>I(this,void 0,void 0,function*(){const Z=window;this.config.enablePushNotifications&&Z.cordova?Z.cordova.plugins.notification?Z.cti.store.notification&&Z.cti.store.notification.token?(yield this.store.savePushNotificationToken(Z.cti.store.notification.token),Q()):Z.cordova.plugins.notification.registerForPush((ee)=>I(this,void 0,void 0,function*(){yield this.store.savePushNotificationToken(ee),Q()}),(ee)=>{this.logger.error(ee),Q()},{channelName:this.name}):Q():Q()}))}_setupCommonEventListeners(){return new Promise((Q)=>I(this,void 0,void 0,function*(){const Z=yield this.store.getTheme();this._setThemeOnHtml(Z),this.on(W.BaseEvents._Request_ThemeChange,(ee)=>I(this,void 0,void 0,function*(){yield this.store.saveTheme(ee),this._setThemeOnHtml(ee)})),Q()}))}_setThemeOnHtml(Q){document.querySelector('html').setAttribute('theme',Q),this.emit(W.BaseEvents._Request_RedrawAllUIs)}_setUpHandlers(){this._messageHandlers=new Map,this.getHandlers().forEach((Q)=>{Q.messageKey&&this._messageHandlers.set(Q.messageKey,Q),Q.eventType&&Q.eventType.length&&Q.eventType.forEach((Z)=>{this.on(Z,(ee)=>I(this,void 0,void 0,function*(){try{yield Q.callHandleEvent(Z,ee)}catch(te){this.error('Error handling event',`Event type: ${Z.toString()}. ${te.message||te}`)}}))})})}_prepareMessage(Q,Z){return I(this,void 0,void 0,function*(){const ee=this._messageHandlers.get(Q),te=yield ee.callCreateMessage(Z);return null===te||void 0===te?null:{[ee.messageKey]:JSON.stringify(te)}})}_prepareIq(Q,Z){return I(this,void 0,void 0,function*(){const ee=this._messageHandlers.get(Q),te=yield ee.callCreateIq(Z);return null===te||void 0===te?null:te})}_sendBotCommand(Q,Z,ee){return I(this,void 0,void 0,function*(){const te=Q.toString(),ne=yield this._prepareBotMessage(Q,Z,ee);if(null!==ne){const ae=yield this.comms.sendBotCommand(te,ne);if(ae&&!1===ae.success){const oe=yield this._shouldRetryBotMessage(Q,Z,ae);!0===oe&&(yield this._sendBotCommand(Q,Z,ae))}}})}_prepareBotMessage(Q,Z,ee){return I(this,void 0,void 0,function*(){const te=this._messageHandlers.get(Q),ne=yield te.callCreateBotMessage(Z,ee);return null===ne||void 0===ne?null:{[te.messageKey]:JSON.stringify(ne)}})}_shouldRetryBotMessage(Q,Z,ee){return I(this,void 0,void 0,function*(){const te=this._messageHandlers.get(Q);return yield te.callHandleFailedBotResponse(Z,ee)})}_buildCommonComponents(){return I(this,void 0,void 0,function*(){const Q='div',Z='___ct_base_layer_modal_container';let ee=document.querySelector(`${Q}#${Z}`);ee||(ee=document.createElement(Q),ee.id=Z,ee.setAttribute('style','position: absolute; top: 0; left: 0; width: 0; height: 0; z-index: 99999;'),document.body.appendChild(ee)),this._alertModalManager=document.querySelector('ct-alert-modal-manager'),this._alertModalManager||(this._alertModalManager=document.createElement('ct-alert-modal-manager'),this._alertModalManager.owner=this.name,ee.appendChild(this._alertModalManager)),yield this.generateCommonComponents(ee)})}_attemptAutoLogin(Q,Z,ee){return I(this,void 0,void 0,function*(){let te=`${Q}@${ee}`;this.config.xmpp.user&&!0===this.config.xmpp.user.forceLowercaseJid&&(te=te.toLowerCase()),this.logger.log(H.LoggerTypes.Connectivity,`%c ATTEMPTING AUTOMATIC LOGIN AS > %c${te}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;'),yield this.comms.login(te,Z)})}_getHandlerForMessageType(Q){return this._messageHandlers.get(Q.toString())||this.error('No handler found',`No handlers was found for message type '${Q.toString()}'`),this._messageHandlers.get(Q)}_workOutIfAttachmentTooLarge(Q){const Z='There was an error sending the message, please try again.';if(Q.nodeName&&'iq'===Q.nodeName&&Q.childNodes&&Q.childNodes[1]&&'error'===Q.childNodes[1].nodeName){const ee=Q.childNodes[1];if(ee.childNodes&&ee.childNodes[1]&&'text'===ee.childNodes[1].nodeName){const te=ee.childNodes[1],ne=te.textContent.match(/\d+/)[0],ae=ne?parseInt(ne):0;if(ae){const oe=Math.round(ae/1024/1024),se=`The attachment is too large. Please select a file lower than ${oe}MB in size.`;throw this.error('Attachment Too Large',se),new Error(se)}else{const oe='The attachment is too large. Please choose a smaller attachment.';throw this.error('Attachment Too Large',oe),new Error(oe)}}}throw this.error('Error sending multicast message',Z),new Error(Z)}handleLogin(Q){this.emit(W.BaseEvents.LoginResult,Q)}handleLogout(Q){this.emit(W.BaseEvents.LogoutResult,Q)}_finishedProcessing(){clearTimeout(this.messageQueueProcessorDebounce),this.messageQueueProcessorDebounce=setTimeout(()=>{this._isProcessing=!1,this.emit($.ChatEvents.MessageProcessorQueueEmpty)},1e3)}handleNewMessage(Q){if(!0===this.suppressMode&&!0!==Q.fromMam)return void this.addDeferredStanza({id:Q._id,eventType:R.CtXmppClient.EVENT_TYPES.NEW_MESSAGE,payload:Q});this.emit(W.BaseEvents.UserActivity,new W.UserActivityEventArgs(Q.jid,Q.ts));const Z=J.getMessageType(Q),ee=J.parseMessagePayload(Q,Z),te=this._getHandlerForMessageType(Z);te&&(this._messageProcessorQueue=this._messageProcessorQueue.then(()=>I(this,void 0,void 0,function*(){try{this._isProcessing=!0,this.removeDeferredStanza(Q._id,R.CtXmppClient.EVENT_TYPES.NEW_MESSAGE),this.logger.log(H.LoggerTypes.ProcessingReceived,`%c PROCESSING NEW MESSAGE:%c`,'color: #060; font-weight: bold;','color: #999; font-weight: normal;',J.getMessageContentForDebug(ee));const ne=yield te.callHandleMessage(ee);return this._finishedProcessing(),ne}catch(ne){this.error('Error processing message',ne)}})).catch((ne)=>this.error('Error processing message',ne)))}handleMessageUpdate(Q){if(!0===this.suppressMode)return void this.addDeferredStanza({id:Q._id,eventType:R.CtXmppClient.EVENT_TYPES.MESSAGE_UPDATED,payload:Q});this.emit(W.BaseEvents.UserActivity,new W.UserActivityEventArgs(Q.jid,Q.ts));const Z=J.getMessageType(Q),ee=J.parseMessagePayload(Q,Z),te=this._getHandlerForMessageType(Z);te&&(this._messageProcessorQueue=this._messageProcessorQueue.then(()=>I(this,void 0,void 0,function*(){try{this.removeDeferredStanza(Q._id,R.CtXmppClient.EVENT_TYPES.MESSAGE_UPDATED),this.logger.log(H.LoggerTypes.ProcessingUpdated,`%c PROCESSING MESSAGE UPDATE:%c`,'color: #060; font-weight: bold;','color: #999; font-weight: normal;',J.getMessageContentForDebug(ee));const ne=yield te.callHandleMessageUpdate(ee);return this._finishedProcessing(),ne}catch(ne){this.error('Error processing message update',ne)}})).catch((ne)=>this.error('Error processing message update',ne)))}handleChatMarkerUpdate(Q){if(!0===this.suppressMode)return void this.addDeferredStanza({id:Q.message_id,eventType:R.CtXmppClient.EVENT_TYPES.RECEIPT_RECEIVED,payload:Q});const Z=Object.assign({},Q);let ee=`${Z.sender_resource}@${this.config.xmpp.user.domain}`;this.config.xmpp.user&&!0===this.config.xmpp.user.forceLowercaseJid&&(ee=ee.toLowerCase()),Z.sender_resource=ee,this.emit(W.BaseEvents.UserActivity,new W.UserActivityEventArgs(Z.sender_resource,Z.message.updated_at||Z.message.ts));const te=J.getMessageType(Z.message),ne=J.parseMessagePayload(Z.message,te),ae=Object.assign({},Z,{message:ne}),oe=this._getHandlerForMessageType(te);oe&&(this._messageProcessorQueue=this._messageProcessorQueue.then(()=>I(this,void 0,void 0,function*(){try{this.removeDeferredStanza(Q.message_id,R.CtXmppClient.EVENT_TYPES.RECEIPT_RECEIVED);const se=Z.sender_resource.split('@').shift();this.logger.log(H.LoggerTypes.ProcessingChatMarker,`%c PROCESSING CHAT MARKER: %c${se} > ${Z.type}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;');const ie=yield oe.callHandleMessageReceipt(ae);return this._finishedProcessing(),ie}catch(se){this.error('Error processing chat marker',se)}})).catch((se)=>this.error('Error processing chat marker',se)))}handleRoomParticipantUpdate(Q){if(Q.jid){this.emit(W.BaseEvents.UserActivity,new W.UserActivityEventArgs(Q.jid,Q.updated_at||Q.ts));const Z=Q.metadata&&Q.metadata.role?Q.metadata.role:'';this.emit(W.BaseEvents.RoomParticipantUpdate,new W.RoomParticipantUpdateEventArgs(Q.jid,Q.room_name,Z,z.RoomRole[Q.room_role]))}}handleConnectionChange(Q,Z,ee){this.comms.setConnectionStatus(Q),X.onReady(this.name,()=>{this.emit(W.BaseEvents.ConnectionStatusChange,new W.ConnectionStatusEventArgs(Q,Z,ee))})}handlePresenceUpdate(Q){Q.online&&this.emit(W.BaseEvents.UserActivity,new W.UserActivityEventArgs(Q.id,this.getSyncedTimestamp()));const Z=Q.online?z.ConnectionStatus.Connected:z.ConnectionStatus.Disconnected;this.emit(W.BaseEvents.OtherUserConnectionStatusChange,new W.UserConnectionStatusEventArgs(Q.id,Z))}static getUniqueTranslationKeys(Q=!1,...Z){return B.getCommonI18nKeys(Q,...Z)}}E.BaseLayer=X},function(L,E,A){'use strict';var I=this&&this.__decorate||function($,X,Q,Z){var ee=arguments.length,te=3>ee?X:null===Z?Z=Object.getOwnPropertyDescriptor(X,Q):Z,ne;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)te=Reflect.decorate($,X,Q,Z);else for(var ae=$.length-1;0<=ae;ae--)(ne=$[ae])&&(te=(3>ee?ne(te):3<ee?ne(X,Q,te):ne(X,Q))||te);return 3<ee&&te&&Object.defineProperty(X,Q,te),te},R=this&&this.__awaiter||function($,X,Q,Z){return new(Q||(Q=Promise))(function(ee,te){function ne(se){try{oe(Z.next(se))}catch(ie){te(ie)}}function ae(se){try{oe(Z['throw'](se))}catch(ie){te(ie)}}function oe(se){se.done?ee(se.value):new Q(function(ie){ie(se.value)}).then(ne,ae)}oe((Z=Z.apply($,X||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(24),H=A(0),B=A(45),z=A(17),W=A(1),G=A(9),J=A(44);class K extends J.CTBaseComponent{constructor(){super(...arguments),this._connected=!1,this._metadata=null,this._defaultAlerts=null,this._debouncers={},this._listenerUnsubscribers=[]}get layer(){return this._baseLayer?this._baseLayer:null}get metadata(){if(null===this.constructor.prototype._metadata&&!this._metadata)throw new Error(`Metadata not set for component <${this.localName}>`);return this.constructor.prototype._metadata||this._metadata}get defaultAlerts(){return this._defaultAlerts||(this._defaultAlerts=new W.DefaultAlerts(this._baseLayer))}get generateComponentStyles(){return null}getStyles(){if(this.styles&&this.styles.length)return this.styles.reduce((X,Q)=>X+=Q,'');const $=this.generateComponentStyles;return $||''}get componentStyles(){return this.getStyles()}componentMarkup(){if(!this.layer){const $=this._findParentCTLayerComponent();if($&&(this._baseLayer=$._baseLayer,this._initializeForBaseLayer()),!this._connected)return null;if(!this.layer)return $?console.error(`Component <${this.localName}> child of <${$.localName}> does not have an owner layer specified`):console.error(`Component <${this.localName}> does not have an owner layer specified`),N.h('em',{style:{display:'inline-block',fontSize:'12px',color:'#900',backgroundColor:'#FF0',padding:'3px 6px'}},`${this.localName}:`,N.h('br'),'OWNER NOT SPECIFIED')}return this.generateComponentMarkup()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._listenerUnsubscribers.forEach(($)=>$())}attributeChangedCallback($,X,Q){super.attributeChangedCallback($,X,Q);'owner'===$?Q!==X&&''!==Q&&(this.owner=Q,this._attemptConnectToBaseLayer()):void 0}setMetadata($){this._metadata=$}defer($){setTimeout($,0)}debounce($,X,Q=100){clearTimeout(this._debouncers[$]),this._debouncers[$]=setTimeout(()=>{X(),delete this._debouncers[$]},Q)}cancelDebounce($){clearTimeout(this._debouncers[$])}emitEvent($,X){return R(this,void 0,void 0,function*(){this._baseLayer?yield this._baseLayer.emit($,X):console.error(`Could not emit event from component <${this.localName}> - it does not have an owner layer specified`)})}emitComponentEvent($,X){this._baseLayer?(this._baseLayer.logger.log(z.LoggerTypes.Events,`%c RAISING COMPONENT EVENT:%c ${$}`,'color: #066; font-weight: bold;','color: #999; font-weight: normal;',{component:this,data:X}),this.dispatchEvent(new CustomEvent($,{detail:X}))):console.error(`Could not emit event from component <${this.localName}> - it does not have an owner layer specified`)}addListener($,X,Q){if(this._baseLayer){let Z=!1,ee=!0;Q&&!0===Q.onceOnly&&(Z=!0),Q&&!0===Q.dontSuppress&&(ee=!1);const te=this._baseLayer.on($,X,Z,ee);this._listenerUnsubscribers.push(te)}else console.error(`Could not set event handler on component <${this.localName}> - it does not have an owner layer specified`)}addListeners($,X,Q){$.forEach((Z)=>{this.addListener(Z,X,Q)})}launchModal($){this._baseLayer.emit(G.BaseEvents._Request_RaiseAlert,$)}launchAckownledgeDialog($,X,Q){this._baseLayer.emit(G.BaseEvents._Request_RaiseAlert,this.defaultAlerts.AlertAcknowledge($,X,1,{okay:()=>{Q()}}))}launchConfirmationDialog($,X,Q,Z){this._baseLayer.emit(G.BaseEvents._Request_RaiseAlert,this.defaultAlerts.AlertYesNoQuestion($,X,1,{yes:()=>{Q()},no:()=>{'function'==typeof Z&&Z()}}))}showWaitingMessage($){return R(this,void 0,void 0,function*(){yield this._baseLayer.showWaitingMessage($)})}dismissWaitingMessage(){return R(this,void 0,void 0,function*(){yield this._baseLayer.dismissWaitingMessage()})}getLabel($,X){return this.layer.getLabel($,X)}translate($){return this._baseLayer.translate($,!1)}translateI18nItem($){let X;if($&&['scope','key'].every((Z)=>$.hasOwnProperty(Z))?X=$.key:(X=$.toString(),$=this.metadata&&this.metadata.getI18nItem(X)||null),null===$)return X;if(null===this.metadata)return X;if(!this._baseLayer.config.i18n||!0!==this._baseLayer.config.i18n.enabled)return X;const Q=this._baseLayer.translate($.scopedKey,!0);return null===Q?this._baseLayer.translate($.key):Q}_attemptConnectToBaseLayer(){this.owner&&B.LayerRegistration.onReady(this.owner,()=>{this._connectToLayer()})}_connectToLayer(){return R(this,void 0,void 0,function*(){this._connected||this.owner&&(this._baseLayer=B.LayerRegistration.getInstance(this.owner)||null,this._baseLayer&&(yield this._initializeForBaseLayer()))})}_initializeForBaseLayer(){return R(this,void 0,void 0,function*(){if(this.layer){yield this.initialize.apply(this),this.setupListeners(),this._connected=!0,this.forceRedraw();['ct-cl-chat-message-list','ct-cl-new-conversation','ctcl-attachment-handler','ctcl-audio-recorder-player'].includes(this.nodeName.toLowerCase())||this.addListener(G.BaseEvents._Request_RedrawAllUIs,()=>R(this,void 0,void 0,function*(){this.layer&&(yield this.initialize.apply(this),this.forceRedraw())}))}})}_findParentCTLayerComponent(){let $=this,X=!1;do $=$.parentNode||$.host,$||(X=!0),$&&$.owner&&(X=!0);while(!X);return $||null}}K.is=null,I([H.prop({type:String,attribute:!0})],K.prototype,'owner',void 0),E.CTLayerComponent=K},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(42),N=A(21),H=A(1),B=A(25),z=A(9),W=A(17),G=A(3);E.BaseComms=class{constructor(K,$,X,Q){this._firstConnectionInitialized=!1,this._loggingIn=!1,this._loginTimeout=null,this._clientName=K;const Z={debug:Q.getTypesAsEnumValues().includes(W.LoggerTypes.XmppClient),mucHost:$.mucHost,mam:{auto:$.mam&&!0===$.mam.autoFetch||!1,defaultTimeLimit:$.maxMessageAge||0,pageSize:500},autoLogin:!($.autoLogin!==void 0)||$.autoLogin,autoReconnect:!($.autoReconnect!==void 0)||$.autoReconnect,enablePing:!1!==$.enablePing,pingInterval:$.pingInterval||5e3,pingTimeout:$.pingTimeout||1e4,multicastHost:$.multicastHost,uploadHost:$.uploadHost,autoMarkMessages:$.useChatMarkers,autoPurgeOldMessagesAge:$.maxMessageAge||0,encryption:$.encryption||!1,fileEncryption:$.fileEncryption||!1,authAttachments:!0===$.authAttachments,streamResumption:!1!==$.streamResumption,useEncodedJidAsResource:$.user&&!0===$.user.userPersistentResource||!1,adSpn:$.adSpn||null,adSecurityPackage:$.adSecurityPackage||null,push:$.push||{androidEnabled:!1,iosEnabled:!0},updateUserDirectoryOnLogin:$.updateUserDirectoryOnLogin||null,enableMessageCarbons:$.enableMessageCarbons||!1,bringToForegroundOnVoipPush:$.bringToForegroundOnVoipPush===void 0?null:$.bringToForegroundOnVoipPush,updateUserDirectoryInterval:$.updateUserDirectoryInterval||1800000,alwaysSendPresence:$.alwaysSendPresence,sleepingBeauty:$.sleepingBeauty};$.push&&(Z.push=$.push),$.adTokenPlaceholder&&(Z.adTokenPlaceholder=$.adTokenPlaceholder),this.client=new N.CtXmppClient(this._clientName,$.endpoint,Z),this.store=X,this.logger=Q,this.xmppConfig=$,this._localEventHandlers={},this._setupCommonHandlers()}onInitialized(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.INITIALISED,()=>{K()})}onLogin(K){const $='comms-login';this._localEventHandlers[$]===void 0&&(this._localEventHandlers[$]=[]),this._localEventHandlers[$].push(K)}onLogout(K){const $='comms-logout';this._localEventHandlers[$]===void 0&&(this._localEventHandlers[$]=[]),this._localEventHandlers[$].push(K)}onNewMessage(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.NEW_MESSAGE,($)=>{K(Object.assign({},$))})}onMessageUpdate(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.MESSAGE_UPDATED,($)=>{K(Object.assign({},$))})}onChatMarkerUpdate(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.RECEIPT_RECEIVED,($)=>{K(Object.assign({},$))})}onStatusUpdate(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.STATUS,($)=>{this.resetServerVersion();let X=H.ConnectionStatus.Disconnected,Q=null;switch($.id){case R.default.Strophe.Status.CONNFAIL:X=H.ConnectionStatus.Disconnected,Q=new H.DisconnectionStatus($.wontReconnect,$.reason);break;case R.default.Strophe.Status.AUTHFAIL:X=H.ConnectionStatus.Disconnected,Q=new H.DisconnectionStatus(!1,$.reason);break;case R.default.Strophe.Status.ERROR:X=H.ConnectionStatus.Disconnected,Q=new H.DisconnectionStatus($.wontReconnect,$.reason);break;case R.default.Strophe.Status.CONNECTING:X=H.ConnectionStatus.Connecting;break;case R.default.Strophe.Status.AUTHENTICATING:X=H.ConnectionStatus.Connecting;break;case R.default.Strophe.Status.CONNECTED:X=H.ConnectionStatus.Connected;break;case R.default.Strophe.Status.DISCONNECTING:X=H.ConnectionStatus.Disconnecting;break;case R.default.Strophe.Status.DISCONNECTED:X=H.ConnectionStatus.Disconnected,Q=new H.DisconnectionStatus($.wontReconnect,$.reason),document.dispatchEvent(new CustomEvent('__cm-connection-change',{detail:X}));break;default:H.ConnectionStatus.Disconnected;}K(X,$.reconnectTime,Q)})}onPresenceUpdate(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.PRESENCE_UPDATE,($)=>{K($)})}onRoomNewParticipant(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.NEW_PARTICIPANT,($)=>{K(Object.assign({},$))})}onRoomParticipantUpdate(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.PARTICIPANT_UPDATED,($)=>{K(Object.assign({},$))})}onError(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.ERROR,($)=>{K($)})}onStartFetchingMissedMessages(K){const $='missed-messages-start';this._localEventHandlers[$]===void 0&&(this._localEventHandlers[$]=[]),this._localEventHandlers[$].push(K)}onFinishedFetchingMissedMessages(K){const $='missed-messages-finished';this._localEventHandlers[$]===void 0&&(this._localEventHandlers[$]=[]),this._localEventHandlers[$].push(K)}onAutoReconnected(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.AUTO_RECONNECTED,($)=>{this.getServerVersion(),K($)})}onDatabasesAutoDestroyed(K){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.AUTO_DBS_DESTROYED,()=>{K()})}getSyncedTimestamp(K){const $=null===K||K===void 0?new Date().getTime():K;return this.client.getSyncedTimestamp($)}getCurrentUserResource(){return this.client.resource}getConnectionStatus(){return this.status}setConnectionStatus(K){this.status=K}login(K,$,X=!0){return I(this,void 0,void 0,function*(){return!0===this._loggingIn?Promise.reject(new Error('Login currently in progress, please wait.')):new Promise((Q,Z)=>I(this,void 0,void 0,function*(){try{let ee=$;!0===this.xmppConfig.user.sendAppIdentifier&&(ee=`app_id~${this.xmppConfig.user.appIdentifier}~${$}`),this._loggingIn=!0,clearTimeout(this._loginTimeout);const te=this.xmppConfig.loginTimeout||1e4;this._loginTimeout=setTimeout(()=>I(this,void 0,void 0,function*(){clearTimeout(this._loginTimeout),yield this.logout(!0,!0),this.logger.log(W.LoggerTypes.Connectivity,'%c\uD83D\uDEAB LOGIN TIMED OUT','color: #600; font-weight: bold;'),Z(new Error(`Logging in took longer than ${Math.floor(te/1e3)} seconds. Please check your connectivity and try again.`))}),te),this.xmppConfig.user&&!0===this.xmppConfig.user.forceLowercaseJid&&(K=K.toLowerCase()),this.logger.log(W.LoggerTypes.Connectivity,`%c ATTEMPTING LOGIN > %c${K}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;'),this.username=K,yield this.client.login(K,ee),this.checkTimeSync(!1),X&&this.triggerLoginEvent(!0),clearTimeout(this._loginTimeout),this._loggingIn=!1,Q()}catch(ee){clearTimeout(this._loginTimeout),this._loggingIn=!1,this.logger.log(W.LoggerTypes.Connectivity,`%c LOGIN FAILED > %c${K}`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;'),this.username='',X&&this.triggerLoginEvent(!1,ee.msg),Z(ee)}}))})}logout(K=!1,$=!0){return I(this,void 0,void 0,function*(){try{this.logger.log(W.LoggerTypes.Connectivity,`%c LOGGING OUT > %c${this.username}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;'),this._loggingIn=!1,this._firstConnectionInitialized=!1,yield this.client.logout(K),this.username='',$&&this.triggerLogoutEvent(!0)}catch(X){this.logger.log(W.LoggerTypes.Connectivity,`%c LOGOUT FAILED > %c${this.username}`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;'),$&&this.triggerLogoutEvent(!1)}})}attemptReconnect(){this.client.reLoginNow()}joinRoom(K){return I(this,void 0,void 0,function*(){yield this._joinOrLeaveRoom(K)})}leaveRoom(K){return I(this,void 0,void 0,function*(){yield this._joinOrLeaveRoom(K,!0)})}setClientStateActive(K){return I(this,void 0,void 0,function*(){const $=K?N.CtXmppClient.CLIENT_STATES.ACTIVE:N.CtXmppClient.CLIENT_STATES.INACTIVE;this.client.setClientState($)})}getUniqueId(){return this.client.getUniqueId()}sendMessage(K,$,X=[]){return I(this,void 0,void 0,function*(){if(!K)throw new Error('No recipient specified');if(this.status!==H.ConnectionStatus.Connected)throw new Error('Unable to send message: not currently connected');const Q=yield this.client.sendChatMessage(K,null,$,X);return this.logger.shouldLog(W.LoggerTypes.MessageSent)&&this.logger.log(W.LoggerTypes.MessageSent,`%c MESSAGE SENT: %c${K} >`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;',G.getMessageContentForDebug(Q)),Q})}sendRoomMessage(K,$=null,X=null,Q=[],Z=!0){return I(this,void 0,void 0,function*(){if(!K)throw new Error('No room name specified');if(this.status!==H.ConnectionStatus.Connected)throw new Error('Unable to send room message: not currently connected');const ee=yield this.client.sendGroupChatMessage(K,$,X,Q,Z);return this.logger.shouldLog(W.LoggerTypes.MessageSent)&&this.logger.log(W.LoggerTypes.MessageSent,`%c ROOM MESSAGE SENT: %c${K} >`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;',G.getMessageContentForDebug(ee)),ee})}sendMulticastMessage(K,$,X=[]){return I(this,void 0,void 0,function*(){if(this.status!==H.ConnectionStatus.Connected)throw new Error('Unable to multicast message: not currently connected');const Q=yield this.client.sendMulticastMessage(K,null,$,X);if(this.logger.shouldLog(W.LoggerTypes.MessageSent)){const Z=JSON.stringify(K);this.logger.log(W.LoggerTypes.MessageSent,`%c MUTILCAST MESSAGE SENT: %c${Z} >`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;',G.getMessageContentForDebug(Q))}return Q})}sendIq(K,$,X){return I(this,void 0,void 0,function*(){if(!K)throw new Error('No recipient specified');if(!$)throw new Error('No type specified');if(this.status!==H.ConnectionStatus.Connected)throw new Error('Unable to send IQ: not currently connected');const Q=Object.keys(X)[0];this.logger.shouldLog(W.LoggerTypes.MessageSent)&&this.logger.log(W.LoggerTypes.MessageSent,`%c IQ SENT: %c${Q} >`,'color: #906; font-weight: bold;','color: #999; font-weight: normal;',{iq:X});try{const Z=yield this.client.sendIq(K,$,X);return this.logger.shouldLog(W.LoggerTypes.MessageSent)&&this.logger.log(W.LoggerTypes.MessageSent,`%c IQ RESPONSE: %c${Q} >`,'color: #906; font-weight: bold;','color: #999; font-weight: normal;',Object.assign({},Z)),Z.iq}catch(Z){const ee=N.CtXmppClient.xmlToJson(Z),te=ee&&ee.iq&&ee.iq.error&&ee.iq.error.text&&ee.iq.error.text.$value||'';throw this.logger.log(W.LoggerTypes.MessageSent,`%c IQ ERROR: %c${Q} > ${te}`,'color: #C00; font-weight: bold;','color: #999; font-weight: normal;',Object.assign({},ee)),new B.IQError(te,ee.iq)}})}sendBotCommand(K,$){return I(this,void 0,void 0,function*(){if(this.status!==H.ConnectionStatus.Connected)throw new Error(`Unable to send bot command "${K}": not currently connected`);if(!this.xmppConfig.bot)throw new Error('No bot configured in XmppConfig');const X=this.xmppConfig.bot.componentJid;if(!X)throw new Error('Unable to issue bot command; no bot component jid configured');if(void 0!==$&&null!==$){const Q=Object.assign({},$);K in Q&&(Q[K]=JSON.parse(Q[K])),this.logger.log(W.LoggerTypes.MessageSent,`%c BOT COMMAND SENT: %c${K} >`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;',{data:Q})}else this.logger.log(W.LoggerTypes.MessageSent,`%c BOT COMMAND SENT: %c${K}`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;');try{const Q=yield this.client.sendBotCommand(X,K,$,this.xmppConfig.bot.timeout);return this.logger.log(W.LoggerTypes.MessageSent,`%c BOT RESPONSE: %c${K} > ${Q.success?'success':'fail'}`,'color: #600; font-weight: bold;','color: #999; font-weight: normal;',{data:Q.data||null}),Q}catch(Q){const Z='Server connections to local subdomains are forbidden'===Q?`Unable to connect to bot: ${X}`:Q.message||Q;throw new Error(Z)}})}deleteMessageById(K,$=!0){return I(this,void 0,void 0,function*(){yield this.client.deleteMessageById(K,$)})}deleteMessageByRoomName(K){return I(this,void 0,void 0,function*(){yield this.client.deleteMessagesByRoomName(K)})}updateStatus(K,$,X=!1,Q){return I(this,void 0,void 0,function*(){const Z=yield this.client.setChatStatus(K,$,X,Q);if(this.logger.shouldLog(W.LoggerTypes.Status)){const ee=JSON.stringify(Z);this.logger.log(W.LoggerTypes.Status,`%c STATUS UPDATED: %c${ee}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;')}return Z})}listParticipantsByRoom(K){return I(this,void 0,void 0,function*(){const $=yield this.client.listParticipantsByRoom(K);return Promise.all($.map((X)=>I(this,void 0,void 0,function*(){return yield this._participantToUser(X)})))})}getParticipantByRoomAndJid(K,$){return I(this,void 0,void 0,function*(){const X=yield this.client.getParticipantByRoomAndJid(K,$);return!X?null:yield this._participantToUser(X)})}getAllContacts(){return I(this,void 0,void 0,function*(){const K=yield this.client.getContacts();return Promise.all(K.map(($)=>I(this,void 0,void 0,function*(){return yield this._xmppContactToUser($)})).filter(($)=>null!==$))})}getUserByJid(K){return I(this,void 0,void 0,function*(){const $=yield this.client.getUserByJid(K);return $?yield this._directoryUserToUser($):null})}updateUserDirectory(){return I(this,void 0,void 0,function*(){yield this.client.updateUserDirectory()})}searchUsers(K='',$=[]){return I(this,void 0,void 0,function*(){const X=K!==void 0&&null!==K&&0<K.length,Q=X?yield this.client.searchUsers(K,$):yield this.client.getAllUsers(),Z=[];for(const ee of Q)null!==ee&&Z.push((yield this._directoryUserToUser(ee)));return Z})}markMessageRead(K){return I(this,void 0,void 0,function*(){if(this.xmppConfig.useChatMarkers){const $=yield this.client.getMessageById(K);!$||$.mine||!$.markable||$.state.markers.some((X)=>'read'===X.type&&X.sender_resource&&X.sender_resource.toLowerCase()===this.username.split('@')[0].toLowerCase()||X.sender_id.toLowerCase()===this.username.toLowerCase())||(yield this.client.markMessageRead($))}})}getChatHistory(K){return I(this,void 0,void 0,function*(){return yield this.client.getChatHistory(K)})}queryMam(K,$,X,Q,Z=!0){return I(this,void 0,void 0,function*(){return yield this.client.queryMam(K,$,X,Q,Z)})}processXmlStanzaStringsFromMam(K,$=!0){return I(this,void 0,void 0,function*(){return yield this.client.processXmlStanzaStringsFromMam(K,$)})}clearAllData(K=!1){return I(this,void 0,void 0,function*(){yield this.client.destroyDbs(!1,K)})}createPushNotificationRegistration(K){return I(this,void 0,void 0,function*(){const $=this._generatePushNotificationPayload(K.platform,K.channelUri,K.azureId);return yield this.client.sendIq('push.localhost','set',$)})}checkTimeSync(K=!0){const $=new Date().getTime(),X=this.getSyncedTimestamp($),Q=Math.abs(X-$),ee=Q<1e4,te=ee?'#666':'#F00',ne=ee?'#999':'#F00',ae=K?console.log:ee?()=>{}:console.log;if(ae.call(console.log,`%c CLIENT TIME: %c${new Date($).toTimeString()}`,'color: #666; font-weight: bold;','color: #999; font-weight: normal;'),ae.call(console.log,`%c SERVER TIME: %c${new Date(X).toTimeString()}`,'color: #666; font-weight: bold;','color: #999; font-weight: normal;'),Q){const oe=Math.floor(Q/3600000%24),se=Math.floor(Q/60000%60),ie=Math.floor(Q/1e3%60),de=Math.floor(Q%1e3);let le='';0<oe&&(le+=`${oe}h `),0<se&&(le+=`${se}m `),0<ie&&(le+=`${ie}s `),0<de&&(le+=`${de}ms `),$>X?ae.call(console.log,`%c TIME SYNC: %cClient is %c${le.trim()} ahead %cof server`,`color: ${te}; font-weight: bold;`,`color: ${ne}; font-weight: normal;`,`color: ${ne}; font-weight: bold;`,`color: ${ne}; font-weight: normal;`):ae.call(console.log,`%c TIME SYNC: %cClient is %c${le.trim()} behind %cserver`,`color: ${te}; font-weight: bold;`,`color: ${ne}; font-weight: normal;`,`color: ${ne}; font-weight: bold;`,`color: ${ne}; font-weight: normal;`)}else ae.call(console.log,`%c TIME SYNC: %cClient and server times are identical`,'color: #666; font-weight: bold;','color: #999; font-weight: normal;')}updateVCardForUser(K){return I(this,void 0,void 0,function*(){return this.username&&this.username===K?null:void(yield this.client.updatevCardForContact(K))})}getOurVCard(){return I(this,void 0,void 0,function*(){try{return yield this.client.getOurvCard()}catch(K){return null}})}downloadMessageAttachments(K){return I(this,void 0,void 0,function*(){const $=yield this.client.getMessageById(K);$&&(yield this.client.downloadAttachments($,!0))})}downloadFile(K,$=!1){return I(this,void 0,void 0,function*(){const X=yield this.client.doDownload(K);return X.source||null})}getServerVersion(){return I(this,void 0,void 0,function*(){this.serverVersion=yield this.client.getServerVersion()})}resetServerVersion(){return I(this,void 0,void 0,function*(){this.serverVersion=null})}uploadFile(K){return I(this,void 0,void 0,function*(){try{return yield this.client.uploadAttachment(K)}catch($){throw this.logger.log(W.LoggerTypes.MessageSent,`%c UPLOAD ERROR: %c$Unable to upload file > ${$}`,'color: #C00; font-weight: bold;','color: #999; font-weight: normal;',K),new Error('Unable to upload attachment')}})}initializeFirstConnection(){return I(this,void 0,void 0,function*(){})}buildCurrentUser(K){return I(this,void 0,void 0,function*(){const $=K.split('@').shift(),X={id:K,jid:K,username:$,firstName:'',lastName:'',connectionStatus:this.getConnectionStatus()},Q=yield this.getOurVCard();return yield this.embelishUser(X,Q,H.UserAdditionalDetailsType.VCard)})}triggerLoginEvent(K,$){this._fireLocalEventHandlers('comms-login',new z.CommsEventArgs(K,$))}triggerLogoutEvent(K,$){this._fireLocalEventHandlers('comms-logout',new z.CommsEventArgs(K,$))}triggerFetchingMissedMessagesState(K){K?this._fireLocalEventHandlers('missed-messages-start'):this._fireLocalEventHandlers('missed-messages-finished')}_setupCommonHandlers(){this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.NEW_MESSAGE,(K)=>I(this,void 0,void 0,function*(){this.logger.shouldLog(W.LoggerTypes.MessageReceived)&&this.logger.log(W.LoggerTypes.MessageReceived,`%c MESSAGE RECEIVED:%c`,'color: #060; font-weight: bold;','color: #999; font-weight: normal;',G.getMessageContentForDebug(K))})),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.MESSAGE_UPDATED,(K)=>{this.logger.shouldLog(W.LoggerTypes.MessageUpdated)&&this.logger.log(W.LoggerTypes.MessageUpdated,`%c MESSAGE UPDATED:%c`,'color: #060; font-weight: bold;','color: #999; font-weight: normal;',G.getMessageContentForDebug(K))}),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.RECEIPT_RECEIVED,(K)=>{if(this.logger.shouldLog(W.LoggerTypes.MessageChatMarker)){const $=K.sender_resource.split('@').shift();this.logger.log(W.LoggerTypes.MessageChatMarker,`%c CHAT MARKER RECEIVED: %c${$} > ${K.type}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;')}}),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.STATUS,(K)=>I(this,void 0,void 0,function*(){const $=H.ConnectionStatus[K.label];if(this.setConnectionStatus($),$===H.ConnectionStatus.Connected&&(this.username=this.client.bareJid,!1===this._firstConnectionInitialized&&(yield this.initializeFirstConnection(),this._firstConnectionInitialized=!0)),this.logger.shouldLog(W.LoggerTypes.Connectivity)){const X=K.reconnectTime?` - reconnect attempt in ${K.reconnectTime/1e3} second(s)`:'';this.logger.log(W.LoggerTypes.Connectivity,`%c CONNECTIVITY CHANGE: %c${$}${X}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;')}})),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.NEW_PARTICIPANT,(K)=>I(this,void 0,void 0,function*(){if(K.jid&&this.logger.shouldLog(W.LoggerTypes.Participation)){const $=yield this._participantToUser(K);this.logger.log(W.LoggerTypes.Participation,`%c NEW PARTICIPANT: %c${$.username} > ${$.connectionStatus}`,'color: #006; font-weight: bold;','color: #999; font-weight: normal;',{participant:K})}})),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.PARTICIPANT_UPDATED,(K)=>I(this,void 0,void 0,function*(){if(K.jid&&this.logger.shouldLog(W.LoggerTypes.Participation)){const $=yield this._participantToUser(K);this.logger.log(W.LoggerTypes.Participation,`%c PARTICIPANT UPDATED: %c${$.username} > ${$.connectionStatus}`,'color: #006; font-weight: bold;','color: #999; font-weight: normal;',{participant:K})}})),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.PRESENCE_UPDATE,(K)=>I(this,void 0,void 0,function*(){if(K.id&&this.logger.shouldLog(W.LoggerTypes.Presence)){const $=yield this._xmppContactToUser(K);$?this.logger.log(W.LoggerTypes.Presence,`%c PRESENCE UPDATED: %c${$.username} > ${$.connectionStatus}`,'color: #006; font-weight: bold;','color: #999; font-weight: normal;'):this.logger.error(W.LoggerTypes.Presence,`%c PRESENCE UPDATED FOR UNKNOWN CONTACT:`,'color: #006; font-weight: bold;',{contact:K})}})),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.ERROR,(K)=>{this.logger.error(`%c ERROR:`,'color: #C00; font-weight: bold;','\r\n\t',K)}),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.AUTO_RECONNECTED,({resumed:K})=>I(this,void 0,void 0,function*(){if(this.logger.shouldLog(W.LoggerTypes.Connectivity)){const $=!0===K?' - STREAM RESUMED':'';this.logger.log(W.LoggerTypes.Connectivity,`%c AUTO RECONNECTED AFTER DISCONNECT${$}`,'color: #669; font-weight: bold;')}})),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.DBS_DESTROYED,()=>{this.logger.shouldLog(W.LoggerTypes.CleanUp)&&this.logger.log(W.LoggerTypes.CleanUp,`%c DATABASES DESTROYED`,'color: #669; font-weight: bold;')}),this.client.addEventListener(N.CtXmppClient.EVENT_TYPES.AUTO_DBS_DESTROYED,()=>{this.logger.shouldLog(W.LoggerTypes.CleanUp)&&this.logger.log(W.LoggerTypes.CleanUp,`%c DATABASES AUTO DESTROYED`,'color: #669; font-weight: bold;')})}_joinOrLeaveRoom(K,$=!1){return I(this,void 0,void 0,function*(){'participant'===K.type&&((yield $)?this.client.leaveRoom(K.name):this.client.joinRoom(K.name)),'subscriber'===K.type&&((yield $)?this.client.unsubscribeFromRoom(K.name):this.client.subscribeToRoom(K.name,K.nodes))})}_participantToUser(K){return I(this,void 0,void 0,function*(){const $={id:K._id,jid:K.jid,username:K.username,firstName:'',lastName:'',connectionStatus:K.online?H.ConnectionStatus.Connected:H.ConnectionStatus.Disconnected};return this.embelishUser($,K,H.UserAdditionalDetailsType.Participant)})}_xmppContactToUser(K){return I(this,void 0,void 0,function*(){if(!K||!K.id)return null;const $={id:K.id,jid:K.id,username:K.id.substring(0,K.id.indexOf('@')),firstName:'',lastName:'',connectionStatus:K.online?H.ConnectionStatus.Connected:H.ConnectionStatus.Disconnected,groups:K.groups,subscription:K.subscription};return this.embelishUser($,K,H.UserAdditionalDetailsType.Contact)})}_directoryUserToUser(K){return I(this,void 0,void 0,function*(){if(!K||!K.jid)return null;const $=K.jid,X={id:$,jid:$,username:$.substring(0,$.indexOf('@')),connectionStatus:H.ConnectionStatus.Disconnected,prefix:K.prefix,firstName:K.firstName,lastName:K.lastName,displayName:null,telephone:K.telephone,jobTitle:K.jobTitle,avatar:K.avatar,group:K.group};return this.embelishUser(X,K,H.UserAdditionalDetailsType.DirectoryUser)})}_fireLocalEventHandlers(K,$){this._localEventHandlers[K]!==void 0&&this._localEventHandlers[K].forEach((X)=>X($))}_generatePushNotificationPayload(K,$,X){return{push:{$attributes:{xmlns:'urn:commontime:infinity:push'},notification:{type:'android'===K?'gcm':'apns',installation_id:X,registration_id:$}}}}}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(24);E.Stroolean=I.prop.create({coerce:(R)=>'string'==typeof R&&'true'===R.toLowerCase(),default:!1,deserialize:(R)=>'string'==typeof R&&'true'===R.toLowerCase(),serialize:(R)=>R?'true':'false'}),E.NullableNumber=I.prop.create({coerce:(R)=>'null'===R?null:parseInt(R),default:null,deserialize:(R)=>'null'===R?null:parseInt(R),serialize:(R)=>null===R||R===void 0?'null':R.toString()})},function(L,E,A){'use strict';function R(z){if('function'==typeof z){const W=z();return W instanceof Array?'array':'object'==typeof W?'object':typeof W}}var N=this&&this.__rest||function(z,W){var G={};for(var J in z)Object.prototype.hasOwnProperty.call(z,J)&&0>W.indexOf(J)&&(G[J]=z[J]);if(null!=z&&'function'==typeof Object.getOwnPropertySymbols)for(var K=0,J=Object.getOwnPropertySymbols(z);K<J.length;K++)0>W.indexOf(J[K])&&(G[J[K]]=z[J[K]]);return G};Object.defineProperty(E,'__esModule',{value:!0});const H=A(24),B=(z)=>z;E.prop=function(z){return function(W,G){const{type:J}=z,K=N(z,['type']),$=R(J),X=H.prop[$]||B,Q=W.constructor,Z=Q.props||{},ee=Object.assign({},Z,{[G]:X(K)});Object.defineProperty(Q,'props',{configurable:!0,get(){return ee}})}}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class I extends Error{constructor(R,N){super(R),this.iqResponse=N}}E.IQError=I},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class I extends Error{constructor(R,N){super(N),this.connectionStatus=R}}E.NotConnectedError=I},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(23);class R extends I.BaseEventArgs{constructor(N,H){super(),this.success=N,H&&(this.errorMessage=H)}}E.CommsEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(23);class R extends I.BaseEventArgs{constructor(N,H,B){super(),this.status=N,this.reconnectTime=H,this.disconnectStatus=B}}E.ConnectionStatusEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(23);class R extends I.BaseEventArgs{constructor(N,H,B,z){super(),this.jid=N,this.roomName=H,this.role=B,this.roomRole=z}}E.RoomParticipantUpdateEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(23);class R extends I.BaseEventArgs{constructor(N,H){super(),this.jid=N,this.date=H}}E.UserActivityEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(23);class R extends I.BaseEventArgs{constructor(N,H){super(),this.jid=N,this.connectionStatus=H}}E.UserConnectionStatusEventArgs=R},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(H,B,z,W){return new(z||(z=Promise))(function(G,J){function K(Q){try{X(W.next(Q))}catch(Z){J(Z)}}function $(Q){try{X(W['throw'](Q))}catch(Z){J(Z)}}function X(Q){Q.done?G(Q.value):new z(function(Z){Z(Q.value)}).then(K,$)}X((W=W.apply(H,B||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(1);E.BaseHandler=class{constructor(H){this.messageKey=null,this.eventType=[],this.layer=H,this.defaultAlerts=new R.DefaultAlerts(H)}createMessage(){throw new Error('Not implemented')}createIq(){throw new Error('Not implemented')}createBotMessage(){throw new Error('Not implemented')}handleFailedBotResponse(){return I(this,void 0,void 0,function*(){return!1})}handleMessage(){return I(this,void 0,void 0,function*(){})}handleMessageUpdate(){return I(this,void 0,void 0,function*(){})}handleMessageReceipt(){return I(this,void 0,void 0,function*(){})}handleEvent(){return I(this,void 0,void 0,function*(){})}handleIqResponse(H,B){return I(this,void 0,void 0,function*(){return B})}handleIqErrorResponse(H,B){return I(this,void 0,void 0,function*(){return B.iqResponse})}callCreateMessage(H){return I(this,void 0,void 0,function*(){const B=this.createMessage(H);return this._embelishI18n(B),B})}callCreateIq(H){return I(this,void 0,void 0,function*(){const B=this.createIq(H);return this._embelishI18n(B),B})}callCreateBotMessage(H){return I(this,void 0,void 0,function*(){const z=yield this.createBotMessage(H);return this._embelishI18n(z),z})}callHandleFailedBotResponse(H,B){return I(this,void 0,void 0,function*(){return B&&!0!==B.success&&(yield this.handleFailedBotResponse(H,B))})}callHandleMessage(H){return I(this,void 0,void 0,function*(){yield this.handleMessage(H)})}callHandleMessageUpdate(H){return I(this,void 0,void 0,function*(){yield this.handleMessageUpdate(H)})}callHandleMessageReceipt(H){return I(this,void 0,void 0,function*(){yield this.handleMessageReceipt(H)})}callHandleEvent(H,B){return I(this,void 0,void 0,function*(){yield this.handleEvent(H,B)})}callHandleIqResponse(H,B){return I(this,void 0,void 0,function*(){return yield this.handleIqResponse(H,B)})}callHandleIqErrorResponse(H,B){return I(this,void 0,void 0,function*(){return yield this.handleIqErrorResponse(H,B)})}_embelishI18n(H){this.layer.config.i18n&&!0===this.layer.config.i18n.enabled&&(H.language=this.layer.config.i18n.language,H.locale=this.layer.config.i18n.locale)}}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});class I{constructor(R,N){this.scope=R,this.key=N}get scopedKey(){return`${this.scope}_${this.key}`}}E.I18nItem=I},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(11);E.Metadata=class{constructor(N,H){N&&(this._scope='string'==typeof N?N:'name'in N?N.name:N.toString()),this._i18nItems=new Map,H&&this.fillFromEnum(H)}fillFromEnum(N){let H=0;for(const B in N)N.hasOwnProperty(B)&&0!=H%2&&this.addI18nItem(B),H+=1}addI18nItem(N){N&&this._i18nItems.set(N.toString(),new I.I18nItem(this._scope,N.toString()))}getI18nItem(N){if(N){const H=N.toString();if(!this._i18nItems.has(H))throw new Error(`No i18n item registered for key: "${H}"`);return this._i18nItems.get(H)}}getUniqueI18Keys(N){return[...this._i18nItems.values()].map((H)=>{return N?H.scopedKey:H.key}).filter((H,B,z)=>{return z.indexOf(H)===B})}}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const R=A(24);E.ComponentStylesMixin=function(N){class H extends N{constructor(...B){super(...B);const z=window.ShadyCSS;if(this.styleElements||(this.styleElements=[]),!!this.componentStyles)if(!z)this.styleElements=[R.h('style',this.componentStyles),...this.styleElements];else{if(!this.overridingStylesMixinApplied)return;const G=this.localName;if(!0!==H._seenTags[G]){H._seenTags[G]=!0;const J=document.createElement('template');J.innerHTML=`<style>${this.componentStyles}</style>`,z.prepareTemplate(J,G)}}}get componentStylesMixinApplied(){return!0}}return H._seenTags={},H}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(93);E.RenderMixin=I.RenderMixin;var R=A(90);E.ComponentStylesMixin=R.ComponentStylesMixin;var N=A(92);E.OverridingStylesMixin=N.OverridingStylesMixin},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const R=A(24);E.OverridingStylesMixin=function(N){class H extends N{constructor(...B){super(...B);const z=this.localName,W=window.ShadyCSS,J=window.__CtOverridingStyles||{},K=[...(J['*']||[]),...(J[z.toLowerCase()]||[])];if(!W)K&&(!this.styleElements&&(this.styleElements=[]),K.forEach(($)=>{const X=/^(.*?)\.css$/.test($),Q=X?`@import url('${$}');`:$;this.styleElements=[...this.styleElements,R.h('style',Q)]}));else if(!0!==H._seenTags[z]){function $(Q){return new Promise((Z)=>{const ee=new XMLHttpRequest;ee.onreadystatechange=()=>{ee.readyState===XMLHttpRequest.DONE&&(200===ee.status?Z(ee.responseText):Z(`:host { content: 'Error: could not load stylesheet: ${Q}' }`))},ee.open('GET',Q),ee.send()})}H._seenTags[z]=!0;const X=[];K&&K.forEach((Q)=>{const Z=/^(.*?)\.css$/.test(Q),ee=Z?$(Q):Promise.resolve(Q);X.push(ee)}),Promise.all(X).then((Q)=>{const Z=document.createElement('template');if(this.componentStyles&&!0===this.componentStylesMixinApplied&&(Z.innerHTML+=this.componentStyles),0<Q.length){const ee=Q.join('\n');Z.innerHTML+=`<style>${ee}</style>`}Z.innerHTML.length&&W.prepareTemplate(Z,z)})}}get overridingStylesMixinApplied(){return!0}}return H._seenTags={},H}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E.RenderMixin=function(R){function N(B){return B instanceof Array?B:[B]}return class extends R{renderCallback(){const B=N(this.styleElements||[]),z=N(this.componentMarkup?this.componentMarkup()||[]:[]);return[...B,...z]}}}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Broadcaster='broadcaster']='Broadcaster',R[R.Responder='responder']='Responder'})(I=E.AppMode||(E.AppMode={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Meta='meta']='Meta',R[R.Chat='chat']='Chat',R[R.Divider='divider']='Divider'})(I=E.ChatEntryType||(E.ChatEntryType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Participant='member']='Participant',R[R.Administrator='admin']='Administrator',R[R.Owner='owner']='Owner'})(I=E.ChatRole||(E.ChatRole={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Connecting='connecting']='Connecting',R[R.Connected='connected']='Connected',R[R.Disconnected='disconnected']='Disconnected',R[R.Disconnecting='disconnecting']='Disconnecting'})(I=E.ConnectionStatus||(E.ConnectionStatus={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});E.DisconnectionStatus=class{constructor(R,N){this.wontReconnect=R,this.reason=N}getReason(){return this.reason}}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.None='none']='None',R[R.Participant='participant']='Participant',R[R.Moderator='moderator']='Moderator'})(I=E.RoomRole||(E.RoomRole={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Contact='contact']='Contact',R[R.VCard='vcard']='VCard',R[R.Participant='participant']='Participant',R[R.DirectoryUser='directoryuser']='DirectoryUser'})(I=E.UserAdditionalDetailsType||(E.UserAdditionalDetailsType={}))},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(31),N=A(17),H=A(3);E.BaseStore=class{constructor(z,W,G=!1,J=!0){this._saveToPersistentQueue=Promise.resolve(),this._isDestoryingDb=!1,this.name=z,this.logger=W,this._autoCompact=G,this._encryption=J}init(){return I(this,void 0,void 0,function*(){if(this._db||(yield this._createDb(this.name)),this.state=yield this.getFromPersistent(),this.logger.shouldLog(N.LoggerTypes.DataStorage)){const z=H.deepCloneObject(this.state);this.logger.log(N.LoggerTypes.DataStorage,'\uD83D\uDCBE %cINITIAL STATE:','color: #606; font-weight: bold;',Object.assign({},z)),this.prevState=z}})}savePushNotificationToken(z){return I(this,void 0,void 0,function*(){this.state.pushNotificationToken=z,yield this.saveToPersistent()})}getPushNotificationToken(){return I(this,void 0,void 0,function*(){return this.state.pushNotificationToken})}savePushNotificationAzureId(z){return I(this,void 0,void 0,function*(){this.state.pushNotificationTokenAzureId=z,yield this.saveToPersistent()})}getPushNotificationAzureId(){return I(this,void 0,void 0,function*(){return this.state.pushNotificationTokenAzureId})}clearAllData(){return I(this,void 0,void 0,function*(){return new Promise((z)=>{localStorage.removeItem(this.name),this._db&&!this._isDestoryingDb?(this._isDestoryingDb=!0,this._db.destroy().then(()=>{return this._createDb(this.name),this.init()}).then(()=>{this._isDestoryingDb=!1,z()})):z()})})}getLoggerTypes(){return I(this,void 0,void 0,function*(){return this.state.loggerTypes})}saveLoggerTypes(z){return I(this,void 0,void 0,function*(){return this.state.loggerTypes=z,yield this.saveToPersistent()})}deleteLoggerTypes(){return I(this,void 0,void 0,function*(){return delete this.state.loggerTypes,yield this.saveToPersistent()})}getStateSnapshot(){return this.state}getTheme(){return I(this,void 0,void 0,function*(){return this.state.theme||''})}saveTheme(z){return I(this,void 0,void 0,function*(){return this.state.theme=z,yield this.saveToPersistent()})}getFromPersistent(){return I(this,void 0,void 0,function*(){if(this._db)try{return yield this._db.get(this.name)}catch(z){const W=this.generateInitialState(),G=yield this._db.put(W);return W._rev=G.rev,W}else return localStorage.getItem(this.name)?JSON.parse(localStorage.getItem(this.name)):this.generateInitialState()})}saveToPersistent(){return I(this,void 0,void 0,function*(){clearTimeout(this._saveDebouncer),this._saveDebouncer=setTimeout(()=>{this._db?this._saveToPersistentQueue=this._saveToPersistentQueue.then(()=>I(this,void 0,void 0,function*(){try{const z=yield this._db.put(this.state);this.state._rev=z.rev,this.logger.shouldLog(N.LoggerTypes.DataStorage)&&this._logUpdate()}catch(z){throw new Error(z)}})):(localStorage[this.name]=JSON.stringify(this.state),this.logger.shouldLog(N.LoggerTypes.DataStorage)&&this._logUpdate())},150)})}_createDb(z){return I(this,void 0,void 0,function*(){if(!window.PouchDB)this.logger.log(N.LoggerTypes.DataStorage,'\uD83D\uDCBE %cCANNOT FIND POUCHDB, USING LOCAL STORAGE INSTEAD','color: #606; font-weight: bold;');else if(this.logger.log(N.LoggerTypes.DataStorage,` %cUSING POUCHDB: %c${z}`,'color: #606; font-weight: bold;','color: #999; font-weight: normal;'),this._db=new window.PouchDB(`${z}`,{revs_limit:1,auto_compaction:this._autoCompact}),!0===this._encryption){this.logger.log(N.LoggerTypes.DataStorage,` %cENCRYPTING POUCHDB...`,'color: #606; font-weight: bold;','color: #999; font-weight: normal;');const W=yield R.getEncryptionKey(z+'_layer');this._db.crypto({key:W})}})}_logUpdate(){const z=H.deepCloneObject(this.state),W=H.getDiffs(this.prevState,z),G=H.groupArrayItemsByKey(W,(K)=>K.path),J=Object.keys(G);0===W.length?this.logger.log(N.LoggerTypes.DataStorage,'\uD83D\uDCBE %cSTATE UPDATED %c- NO STATE CHANGES','color: #606; font-weight: bold;','color: #999; font-weight: bold;',Object.assign({},z)):(this.logger.log(N.LoggerTypes.DataStorage,` %cSTATE UPDATED`,'color: #606; font-weight: bold;',Object.assign({},z)),this.logger.group(N.LoggerTypes.DataStorage,3>W.length,` %c${W.length} STATE CHANGE(S):`,'color: #999; font-weight: bold;'),J.forEach((K)=>{this.logger.log(N.LoggerTypes.DataStorage,`%cstate.${K}:`,'color: #666; font-weight: normal;'),G[K].forEach(($)=>{if($.added||$.deleted){const X=$.added?'090':'900';this.logger.log(N.LoggerTypes.DataStorage,`  %c${$.type.toLowerCase()}:`,`color: #${X}; font-weight: normal;`,$.rhs)}else this.logger.log(N.LoggerTypes.DataStorage,`  %c${$.lhs||'<empty>'} %c %c${$.rhs}`,'color: #900; font-weight: normal;','color: #CCC;','color: #090; font-weight: normal;')})}),this.logger.groupEnd(N.LoggerTypes.DataStorage)),this.prevState=z}}},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(9),B=A(1),z=A(20);class W extends N.CTLayerComponent{initialize(){return R(this,void 0,void 0,function*(){this.layer.setShowChatFunction(()=>{this.emitComponentEvent('go-chat')})})}setupConnectionStatusListener(G){this._updateConnectionStatus(this.layer.getConnectionStatus()),this.addListener(H.BaseEvents.ConnectionStatusChange,(J)=>{this._updateConnectionStatus(J.status,G)},{dontSuppress:!0})}showAcknowledge(G,J){return new Promise((K)=>{super.launchAckownledgeDialog(G,J,()=>K())})}requestConfirmation(G){return new Promise((J)=>{const K=this.translateI18nItem(z.CommonMetadata.getI18nItem(z.CommonI18nKeys.ARE_YOU_SURE));super.launchConfirmationDialog(K,G,()=>J(!0),()=>J(!1))})}_updateConnectionStatus(G,J){this.connectionStatus=G,this.isOnline=G===B.ConnectionStatus.Connected,'function'==typeof J&&J({status:this.connectionStatus,online:this.isOnline})}}I([N.prop({type:String,attribute:!1,default:B.ConnectionStatus.Disconnected})],W.prototype,'connectionStatus',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],W.prototype,'isOnline',void 0),E.CTCLComponent=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(21),N=A(25),H=A(17),B=A(77),z=A(1),W=A(3),G=A(10),J=A(20),K=A(13),$=A(4);class X extends B.BaseComms{constructor(Q,Z,ee,te,ne){super(Q,Z,ee,te),this.user=null,this._loggedIn=!1,this._postLoginTimeout=null,this._shouldClearData=!1,this._mamFetchInProgress=!1,this._mamQueryInProgress=!1,this._disconnectedDuringMamFetch=!1,this._onDisconnectDuringLogin=(ae)=>{ae.detail===z.ConnectionStatus.Disconnected&&this._postLoginTimeout&&(this.clearPostLoginTimeout(),this._chatLayer.clearAllData(),document.removeEventListener('__cm-connection-change',this._onDisconnectDuringLogin))},this._chatLayer=ne,this._setupHandlers()}login(Q,Z,ee=!0){const te=(ne)=>super[ne];return I(this,void 0,void 0,function*(){this._chatLayer.showWaitingMessage(this._chatLayer.translateI18nItem(J.CommonMetadata.getI18nItem(J.CommonI18nKeys.AUTHENTICATING))),this._chatLayer.enableSuppressMode('chat/comms#login',!0),document.removeEventListener('__cm-connection-change',this._onDisconnectDuringLogin),document.addEventListener('__cm-connection-change',this._onDisconnectDuringLogin);try{yield te('login').call(this,Q,Z,!1),yield this._postLogin()}catch(ne){throw this._handleLoginFailure(),this.triggerLoginEvent(!1,ne.msg),ne}})}setPresence(){return I(this,void 0,void 0,function*(){try{yield this.client.sendPresence()}catch(Q){throw this.logger.error(Q),Q}})}getAllMessages(){return I(this,void 0,void 0,function*(){return yield this.client.getAllMessages()})}getMucHost(){return this.client.mucHost}findChatEntriesToPurge(Q){return I(this,void 0,void 0,function*(){let Z=[];try{const ee=yield this.getAllMessages(),te=ee.filter((ae)=>`${Q.id}@${this.client.mucHost}`===ae.recipient_id||`${Q.id}@${this.client.mucHost}`===ae.sender_id),ne=te.sort((ae,oe)=>{return ae.ts-oe.ts});Z=ne.splice(0,ne.length-this._chatLayer.config.behaviour.maxChatEntriesToStore)}catch(ee){this.logger.error('Couldn\'t fetch chat entries to purge:',ee)}return Z})}isMamFetchInProgress(){return this._mamFetchInProgress}embelishUser(Q){return I(this,void 0,void 0,function*(){return Q.connectionStatus=Q.connectionStatus||z.ConnectionStatus.Disconnected,Q.displayName=W.formatUserName(Q,W.NameFormat.PREFIX_FIRST_LAST),Q})}_setupHandlers(){this.onStatusUpdate((Q)=>I(this,void 0,void 0,function*(){Q===z.ConnectionStatus.Connected&&this._chatLayer.enableSuppressMode('chat/comms#login',!0),this.user&&(this.user.connectionStatus=Q)})),this.onAutoReconnected(({resumed:Q})=>I(this,void 0,void 0,function*(){const Z=!0===this._loggedIn,ee=!0===Q;if(!1==Z)try{yield this._chatLayer.bootstrapper,yield this._postLogin(ee)}catch(te){this._handleLoginFailure(),this.triggerLoginEvent(!1,te)}else if(this._disconnectedDuringMamFetch||!ee){this._disconnectedDuringMamFetch&&(yield this._chatLayer.clearAllData());const te=yield this._chatLayer.store.getLatestIdentifier();yield this._chatLayer.loadAllConversations(),yield this._processMissedPersonalMamMessage(te),this._chatLayer.cancelSuppressMode('chat/comms#login'),yield this._priorityAlert(),yield this.setPresence()}else this._chatLayer.cancelSuppressMode('chat/comms#login'),yield this._priorityAlert(),yield this.setPresence();this._chatLayer.emit($.ChatEvents.AutoReconnected,{resumed:Q})})),this.onDatabasesAutoDestroyed(()=>I(this,void 0,void 0,function*(){this._shouldClearData=!0}))}_priorityAlert(){return I(this,void 0,void 0,function*(){const Q=this._chatLayer.getNewestPendingAlert();if(Q)return yield this._chatLayer.priorityAlert(Q)})}_postLogin(Q=!1){return I(this,void 0,void 0,function*(){return this.username?(yield this._chatLayer.showWaitingMessage(this._chatLayer.translateI18nItem(J.CommonMetadata.getI18nItem(J.CommonI18nKeys.SYNCING))),new Promise((Z,ee)=>I(this,void 0,void 0,function*(){this.clearPostLoginTimeout();const te=this.xmppConfig.loginTimeout||1e4;if(this._postLoginTimeout=setTimeout(()=>{this.clearPostLoginTimeout(),this.logger.log(H.LoggerTypes.Connectivity,'%c\uD83D\uDEAB LOGIN TIMED OUT','color: #600; font-weight: bold;'),ee(new Error(this._chatLayer.translateI18nItem(J.CommonMetadata.getI18nItem(J.CommonI18nKeys.LOGIN_TIMEOUT))))},te),this._shouldClearData&&(this.logger.log(H.LoggerTypes.CleanUp,`%c DELETING DATA FOR FRESH USER`,'color: #669; font-weight: bold;'),yield this._chatLayer.store.clearChatData(),this._shouldClearData=!1),this.user=yield this._chatLayer.getUserByJid(this.username),!this.user){const ae=this._chatLayer.translateI18nItem(J.CommonMetadata.getI18nItem(J.CommonI18nKeys.USER_NOT_FOUND)).replace('{{username}}',this.username);return ee(new Error(ae))}const ne=yield this._chatLayer.store.getLatestIdentifier();yield this._chatLayer.showWaitingMessage(this._chatLayer.translateI18nItem(K.ChatCommonMetadata.getI18nItem(K.ChatCommonI18nKeys.FETCHING_CONVERSATIONS))),yield this._chatLayer.loadAllConversations(),Q||(yield this._chatLayer.showWaitingMessage(this._chatLayer.translateI18nItem(K.ChatCommonMetadata.getI18nItem(K.ChatCommonI18nKeys.FETCHING_OWN_DATA))),yield this._processMissedPersonalMamMessage(ne)),this.logger.log(H.LoggerTypes.Connectivity,`%c LOGIN COMPLETE > %c${this.username}`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;'),yield this._chatLayer.dismissWaitingMessage(),this._chatLayer.cancelSuppressMode('chat/comms#login'),this.clearPostLoginTimeout(),this._loggedIn=!0,yield this.setPresence(),yield this._chatLayer.purgeAllConversations(),this.triggerLoginEvent(!0),yield this._priorityAlert(),Z()}))):Promise.reject(new Error('Error in post-login: no username specified'))})}_handleLoginFailure(){const Q=(Z)=>super[Z];return I(this,void 0,void 0,function*(){this.user=null,this._loggedIn=!1,yield Q('logout').call(this,!0,!0)})}fetchConversationMessages(Q,Z=null,ee=null,te=null){return I(this,void 0,void 0,function*(){let ne=(1e3*Date.now()).toString();if(Z){const ae=yield this.client.getMessageById(Z);ne=ae.archive_id}return yield this._fetchEarlierConversationMessages(Q,ne,ee,te)})}clearStoredConversationMessages(Q){return I(this,void 0,void 0,function*(){yield this.client.deleteMessagesByRoomName(Q.id)})}clearStoredConversationAttachments(Q){return I(this,void 0,void 0,function*(){return new Promise((Z)=>I(this,void 0,void 0,function*(){const te=[];Q.attachments.forEach((ne)=>{ne.local!==void 0&&te.push(new Promise((ae)=>{return this.client.deleteFile(ne.local).then(ae).catch((oe)=>{this.logger.log(H.LoggerTypes.XmppClient,`Couldn't delete attachment at: '${ne.local}':`,oe),ae()})}))}),Promise.all(te).then(()=>{Z()})}))})}clearPostLoginTimeout(){clearTimeout(this._postLoginTimeout),this._postLoginTimeout=null}_processMissedPersonalMamMessage(Q=null){return I(this,void 0,void 0,function*(){if(!0===this._mamFetchInProgress)return void this.logger.log(H.LoggerTypes.Mam,`%c MAM FETCHING ALREADY IN PROGRESS: SKIPPING MAM CHECK`,'color: #669; font-weight: bold;');try{this._mamQueryInProgress=!1,this._disconnectedDuringMamFetch=!1;const Z=Q&&Q.toString()||null;if(null===Z)return;this.logger.log(H.LoggerTypes.Mam,`%c QUERYING PERSONAL MAM FOR MISSED MESSAGE(S) FOR USER: %c${this.username} (since ${Z})`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;');const ee=Date.now(),te=yield this.client.queryMam(null,Z,null,null,!1),ne=Date.now();if(this._mamQueryInProgress=!1,this.logger.log(H.LoggerTypes.Mam,`%c QUERYING PERSONAL MAM TOOK ${ne-ee}ms`,'color: #669; font-weight: bold;'),this.logger.log(H.LoggerTypes.Mam,`%c FOUND ${te.length} MISSED MESSAGE(S) IN PERSONAL MAM`,'color: #669; font-weight: bold;'),0<te.length){const ae=[],oe=[];te.forEach((se)=>{if(!se||!W.jidsMatch(se.recipient_id,this.username))return void ae.push(se);const ie=W.getMessageType(se);return ie?void(this.logger.shouldLog(H.LoggerTypes.Mam)&&this.logger.log(H.LoggerTypes.Mam,`%c DISPATCHING PERSONAL MAM MESSAGE:%c`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;',W.getMessageContentForDebug(se)),this.client._dispatchEvent(R.CtXmppClient.EVENT_TYPES.NEW_MESSAGE,se)):void ae.push(se)}),this.logger.log(H.LoggerTypes.Mam,`%c ${te.length-oe.length-ae.length} PERSONAL MAM MESSAGE(S) DISPATCHED`,'color: #669; font-weight: bold;'),0<oe.length&&this.logger.log(H.LoggerTypes.Mam,`%c ${oe.length} PERSONAL MAM MESSAGE(S) IGNORED DUE TO STANZA EXCLUSION RULES`,'color: #669; font-weight: bold;',oe),0<ae.length&&this.logger.log(H.LoggerTypes.Mam,`%c ${ae.length} INVALID PERSONAL MAM MESSAGE(S) IGNORED`,'color: #C00; font-weight: bold;',ae),this._mamFetchInProgress=!1}else this._mamFetchInProgress=!1}catch(Z){const ee=R.CtXmppClient.xmlToJson(Z),te=ee&&ee.iq&&ee.iq.error&&ee.iq.error.text&&ee.iq.error.text.$value||'';throw this.logger.log(H.LoggerTypes.Mam,`%c ERROR DURING PERSONAL MAM FETCH`,'color: #C00; font-weight: bold;',Object.assign({},ee)),new N.IQError(te,ee.iq)}})}_fetchEarlierConversationMessages(Q,Z,ee,te=null){return I(this,void 0,void 0,function*(){if(!0===this._mamFetchInProgress)return void this.logger.log(H.LoggerTypes.Mam,`%c MAM FETCHING ALREADY IN PROGRESS: SKIPPING MAM CHECK`,'color: #669; font-weight: bold;');try{const ne=Q.roomJid.split('@').shift();this._mamQueryInProgress=!1,this._disconnectedDuringMamFetch=!1,this.logger.log(H.LoggerTypes.Mam,`%c QUERYING ROOM MAM FOR MESSAGES FOR CONVERSATION: %c${ne} (before ${Z})`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;');const ae=Date.now(),oe=yield this.client.queryMamRoomHistoryByName(ne,Z,ee,!1,te),se=Date.now();this._mamQueryInProgress=!1,this.logger.log(H.LoggerTypes.Mam,`%c QUERYING ROOM MAM TOOK ${se-ae}ms`,'color: #669; font-weight: bold;'),this.logger.log(H.LoggerTypes.Mam,`%c FOUND ${oe.length} MESSAGE(S) IN THE ROOM MAM`,'color: #669; font-weight: bold;',oe);const ie=[];if(0<oe.length){const de=[],le=[];oe.forEach((ue)=>{if(!ue)return void de.push(ue);const ce=W.getMessageType(ue);return ce?void(this.logger.shouldLog(H.LoggerTypes.Mam)&&this.logger.log(H.LoggerTypes.Mam,`%c DISPATCHING ROOM MAM MESSAGE:%c`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;',W.getMessageContentForDebug(ue)),this.client._dispatchEvent(R.CtXmppClient.EVENT_TYPES.NEW_MESSAGE,ue),ie.push(ue)):void de.push(ue)});const _e=yield Promise.all(ie.map((ue)=>I(this,void 0,void 0,function*(){return yield G.convertToChatEntry(ue,this._chatLayer)})));return this.logger.log(H.LoggerTypes.Mam,`%c ${oe.length-le.length-de.length} ROOM MAM MESSAGE(S) DISPATCHED`,'color: #669; font-weight: bold;'),0<le.length&&this.logger.log(H.LoggerTypes.Mam,`%c ${le.length} ROOM MAM MESSAGE(S) IGNORED DUE TO STANZA EXCLUSION RULES`,'color: #669; font-weight: bold;',le),0<de.length&&this.logger.log(H.LoggerTypes.Mam,`%c ${de.length} INVALID ROOM MAM MESSAGE(S) IGNORED`,'color: #C00; font-weight: bold;',de),this._mamFetchInProgress=!1,_e}return this._mamFetchInProgress=!1,[]}catch(ne){const ae=R.CtXmppClient.xmlToJson(ne),oe=ae&&ae.iq&&ae.iq.error&&ae.iq.error.text&&ae.iq.error.text.$value||'';if(this.logger.log(H.LoggerTypes.Mam,`%c ERROR DURING ROOM MAM FETCH`,'color: #C00; font-weight: bold;',Object.assign({},ae)),!oe.includes('Only members may query archives of this room'))throw new N.IQError(oe,ae.iq)}})}}E.Comms=X},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(21),B=A(2),z=A(15),W=A(5),G=A(1),J=A(49),K=A(4);var $;(function(Q){Q[Q.ADD_AUDIO_ATTACHMENT='Add Audio Attachment']='ADD_AUDIO_ATTACHMENT',Q[Q.NO_AUDIO_ATTACHED='No audio attached']='NO_AUDIO_ATTACHED'})($||($={}));let X=class extends N.CTLayerComponent{constructor(){super(...arguments),this._loadFromSource=!1,this.attachClick=()=>R(this,void 0,void 0,function*(){const Z=yield H.CtXmppClient.pickFile({mimeTypes:this.fileTypes});Z&&Z.length&&(this._loadFromSource=!0,this.audioSrc=Z[0],this.callback&&this.callback(this.audioSrc))}),this._recordClick=()=>R(this,void 0,void 0,function*(){this._loadFromSource=!1,this.audioSrc='',this.recordAudio=!this.recordAudio}),this._onRecordFinished=(Z)=>{this.callback&&this.callback(Z)},this._onRecordingDeleted=()=>{this.audioSrc='',this._loadFromSource=!1,this.callback&&this.callback(this.audioSrc)}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){this.addListener(K.ChatEvents.AudioRecordingStarted,()=>this.audioRecording=!0),this.addListener(K.ChatEvents.AudioRecordingStopped,()=>this.audioRecording=!1)}generateComponentMarkup(){return window.__CTRender('div',{class:'container'},window.__CTRender('h4',null,this.translateI18nItem($.ADD_AUDIO_ATTACHMENT)),window.__CTRender('div',{class:'controls'},this.allowAttach&&window.__CTRender('div',{class:`action ${this.recordAudio||this.audioSrc?'disabled':''}`,onClick:this.recordAudio||this.audioSrc?null:this.attachClick},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.MusicalNote})),this.allowRecord&&window.__CTRender('div',{class:`action ${this.audioSrc||this.audioRecording?'disabled':''}`,onClick:this.audioSrc||this.audioRecording?null:this._recordClick},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Microphone})),window.__CTRender('div',{class:'placeholder'},this.isLoading?window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:G.Icons.COMMON.LoadingSpinner,spin:!0}):this.recordAudio||this.audioSrc?window.__CTRender(J.CTCLAudioRecorderPlayer,{onRecordingFinished:this._onRecordFinished,onAudioRemoved:this._onRecordingDeleted,showRecord:!this._loadFromSource,source:this.audioSrc,allowRemoval:!0}):window.__CTRender('p',null,this.translateI18nItem($.NO_AUDIO_ATTACHED)))))}};I([N.prop({type:Array,attribute:!0,default:['audio/mp3','audio/mp4','audio/m4a']})],X.prototype,'fileTypes',void 0),I([N.prop({type:Function,attribute:!1})],X.prototype,'callback',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'isLoading',void 0),I([N.prop({type:String,attribute:!1,default:null})],X.prototype,'audioSrc',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'recordAudio',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'audioRecording',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],X.prototype,'allowAttach',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],X.prototype,'allowRecord',void 0),X=I([z.component({tag:'ct-cl-audio-attachment',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host div.container{display:flex;padding:10px;flex-direction:column}:host div.container h4{margin-top:0;font-weight:normal;text-transform:uppercase;font-size:0.8em;color:var(--tertiary-placeholder-color, #212121)}:host div.container div.controls{display:flex}:host div.container div.controls div.action{display:flex;justify-content:center;align-items:center;flex:none;width:36px;height:36px;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border-radius:50%;cursor:pointer;margin-right:10px;transition:0.5s all ease-in}:host div.container div.controls div.action.disabled{background:var(--subtle-font-color, #828688);cursor:default}:host div.container div.controls div.placeholder{display:flex;flex:1}:host div.container div.controls div.placeholder ctcl-audio-player{flex:0}:host div.container div.controls div.placeholder div.action{margin-left:auto}:host div.container div.controls div.placeholder p{margin:auto 0;align-items:center;color:var(--subtle-font-color, #828688)}
    `],i18nKeys:$})],X),E.CTCLAudioAttachment=X},function(L,E,A){'use strict';var I=this&&this.__decorate||function(le,_e,ue,ce){var pe=arguments.length,he=3>pe?_e:null===ce?ce=Object.getOwnPropertyDescriptor(_e,ue):ce,ge;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)he=Reflect.decorate(le,_e,ue,ce);else for(var fe=le.length-1;0<=fe;fe--)(ge=le[fe])&&(he=(3>pe?ge(he):3<pe?ge(_e,ue,he):ge(_e,ue))||he);return 3<pe&&he&&Object.defineProperty(_e,ue,he),he},R=this&&this.__awaiter||function(le,_e,ue,ce){return new(ue||(ue=Promise))(function(pe,he){function ge(Te){try{ye(ce.next(Te))}catch(Ce){he(Ce)}}function fe(Te){try{ye(ce['throw'](Te))}catch(Ce){he(Ce)}}function ye(Te){Te.done?pe(Te.value):new ue(function(Ce){Ce(Te.value)}).then(ge,fe)}ye((ce=ce.apply(le,_e||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(5),H=A(12),B=A(0),z=A(2),W=A(29),G=A(1),J=A(4),K=A(11),$=A(3),X=A(1),Q=A(8),Z=A(172),ee=A(55),te=A(48),ne=A(14),ae=A(58),oe=A(57);var se;(function(le){le[le.EXPIRED_PRIORITY_CONVERSATION='Expired Priority Conversation']='EXPIRED_PRIORITY_CONVERSATION',le[le.ACKNOWLEDGE='Acknowledge']='ACKNOWLEDGE',le[le.MUTE='Mute']='MUTE',le[le.CONVERSATION_IS_CLOSED='This conversation is closed.']='CONVERSATION_IS_CLOSED'})(se||(se={}));class ie{static _create(){return new K.Metadata(de,se)}static get instance(){return this._instance||(this._instance=this._create())}}ie._instance=null,E.CTCLConversationAlertMetadata=ie;class de extends H.CTCLComponent{constructor(){super(),this._raisedBy='',this._animationDuration=500,this.mute=()=>{this.layer.mute(),this.muted=!0},this.setMetadata(ie.instance)}initialize(le){const _e=(ue)=>super[ue];return R(this,void 0,void 0,function*(){yield _e('initialize').call(this,le)})}setupListeners(){this.setupConnectionStatusListener((le)=>{le.online&&!0===this.muted&&!1===this.disableMute&&this.emitEvent(J.ChatEvents.ResumeAlertAfterPlayingAudio)}),this.addListener(J.ChatEvents.PriorityConversationAcknowledgedOnAnotherDevice,()=>R(this,void 0,void 0,function*(){yield this.layer.clearPendingAlert(this.conversation),this._resetAndClose()})),this.addListener(J.ChatEvents.MuteAlertToPlayOtherAudio,()=>{this.disableMute=!0}),this.addListener(J.ChatEvents.ResumeAlertAfterPlayingAudio,()=>{this.muted=!1,this.disableMute=!1})}show(le,_e){return R(this,void 0,void 0,function*(){this.animate=_e;const ue=le||this.layer.getNewestPendingAlert();if(ue)if(this.conversation=ue,this._config=new ne.ConversationConfigReader(this.layer,this.conversation),this._raisedBy=yield this._getConversationStarter(),this.showing=!1,this.muted=!1,yield $.sleep(_e?this._animationDuration:0),this.conversation.attachments){const ce=this.conversation.attachments.find((ge)=>ge.type===N.SupportedAttachmentType.IMAGE),pe=this.conversation.attachments.find((ge)=>ge.type===N.SupportedAttachmentType.AUDIO),he=this.conversation.attachments.find((ge)=>ge.type===N.SupportedAttachmentType.VIDEO);ce&&(this.imgAttachmentSrc=ce.local||ce.path),pe&&(this.audioAttachmentSrc=pe.local||pe.path),he&&(this.videoAttachmentSrc=he.local||he.path),setTimeout(()=>R(this,void 0,void 0,function*(){this.showing=!0}),500)}else this.showing=!0})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;flex-direction:column;position:fixed;top:0;left:0;height:100%;width:100%;background:#ffffff;font-size:1em;transform:translateY(100%);will-change:transform;z-index:99997}:host .chat-conversation-alert{flex-direction:column;height:100%;display:flex;background-color:var(--list-bg);color:var(--default-font-color)}:host .chat-conversation-alert .header .action{cursor:pointer}:host .chat-conversation-alert .header .pending-count{border-radius:50%;width:30px;height:30px;padding-top:6px;text-align:center;filter:brightness(85%)}:host .chat-conversation-alert .header-priority-details{display:flex;flex:0 0 auto;flex-direction:row;background:var(--header-bg, #22b1c8);color:var(--header-text, #fff)}:host .chat-conversation-alert .header-priority-details>div{padding-left:10px;padding-right:10px;padding-top:8px;padding-bottom:8px}:host .chat-conversation-alert .header-priority-details>div>div{color:var(--header-text, #fff)}:host .chat-conversation-alert .header-priority-details>:not(:last-child){flex:0 0 125px}:host .chat-conversation-alert .header-priority-details>:last-child{flex:1 1 auto}:host .chat-conversation-alert .header-priority-details label{font-size:1em}:host .chat-conversation-alert .header-priority-details .header-priority-detail-value{font-size:1.333em}:host .chat-conversation-alert .chat-description{font-size:1.333em;display:flex;flex-direction:column;flex:1;padding:20px 25px;overflow-y:auto;white-space:pre-line;max-height:270px}:host .chat-conversation-alert .attachment{display:flex;padding:20px 25px 0;flex:0 1 auto;flex-direction:column;min-height:250px;max-height:250px}:host .chat-conversation-alert .attachment div.image{display:flex;flex:1;justify-content:center;align-self:center;padding:20px}:host .chat-conversation-alert .attachment div.image img{height:100%}:host .chat-conversation-alert .attachment div.audio{display:flex;flex:1}:host .chat-conversation-alert .attachment div.audio ctcl-attachment-handler{height:initial;margin-bottom:auto}:host .chat-conversation-alert .footer{flex:0 0 auto;color:#fff;font-size:1em;background:var(--secondary-color, #f2f2f2);border-top:var(--secondary-border, 1px solid #ddd);padding:10px 20px;flex-direction:row;display:flex;margin-top:auto}:host .chat-conversation-alert .footer .yes{flex:1 1;margin:0 5px}:host .chat-conversation-alert .footer .mute{margin-left:10px;font-weight:300}:host([animate]){transition:transform var(--animation-normal, .5s) ease-out}:host([showing]){transform:translateY(0)}
        `}generateComponentMarkup(){return this.showing?this.conversation?window.__CTRender('div',{class:'chat-conversation-alert'},this._renderHeader(),this._renderAttachment(),this._renderDescription(),this._renderFooter()):null:null}static get is(){return'ct-cl-conversation-alert'}_renderHeader(){const le=this.conversation.subject,_e=this._config.name,ue=this._config.colorCode?this._colorLuminance(this._config.colorCode,-0.05):null,ce=this._config.colorCode?this._colorLuminance(this._config.colorCode,-0.1):null;return[window.__CTRender(W.CTCLHeader,{class:'header',backgroundColor:this._config.colorCode},window.__CTRender('div',{slot:'left-action'},!this._config.autoAlert&&window.__CTRender(z.CTIcon,{class:'action',width:'20',height:'20',icon:G.Icons.COMMON.ChevronLeft,onClick:()=>this._resetAndClose()})),window.__CTRender('div',{slot:'heading'},le),window.__CTRender('div',{slot:'sub-heading'},_e),window.__CTRender('div',{slot:'right-action'},this._renderPendingCount())),window.__CTRender('div',{class:'header-priority-details'},window.__CTRender('div',{style:Q.buildStyles({backgroundColor:ue})},window.__CTRender('div',null,window.__CTRender('label',null,'TIME SENT:'),window.__CTRender('div',{class:'header-priority-detail-value',id:'priority-time-sent-value'},$.getFriendlyTime(new Date(this.conversation.createdTime))))),window.__CTRender('div',{style:Q.buildStyles({backgroundColor:ce})},window.__CTRender('div',null,window.__CTRender('label',null,'RAISED BY:'),window.__CTRender('div',{class:'header-priority-detail-value',id:'priority-raised-by-value'},this._raisedBy))))]}_renderDescription(){return this.conversation.description?window.__CTRender('div',{id:'chat-description',class:'chat-description'},this.conversation.description):null}_renderAttachment(){return this.conversation.attachments&&0===this.conversation.attachments.length?null:window.__CTRender('div',{class:'attachment'},this.videoAttachmentSrc&&window.__CTRender('div',{class:'video'},window.__CTRender(te.CTCLAttachmentHandler,{uri:this.videoAttachmentSrc,type:N.SupportedAttachmentType.VIDEO,conversationId:this.conversation.id})),this.audioAttachmentSrc&&window.__CTRender('div',{class:'audio'},window.__CTRender(te.CTCLAttachmentHandler,{uri:this.audioAttachmentSrc,type:N.SupportedAttachmentType.AUDIO,conversationId:this.conversation.id,stream:oe.VolumeStream.Alarm,volumeToPlayAt:this._config.alertVolume})),this.imgAttachmentSrc&&window.__CTRender('div',{class:'image'},window.__CTRender(te.CTCLAttachmentHandler,{uri:this.imgAttachmentSrc,type:N.SupportedAttachmentType.IMAGE,allowOpenImageInFullScreen:this._config.allowOpenInFullScreen,conversationId:this.conversation.id})))}_renderFooter(){return window.__CTRender('div',{class:'footer'},this._renderReplyTemplate(),Q.renderIf(this._config.autoAlert&&!this.muted&&!this.isOnline,window.__CTRender(z.CTButton,{type:'none',disabled:this.disableMute,className:'mute',onClick:()=>this.mute(),style:Q.buildStyles({backgroundColor:this._config.colorCode})},window.__CTRender(z.CTIcon,{width:'16',height:'16',color:'#FFF',icon:Z.Icons.ICOMOON.Mute}))))}_renderReplyTemplate(){let le=this._config.alertResponseOptions&&0!==this._config.alertResponseOptions.length?this._config.alertResponseOptions[0]:N.defaultAlertResponseOption;const _e=le.options.map((ue)=>({primaryText:ue.label,subtitleText:ue.shortDescription,action:()=>this._acknowledgeAndDismiss(ue.value),disabled:!this.isOnline,color:this._config.colorCode}));return[window.__CTRender(ae.CTActionSheet,{buttons:_e,openSheetButtonText:'Respond',openSheetBackgroundColor:this._config.colorCode})]}_getConversationStarter(){return R(this,void 0,void 0,function*(){const le=yield this.layer.getUserByJid(this.conversation.participants[0].jid);return le.displayName||`${le.firstName}  ${le.lastName}`})}_acknowledgeAndDismiss(le){return R(this,void 0,void 0,function*(){if(yield this.layer.clearPendingAlert(this.conversation),this._isExpired(this.conversation)){yield this.emitEvent(J.ChatEvents.PriorityConversationAcknowledged,new ee.PriorityConversationAcknowledgedEventArgs(this.conversation,this.layer.getPendingAlertCount()));const _e=new X.DefaultAlerts(this).AlertAcknowledge(this.translateI18nItem(se.EXPIRED_PRIORITY_CONVERSATION),this.translateI18nItem(se.EXPIRED_PRIORITY_CONVERSATION),1,{okay:()=>R(this,void 0,void 0,function*(){this.conversation.isClosed||!1===this._config.shouldOpenConversationAfterResponded?this._resetAndClose():yield this._dismissAndGoToConversation(),yield this.layer.showConversationAlert(null,!0)})});return void(yield this.emitEvent(J.ChatEvents._Request_RaiseAlert,_e))}if(this.conversation.isClosed){yield this.emitEvent(J.ChatEvents.PriorityConversationAcknowledged,new ee.PriorityConversationAcknowledgedEventArgs(this.conversation,this.layer.getPendingAlertCount()));const _e=new X.DefaultAlerts(this).AlertAcknowledge(this.translateI18nItem(se.CONVERSATION_IS_CLOSED),this.translateI18nItem(se.CONVERSATION_IS_CLOSED),1,{okay:()=>R(this,void 0,void 0,function*(){yield this._resetAndClose(),yield this.layer.showConversationAlert(null,!0)})});return void(yield this.emitEvent(J.ChatEvents._Request_RaiseAlert,_e))}yield this.emitEvent(J.ChatEvents.RemotelyStopAudioPlayer),yield this.layer.sendConversationAcknowledgement(this.conversation,le||'acknowledge'),this._config.shouldOpenConversationAfterResponded?yield this._dismissAndGoToConversation():yield this._resetAndClose(),yield this.layer.showConversationAlert(null,!0)})}_dismissAndGoToConversation(){return R(this,void 0,void 0,function*(){yield this.layer.setCurrentConversation(this.conversation,!1),this._goChatFunction&&this._goChatFunction instanceof Function&&this._goChatFunction(),this.conversation=null,this._config=null,this.imgAttachmentSrc='',this.audioAttachmentSrc='',this.videoAttachmentSrc='',yield this.dismiss()})}_isExpired(le){const _e=le.createdTime+1e3*le.expiryTTL;return new Date().getTime()>_e}_resetAndClose(){return R(this,void 0,void 0,function*(){yield this.emitEvent(J.ChatEvents.PriorityConversationAcknowledged,new ee.PriorityConversationAcknowledgedEventArgs(this.conversation,this.layer.getPendingAlertCount())),this.conversation=null,this._config=null,this.imgAttachmentSrc='',this.audioAttachmentSrc='',this.videoAttachmentSrc='',this.showing=!1,yield $.sleep(this.animate?this._animationDuration:0)})}dismiss(){return R(this,void 0,void 0,function*(){this.showing=!1,yield $.sleep(this.animate?this._animationDuration:0)})}_colorLuminance(le,_e){le=(le+'').replace(/[^0-9a-f]/gi,''),6>le.length&&(le=le[0]+le[0]+le[1]+le[1]+le[2]+le[2]),_e=_e||0;let ue='#',ce,pe;for(pe=0;3>pe;pe++){ce=parseInt(le.substr(2*pe,2),16);const he=Math.round(Math.min(Math.max(0,ce+ce*_e),255)).toString(16);ue+=('00'+he).substr(he.length)}return ue}_renderPendingCount(){return Q.renderIf(this._config.autoAlert&&1<this.layer.getPendingAlertCount(),window.__CTRender('div',{id:'pending-count',class:'pending-count',style:Q.buildStyles({backgroundColor:this._config.colorCode})},this.layer.getPendingAlertCount()-1))}setShowChatFunction(le){this._goChatFunction=le}conversationClosed(le){return R(this,void 0,void 0,function*(){this.conversation&&this.conversation.roomJid===le.roomJid&&(yield this.emitEvent(J.ChatEvents.PriorityConversationAcknowledged,new ee.PriorityConversationAcknowledgedEventArgs(this.conversation,this.layer.getPendingAlertCount())),this.conversation.isClosed=!0)})}}I([B.prop({type:Object,attribute:!1,default:null})],de.prototype,'conversation',void 0),I([B.prop({type:Boolean,attribute:!0,default:!0})],de.prototype,'animate',void 0),I([B.prop({type:Boolean,attribute:!0,default:!1})],de.prototype,'showing',void 0),I([B.prop({type:Boolean,attribute:!1,default:!1})],de.prototype,'muted',void 0),I([B.prop({type:String,attribute:!1,default:''})],de.prototype,'imgAttachmentSrc',void 0),I([B.prop({type:String,attribute:!1,default:''})],de.prototype,'audioAttachmentSrc',void 0),I([B.prop({type:String,attribute:!1,default:''})],de.prototype,'videoAttachmentSrc',void 0),I([B.prop({type:Boolean,attribute:!1,default:!1})],de.prototype,'disableMute',void 0),E.CTCLConversationAlert=de,de.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(21),B=A(2),z=A(15),W=A(5),G=A(1),J=A(12),K=A(27);var $;(function(Q){Q[Q.ADD_IMAGE_ATTACHMENT='Add image attachment']='ADD_IMAGE_ATTACHMENT',Q[Q.NO_IMAGE='No image attached']='NO_IMAGE'})($||($={}));let X=class extends J.CTCLComponent{constructor(){super(...arguments),this.fullImagePath='',this.imgPreviewHeight=122,this.imgPreviewWidth=122,this.attachClick=()=>R(this,void 0,void 0,function*(){const Z=yield H.CtXmppClient.pickFile({mimeTypes:this.fileTypes,encrypt:!0});if(Z&&Z.length){this.isLoading=!0;const ee=yield K.getThumbnail(Z[0],this.imgPreviewWidth,this.imgPreviewHeight,100);this.imgSrc=ee,this.fullImagePath=Z[0],this.isLoading=!1,this.callback&&this.callback(this.fullImagePath)}}),this.cameraClick=()=>R(this,void 0,void 0,function*(){try{const Z=yield this.layer.captureOrSelectMedia();this.isLoading=!0,Z.base64=yield K.getThumbnail(Z.path,this.imgPreviewWidth,this.imgPreviewHeight,100),this.imgSrc=Z.base64,this.fullImagePath=Z.path,this.isLoading=!1,this.callback&&this.callback(this.fullImagePath)}catch(Z){console.error(Z)}}),this.removeImg=()=>{this.imgSrc='',this.fullImagePath=''}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}generateComponentMarkup(){return window.__CTRender('div',{class:'container'},window.__CTRender('h4',null,this.translateI18nItem($.ADD_IMAGE_ATTACHMENT)),window.__CTRender('div',{class:'controls'},window.__CTRender('div',{class:`action ${this.imgSrc||this.isLoading?'disabled':''}`,onClick:this.cameraClick},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Attachment})),window.__CTRender('div',{class:`action ${this.imgSrc||this.isLoading?'disabled':''}`,onClick:this.attachClick},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Photo})),window.__CTRender('div',{class:'placeholder'},this.isLoading?window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:G.Icons.COMMON.LoadingSpinner,spin:!0}):this.imgSrc?[window.__CTRender('div',{class:'action',onClick:this.removeImg},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.Cross})),window.__CTRender('img',{src:this.imgSrc,height:this.imgPreviewHeight,width:this.imgPreviewWidth})]:window.__CTRender('p',null,this.translateI18nItem($.NO_IMAGE)))))}};I([N.prop({type:Array,attribute:!0,default:['image/jpeg','image/png']})],X.prototype,'fileTypes',void 0),I([N.prop({type:Function,attribute:!1})],X.prototype,'callback',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'isLoading',void 0),I([N.prop({type:String,attribute:!1,default:null})],X.prototype,'imgSrc',void 0),X=I([z.component({tag:'ct-cl-image-attachment',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host div.container{display:flex;padding:10px;flex-direction:column}:host div.container h4{margin-top:0;font-weight:normal;text-transform:uppercase;font-size:0.8em;color:var(--tertiary-placeholder-color, #212121)}:host div.container div.controls{display:flex}:host div.container div.controls div.action{display:flex;justify-content:center;align-items:center;flex:none;width:36px;height:36px;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border-radius:50%;cursor:pointer;margin-right:10px;transition:0.5s all ease-in}:host div.container div.controls div.action.disabled{background:var(--subtle-font-color, #828688);cursor:default}:host div.container div.controls div.placeholder{display:flex;flex:1}:host div.container div.controls div.placeholder div.action{margin-left:auto}:host div.container div.controls div.placeholder p{margin:auto 0;align-items:center;color:var(--subtle-font-color, #828688)}
    `],i18nKeys:$})],X),E.CTCLImageAttachment=X},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(21),B=A(2),z=A(15),W=A(5),G=A(1),J=A(4),K=A(51);var $;(function(Q){Q[Q.ADD_VIDEO_ATTACHMENT='Add Video Attachment']='ADD_VIDEO_ATTACHMENT',Q[Q.NO_VIDEO_ATTACHED='No video attached']='NO_VIDEO_ATTACHED'})($||($={}));let X=class extends N.CTLayerComponent{constructor(){super(...arguments),this._loadFromSource=!1,this.attachClick=()=>R(this,void 0,void 0,function*(){const Z=yield H.CtXmppClient.pickFile({mimeTypes:this.fileTypes});Z&&Z.length&&(this._loadFromSource=!0,this.videoSrc=Z[0],this.callback&&this.callback(this.videoSrc))}),this._recordClick=()=>R(this,void 0,void 0,function*(){this._loadFromSource=!1,this.videoSrc='',this.recordVideo=!this.recordVideo}),this._onRecordFinished=(Z)=>{this.callback&&this.callback(Z)},this._onRecordingDeleted=()=>{this.videoSrc='',this._loadFromSource=!1,this.callback&&this.callback(this.videoSrc)}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){this.addListener(J.ChatEvents.AudioRecordingStarted,()=>this.videoRecording=!0),this.addListener(J.ChatEvents.AudioRecordingStopped,()=>this.videoRecording=!1)}generateComponentMarkup(){return window.__CTRender('div',{class:'container'},window.__CTRender('h4',null,this.translateI18nItem($.ADD_VIDEO_ATTACHMENT)),window.__CTRender('div',{class:'controls'},window.__CTRender('div',{class:`action ${this.recordVideo||this.videoSrc?'disabled':''}`,onClick:this.recordVideo||this.videoSrc?null:this.attachClick},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.PickVideo})),window.__CTRender('div',{class:`action ${this.videoSrc||this.videoRecording?'disabled':''}`,onClick:this.videoSrc||this.videoRecording?null:this._recordClick},window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:W.Icons.UI.RecordVideo})),window.__CTRender('div',{class:'placeholder'},this.isLoading?window.__CTRender(B.CTIcon,{width:'16',height:'16',icon:G.Icons.COMMON.LoadingSpinner,spin:!0}):this.recordVideo||this.videoSrc?window.__CTRender(K.CTCLVideoRecorderPlayer,{onRecordingFinished:this._onRecordFinished,onVideoRemoved:this._onRecordingDeleted}):window.__CTRender('p',null,this.translateI18nItem($.NO_VIDEO_ATTACHED)))))}};I([N.prop({type:Array,attribute:!0,default:['video/mp4','video/webm']})],X.prototype,'fileTypes',void 0),I([N.prop({type:Function,attribute:!1})],X.prototype,'callback',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'isLoading',void 0),I([N.prop({type:String,attribute:!1,default:null})],X.prototype,'videoSrc',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'recordVideo',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'videoRecording',void 0),X=I([z.component({tag:'ct-cl-video-attachment',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host div.container{display:flex;padding:10px;flex-direction:column}:host div.container h4{margin-top:0;font-weight:normal;text-transform:uppercase;font-size:0.8em;color:var(--tertiary-placeholder-color, #212121)}:host div.container div.controls{display:flex}:host div.container div.controls div.action{display:flex;justify-content:center;align-items:center;flex:none;width:36px;height:36px;background:var(--primary-color, #22b1c8);color:var(--primary-font-color, #fff);border-radius:50%;cursor:pointer;margin-right:10px;transition:0.5s all ease-in}:host div.container div.controls div.action.disabled{background:var(--subtle-font-color, #828688);cursor:default}:host div.container div.controls div.placeholder{display:flex;flex:1}:host div.container div.controls div.placeholder ctcl-audio-player{flex:0}:host div.container div.controls div.placeholder div.action{margin-left:auto}:host div.container div.controls div.placeholder p{margin:auto 0;align-items:center;color:var(--subtle-font-color, #828688)}
    `],i18nKeys:$})],X),E.CTCLVideoAttachment=X},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E.defaultReplyTemplate={id:'_default',name:'Acknowledge',options:[{name:'Acknowledge',type:'button',label:'Acknowledge',value:'Acknowledge'}]}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(R){for(var N in R)E.hasOwnProperty(N)||(E[N]=R[N])}(A(108))},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N,H,B){super(),this.filepath=N,this.type=B,this.conversationId=H}}E.AttachmentDownloadComplete=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N,H){super(),this.filepath=N,this.conversation=H}}E.AudioAttachmentDownloadComplete=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(53);class R extends I.ChatEntryEventArgs{constructor(N,H,B,z){super(N),this.conversationTitle=H,this.messagePreview=B,this.isForCurrentConversation=z}}E.ChatNotificationEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(4);class R extends I.ConversationEventArgs{constructor(N,H,B){super(N),this.participant=H,this.newRole=B}}E.ConversationParticiantRoleEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(4);class R extends I.ConversationEventArgs{constructor(N,H){super(N),this.participants=H}}E.ConversationParticiantsEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(54);class R extends I.ConversationEventArgs{constructor(N,H,B){super(N),this.instigator=H,this.reason=B}}E.ForceQuitConversationEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N,H,B,z){super(),this.conversation=N,this.alert=H,this.autoAlert=B,this.mustAcknowledge=z}}E.PriorityConversationNotificationEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(32);class R extends I.BaseMessageType{}R.FetchConversations='fetch-conversations',R.CreateConversation='create-conversation',R.UpdateConversation='update-conversation',R.AddParticipants='add-participants',R.RemoveParticipants='remove-participants',R.ChangeParticipantRole='change-participant-role',R.LeaveConversation='leave-conversation',R.EndConversation='end-conversation',R.ReceivedConversation='received-conversation',R.AcknowledgeConversation='acknowledge-conversation',R.HideDirectConversation='hide-before',R.ConversationStarted='conversationstarted',R.ConversationUpdated='conversationupdated',R.ParticipantAdded='participantadded',R.ParticipantRemoved='participantremoved',R.ParticipantRoleChanged='participantrolechanged',R.ParticipantLeft='participantleft',R.ConversationEnded='conversationended',R.ParticipantReceived='participantreceipt',R.ParticipantAcknowledged='participantacked',R.User_ConversationStarted='user_conversationstarted',R.User_ConversationUpdated='user_conversationupdated',R.User_Added='user_added',R.User_Removed='user_removed',R.User_RoleChanged='user_rolechanged',R.User_Left='user_left',R.User_ConversationEnded='user_conversationended',R.User_DeleteDirectConversation='user_hid_conv',E.ChatMessageType=R},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(9),N=A(6),H=A(20);class B extends N.BaseChatHandler{constructor(){super(...arguments),this.eventType=[R.BaseEvents.LoginResult,R.BaseEvents._Request_Logout]}handleEvent(z,W){return I(this,void 0,void 0,function*(){if(z===R.BaseEvents.LoginResult){const G=W;if(!G.success){const J=this.layer.translateI18nItem(H.CommonMetadata.getI18nItem(H.CommonI18nKeys.LOGIN_ERROR_TITLE)),K=G.errorMessage||this.layer.translateI18nItem(H.CommonMetadata.getI18nItem(H.CommonI18nKeys.LOGIN_ERROR_GENERIC));this.layer.error(J,K)}}if(z===R.BaseEvents._Request_Logout)try{yield this.layer.logout(!0)}catch(G){const J=this.layer.translateI18nItem(H.CommonMetadata.getI18nItem(H.CommonI18nKeys.LOGOUT_ERROR_TITLE));this.layer.error(J,G)}})}}E.CommsConnectionHandler=B},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(B,z,W,G){return new(W||(W=Promise))(function(J,K){function $(Z){try{Q(G.next(Z))}catch(ee){K(ee)}}function X(Z){try{Q(G['throw'](Z))}catch(ee){K(ee)}}function Q(Z){Z.done?J(Z.value):new W(function(ee){ee(Z.value)}).then($,X)}Q((G=G.apply(B,z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(4);class H extends R.BaseChatHandler{constructor(){super(...arguments),this.eventType=[N.ChatEvents.AttachmentDownloadComplete]}handleEvent(B,z){return I(this,void 0,void 0,function*(){if(B===N.ChatEvents.AttachmentDownloadComplete){const W=z,G=yield this.layer.getConversationById(W.conversationId);if(G){const J=G.attachments.find((K)=>K.type===W.type);J&&(J.local=W.filepath,yield this.layer.updateConversation(G))}}})}}E.AttachmentDownloadedHandler=H},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(B,z,W,G){return new(W||(W=Promise))(function(J,K){function $(Z){try{Q(G.next(Z))}catch(ee){K(ee)}}function X(Z){try{Q(G['throw'](Z))}catch(ee){K(ee)}}function Q(Z){Z.done?J(Z.value):new W(function(ee){ee(Z.value)}).then($,X)}Q((G=G.apply(B,z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(4);class H extends R.BaseChatHandler{constructor(){super(...arguments),this.eventType=[N.ChatEvents.AutoReconnected]}handleEvent(B){return I(this,void 0,void 0,function*(){B===N.ChatEvents.AutoReconnected&&window.cti&&'Login'===window.cti.store.state.currentPage&&(this.layer.comms.clearPostLoginTimeout(),window.cti.utils.callAction('go-to-page',{name:'Conversations'}))})}}E.AutoReconnectedHandler=H},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(1),N=A(6),H=A(4),B=A(5),z=A(26),W=A(10),G=A(3);class J extends N.BaseChatHandler{constructor(){super(...arguments),this.eventType=[H.ChatEvents.ChatEntryReceived]}handleEvent(K,$){return I(this,void 0,void 0,function*(){if(K===H.ChatEvents.ChatEntryReceived){const X=$,Q=X.chatEntry;if(!Q)return;const Z=this.layer.getCurrentUserJid(),ee=yield this.layer.getConversationByRoomJid(Q.to),te=yield this.layer.getCurrentConversation(),ne=te&&te.id===ee.id||!1;if(this._shouldRaiseNotification(Q,Z,ee,ne)){const ae=new z.UserLookup(this.layer);yield ae.populate([ee]);const oe=W.getConversationTitle(ee,ae,Z,''),se=this._getMessagePreview(Q,ae,Z);this.layer.emit(H.ChatEvents.ChatNotification,new H.ChatNotificationEventArgs(X.chatEntry,oe,se,ne))}}})}_shouldRaiseNotification(K,$,X,Q){if(K.type===R.ChatEntryType.Chat&&K.mine)return!1;if(K.type===R.ChatEntryType.Meta&&G.jidsMatch(K.instigator,$))return!1;if(K.date<=(X.hideBefore||X.lastHideBefore))return!1;if(X.instigator!==this.layer.getCurrentUserJid()&&X.acknowledgements&&!X.acknowledgements.find((ee)=>ee.jid===this.layer.getCurrentUserJid()))return!1;if(X.instigator!==this.layer.getCurrentUserJid()&&X.acknowledgements&&K.date<=X.acknowledgements.find((ee)=>ee.jid===this.layer.getCurrentUserJid()).ts)return!1;const Z=this.layer.getConfiguredPriorityById(X.priority);if(Z&&Z.alert&&X.acknowledgements&&!X.acknowledgements.find((ee)=>ee.jid===this.layer.getCurrentUserJid()))return!1;if(Z&&Z.alert&&X.acknowledgements&&K.date<=X.acknowledgements.find((ee)=>ee.jid===this.layer.getCurrentUserJid()).ts)return!1;if(Q&&K.type!==R.ChatEntryType.Meta&&K.action===B.ChatMetaActivityType.ACK.toString())return!0;if(K.type===R.ChatEntryType.Chat)return!0;if(K.type===R.ChatEntryType.Meta){const ee=K;if(ee.action===B.ChatMetaActivityType.START.toString())return X.type!==B.ConversationType.Direct;const te=[B.ChatMetaActivityType.ADD.toString(),B.ChatMetaActivityType.REMOVE.toString(),B.ChatMetaActivityType.CHANGEROLE.toString()];if(te.includes(ee.action)&&ee.subject===$)return!0}return!1}_getMessagePreview(K,$,X){if(K.type===R.ChatEntryType.Chat){return W.getChatMessageTextForPreview(K,this.layer)}if(K.type===R.ChatEntryType.Meta){return W.getChatMetaActivitySummaryText(K,$,X,this.layer,!1)}}}E.ChatEntryEventHandler=J},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(4),H=A(14),B=A(3),W=window;class G extends R.BaseChatHandler{constructor(){super(...arguments),this.eventType=[N.ChatEvents.PriorityConversationNotification,N.ChatEvents.PriorityConversationAcknowledged,N.ChatEvents.MuteAlertToPlayOtherAudio,N.ChatEvents.ResumeAlertAfterPlayingAudio,N.ChatEvents.AudioAttachmentDownloadComplete,N.ChatEvents.Mute],this.currentlyAlerting=!1,this.isMuted=!1}handleEvent(J,K){return I(this,void 0,void 0,function*(){if(J===N.ChatEvents.PriorityConversationNotification&&!this.currentlyAlerting){this.currentlyAlerting=!0;const $=K;W.cti&&!W.cti.store.state.foreground&&W.PushNotification&&W.PushNotification.bringToFront&&W.PushNotification.bringToFront(),W.cti&&(W.cti.store.variables.currently_alerting=!0),this.currentConversation=$.conversation,this._playAlertSound($.conversation)}if(J===N.ChatEvents.PriorityConversationAcknowledged){this.isMuted=!1;const $=K;if($.instigator&&$.instigator!==this.layer.getCurrentUserJid())return;if(this.currentConversation=null,this.layer.emit(N.ChatEvents.RemotelyStopAudioPlayer),0===$.pendingCount)this.currentlyAlerting=!1,W.simpleAudioPlayer.stop(!0),W.simpleAudioPlayer.release(),W.vibrationController.stop();else{const X=this.layer.getNewestPendingAlert();W.simpleAudioPlayer.release(),this._playAlertSound(X)}}if(J===N.ChatEvents.MuteAlertToPlayOtherAudio||J===N.ChatEvents.Mute){if(J===N.ChatEvents.Mute){if(this.isMuted)return W.simpleAudioPlayer.play(),void(this.isMuted=!1);this.isMuted=!0}0<this.layer.getPendingAlertCount()&&(W.simpleAudioPlayer.stop(!0),W.vibrationController.stop())}if(J===N.ChatEvents.ResumeAlertAfterPlayingAudio&&(this.isMuted=!1,0<this.layer.getPendingAlertCount()&&W.simpleAudioPlayer.play()),J===N.ChatEvents.AudioAttachmentDownloadComplete){const X=new H.ConversationConfigReader(this.layer,this.currentConversation);X.automaticallyPlayAudioOnDownload&&(W.simpleAudioPlayer.stop(!0),setTimeout(()=>this.layer.emit(N.ChatEvents.RemotelyStartAudioPlayer),1500))}})}_playAlertSound(J){const K=new H.ConversationConfigReader(this.layer,J);K.alert&&(W.simpleAudioPlayer.setAudio(K.alertSoundFilename,K.alertSoundLoops,K.alertVolume,B.enumFromString(K.alertAudioStream)),W.simpleAudioPlayer.play(),K.vibrate&&W.vibrationController.vibrate(K.vibrateDuration,0,K.forceVibrate))}}E.RaiseDeviceNotificationHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.AcknowledgeConversation}createIq(G){return z.createIq('ack',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id,value:G.value})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_ACKNOWLEDGING_CONVERSATION)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.AcknowledgeConversationHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.AddParticipants}createIq(G){return z.createIq('add',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id,participants:{item:G.participants.map((J)=>z.createIqNode({jid:J.jid,affiliation:J.role.toString()}))}})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_ADDING_PARTICIPANTS_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.AddParticipantsHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ChangeParticipantRole}createIq(G){return z.createIq('changerole',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id,participant:z.createIqNode({jid:G.participant.jid,affiliation:G.newRole.toString()})})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_CHANGING_PARTICIPANT_ROLE_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.ChangeParticipantRoleHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.CreateConversation}createIq(G){const J=z.createIq('create',this.layer.config.xmpp.iq.namespace,{type:G.type.toString(),participants:{item:G.participants.map((K)=>z.createIqNode({jid:K.jid,affiliation:K.role.toString()}))}});return G.config.behaviour.namedSettings&&(J.create.title=G.subject||'',J.create.description=G.description||''),G.priority&&(J.create.priority=G.priority),G.expiry_ttl&&(J.create.expiry_ttl=`${G.expiry_ttl}`),G.activity_ttl&&(J.create.activity_ttl=`${G.activity_ttl}`),J.create.reply_template=JSON.stringify(G.config),G.attachments&&G.attachments.length&&(J.create.attachments={attachment:G.attachments.map((K)=>JSON.stringify(K))}),J}handleIqResponse(G,J){return I(this,void 0,void 0,function*(){if('created'in J){const K=J.created&&J.created.$attributes.id||null;return Object.assign({},J,{data:{newConversationId:K}})}return'exists'in J?Object.assign({},J,{data:{exists:!0}}):void 0})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_CREATING_CONVERSATION_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.CreateConversationHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.HideDirectConversation}createIq(G){return z.createIq('hide_before',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id,timestamp:G.timestamp.toString()})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_DELETING_DIRECT_CONVERSATION)),$=J.message.includes('connected')?'E_NO_CONNECTION_DELETING_DIRECT':J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.DeleteDirectConversationHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.EndConversation}createIq(G){return z.createIq('end',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_ENDING_CONVERSATION_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.EndConversationHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(Z,ee,te,ne){return new(te||(te=Promise))(function(ae,oe){function se(le){try{de(ne.next(le))}catch(_e){oe(_e)}}function ie(le){try{de(ne['throw'](le))}catch(_e){oe(_e)}}function de(le){le.done?ae(le.value):new te(function(_e){_e(le.value)}).then(se,ie)}de((ne=ne.apply(Z,ee||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(1),N=A(17),H=A(6),B=A(7),z=A(4),W=A(5),G=A(16),J=A(3),K=A(10),$=A(13),X=A(14);class Q extends H.BaseChatHandler{constructor(){super(...arguments),this.messageKey=B.ChatMessageType.FetchConversations}createIq(Z){const ee='fetch',te=G.createIq(ee,this.layer.config.xmpp.iq.namespace,{max:Z.max.toString()});return Z.timestamp&&(te[ee].timestamp=Z.timestamp.toString()),te}handleIqResponse(Z,ee){return I(this,void 0,void 0,function*(){this.layer.logger.log(N.LoggerTypes.Mam,`%c QUERYING SERVER FOR CONVERSATION UPDATES FOR USER: %c${this.layer.comms.username} (since ${Z.timestamp})`,'color: #669; font-weight: bold;','color: #999; font-weight: normal;');const te=JSON.parse(ee.data.fetch),ne=(te.conversations||[]).map((ae)=>this._convertToConversation(ae));if(0<ne.length){this.layer.logger.log(N.LoggerTypes.Mam,`%c ${ne.length} CONVERSATION(S) UPDATED`,'color: #669; font-weight: bold;',te.conversations);const ae=(te.conversations||[]).reduce((_e,ue)=>{return _e.push(...ue.messages.map((ce)=>ce.xml)),_e},[]),oe=yield this.layer.processXmlStanzaStringsFromMam(ae,!1),se=[];for(const _e of oe){const ue=yield K.convertToChatEntry(_e,this.layer);null!==ue&&se.push(ue)}se.sort((_e,ue)=>ue.date-_e.date),this.layer.logger.log(N.LoggerTypes.Mam,`%c ${se.length} CHAT ENTRIES(S) RECEIVED`,'color: #669; font-weight: bold;',se);const ie=new WeakMap;se.forEach((_e)=>{if(_e.to){const ue=ne.find((pe)=>pe.roomJid===_e.to);if(ue){const ce=ie.get(ue)||[];ce.push(_e),ie.set(ue,ce)}}});let de=!1;const le=this.layer.getCurrentUserJid();for(const _e in ne){const ue=ne[_e],ce=new X.ConversationConfigReader(this.layer,ue),pe=ie.get(ue);if(pe&&0<pe.length){const he=ue.participants.find((ge)=>ge.jid===this.layer.getCurrentUserJid()&&ge.role===R.ChatRole.Participant);ue.preview=ce.alert&&!1===ce.participantAlertResponsesVisible&&he?this._createBackupStartPreview(ue):pe[0],Z.timestamp&&(ue.hasUnread=!0)}else ue.preview=this._createBackupStartPreview(ue);if(!ce.alert)de=!0;else if(!ue.acknowledgements||!ue.acknowledgements.find((he)=>he.jid===le)){const he=yield this.layer.priorityAlert(ue);de||(de=!0===he)}}if(de){const _e=this.layer.translateI18nItem($.ChatCommonMetadata.getI18nItem($.ChatCommonI18nKeys.YOU_HAVE_NEW_NOTIFICATIONS));this.layer.emit(z.ChatEvents.ChatNotification,new z.ChatNotificationEventArgs(null,'',_e,!1))}}else this.layer.logger.log(N.LoggerTypes.Mam,`%c NO NEW UPDATES`,'color: #669; font-weight: bold;');return Object.assign({},ee,{data:{conversations:ne,lastIdentifier:parseInt(te.timestamp,10)}})})}_convertToConversation(Z){const ee=Z.name,te=J.enumFromString(Z.type),ne=Z.jid,ae=Z.participants,oe=te===W.ConversationType.Named?Z.title:null,se=te===W.ConversationType.Named?Z.desc||'':null,ie=Z.started,de=Z.receipts,le=Z.responses,_e=Z.started_by,ue=parseInt(Z.hide_before)||0,ce=Z.reply_template,pe=Z.attachments,he=Z.priority?this.layer.getConfiguredPriorityById(Z.priority):null,ge=Z.expiry_ttl,fe=Z.activity_ttl;return K.createConversation(ee,te,ne,ae,oe,se,ie,he?he.id:null,ge,fe,de,le,_e,ue,ce,pe)}_createBackupStartPreview(Z){return{id:'fake',action:'start',type:R.ChatEntryType.Meta,instigator:Z.instigator,date:Z.createdTime,to:'fake'}}}E.FetchConversationsHandler=Q},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.LeaveConversation}createIq(G){return z.createIq('leave',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_LEAVING_CONVERSATION_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.LeaveConversationHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(W,G,J,K){return new(J||(J=Promise))(function($,X){function Q(te){try{ee(K.next(te))}catch(ne){X(ne)}}function Z(te){try{ee(K['throw'](te))}catch(ne){X(ne)}}function ee(te){te.done?$(te.value):new J(function(ne){ne(te.value)}).then(Q,Z)}ee((K=K.apply(W,G||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(13),B=A(16);class z extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ReceivedConversation}createIq(W){return B.createIq('rec',this.layer.config.xmpp.iq.namespace,{roomid:W.id})}handleIqErrorResponse(W,G){return I(this,void 0,void 0,function*(){this.layer.translateI18nItem(H.ChatCommonMetadata.getI18nItem(H.ChatCommonI18nKeys.ERROR_RECEIVING_CONVERSATION));return this.layer.logger.error('Could not mark conversation as received:',G),null})}}E.ReceivedConversationHandler=z},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.RemoveParticipants}createIq(G){return z.createIq('remove',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id,participants:{item:G.participants.map((J)=>z.createIqNode({jid:J.jid}))}})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_REMOVING_PARTICIPANTS_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.RemoveParticipantsHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(18),B=A(13),z=A(16);class W extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.UpdateConversation}createIq(G){return z.createIq('update',this.layer.config.xmpp.iq.namespace,{roomid:G.conversation.id,title:G.newSubject,description:G.newDescription})}handleIqErrorResponse(G,J){return I(this,void 0,void 0,function*(){const K=this.layer.translateI18nItem(B.ChatCommonMetadata.getI18nItem(B.ChatCommonI18nKeys.ERROR_UPDATING_CONVERSATION_TITLE)),$=J.message,X=H.getErrorMessage($,this.layer);return this.layer.error(K,X),null})}}E.UpdateConversationHandler=W},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(21),N=A(6),H=A(7),B=A(4),z=A(10),W=A(3);class G extends N.BaseChatHandler{constructor(){super(...arguments),this.messageKey=H.ChatMessageType.XmppChat,this.DEBOUNCE_PURGE_NAME='purge',this.DEBOUNCE_DURATION=2e3,this._debouncers={}}handleMessage(J){return I(this,void 0,void 0,function*(){if(this.isMamMessage(J)||this.isInjectedMessage(J))return;const K=yield this.convert(J),$=yield this.layer.getConversationByRoomJid(K.to);if(!$||$.isClosed)return null;if(K.date<=($.hideBefore||$.lastHideBefore))return null;K.date>($.hideBefore||$.lastHideBefore)&&({}.preview=K),yield this.layer.updateConversation($,{preview:K}),this.debounce(this.DEBOUNCE_PURGE_NAME,()=>this.layer.purgeConversation($),this.DEBOUNCE_DURATION),this.layer.emit(B.ChatEvents.ChatEntryReceived,new B.ChatEntryEventArgs(K))})}debounce(J,K,$=100){clearTimeout(this._debouncers[J]),this._debouncers[J]=setTimeout(()=>{K(),delete this._debouncers[J]},$)}handleMessageUpdate(J){return I(this,void 0,void 0,function*(){const K=yield this.convert(J),$=yield this.layer.getConversationByRoomJid(K.to);return!$||$.isClosed?null:K.date<=($.hideBefore||$.lastHideBefore)?null:void this.layer.emit(B.ChatEvents.ChatEntryUpdated,new B.ChatEntryEventArgs(K))})}convert(J){return I(this,void 0,void 0,function*(){const K=J._id,$=J.ts,X=this.layer.getCurrentUserJid(),Q=this.isInjectedMessage(J)?J.sender_id:J.mine?X:`${J.sender_resource}@${this.layer.config.xmpp.user.domain}`,Z=W.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost),ee='string'==typeof J.body?J.body:'',te=J.attachments instanceof Array?J.attachments.map((oe)=>({remote:oe.get,local:oe.path})):[],ne=[],ae=[];return(J.state&&J.state.markers||[]).forEach((oe)=>{const se={jid:`${oe.sender_resource}@${this.layer.config.xmpp.user.domain}`,date:oe.ts};oe.type===R.CtXmppClient.MARKER_TYPES.RECEIVED&&ne.push(se),oe.type===R.CtXmppClient.MARKER_TYPES.READ&&ae.push(se)}),z.createChatMessage(K,$,X,Q,Z,ee,te,ne,ae,J.placeholder)})}}E.ChatMessageHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(B,z,W,G){return new(W||(W=Promise))(function(J,K){function $(Z){try{Q(G.next(Z))}catch(ee){K(ee)}}function X(Z){try{Q(G['throw'](Z))}catch(ee){K(ee)}}function Q(Z){Z.done?J(Z.value):new W(function(ee){ee(Z.value)}).then($,X)}Q((G=G.apply(B,z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7);class H extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ConversationEnded}handleMessage(){return I(this,void 0,void 0,function*(){})}}E.ConversationEndedHandler=H},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3),G=A(14);class J extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ConversationStarted}handleMessage(K){return I(this,void 0,void 0,function*(){if(this.isMamMessage(K))return;const $=K.data[this.messageKey];let X=yield this.layer.getConversationById($.id);if(null!==X)return;const Q=W.enumFromString($.type);X=z.createConversation($.id,Q,$.roomJid,$.participants,$.title,$.description,$.date,$.priority,$.expiry_ttl,$.activity_ttl,[],[],$.instigator,void 0,$.reply_template,$.attachments);const Z=new G.ConversationConfigReader(this.layer,X),ee=yield this.convert(K,$);yield this.layer.addConversation(X,ee);let te=!0;Z.alert&&(te=yield this.layer.priorityAlert(X)),te&&this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(ee))})}convert(K,$){return I(this,void 0,void 0,function*(){const X=K._id,Q=W.findRoomJidInMessage(K,this.layer.config.xmpp.mucHost);return z.createMetaEntry(X,$.date,Q,B.ChatMetaActivityType.START,$.instigator)})}}E.ConversationStartedHandler=J},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3);class G extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ConversationUpdated}handleMessage(J){const K=($)=>super[$];return I(this,void 0,void 0,function*(){if(!this.isMamMessage(J)){const $=J.data[this.messageKey],X=yield this.layer.getConversationById($.id);if(!X)return K('handleConversationNotFound').call(this,J,$.id);X.subject=$.title,X.description=$.description;const Q=yield this.convert(J,$);yield this.layer.updateConversation(X,{preview:Q}),this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(Q))}})}convert(J,K){return I(this,void 0,void 0,function*(){const $=J._id,X=W.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost);return z.createMetaEntry($,K.date,X,B.ChatMetaActivityType.UPDATE,K.instigator,null,K.title)})}}E.ConversationUpdatedHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(X,Q,Z,ee){return new(Z||(Z=Promise))(function(te,ne){function ae(ie){try{se(ee.next(ie))}catch(de){ne(de)}}function oe(ie){try{se(ee['throw'](ie))}catch(de){ne(de)}}function se(ie){ie.done?te(ie.value):new Z(function(de){de(ie.value)}).then(ae,oe)}se((ee=ee.apply(X,Q||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(1),N=A(6),H=A(7),B=A(4),z=A(5),W=A(10),G=A(3),J=A(55),K=A(14);class $ extends N.BaseChatHandler{constructor(){super(...arguments),this.messageKey=H.ChatMessageType.ParticipantAcknowledged}handleMessage(X){const Q=(Z)=>super[Z];return I(this,void 0,void 0,function*(){if(this.isMamMessage(X))return;const Z=X.data[this.messageKey],ee=yield this.layer.getConversationById(Z.id);if(!ee)return Q('handleConversationNotFound').call(this,X,Z.id);const te=new K.ConversationConfigReader(this.layer,ee);let ne=!1;if(ee.acknowledgements||(ee.acknowledgements=[]),ee.acknowledgements.find((se)=>se.jid===this.layer.getCurrentUserJid())?ne=!0:ee.acknowledgements.push({jid:Z.instigator,ts:parseInt(Z.date),value:Z.value}),!ee.acknowledgements.find((se)=>se.jid===Z.instigator)&&te.autoIncludeMembersInRoles.length&&te.autoIncludeMembersInRoles.includes(this.layer.getCurrentUser().group))return void ee.acknowledgements.push({jid:Z.instigator,ts:parseInt(Z.date),value:Z.value});const ae=yield this.convert(X,Z);let oe=!1;if(Z.instigator===this.layer.getCurrentUserJid()&&!1===te.shouldOpenConversationAfterResponded&&(ee.hasUnread=!1,oe=!0),ee.participants.filter((se)=>se.role===R.ChatRole.Owner).find((se)=>se.jid===this.layer.getCurrentUserJid())||te.participantAlertResponsesVisible?yield this.layer.updateConversation(ee,{preview:ae,isParticipantChange:!1,overrideHasUnread:oe}):yield this.layer.updateConversation(ee),this.layer.emit(B.ChatEvents.ChatEntryReceived,new B.ChatEntryEventArgs(ae)),Z.instigator===this.layer.getCurrentUserJid()){const se=window;se.PushNotification&&(se.PushNotification.addToIgnoreList&&se.PushNotification.addToIgnoreList(()=>{},()=>{},ee.createdTime),se.PushNotification.cancelAtFront&&se.PushNotification.cancelAtFront(()=>{},()=>{}))}Z.instigator===this.layer.getCurrentUserJid()&&ne?this.layer.emit(B.ChatEvents.PriorityConversationAcknowledgedOnAnotherDevice):this.layer.emit(B.ChatEvents.PriorityConversationAcknowledged,new J.PriorityConversationAcknowledgedEventArgs(ee,this.layer.getPendingAlertCount(),Z.instigator))})}convert(X,Q){return I(this,void 0,void 0,function*(){const Z=X._id,ee=G.findRoomJidInMessage(X,this.layer.config.xmpp.mucHost);return W.createMetaEntry(Z,Q.date,ee,z.ChatMetaActivityType.ACK,Q.instigator,Q.value)})}}E.ParticipantAcknowledgedHandler=$},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3);class G extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ParticipantAdded}handleMessage(J){const K=($)=>super[$];return I(this,void 0,void 0,function*(){if(!this.isMamMessage(J)){const $=J.data[this.messageKey],X=yield this.layer.getConversationById($.id);if(!X)return K('handleConversationNotFound').call(this,J,$.id);const Q=[...X.participants,$.participant];X.participants=W.uniqueArrayItems(Q,(ee)=>ee.jid);const Z=yield this.convert(J,$);yield this.layer.updateConversation(X,{preview:Z,isParticipantChange:!0}),this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(Z))}})}convert(J,K){return I(this,void 0,void 0,function*(){const $=J._id,X=W.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost);return z.createMetaEntry($,K.date,X,B.ChatMetaActivityType.ADD,K.instigator,K.participant.jid)})}}E.ParticipantAddedHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3);class G extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ParticipantLeft}handleMessage(J){const K=($)=>super[$];return I(this,void 0,void 0,function*(){if(this.isMamMessage(J))return;const $=J.data[this.messageKey],X=yield this.layer.getConversationById($.id);if(!X)return K('handleConversationNotFound').call(this,J,$.id);X.participants=X.participants.filter((Z)=>!W.jidsMatch(Z.jid,$.instigator));const Q=yield this.convert(J,$);yield this.layer.updateConversation(X,{preview:Q,isParticipantChange:!0}),this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(Q))})}convert(J,K){return I(this,void 0,void 0,function*(){const $=J._id,X=W.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost);return z.createMetaEntry($,K.date,X,B.ChatMetaActivityType.LEFT,K.instigator)})}}E.ParticipantLeftHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(5),B=A(4),z=A(3),W=A(10);class G extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ParticipantReceived}handleMessage(J){const K=($)=>super[$];return I(this,void 0,void 0,function*(){if(this.isMamMessage(J))return;const $=J.data.participantreceipt,X=yield this.layer.getConversationById($.id);if(!X)return K('handleConversationNotFound').call(this,J,$.id);let Q=!1;X.receivedList||(X.receivedList=[]),X.receivedList.find((ee)=>ee.jid===this.layer.getCurrentUserJid())||(X.receivedList.push({jid:$.instigator,ts:parseInt($.ts),value:''}),Q=!0),yield this.layer.updateConversation(X);const Z=yield this.layer.getCurrentConversation();Z&&Z.id===X.id&&this.layer.emit(B.ChatEvents.CurrentConversationChanged)})}convert(J,K){return I(this,void 0,void 0,function*(){const $=J._id,X=z.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost);return W.createMetaEntry($,K.date,X,H.ChatMetaActivityType.RECEIVED,K.instigator,'received')})}}E.ParticipantReceivedHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3);class G extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ParticipantRemoved}handleMessage(J){const K=($)=>super[$];return I(this,void 0,void 0,function*(){if(this.isMamMessage(J))return;const $=J.data[this.messageKey],X=yield this.layer.getConversationById($.id);if(!X)return K('handleConversationNotFound').call(this,J,$.id);X.participants=X.participants.filter((Z)=>!W.jidsMatch(Z.jid,$.participant.jid));const Q=yield this.convert(J,$);yield this.layer.updateConversation(X,{preview:Q,isParticipantChange:!0}),this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(Q))})}convert(J,K){return I(this,void 0,void 0,function*(){const $=J._id,X=W.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost);return z.createMetaEntry($,K.date,X,B.ChatMetaActivityType.REMOVE,K.instigator,K.participant.jid)})}}E.ParticipantRemovedHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3);class G extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.ParticipantRoleChanged}handleMessage(J){const K=($)=>super[$];return I(this,void 0,void 0,function*(){if(this.isMamMessage(J))return;const $=J.data[this.messageKey],X=yield this.layer.getConversationById($.id);if(!X)return K('handleConversationNotFound').call(this,J,$.id);const Q=X.participants.find((ee)=>W.jidsMatch(ee.jid,$.participant.jid));if(!Q)return void console.error('\uD83D\uDE31 Unable to find participant in conversation');Q.role=$.participant.role;const Z=yield this.convert(J,$);yield this.layer.updateConversation(X,{preview:Z,isParticipantChange:!0}),this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(Z))})}convert(J,K){return I(this,void 0,void 0,function*(){const $=J._id,X=W.findRoomJidInMessage(J,this.layer.config.xmpp.mucHost);return z.createMetaEntry($,K.date,X,B.ChatMetaActivityType.CHANGEROLE,K.instigator,K.participant.jid,K.participant.role.toString())})}}E.ParticipantRoleChangedHandler=G},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4),B=A(5),z=A(10),W=A(3),G=A(14);class J extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.User_Added}handleMessage(K){return I(this,void 0,void 0,function*(){const $=K.data[this.messageKey];let X=yield this.layer.getConversationById($.id);if(null===X&&this.isMamMessage(K))return;if(null!==X&&!X.isClosed)return;const Q=new G.ConversationConfigReader(this.layer,X),Z=this.layer.getCurrentUserJid(),ee=z.createMetaEntry(K._id,$.date,$.roomJid,B.ChatMetaActivityType.ADD,$.instigator,Z);if(X&&X.isClosed)yield this.layer.reopenConversation(X,$.participants,ee);else{const ne=W.enumFromString($.type);X=z.createConversation($.id,ne,$.roomJid,$.participants,$.title,$.description,$.started,$.priority,$.expiry_ttl,$.activity_ttl,$.receipts,$.responses,$.started_by),yield this.layer.addConversation(X,ee)}let te=!0;Q.alert&&(te=yield this.layer.priorityAlert(X)),te&&this.layer.emit(H.ChatEvents.ChatEntryReceived,new H.ChatEntryEventArgs(ee))})}}E.UserAddedHandler=J},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(1),N=A(6),H=A(7),B=A(4),z=A(5),W=A(10),G=A(13);class J extends N.BaseChatHandler{constructor(){super(...arguments),this.messageKey=H.ChatMessageType.User_ConversationEnded}handleMessage(K){const $=(X)=>super[X];return I(this,void 0,void 0,function*(){const X=K.data[this.messageKey],Q=yield this.layer.getConversationById(X.id);if(!Q)return $('handleConversationNotFound').call(this,K,X.id);const Z=yield this.layer.getCurrentConversation(),ee=Z&&Z.id===Q.id,te=this.layer.getCurrentUserJid(),ne=te===X.instigator;if(ee&&!ne){const oe=this.layer.translateI18nItem(G.ChatCommonMetadata.getI18nItem(G.ChatCommonI18nKeys.ENDED_TITLE)),se=this.layer.translateI18nItem(G.ChatCommonMetadata.getI18nItem(G.ChatCommonI18nKeys.ENDED_MESSAGE)).replace('{{subject}}',Q.subject);this.layer.emit(B.ChatEvents.ForceQuitConversation,new B.ForceQuitConversationEventArgs(Q,X.instigator,z.ChatMetaActivityType.END)),setTimeout(()=>this.layer.emit(B.ChatEvents._Request_RaiseAlert,new R.DefaultAlerts(this.layer).AlertAcknowledge(oe,se,1,{}),!0),1e3)}const ae=W.createMetaEntry(K._id,X.date,Q.roomJid,z.ChatMetaActivityType.END,X.instigator);yield this.layer.closeConversation(Q,ae),'expired'===X.state&&(yield this.layer.removeConversationById(Q.id))})}}E.UserConversationEndedHandler=J},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(4);class B extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.User_DeleteDirectConversation}handleMessage(z){const W=(G)=>super[G];return I(this,void 0,void 0,function*(){const G=z.data[this.messageKey];if(this.layer.getCurrentUser().id.toLowerCase()===G.instigator.toLowerCase()){const J=yield this.layer.getConversationById(G.id);if(!J)return W('handleConversationNotFound').call(this,z,G.id);if(J.preview&&J.preview.date>parseInt(G.hide_before))J.hideBefore&&(J.lastHideBefore=J.hideBefore,J.hideBefore=0),yield this.layer.updateConversation(J);else{const K=yield this.layer.getCurrentConversation(),$=K&&K.id===J.id;if($)K.hideBefore=parseInt(G.hide_before),yield this.layer.comms.clearStoredConversationMessages(K),yield this.layer.updateConversation(K),yield this.layer.clearCurrentConversation(),this.layer.emit(H.ChatEvents.ConversationDeleted);else{const X=yield this.layer.getConversationById(G.id);X.hideBefore=parseInt(G.hide_before),yield this.layer.comms.clearStoredConversationMessages(X),yield this.layer.updateConversation(X)}}this.layer.dismissWaitingMessage()}})}}E.UserDeleteDirectConversationHandler=B},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(W,G,J,K){return new(J||(J=Promise))(function($,X){function Q(te){try{ee(K.next(te))}catch(ne){X(ne)}}function Z(te){try{ee(K['throw'](te))}catch(ne){X(ne)}}function ee(te){te.done?$(te.value):new J(function(ne){ne(te.value)}).then(Q,Z)}ee((K=K.apply(W,G||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(6),N=A(7),H=A(5),B=A(10);class z extends R.BaseChatHandler{constructor(){super(...arguments),this.messageKey=N.ChatMessageType.User_Left}handleMessage(W){const G=(J)=>super[J];return I(this,void 0,void 0,function*(){const J=W.data[this.messageKey],K=yield this.layer.getConversationById(J.id);if(!K)return G('handleConversationNotFound').call(this,W,J.id);const $=this.layer.getCurrentUserJid(),X=B.createMetaEntry(W._id,J.date,K.roomJid,H.ChatMetaActivityType.LEFT,$);yield this.layer.closeConversation(K,X)})}}E.UserLeftHandler=z},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(1),N=A(6),H=A(7),B=A(4),z=A(5),W=A(10),G=A(13);class J extends N.BaseChatHandler{constructor(){super(...arguments),this.messageKey=H.ChatMessageType.User_Removed}handleMessage(K){const $=(X)=>super[X];return I(this,void 0,void 0,function*(){const X=K.data[this.messageKey],Q=yield this.layer.getConversationById(X.id);if(!Q)return $('handleConversationNotFound').call(this,K,X.id);const Z=yield this.layer.getCurrentConversation(),ee=Z&&Z.id===Q.id,te=this.layer.getCurrentUserJid(),ne=te===X.instigator;if(ee&&!ne){const oe=this.layer.translateI18nItem(G.ChatCommonMetadata.getI18nItem(G.ChatCommonI18nKeys.REMOVED_TITLE)),se=this.layer.translateI18nItem(G.ChatCommonMetadata.getI18nItem(G.ChatCommonI18nKeys.REMOVED_MESSAGE)).replace('{{subject}}',Q.subject);this.layer.emit(B.ChatEvents._Request_RaiseAlert,new R.DefaultAlerts(this.layer).AlertAcknowledge(oe,se,1,{})),this.layer.emit(B.ChatEvents.ForceQuitConversation,new B.ConversationEventArgs(Q))}const ae=W.createMetaEntry(K._id,X.date,Q.roomJid,z.ChatMetaActivityType.REMOVE,X.instigator,te);yield this.layer.closeConversation(Q,ae),this.layer.emit(B.ChatEvents.ChatEntryReceived,new B.ChatEntryEventArgs(ae))})}}E.UserRemovedHandler=J},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(R){for(var N in R)E.hasOwnProperty(N)||(E[N]=R[N])}(A(150))},function(L,E,A){'use strict';function I(W){return W.config&&W.config.pagerSettings&&!1!==W.config.pagerSettings.enabled}function R(W,G){return I(W)?W.config&&W.config.pagerSettings?W.config.pagerSettings[G]||null:null:null}Object.defineProperty(E,'__esModule',{value:!0});const z=A(109);E.isPagerEnabled=I,E.getPagerConfigSetting=R,E.getAttachmentSettings=function(W){return I(W)?R(W,'attachments'):null},E.getReplyTemplates=function(W){if(!I(W))return[];const G=R(W,'replyTemplates'),J=z.defaultReplyTemplate;return G&&G instanceof Array?[J,...G.sort((K,$)=>K.id>$.id?1:$.id>K.id?-1:0)]:[J]},E.generateDefaultNewPage=function(){return{replyTemplate:z.defaultReplyTemplate,imgSrc:'',audioSrc:'',enableChat:!0}}},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(30),N=A(3),H=A(22),B=H.getSource('Media');var z;(function(G){G[G.NoAudioDevicesFound=1]='NoAudioDevicesFound'})(z=E.AudioRecorderError||(E.AudioRecorderError={}));E.SimpleAudioRecorder=class{constructor(G,J){this._onDataAvailable=(K)=>{this._chunks.push(K.data)},this._onStopRecording=()=>I(this,void 0,void 0,function*(){this._stream.stop();const $=new Blob(this._chunks);try{const X=yield this._encodeToMp3($);this._onFinishedCallback&&this._onFinishedCallback(X)}catch(X){this._onFinishedCallback&&this._onFinishedCallback(null)}}),this._mediaError=()=>{},this._mediaStatusUpdate=()=>{},this._isMobile=N.isMobile(),this._onFinishedCallback=G,this._errorCallback=J}_encodeToMp3(G){return new Promise((J,K)=>I(this,void 0,void 0,function*(){const $=yield R.saveFileToDisk(G,'recording.webm'),X=this._workOutPath($),Q=window.require('easy-ffmpeg');Q($).output(X).on('end',()=>{const Z=window.require('fs');Z.unlink($,()=>{J(X)})}).on('error',(Z)=>{console.error('Encoding error:',Z),K(Z)}).run()}))}_workOutPath(G){const J=window;if(J.process&&'win32'===J.process.platform){const K=`${G.substring(0,G.lastIndexOf('\\'))}`;return`${K}\\${new Date().valueOf()}_recording.mp3`}const K=`${G.substring(0,G.lastIndexOf('/'))}`;return`${K}/${new Date().valueOf()}_recording.mp3`}start(){return I(this,void 0,void 0,function*(){if(this._isMobile){let G=yield R.getStorageLocation();0===G.indexOf('file://')&&(G=G.replace('file://',''));const J=`${G}${new Date().getTime()}.m4a`;this._media=new B(J,()=>{},this._mediaError,this._mediaStatusUpdate),this._media.startRecordWithCompression({SampleRate:44100,NumberOfChannels:1})}else try{this._chunks=[],this._stream=yield navigator.mediaDevices.getUserMedia({audio:!0}),this._recorder=new MediaRecorder(this._stream),this._recorder.addEventListener('dataavailable',this._onDataAvailable),this._recorder.addEventListener('stop',this._onStopRecording),this._recorder.start()}catch(G){console.error('NK:',G),G.name&&'DevicesNotFoundError'===G.name&&this._errorCallback&&this._errorCallback(z.NoAudioDevicesFound)}})}stop(){return I(this,void 0,void 0,function*(){this._isMobile?(this._media.stopRecord(),this._media.release(),this._onFinishedCallback&&this._onFinishedCallback(this._media.src)):this._recorder&&this._recorder.stop&&this._recorder.stop()})}}},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(H,B,z,W){return new(z||(z=Promise))(function(G,J){function K(Q){try{X(W.next(Q))}catch(Z){J(Z)}}function $(Q){try{X(W['throw'](Q))}catch(Z){J(Z)}}function X(Q){Q.done?G(Q.value):new z(function(Z){Z(Q.value)}).then(K,$)}X((W=W.apply(H,B||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(30);E.SimpleVideoRecorder=class{constructor(H,B){this._constraints={audio:!0,video:{width:640,height:480,frameRate:24}},this._onDataAvailable=(z)=>{this._chunks.push(z.data)},this._onStopRecording=()=>I(this,void 0,void 0,function*(){const W=new Blob(this._chunks);try{const G=yield R.saveFileToDisk(W,'video.webm');this._onFinishedCallback&&this._onFinishedCallback(G)}catch(G){console.error('NK: File saving error',G)}}),this._video=H,this._onFinishedCallback=B}_encodeToMp4(H){return new Promise((B,z)=>I(this,void 0,void 0,function*(){const W=yield R.saveFileToDisk(H,'video.webm'),G=`${W.substring(0,W.lastIndexOf('/'))}`,J=`${G}/${new Date().valueOf()}_video.mp4`,K=window.require('easy-ffmpeg');K(W).output(J).on('end',()=>{const $=window.require('fs');$.unlink(W,()=>{B(J)})}).on('error',($)=>{console.error('Encoding error:',$),z($)}).run()}))}start(){return I(this,void 0,void 0,function*(){this._chunks=[],this._stream=yield navigator.mediaDevices.getUserMedia(this._constraints),this._video.onloadedmetadata=()=>this._video.play(),this._video.muted=!0,this._video.srcObject=this._stream,this._recorder=new MediaRecorder(this._stream),this._recorder.addEventListener('dataavailable',this._onDataAvailable),this._recorder.addEventListener('stop',this._onStopRecording),this._recorder.start()})}stop(){this._recorder.stop(),this._stream.getTracks().forEach((H)=>H.stop()),this._video.srcObject=null}}},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(3);var R;(function(H){H[H.iOS=1]='iOS',H[H.Android=2]='Android',H[H.Desktop=3]='Desktop'})(R||(R={}));E.VibrationController=class{constructor(){this._iterations=0;const H=window;this._platform=H.cti?'android'===H.cti.store.env.platform.name?R.Android:R.iOS:R.Desktop}_vibrate(H=100,B=!1){if(!I.isDesktop()){const z=navigator.vibrate;z(H,B)}else navigator.vibrate(H)}vibrate(H=100,B=1,z=!1){clearInterval(this._timer);const W=H+500;0===H?this._platform===R.iOS?(this._vibrate(H,z),this._timer=setInterval(()=>this._vibrate(H,z),W)):this._platform===R.Android&&this._vibrate(8.64e7,z):(this._vibrate(H,z),0===this._iterations?this._timer=setInterval(()=>this._vibrate(H,z),W):(this._iterations=B-1,this._timer=setInterval(()=>{0<this._iterations?(this._iterations--,this._vibrate(H,z)):this.stop()},W)))}vibrateWithPattern(H,B=1,z=!1){if(clearInterval(this._timer),this._iterations=0,this._platform===R.Android){const W=H.reduce((G,J)=>G+=J,0)+500;this._vibrate(H,z),this._iterations--,this._timer=0===B?setInterval(()=>this._vibrate(H,z),W):setInterval(()=>{0<this._iterations?(this._iterations--,this._vibrate(H,z)):this.stop()},W)}}stop(){this._iterations=0,clearInterval(this._timer),delete this._timer,this._vibrate(0)}}},function(L,E,A){'use strict';function R(Z,ee){return null===ee||Q.translationData.has(ee)?Q.translationData.get(ee).getUniqueI18Keys(Z)||[]:[]}Object.defineProperty(E,'__esModule',{value:!0});const N=A(18),H=A(13),B=A(36),z=A(37),W=A(38),G=A(39),J=A(40),K=A(29),$=A(41),X=A(105),Q=window;E.getChatI18nKeys=function(Z=!1,...ee){0===ee.length&&(ee=[...Q.translationData.keys()]);const te=ee.reduce((ne,ae)=>ne.concat(R(Z,ae)),[]);return te.filter((ne,ae,oe)=>{return oe.indexOf(ne)===ae}).sort()},Q.translationData.set('CTCLConversationAlert',X.CTCLConversationAlertMetadata.instance),Q.translationData.set('CTCLAddConversationContacts',B.CTCLAddConversationContactsMetadata.instance),Q.translationData.set('CTCLChatMessageList',z.CTCLChatMessageListMetadata.instance),Q.translationData.set('CTCLContactInfo',W.CTCLContactInfoMetadata.instance),Q.translationData.set('CTCLConversationInfo',G.CTCLConversationInfoMetadata.instance),Q.translationData.set('CTCLConversationList',J.CTCLConversationListMetadata.instance),Q.translationData.set('CTCLHeader',K.CTCLHeaderMetadata.instance),Q.translationData.set('CTCLNewConversation',$.CTCLNewConversationMetadata.instance),Q.translationData.set('ChatErrors',N.ChatErrorsMetadata),Q.translationData.set('ChatCommon',H.ChatCommonMetadata)},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.AUDIO='audio']='AUDIO',R[R.IMAGE='image']='IMAGE',R[R.VIDEO='video']='VIDEO'})(I=E.SupportedAttachmentType||(E.SupportedAttachmentType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.START='start']='START',R[R.UPDATE='update']='UPDATE',R[R.ADD='add']='ADD',R[R.REMOVE='remove']='REMOVE',R[R.CHANGEROLE='changerole']='CHANGEROLE',R[R.LEFT='left']='LEFT',R[R.END='end']='END',R[R.ACK='acknowledge']='ACK',R[R.RECEIVED='received']='RECEIVED'})(I=E.ChatMetaActivityType||(E.ChatMetaActivityType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Direct='direct']='Direct',R[R.Named='named']='Named'})(I=E.ConversationType||(E.ConversationType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R.UI={Pencil:{viewBox:'0 0 1024 1024',paths:['M732.458 3.542l-572.458 572.458-160 448 447.666-160 572.792-572.458c32-128-160-320-288-288zM288 704l-64-64 544-544 64 64-544 544z']},Attachment:{viewBox:'0 0 1097 1024',paths:['M548.571 384c90.857 0 164.571 73.714 164.571 164.571s-73.714 164.571-164.571 164.571-164.571-73.714-164.571-164.571 73.714-164.571 164.571-164.571zM950.857 146.286c80.571 0 146.286 65.714 146.286 146.286v512c0 80.571-65.714 146.286-146.286 146.286h-804.571c-80.571 0-146.286-65.714-146.286-146.286v-512c0-80.571 65.714-146.286 146.286-146.286h128l29.143-77.714c14.286-37.714 58.857-68.571 98.857-68.571h292.571c40 0 84.571 30.857 98.857 68.571l29.143 77.714h128zM548.571 804.571c141.143 0 256-114.857 256-256s-114.857-256-256-256-256 114.857-256 256 114.857 256 256 256z']},Error:{viewBox:'0 0 1024 1024',paths:['M512 96c-111.118 0-215.584 43.272-294.156 121.844s-121.844 183.038-121.844 294.156c0 111.118 43.272 215.584 121.844 294.156s183.038 121.844 294.156 121.844c111.118 0 215.584-43.272 294.156-121.844s121.844-183.038 121.844-294.156c0-111.118-43.272-215.584-121.844-294.156s-183.038-121.844-294.156-121.844zM512 0v0c282.77 0 512 229.23 512 512s-229.23 512-512 512c-282.77 0-512-229.23-512-512s229.23-512 512-512zM448 704h128v128h-128zM448 192h128v384h-128z']},SendMessage:{viewBox:'0 0 1024 1024',paths:['M448 704l393.636 140.488 182.364-797.356zM320 659.908l704-612.776-1024 506.462zM448 771.954v252.046l185.752-185.752z']},Reconnect:{viewBox:'0 0 1024 1024',paths:['M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z']},Download:{viewBox:'0 0 1024 1024',paths:['M576 576h-128v192h-160l224 224 224-224h-160z','M892.216 514.542c2.49-11.29 3.784-22.87 3.784-34.542 0-88.224-71.776-160-160-160-13.956 0-27.796 1.83-41.164 5.378-24.838-77.286-97.404-133.378-182.836-133.378-86.654 0-160.886 58.042-184.312 138.118-22.982-6.66-47.052-10.118-71.688-10.118-141.158 0-256 114.84-256 256 0 61.986 22.444 121.798 63.2 168.42 40.354 46.164 95.852 76.346 156.266 84.988 1.538 0.218 3.064 0.326 4.572 0.326 15.666 0 29.354-11.514 31.638-27.472 2.502-17.496-9.652-33.708-27.146-36.208-45.262-6.474-86.864-29.116-117.144-63.754-30.558-34.956-47.386-79.81-47.386-126.3 0-105.87 86.13-192 192-192 52.024 0 100.73 20.466 137.146 57.63 12.368 12.624 32.63 12.83 45.252 0.458 12.624-12.37 12.83-32.628 0.458-45.252-15.676-15.998-33.070-29.66-51.76-40.848 12.84-57.42 64.304-99.988 124.904-99.988 70.58 0 128 57.42 128 128 0 8.706-0.876 17.398-2.602 25.832-3.542 17.316 7.624 34.222 24.938 37.764 2.164 0.444 4.32 0.656 6.448 0.656 14.884 0 28.218-10.442 31.318-25.592 2.218-10.854 3.494-21.972 3.812-33.126 10.244-3.624 21.096-5.534 32.086-5.534 52.936 0 96 43.066 96 96 0 10.964-1.88 21.784-5.484 32h-26.516c-17.674 0-32 14.326-32 32s14.326 32 32 32h64c52.934 0 96 43.066 96 96s-43.066 96-96 96h-64c-17.674 0-32 14.326-32 32s14.326 32 32 32h64c88.224 0 160-71.776 160-160 0-78.594-56.976-144.086-131.784-157.458z']},ScrollToBottom:{viewBox:'0 0 1024 1024',nodes:[{name:'mask',attributes:{id:'ScrollToBottom-Mask'},children:[{name:'rect',attributes:{width:'100%',height:'100%',fill:'white'}},{name:'path',attributes:{d:'M512 684l150-350-300 0z',fill:'black'}}]},{name:'path',attributes:{d:'M512 64c282.77 0 512 186.25 512 416 0 229.752-229.23 416-512 416-27.156 0-53.81-1.734-79.824-5.044-109.978 109.978-241.25 129.7-368.176 132.596v-26.916c68.536-33.578 128-94.74 128-164.636 0-9.754-0.758-19.33-2.164-28.696-115.796-76.264-189.836-192.754-189.836-323.304 0-229.75 229.23-416 512-416z',mask:'url(#ScrollToBottom-Mask)'}}]},Plus:{viewBox:'0 0 1024 1024',paths:['M992 384h-352v-352c0-17.672-14.328-32-32-32h-192c-17.672 0-32 14.328-32 32v352h-352c-17.672 0-32 14.328-32 32v192c0 17.672 14.328 32 32 32h352v352c0 17.672 14.328 32 32 32h192c17.672 0 32-14.328 32-32v-352h352c17.672 0 32-14.328 32-32v-192c0-17.672-14.328-32-32-32z']},Photo:{viewBox:'0 0 1024 1024',paths:['M959.884 128c0.040 0.034 0.082 0.076 0.116 0.116v767.77c-0.034 0.040-0.076 0.082-0.116 0.116h-895.77c-0.040-0.034-0.082-0.076-0.114-0.116v-767.772c0.034-0.040 0.076-0.082 0.114-0.114h895.77zM960 64h-896c-35.2 0-64 28.8-64 64v768c0 35.2 28.8 64 64 64h896c35.2 0 64-28.8 64-64v-768c0-35.2-28.8-64-64-64v0z','M832 288c0 53.020-42.98 96-96 96s-96-42.98-96-96 42.98-96 96-96 96 42.98 96 96z','M896 832h-768v-128l224-384 256 320h64l224-192z']},Cross:{viewBox:'0 0 1024 1024',paths:['M893.254 221.254l-90.508-90.508-290.746 290.744-290.746-290.744-90.508 90.506 290.746 290.748-290.746 290.746 90.508 90.508 290.746-290.746 290.746 290.746 90.508-90.51-290.744-290.744z']},MusicalNote:{viewBox:'0 0 1024 1024',paths:['M812.158 294.412c-87.050-122.21-78.88-35.914-163.208-279.684l-89.178-14.728-99.218 732.95c-223.632-127.958-364.672 3.468-328.984 168.886 18.92 87.712 161.432 170.274 301.8 88.78 66.342-39.89 87.672-104.22 96.14-149.838l70.876-543.852c252.89 222.974 172.142 357.892 119.85 513.244 107.498-44.334 275.88-239.888 91.922-515.758z']},Microphone:{viewBox:'0 0 1024 1024',paths:['M896 448c0-6.26-0.152-12.59-0.454-18.812-1.278-26.478-23.746-46.918-50.256-45.632-26.478 1.278-46.908 23.778-45.63 50.256 0.224 4.688 0.34 9.46 0.34 14.186 0 158.894-129.196 288.166-288 288.166s-288-129.272-288-288.166c0-4.692 0.114-9.438 0.336-14.106 1.27-26.48-19.166-48.974-45.644-50.246-26.46-1.26-48.974 19.166-50.244 45.646-0.298 6.196-0.448 12.49-0.448 18.708 0 190.018 138.622 348.226 320 378.8v133.2c0 35.346 28.654 64 64 64s64-28.654 64-64v-133.2c181.378-30.574 320-188.782 320-378.8z','M512 0c-106.040 0-192 85.96-192 192v256c0 106.040 85.96 192 192 192s192-85.96 192-192v-256c0-106.040-85.96-192-192-192z']},CheckboxChecked:{viewBox:'0 0 1024 1024',paths:['M896 0h-768c-70.4 0-128 57.6-128 128v768c0 70.4 57.6 128 128 128h768c70.4 0 128-57.6 128-128v-768c0-70.4-57.6-128-128-128zM448 794.51l-237.254-237.256 90.51-90.508 146.744 146.744 306.746-306.746 90.508 90.51-397.254 397.256z']},CheckboxUnchecked:{viewBox:'0 0 1024 1024',paths:['M896 0h-768c-70.4 0-128 57.6-128 128v768c0 70.4 57.6 128 128 128h768c70.4 0 128-57.6 128-128v-768c0-70.4-57.6-128-128-128zM896 896h-768v-768h768v768z']},SquareFilled:{viewBox:'0 0 1024 1024',paths:['M128 128h768v768h-768z']},CircleFilled:{viewBox:'0 0 1024 1024',paths:['M0 512c0-282.77 229.23-512 512-512s512 229.23 512 512c0 282.77-229.23 512-512 512s-512-229.23-512-512z']},Play:{viewBox:'0 0 1024 1024',paths:['M192 128l640 384-640 384z']},Pause:{viewBox:'0 0 1024 1024',paths:['M128 128h320v768h-320zM576 128h320v768h-320z']},AlertBell:{viewBox:'0 0 1024 1024',paths:['M1024 832c-106.042 0-192-85.96-192-192v-285.090c0-140.738-109.942-258.128-256-285.084v-69.826h-128v69.824c-146.064 26.958-256 144.346-256 285.084v285.092c0 106.040-85.962 192-192 192v64h429.598c-5.208 11.424-8.11 24.118-8.11 37.49 0 49.986 40.524 90.51 90.512 90.51 49.984 0 90.51-40.524 90.51-90.51 0-13.376-2.902-26.066-8.112-37.49h429.602v-64z']},AlertBellRinging:{viewBox:'0 0 1024 1024',paths:['M1024 832c-106.042 0-192-85.96-192-192v-285.090c0-140.738-109.942-258.128-256-285.084v-69.826h-128v69.824c-146.064 26.958-256 144.346-256 285.084v285.092c0 106.040-85.962 192-192 192v64h429.598c-5.208 11.424-8.11 24.118-8.11 37.49 0 49.986 40.524 90.51 90.512 90.51 49.984 0 90.51-40.524 90.51-90.51 0-13.376-2.9-26.066-8.112-37.49h429.602v-64z','M990.92 384c-16.714 0-30.786-12.98-31.9-29.9-7.526-114.362-58.112-220.42-142.44-298.638-12.958-12.018-13.718-32.264-1.7-45.222 12.020-12.956 32.266-13.716 45.222-1.7 96.366 89.384 154.174 210.614 162.78 341.358 1.16 17.634-12.196 32.872-29.83 34.032-0.714 0.048-1.428 0.070-2.132 0.070z','M33.082 384c-0.708 0-1.416-0.022-2.132-0.070-17.636-1.16-30.99-16.398-29.83-34.032 8.606-130.75 66.416-251.982 162.778-341.36 12.96-12.018 33.206-11.254 45.224 1.702 12.018 12.958 11.256 33.204-1.702 45.222-84.326 78.214-134.912 184.272-142.44 298.64-1.112 16.92-15.186 29.898-31.898 29.898z']},PickVideo:{viewBox:'0 0 1024 1024',paths:['M78.302 262.54l865.444-231.884 49.69 185.452-865.444 231.884zM128 448v576h896v-576h-896zM448 896v-320l256 160-256 160z']},RecordVideo:{viewBox:'0 0 1024 1024',paths:['M978.84 256.252c-10.588 0-21.458 3.722-31.436 10.766l-179.404 126.614v-105.632c0-52.8-43.2-96-96-96h-576c-52.8 0-96 43.2-96 96v448c0 52.8 43.2 96 96 96h576c52.8 0 96-43.2 96-96v-105.63l179.402 126.614c9.978 7.042 20.848 10.764 31.434 10.766 0.002 0 0.002 0 0.006 0 14.088 0 26.954-6.496 35.292-17.822 6.456-8.77 9.868-20.054 9.868-32.636v-410.582c-0.002-33.126-22.72-50.458-45.162-50.458z']}}})(I=E.Icons||(E.Icons={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E.defaultAlertResponseOption={id:'_default',name:'Acknowledge',options:[{name:'Acknowledge',type:'button',label:'Acknowledge',value:'Acknowledge'}]},E.directConversationConfig={id:'1',sortOrder:1,name:'Direct',shortDescription:'A personal conversation with you and one or more participants.',colorCode:'',displayGroup:'normal',behaviour:{chatAvailable:!0,canSendAttachmentsWithinConversation:!0}},E.namedConversationConfig={id:'2',sortOrder:2,name:'Named',shortDescription:'A converstion with a subject and context.',colorCode:'',displayGroup:'normal',behaviour:{chatAvailable:!0,namedSettings:{subjectRequired:!0,descriptionRequired:!0},participantCanLeave:!0,ownerCanEditAfterSend:!0,ownerCanCloseEarly:!0,ownerCanAddAdditionalContacts:!0,canSendAttachmentsWithinConversation:!0}},E.page={id:'3',sortOrder:3,name:'Page',shortDescription:'A single page that requires a prompted response from the participants.',colorCode:'',displayGroup:'normal',behaviour:{warnWhenNoContacts:!0,chatAvailable:!1,namedSettings:{subjectRequired:!0,subjectFieldLabel:'Title',descriptionRequired:!0,descriptionFieldLabel:'Description'},participantCanLeave:!1,ownerCanEditAfterSend:!1,ownerCanCloseEarly:!1,canSendAttachmentsWithinConversation:!1,autoRemoveOnClose:!0,alert:{autoAlert:!0,alertResponseOptions:[E.defaultAlertResponseOption],shouldOpenConversationAfterResponded:!1,participantAlertResponsesVisible:!1},attachments:{image:!0,audio:!0}}}},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(B,z,W,G){return new(W||(W=Promise))(function(J,K){function $(Z){try{Q(G.next(Z))}catch(ee){K(ee)}}function X(Z){try{Q(G['throw'](Z))}catch(ee){K(ee)}}function Q(Z){Z.done?J(Z.value):new W(function(ee){ee(Z.value)}).then($,X)}Q((G=G.apply(B,z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(101),N=A(17);class H extends R.BaseStore{constructor(B,z,W){super(B,z),this.SCHEMA_VERSION=1,this._config=W}init(){const B=(z)=>super[z];return I(this,void 0,void 0,function*(){yield B('init').call(this),this.state.schemaVersion===this.SCHEMA_VERSION?this.logger.log(N.LoggerTypes.DataStorage,` %cSTATE IS USING EXPECTED SCHEMA VERSION: %c${this.state.schemaVersion}`,'color: #606; font-weight: bold;','color: #999; font-weight: normal;'):this.state.schemaVersion<this.SCHEMA_VERSION?this.logger.log(N.LoggerTypes.DataStorage,` %cSTATE IS USING OLD SCHEMA VERSION:`,'color: #C00; font-weight: bold;',{current:this.state.schemaVersion,expected:this.SCHEMA_VERSION}):this.logger.log(N.LoggerTypes.DataStorage,` %cSTATE IS NEWER THAN EXPECTED SCHEMA VERSION:`,'color: #C00; font-weight: bold;',{current:this.state.schemaVersion,expected:this.SCHEMA_VERSION})})}getLatestIdentifier(){return I(this,void 0,void 0,function*(){return this.state.latestIdentifier})}updateLatestIdentifier(B){return I(this,void 0,void 0,function*(){B>this.state.latestIdentifier&&(this.logger.log(N.LoggerTypes.DataStorage,` %cSTORING latestIdentifier '${B}':`,'color: #C00; font-weight: bold;'),this.state.latestIdentifier=B,yield this.saveToPersistent())})}loadConversations(){return I(this,void 0,void 0,function*(){return this.state.conversations||[]})}saveConversations(B){return I(this,void 0,void 0,function*(){this.state.conversations=B,yield this.saveToPersistent()})}clearChatData(){return I(this,void 0,void 0,function*(){this.state.latestIdentifier=0,this.state.conversations=[],yield this.saveToPersistent()})}addToPendingAlerts(B){return I(this,void 0,void 0,function*(){this.state.pendingAlerts||(this.state.pendingAlerts=[]),this.state.pendingAlerts.includes(B.id)||(this.state.pendingAlerts=[B.id,...this.state.pendingAlerts],yield this.saveToPersistent())})}getPendingAlerts(){return this.state.pendingAlerts?this.state.pendingAlerts.reduce((B,z)=>{const W=this.getConversationById(z);return W?[...B,W]:B},[]):[]}clearPendingAlert(B){return I(this,void 0,void 0,function*(){if(this.state.pendingAlerts&&B){const z=this.state.pendingAlerts.indexOf(B.id);this.state.pendingAlerts.splice(z,1),yield this.saveToPersistent()}})}getConversationById(B){return this.state.conversations.find((z)=>z.id===B)}generateInitialState(){return{_id:this.name,_rev:'',schemaVersion:this.SCHEMA_VERSION,latestIdentifier:0,conversations:[],pendingAlerts:[]}}}E.Store=H},function(L,E,A){'use strict';var I=this&&this.__decorate||function(te,ne,ae,oe){var se=arguments.length,ie=3>se?ne:null===oe?oe=Object.getOwnPropertyDescriptor(ne,ae):oe,de;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ie=Reflect.decorate(te,ne,ae,oe);else for(var le=te.length-1;0<=le;le--)(de=te[le])&&(ie=(3>se?de(ie):3<se?de(ne,ae,ie):de(ne,ae))||ie);return 3<se&&ie&&Object.defineProperty(ne,ae,ie),ie},R=this&&this.__awaiter||function(te,ne,ae,oe){return new(ae||(ae=Promise))(function(se,ie){function de(ue){try{_e(oe.next(ue))}catch(ce){ie(ce)}}function le(ue){try{_e(oe['throw'](ue))}catch(ce){ie(ce)}}function _e(ue){ue.done?se(ue.value):new ae(function(ce){ce(ue.value)}).then(de,le)}_e((oe=oe.apply(te,ne||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(27),H=A(12),B=A(11),z=A(19),W=A(0),G=A(2),J=A(5),K=A(1),$=A(3),X=A(4);var Q;(function(te){te[te.LOADING_IMAGE='Loading image...']='LOADING_IMAGE',te[te.IMAGE_REFETCH='Download image']='IMAGE_REFETCH',te[te.IMAGE_ERROR='Image unable to download, press to retry']='IMAGE_ERROR'})(Q||(Q={}));class Z{static _create(){return new B.Metadata(z.CTCLHeader,Q)}static get instance(){return this._instance||(this._instance=this._create())}}Z._instance=null,E.CTCLThumbnailMetadata=Z;class ee extends H.CTCLComponent{constructor(){super(),this._onMediaError=()=>{this._errorIcon=K.Icons.COMMON.AlertWarning,this._errorMessage=this.translateI18nItem(Q.IMAGE_ERROR),this.hasError=!0},this._onClickMedia=(te)=>R(this,void 0,void 0,function*(){te.stopPropagation(),yield this.layer.showMediaFullscreen(this.attachment.local)}),this._errorOnClick=()=>{return $.isDesktop()?void console.error('Attachments unavailable on desktop.'):void(this.isLoading=!0,this.hasError=!1,this._downloadRemoteImage())},this.setMetadata(Z.instance)}static get is(){return'ct-cl-thumbnail'}connectedCallback(){super.connectedCallback(),this.initialize()}initialize(){return R(this,void 0,void 0,function*(){this.attachment&&this.chatMessage&&(this.attachment&&!this.attachment.local&&this._downloadRemoteImage(),this.attachment&&this.attachment.local&&this._loadImageFromSource())})}setupListeners(){this.addListener(X.ChatEvents.ChatEntryUpdated,(te)=>R(this,void 0,void 0,function*(){(yield this.layer.belongsToCurrentConversation(te.chatEntry))&&te.chatEntry.id===this.chatMessage.id&&(this._finalImageSrc||this._isGettingBase64?this._finalImageSrc&&this.removeEventListener(X.ChatEvents.ChatEntryUpdated):(this.attachment=te.chatEntry.attachments[0],this._loadImageFromSource()))}))}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;font-size:1em}:host .attachment{display:block}:host .attachment .loading,:host .attachment .error{display:flex;flex-direction:column;justify-content:center;align-items:center;width:160px;height:100px;color:var(--chat-message-bubble-received-text, #212121)}:host .attachment .loading.mine,:host .attachment .error.mine{color:var(--chat-message-bubble-sent-text, #fff)}:host .attachment .loading.hidden,:host .attachment .error.hidden{display:none}:host .attachment .loading .message,:host .attachment .error .message{display:flex;flex-direction:row;margin:5px 0 0 0}:host .attachment .loading .message .icon,:host .attachment .error .message .icon{margin:0 5px 0 0}:host .attachment .error{cursor:pointer}:host .attachment .image{display:block;margin:0 auto;max-width:200px;border-radius:3px}:host .attachment .image.interactive{cursor:pointer}:host .attachment .image.hidden{display:none}:host .attachment+.content{margin:5px 0 0 0}
        `}generateComponentMarkup(){if(!this.chatMessage||!this.attachment)return null;const te=this.layer.hasMediaFullscreenHandler();return window.__CTRender('div',{class:'attachment'},this.isLoading?window.__CTRender('div',{class:`loading ${this.chatMessage.mine?'mine':''}`},window.__CTRender(G.CTIcon,{class:'icon',width:'32',height:'32',icon:J.Icons.UI.Attachment}),window.__CTRender('div',{class:'message'},window.__CTRender(G.CTIcon,{class:'icon',width:'16',height:'16',icon:K.Icons.COMMON.LoadingSpinner,spin:!0}),this.translateI18nItem(Q.LOADING_IMAGE))):null,this.hasError?window.__CTRender('div',{class:`error ${this.chatMessage.mine?'mine':''}`,onClick:this._errorOnClick},window.__CTRender(G.CTIcon,{class:'icon',width:'32',height:'32',icon:this._errorIcon}),window.__CTRender('div',{class:'message'},this._errorMessage)):null,this.isLoading||this.hasError?null:window.__CTRender('img',{class:`image ${te?'interactive':''}`,src:this._finalImageSrc,onError:this._onMediaError,onClick:this._onClickMedia}))}_downloadRemoteImage(){this.layer.downloadMessageAttachments(this.chatMessage).catch(()=>{this._errorIcon=K.Icons.COMMON.AlertWarning,this._errorMessage=this.translateI18nItem(Q.IMAGE_ERROR),this.hasError=!0,this.isLoading=!1})}_loadImageFromSource(){this.attachment&&this.attachment.local?$.isDesktop()?(this._finalImageSrc=this.attachment.local,this.isLoading=!1,this.onRenderComplete(()=>this.emitEvent(X.ChatEvents.ThumbnailLoaded,this.chatMessage),!0)):this._getBase64():this.isLoading=!0}_getBase64(){return R(this,void 0,void 0,function*(){this._isGettingBase64=!0;try{this._finalImageSrc=yield N.getThumbnail(this.attachment.local,200,200,100),this.hasError=!1,this.onRenderComplete(()=>this.emitEvent(X.ChatEvents.ThumbnailLoaded,this.chatMessage),!0)}catch(te){this._errorIcon=K.Icons.COMMON.AlertWarning,this._errorMessage=this.translateI18nItem(Q.IMAGE_ERROR),this.hasError=!0}finally{this.isLoading=!1,this._isGettingBase64=!1}})}}I([W.prop({type:Boolean,attribute:!1,default:!0})],ee.prototype,'isLoading',void 0),I([W.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'hasError',void 0),I([W.prop({type:Object,attribute:!0,default:null})],ee.prototype,'chatMessage',void 0),I([W.prop({type:Object,attribute:!0,default:null})],ee.prototype,'attachment',void 0),I([W.prop({type:Boolean,attribute:!1,default:!1})],ee.prototype,'isLastEntry',void 0),E.CTCLThumbnail=ee,ee.register()},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N){super(),this.messageId=N}}E.BasePageEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N){super(),this.page=N}}E.ReadPageDetailEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N){super(),this.page=N}}E.SendNewPageEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);class R extends I.BaseEventArgs{constructor(N,H,B,z=!1){super(),this.response=H,this.pageId=N,this.sender=B,this.isTestPage=z}}E.SendPageResponseEventArgs=R},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});const I=A(9);var R=A(162);E.BasePageEventArgs=R.BasePageEventArgs;var N=A(163);E.ReadPageDetailEventArgs=N.ReadPageDetailEventArgs;var H=A(164);E.SendNewPageEventArgs=H.SendNewPageEventArgs;var B=A(165);E.SendPageResponseEventArgs=B.SendPageResponseEventArgs;class z extends I.BaseEvents{}z._Request_SendNewPage='request-send-new-page',z._Request_ReadPageDetail='request-read-page-detail',z._Request_OpenClientReadModal='request-open-client-read-modal',z._Request_OpenBroadcasterReadModal='request-open-broadcaster-read-modal',z._Request_CheckForPendingPages='request-check-for-pending-pages',z._Request_CloseSendNewPageModal='request-close-send-new-page-modal',z.NewPageReceived='new-page-received',z.PageUpdate='page-update',z.PageResponse='page-response',z.SendingPageError='sending-page-error',z.ProcessMamMessages='process-mam-messages',z.ProcessMamPages='process-mam-pages',z.RespondedToPage='responded-to-page',z.RespondedToAllPages='responded-to-all-pages',z.LogoutRequestConfirmed='logout-request-confirmed',z.Mute='mute',E.PagerEvents=z},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Received='received']='Received',R[R.Response='response']='Response'})(I=E.ContactResponseType||(E.ContactResponseType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Android='android']='Android',R[R.Electron='electon']='Electron',R[R.iOS='ios']='iOS'})(I=E.DeviceType||(E.DeviceType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.Exclude='exclude']='Exclude',R[R.Include='get']='Include'})(I=E.FilterType||(E.FilterType={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R.ICOMOON={CheckBoxEmpty:{viewBox:'0 0 1024 1024',paths:['M896 0h-768c-70.4 0-128 57.6-128 128v768c0 70.4 57.6 128 128 128h768c70.4 0 128-57.6 128-128v-768c0-70.4-57.6-128-128-128zM896 896h-768v-768h768v768z']},CheckBoxChecked:{viewBox:'0 0 1024 1024',paths:['M896 0h-768c-70.4 0-128 57.6-128 128v768c0 70.4 57.6 128 128 128h768c70.4 0 128-57.6 128-128v-768c0-70.4-57.6-128-128-128zM448 794.51l-237.254-237.256 90.51-90.508 146.744 146.744 306.746-306.746 90.508 90.51-397.254 397.256z']},CheckCircleFilled:{viewBox:'0 0 1024 1024',paths:['M733.714 419.429q0-16-10.286-26.286l-52-51.429q-10.857-10.857-25.714-10.857t-25.714 10.857l-233.143 232.571-129.143-129.143q-10.857-10.857-25.714-10.857t-25.714 10.857l-52 51.429q-10.286 10.286-10.286 26.286 0 15.429 10.286 25.714l206.857 206.857q10.857 10.857 25.714 10.857 15.429 0 26.286-10.857l310.286-310.286q10.286-10.286 10.286-25.714zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z']},CrossCircleFilled:{viewBox:'0 0 1024 1024',paths:['M656.571 641.143q0-14.857-10.857-25.714l-103.429-103.429 103.429-103.429q10.857-10.857 10.857-25.714 0-15.429-10.857-26.286l-51.429-51.429q-10.857-10.857-26.286-10.857-14.857 0-25.714 10.857l-103.429 103.429-103.429-103.429q-10.857-10.857-25.714-10.857-15.429 0-26.286 10.857l-51.429 51.429q-10.857 10.857-10.857 26.286 0 14.857 10.857 25.714l103.429 103.429-103.429 103.429q-10.857 10.857-10.857 25.714 0 15.429 10.857 26.286l51.429 51.429q10.857 10.857 26.286 10.857 14.857 0 25.714-10.857l103.429-103.429 103.429 103.429q10.857 10.857 25.714 10.857 15.429 0 26.286-10.857l51.429-51.429q10.857-10.857 10.857-26.286zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z']},ExclamationCircleFilled:{viewBox:'0 0 1024 1024',paths:['M512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512-229.23-512-512-512zM576 832h-128v-128h128v128zM576 576h-128v-384h128v384z']},QuestionCircleFilled:{viewBox:'0 0 1024 1024',paths:['M512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512-229.23-512-512-512zM512 832c-35.346 0-64-28.654-64-64s28.654-64 64-64 64 28.654 64 64-28.654 64-64 64zM617.538 504.158c-39.112 24.57-57.538 38.114-57.538 56.092v32c0 26.51-21.49 48-48 48s-48-21.49-48-48v-32c0-33.618 12.964-63.854 38.532-89.87 18.864-19.194 41.778-33.59 63.936-47.512 45.564-28.624 65.532-43.978 65.532-70.868 0-29.252-16.88-48.788-31.042-60.026-22.734-18.040-54.328-27.974-88.958-27.974-52.534 0-99.792 35.082-114.924 85.314-7.648 25.382-34.422 39.758-59.806 32.114-25.382-7.648-39.76-34.422-32.114-59.806 13.112-43.52 40.398-82.63 76.832-110.124 37.71-28.456 82.668-43.498 130.012-43.498 56.208 0 108.994 17.322 148.63 48.776 43.444 34.474 67.37 82.496 67.37 135.224 0 82.76-63.846 122.872-110.462 152.158z']},Mute:{viewBox:'0 0 16 16',paths:['M0 5h3l5-5v16l-5-5h-3v-6zM14.326 8l1.674 1.674v1.326h-1.326l-1.674-1.674-1.674 1.674h-1.326v-1.326l1.674-1.674-1.674-1.674v-1.326h1.326l1.674 1.674 1.674-1.674h1.326v1.326l-1.674 1.674z']}},R.FONTAWESOME={BellFilled:{viewBox:'0 0 1024 1024',paths:['M521.143 969.143c0-5.143-4-9.143-9.143-9.143-45.143 0-82.286-37.143-82.286-82.286 0-5.143-4-9.143-9.143-9.143s-9.143 4-9.143 9.143c0 55.429 45.143 100.571 100.571 100.571 5.143 0 9.143-4 9.143-9.143zM987.429 804.571c0 40-33.143 73.143-73.143 73.143h-256c0 80.571-65.714 146.286-146.286 146.286s-146.286-65.714-146.286-146.286h-256c-40 0-73.143-33.143-73.143-73.143 84.571-71.429 182.857-199.429 182.857-475.429 0-109.714 90.857-229.714 242.286-252-2.857-6.857-4.571-14.286-4.571-22.286 0-30.286 24.571-54.857 54.857-54.857s54.857 24.571 54.857 54.857c0 8-1.714 15.429-4.571 22.286 151.429 22.286 242.286 142.286 242.286 252 0 276 98.286 404 182.857 475.429z']},CircleNotch:{viewBox:'0 0 1024 1024',paths:['M1005.714 512c0 272.571-221.143 493.714-493.714 493.714s-493.714-221.143-493.714-493.714c0-248 182.857-453.143 420.571-488.571v130.286c-166.857 33.714-292.571 181.714-292.571 358.286 0 201.714 164 365.714 365.714 365.714s365.714-164 365.714-365.714c0-176.571-125.714-324.571-292.571-358.286v-130.286c237.714 35.429 420.571 240.571 420.571 488.571z']},CheckBoxEmpty:{viewBox:'0 0 1024 1024',paths:['M640 146.286h-475.429q-37.714 0-64.571 26.857t-26.857 64.571v475.429q0 37.714 26.857 64.571t64.571 26.857h475.429q37.714 0 64.571-26.857t26.857-64.571v-475.429q0-37.714-26.857-64.571t-64.571-26.857zM804.571 237.714v475.429q0 68-48.286 116.286t-116.286 48.286h-475.429q-68 0-116.286-48.286t-48.286-116.286v-475.429q0-68 48.286-116.286t116.286-48.286h475.429q68 0 116.286 48.286t48.286 116.286z']},CheckBoxChecked:{viewBox:'0 0 1024 1024',paths:['M391.429 742.286l350.857-350.857q10.857-10.857 10.857-25.714t-10.857-25.714l-58.286-58.286q-10.857-10.857-25.714-10.857t-25.714 10.857l-266.857 266.857-120.571-120.571q-10.857-10.857-25.714-10.857t-25.714 10.857l-58.286 58.286q-10.857 10.857-10.857 25.714t10.857 25.714l204.571 204.571q10.857 10.857 25.714 10.857t25.714-10.857zM877.714 237.714v548.571q0 68-48.286 116.286t-116.286 48.286h-548.571q-68 0-116.286-48.286t-48.286-116.286v-548.571q0-68 48.286-116.286t116.286-48.286h548.571q68 0 116.286 48.286t48.286 116.286z']},CheckCircleFilled:{viewBox:'0 0 1024 1024',paths:['M733.714 419.429q0-16-10.286-26.286l-52-51.429q-10.857-10.857-25.714-10.857t-25.714 10.857l-233.143 232.571-129.143-129.143q-10.857-10.857-25.714-10.857t-25.714 10.857l-52 51.429q-10.286 10.286-10.286 26.286 0 15.429 10.286 25.714l206.857 206.857q10.857 10.857 25.714 10.857 15.429 0 26.286-10.857l310.286-310.286q10.286-10.286 10.286-25.714zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z']},ChevronLeft:{viewBox:'0 0 1024 1024',paths:['M669.143 172l-303.429 303.429 303.429 303.429q10.857 10.857 10.857 25.714t-10.857 25.714l-94.857 94.857q-10.857 10.857-25.714 10.857t-25.714-10.857l-424-424q-10.857-10.857-10.857-25.714t10.857-25.714l424-424q10.857-10.857 25.714-10.857t25.714 10.857l94.857 94.857q10.857 10.857 10.857 25.714t-10.857 25.714z']},Cross:{viewBox:'0 0 1024 1024',paths:['M741.714 755.429q0 22.857-16 38.857l-77.714 77.714q-16 16-38.857 16t-38.857-16l-168-168-168 168q-16 16-38.857 16t-38.857-16l-77.714-77.714q-16-16-16-38.857t16-38.857l168-168-168-168q-16-16-16-38.857t16-38.857l77.714-77.714q16-16 38.857-16t38.857 16l168 168 168-168q16-16 38.857-16t38.857 16l77.714 77.714q16 16 16 38.857t-16 38.857l-168 168 168 168q16 16 16 38.857z']},CrossCircleFilled:{viewBox:'0 0 1024 1024',paths:['M656.571 641.143q0-14.857-10.857-25.714l-103.429-103.429 103.429-103.429q10.857-10.857 10.857-25.714 0-15.429-10.857-26.286l-51.429-51.429q-10.857-10.857-26.286-10.857-14.857 0-25.714 10.857l-103.429 103.429-103.429-103.429q-10.857-10.857-25.714-10.857-15.429 0-26.286 10.857l-51.429 51.429q-10.857 10.857-10.857 26.286 0 14.857 10.857 25.714l103.429 103.429-103.429 103.429q-10.857 10.857-10.857 25.714 0 15.429 10.857 26.286l51.429 51.429q10.857 10.857 26.286 10.857 14.857 0 25.714-10.857l103.429-103.429 103.429 103.429q10.857 10.857 25.714 10.857 15.429 0 26.286-10.857l51.429-51.429q10.857-10.857 10.857-26.286zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z']},Ellipsis:{viewBox:'0 0 1024 1024',paths:['M219.429 420.571v109.714c0 30.286-24.571 54.857-54.857 54.857h-109.714c-30.286 0-54.857-24.571-54.857-54.857v-109.714c0-30.286 24.571-54.857 54.857-54.857h109.714c30.286 0 54.857 24.571 54.857 54.857zM512 420.571v109.714c0 30.286-24.571 54.857-54.857 54.857h-109.714c-30.286 0-54.857-24.571-54.857-54.857v-109.714c0-30.286 24.571-54.857 54.857-54.857h109.714c30.286 0 54.857 24.571 54.857 54.857zM804.571 420.571v109.714c0 30.286-24.571 54.857-54.857 54.857h-109.714c-30.286 0-54.857-24.571-54.857-54.857v-109.714c0-30.286 24.571-54.857 54.857-54.857h109.714c30.286 0 54.857 24.571 54.857 54.857z']},ExclamationCircleFilled:{viewBox:'0 0 1024 1024',paths:['M438.857 73.143q119.429 0 220.286 58.857t159.714 159.714 58.857 220.286-58.857 220.286-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857zM512 785.714v-108.571q0-8-5.143-13.429t-12.571-5.429h-109.714q-7.429 0-13.143 5.714t-5.714 13.143v108.571q0 7.429 5.714 13.143t13.143 5.714h109.714q7.429 0 12.571-5.429t5.143-13.429zM510.857 589.143l10.286-354.857q0-6.857-5.714-10.286-5.714-4.571-13.714-4.571h-125.714q-8 0-13.714 4.571-5.714 3.429-5.714 10.286l9.714 354.857q0 5.714 5.714 10t13.714 4.286h105.714q8 0 13.429-4.286t6-10z']},InfoCircleFilled:{viewBox:'0 0 1024 1024',paths:['M585.143 786.286v-91.429c0-10.286-8-18.286-18.286-18.286h-54.857v-292.571c0-10.286-8-18.286-18.286-18.286h-182.857c-10.286 0-18.286 8-18.286 18.286v91.429c0 10.286 8 18.286 18.286 18.286h54.857v182.857h-54.857c-10.286 0-18.286 8-18.286 18.286v91.429c0 10.286 8 18.286 18.286 18.286h256c10.286 0 18.286-8 18.286-18.286zM512 274.286v-91.429c0-10.286-8-18.286-18.286-18.286h-109.714c-10.286 0-18.286 8-18.286 18.286v91.429c0 10.286 8 18.286 18.286 18.286h109.714c10.286 0 18.286-8 18.286-18.286zM877.714 512c0 242.286-196.571 438.857-438.857 438.857s-438.857-196.571-438.857-438.857 196.571-438.857 438.857-438.857 438.857 196.571 438.857 438.857z']},Paperclip:{viewBox:'0 0 1024 1024',paths:['M802.286 791.429q0 66.857-45.143 112t-112 45.143q-77.143 0-134.286-57.143l-444-443.429q-64.571-65.714-64.571-154.857 0-90.857 62.857-154.286t153.714-63.429q90.286 0 156 64.571l345.714 346.286q5.714 5.714 5.714 12.571 0 9.143-17.429 26.571t-26.571 17.429q-7.429 0-13.143-5.714l-346.286-346.857q-45.143-44-103.429-44-60.571 0-102.286 42.857t-41.714 103.429q0 60 43.429 103.429l443.429 444q36 36 82.857 36 36.571 0 60.571-24t24-60.571q0-46.857-36-82.857l-332-332q-14.857-13.714-34.286-13.714-16.571 0-27.429 10.857t-10.857 27.429q0 18.286 14.286 33.714l234.286 234.286q5.714 5.714 5.714 12.571 0 9.143-17.714 26.857t-26.857 17.714q-6.857 0-12.571-5.714l-234.286-234.286q-36-34.857-36-85.143 0-46.857 32.571-79.429t79.429-32.571q50.286 0 85.143 36l332 332q57.143 56 57.143 134.286z']},PlusSign:{viewBox:'0 0 1024 1024',paths:['M804.571 420.571v109.714q0 22.857-16 38.857t-38.857 16h-237.714v237.714q0 22.857-16 38.857t-38.857 16h-109.714q-22.857 0-38.857-16t-16-38.857v-237.714h-237.714q-22.857 0-38.857-16t-16-38.857v-109.714q0-22.857 16-38.857t38.857-16h237.714v-237.714q0-22.857 16-38.857t38.857-16h109.714q22.857 0 38.857 16t16 38.857v237.714h237.714q22.857 0 38.857 16t16 38.857z']},QuestionCircleFilled:{viewBox:'0 0 1024 1024',paths:['M512 786.286v-109.714q0-8-5.143-13.143t-13.143-5.143h-109.714q-8 0-13.143 5.143t-5.143 13.143v109.714q0 8 5.143 13.143t13.143 5.143h109.714q8 0 13.143-5.143t5.143-13.143zM658.286 402.286q0-50.286-31.714-93.143t-79.143-66.286-97.143-23.429q-138.857 0-212 121.714-8.571 13.714 4.571 24l75.429 57.143q4 3.429 10.857 3.429 9.143 0 14.286-6.857 30.286-38.857 49.143-52.571 19.429-13.714 49.143-13.714 27.429 0 48.857 14.857t21.429 33.714q0 21.714-11.429 34.857t-38.857 25.714q-36 16-66 49.429t-30 71.714v20.571q0 8 5.143 13.143t13.143 5.143h109.714q8 0 13.143-5.143t5.143-13.143q0-10.857 12.286-28.286t31.143-28.286q18.286-10.286 28-16.286t26.286-20 25.429-27.429 16-34.571 7.143-46.286zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z']},TrashCan:{viewBox:'0 0 1024 1024',paths:['M292.571 420.571v329.143q0 8-5.143 13.143t-13.143 5.143h-36.571q-8 0-13.143-5.143t-5.143-13.143v-329.143q0-8 5.143-13.143t13.143-5.143h36.571q8 0 13.143 5.143t5.143 13.143zM438.857 420.571v329.143q0 8-5.143 13.143t-13.143 5.143h-36.571q-8 0-13.143-5.143t-5.143-13.143v-329.143q0-8 5.143-13.143t13.143-5.143h36.571q8 0 13.143 5.143t5.143 13.143zM585.143 420.571v329.143q0 8-5.143 13.143t-13.143 5.143h-36.571q-8 0-13.143-5.143t-5.143-13.143v-329.143q0-8 5.143-13.143t13.143-5.143h36.571q8 0 13.143 5.143t5.143 13.143zM658.286 834.286v-541.714h-512v541.714q0 12.571 4 23.143t8.286 15.429 6 4.857h475.429q1.714 0 6-4.857t8.286-15.429 4-23.143zM274.286 219.429h256l-27.429-66.857q-4-5.143-9.714-6.286h-181.143q-5.714 1.143-9.714 6.286zM804.571 237.714v36.571q0 8-5.143 13.143t-13.143 5.143h-54.857v541.714q0 47.429-26.857 82t-64.571 34.571h-475.429q-37.714 0-64.571-33.429t-26.857-80.857v-544h-54.857q-8 0-13.143-5.143t-5.143-13.143v-36.571q0-8 5.143-13.143t13.143-5.143h176.571l40-95.429q8.571-21.143 30.857-36t45.143-14.857h182.857q22.857 0 45.143 14.857t30.857 36l40 95.429h176.571q8 0 13.143 5.143t5.143 13.143z']},WarningTriangle:{viewBox:'0 0 1024 1024',paths:['M585.143 785.714v-108.571c0-10.286-8-18.857-18.286-18.857h-109.714c-10.286 0-18.286 8.571-18.286 18.857v108.571c0 10.286 8 18.857 18.286 18.857h109.714c10.286 0 18.286-8.571 18.286-18.857zM584 572l10.286-262.286c0-3.429-1.714-8-5.714-10.857-3.429-2.857-8.571-6.286-13.714-6.286h-125.714c-5.143 0-10.286 3.429-13.714 6.286-4 2.857-5.714 8.571-5.714 12l9.714 261.143c0 7.429 8.571 13.143 19.429 13.143h105.714c10.286 0 18.857-5.714 19.429-13.143zM576 38.286l438.857 804.571c12.571 22.286 12 49.714-1.143 72s-37.143 36-62.857 36h-877.714c-25.714 0-49.714-13.714-62.857-36s-13.714-49.714-1.143-72l438.857-804.571c12.571-23.429 37.143-38.286 64-38.286s51.429 14.857 64 38.286z']},Wifi:{viewBox:'0 0 1024 1024',paths:['M585.143 870.286c-14.857 0-94.857-80-94.857-95.429 0-28 73.143-43.429 94.857-43.429s94.857 15.429 94.857 43.429c0 15.429-80 95.429-94.857 95.429zM739.429 715.429c-8 0-70.286-57.143-154.286-57.143-84.571 0-145.714 57.143-154.286 57.143-13.714 0-96.571-82.286-96.571-96 0-5.143 2.286-9.714 5.714-13.143 61.143-60.571 160.571-94.286 245.143-94.286s184 33.714 245.143 94.286c3.429 3.429 5.714 8 5.714 13.143 0 13.714-82.857 96-96.571 96zM895.429 560c-4.571 0-9.714-2.286-13.143-4.571-94.286-73.143-173.714-116.571-297.143-116.571-172.571 0-304 121.143-310.286 121.143-13.143 0-95.429-82.286-95.429-96 0-4.571 2.286-9.143 5.714-12.571 102.286-102.286 256.571-158.857 400-158.857s297.714 56.571 400 158.857c3.429 3.429 5.714 8 5.714 12.571 0 13.714-82.286 96-95.429 96zM1050.286 405.143c-4.571 0-9.143-2.286-12.571-5.143-132-116-274.286-180.571-452.571-180.571s-320.571 64.571-452.571 180.571c-3.429 2.857-8 5.143-12.571 5.143-13.143 0-96-82.286-96-96 0-5.143 2.286-9.714 5.714-13.143 144.571-143.429 353.143-222.857 555.429-222.857s410.857 79.429 555.429 222.857c3.429 3.429 5.714 8 5.714 13.143 0 13.714-82.857 96-96 96z']}}})(I=E.Icons||(E.Icons={}))},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I;(function(R){R[R.NotReceivedNotification='not-received']='NotReceivedNotification',R[R.Received='received']='Received',R[R.Displayed='displayed']='Displayed',R[R.Unable='unable']='Unable',R[R.Attending='attending']='Attending',R[R.Acknowledged='acknowledged']='Acknowledged',R[R.AutoDismissed='auto-dismissed']='AutoDismissed'})(I=E.ResponseStatus||(E.ResponseStatus={}))},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=A(168);E.DeviceType=I.DeviceType;var R=A(170);E.Icons=R.Icons;var N=A(171);E.ResponseStatus=N.ResponseStatus;var H=A(167);E.ContactResponseType=H.ContactResponseType;var B=A(169);E.FilterType=B.FilterType;var z;(function(W){W[W.Up='Up']='Up',W[W.Down='Down']='Down'})(z=E.TimerDirection||(E.TimerDirection={}))},function(L,E,A){'use strict';var I=this&&this.__decorate||function(W,G,J,K){var $=arguments.length,X=3>$?G:null===K?K=Object.getOwnPropertyDescriptor(G,J):K,Q;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(W,G,J,K);else for(var Z=W.length-1;0<=Z;Z--)(Q=W[Z])&&(X=(3>$?Q(X):3<$?Q(G,J,X):Q(G,J))||X);return 3<$&&X&&Object.defineProperty(G,J,X),X},R=this&&this.__awaiter||function(W,G,J,K){return new(J||(J=Promise))(function($,X){function Q(te){try{ee(K.next(te))}catch(ne){X(ne)}}function Z(te){try{ee(K['throw'](te))}catch(ne){X(ne)}}function ee(te){te.done?$(te.value):new J(function(ne){ne(te.value)}).then(Q,Z)}ee((K=K.apply(W,G||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(9),B=A(2);class z extends N.CTLayerComponent{static get is(){return'ct-alert-modal-manager'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){this.addListener(H.BaseEvents._Request_RaiseAlert,(W)=>this.raiseAlert(W)),this.addListener(H.BaseEvents._Request_CloseAlert,(W)=>this.dismissAlertById(W))}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:none;width:100%;height:100%;background:var(--modal-overlay, rgba(0,0,0,0.5));position:fixed;top:0;z-index:99999;padding:20px;overflow:auto}:host .alerts{display:flex;width:100%;max-width:420px;margin:auto;position:relative}:host([alerts-to-show]){display:flex}
        `}generateComponentMarkup(){return window.__CTRender('div',{class:'alerts'},this.alerts.map((W,G)=>window.__CTRender(B.CTAlertModal,{id:W.id||this.defaultAlerts.generateId(),raisedOn:W.raisedOn,priority:W.priority,type:W.type,title:W.title,body:W.body,buttons:W.buttons,remaining:this.alerts.length,positionInStack:G,showLoadingAnimation:W.showLoadingAnimation})))}raiseAlert(W){if(W){if(W.buttons)for(const G of W.buttons)if(!G.action)G.action=()=>this.dismissAlert();else{const J=G.action.bind(this);G.action=(K)=>{J(K),this.dismissAlert()}}this.alerts=[...this.alerts,W],this.alertsToShow=!0}}dismissAlert(W=0){this.alerts.splice(W,1),0===this.alerts.length?this.alertsToShow=!1:this.alerts=this.alerts.map((G)=>{return G.remaining=this.alerts.length,G})}dismissAlertById(W){const G=this.alerts.findIndex((J)=>J.id===W);-1!==G&&this.dismissAlert(G)}}I([N.prop({type:Boolean,attribute:!0,default:!1})],z.prototype,'alertsToShow',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],z.prototype,'alerts',void 0),E.CTAlertModalManager=z,z.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(47),B=A(2),z=A(8);class W extends N.CTLayerComponent{static get is(){return'ct-alert-modal'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:none;width:100%;height:100%;flex-direction:column;background-color:var(--modal-bg, #fff)}:host .alert-dialog{overflow:hidden}:host .alert-dialog .remaining{position:absolute;width:35px;height:35px;background-color:red;border-radius:50%;text-align:center;line-height:35px;color:white;right:-5%;top:-5%}:host .alert-dialog .title{display:flex;justify-content:center;text-align:center;font-size:1em;text-transform:uppercase;margin:0 auto;padding:10px}:host .alert-dialog .body{display:flex;justify-content:center;text-align:center;align-items:flex-start;font-size:1.333em;font-weight:300;padding:50px}:host .alert-dialog .body ct-icon{flex:none;margin:3px 10px 0 0}:host .alert-dialog .buttons{padding:10px 5px;flex:none;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:space-between}:host .alert-dialog .buttons ct-button{flex:1;margin:0 5px;border-radius:0}:host .alert-dialog .buttons ct-button.overflex{flex-basis:100%}:host .alert-dialog .buttons ct-button.overflex+ct-button{margin-top:10px}:host .alert-dialog.error .title{background-color:var(--alert-error-bg, #c80031);color:var(--alert-error-text, #fff)}:host .alert-dialog.info .title{background-color:var(--alert-info-bg, #22b1c8);color:var(--alert-info-text, #fff)}:host .alert-dialog.question .title{background-color:var(--alert-question-bg, #22b1c8);color:var(--alert-question-text, #fff)}:host .alert-dialog.success .title{background-color:var(--alert-success-bg, #22b1c8);color:var(--alert-success-text, #fff)}:host([showing]){display:flex;z-index:10}:host([stacked]){display:flex;position:absolute;bottom:5px;right:5px;z-index:1}:host([stacked]):before{content:'';display:block;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.25)}
        `}generateComponentMarkup(){const G=H.Icons.COMMON.LoadingSpinner,J=5*this.positionInStack;return this.style.right=`${J}px`,this.style.bottom=`${J}px`,this.style.zIndex=`${this.remaining-this.positionInStack}`,0===this.positionInStack?this.showing=!0:this.stacked=!0,window.__CTRender('div',{"alert-id":this.id,class:`alert-dialog ${this.type}`},1<this.remaining&&this.showing?window.__CTRender('div',{class:'remaining'},this.remaining):null,window.__CTRender('div',{class:'title'},this.renderHtml(this.title)),window.__CTRender('div',{class:'body'},z.renderIf(this.showLoadingAnimation,window.__CTRender(B.CTIcon,{class:'loading',width:'18',height:'18',spin:!0,icon:G})),window.__CTRender('div',{class:'message'},this.renderHtml(this.body))),z.renderIf(!!this.buttons&&0<this.buttons.length,window.__CTRender('div',{class:'buttons'},this.buttons.map((K,$)=>window.__CTRender(B.CTButton,{type:K.type,class:`${2<this.buttons.length?'overflex':''} ${2===this.buttons.length&&0===$?'right-border':''}`,onClick:(X)=>K.action(X.target.textContent)},K.text)))))}}I([N.prop({type:Boolean,attribute:!0,default:!1})],W.prototype,'showing',void 0),I([N.prop({type:String,attribute:!1,default:0})],W.prototype,'id',void 0),I([N.prop({type:Number,attribute:!1,default:0})],W.prototype,'raisedOn',void 0),I([N.prop({type:Number,attribute:!1,default:0})],W.prototype,'priority',void 0),I([N.prop({type:String,attribute:!1,default:'info'})],W.prototype,'type',void 0),I([N.prop({type:String,attribute:!1,default:''})],W.prototype,'title',void 0),I([N.prop({type:String,attribute:!1,default:''})],W.prototype,'body',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],W.prototype,'buttons',void 0),I([N.prop({type:Number,attribute:!1,default:0})],W.prototype,'remaining',void 0),I([N.prop({type:Number,attribute:!1,default:0})],W.prototype,'positionInStack',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],W.prototype,'showLoadingAnimation',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],W.prototype,'stacked',void 0),E.CTAlertModal=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(z,W,G,J){var K=arguments.length,$=3>K?W:null===J?J=Object.getOwnPropertyDescriptor(W,G):J,X;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)$=Reflect.decorate(z,W,G,J);else for(var Q=z.length-1;0<=Q;Q--)(X=z[Q])&&($=(3>K?X($):3<K?X(W,G,$):X(W,G))||$);return 3<K&&$&&Object.defineProperty(W,G,$),$},R=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(8);class B extends N.CTLayerComponent{static get is(){return'ct-avatar-tile'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host .avatar-tile{position:relative;display:flex;align-items:center;padding:var(--avatar-tile-padding, 6px 10px);color:var(--default-font-color, #212121);background-color:var(--list-item-bg, #fff);border-bottom:var(--list-item-border, 1px solid #ddd)}:host .avatar-tile .avatar{flex:none;display:flex;flex-direction:column;justify-content:center;align-items:center}:host .avatar-tile .avatar ::slotted(*){margin:0 10px 0 0}@media only screen and (min-width: 960px){:host .avatar-tile .avatar{flex:0 0 10%;justify-content:flex-start;flex-direction:row;flex-basis:6vw}}:host .avatar-tile .detail{flex:1 1 auto;display:flex;flex-direction:column;overflow:hidden}@media only screen and (min-width: 960px){:host .avatar-tile .detail{flex-direction:row}:host .avatar-tile .detail slot{display:flex;flex:1}:host .avatar-tile .detail slot::slotted(.name){flex:1 1 20% !important;align-items:center;margin:auto 0}:host .avatar-tile .detail slot::slotted(.job-title),:host .avatar-tile .detail slot::slotted(.group){display:flex;flex:1 0 35%;align-items:center}}:host .avatar-tile.hatched{background-size:5px 5px;background-image:linear-gradient(45deg, rgba(0,0,0,0) 46%, #d8d8d8 49%, #d8d8d8 51%, rgba(0,0,0,0) 55%)}
        `}generateComponentMarkup(){const z=['avatar-tile'];this.hatched&&z.push('hatched');const W=H.buildStyles({height:this.height||'auto'});return window.__CTRender('div',{class:z.join(' '),style:W},window.__CTRender('div',{class:'avatar'},window.__CTRender('slot',{name:'avatar'})),window.__CTRender('div',{class:'detail',style:this.detailStyle},window.__CTRender('slot',null)),window.__CTRender('slot',{name:'additional'}))}}I([N.prop({type:String,attribute:!1,default:null})],B.prototype,'height',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],B.prototype,'hatched',void 0),I([N.prop({type:Object,attribute:!1,default:{}})],B.prototype,'detailStyle',void 0),E.CTAvatarTile=B,B.register()},function(L,E,A){'use strict';var I=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const R=A(0),N=A(2),H=A(17);class B extends R.CTLayerComponent{constructor(){super(...arguments),this.ALL_LOGGERS_TOKEN='_all_',this._loggingTypes=Object.values(H.LoggerTypes).filter((z,W)=>0==W%2),this._selectedLoggingTypes=[]}static get is(){return'ct-debugger'}initialize(){return I(this,void 0,void 0,function*(){this._selectedLoggingTypes=this.layer.logger.getTypes()})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host .debugger .section{border:1px dotted var(--default-border-color, #ddd);border-radius:8px;padding:10px}:host .debugger .section .heading{font-size:1.333em;font-weight:600;margin:0 0 10px 0}:host .debugger .section .buttons{display:flex;margin:10px 0}:host .debugger .section .buttons .button+.button{margin:0 0 0 5px}:host .debugger .section.logging .options{display:flex;flex-wrap:wrap}:host .debugger .section.logging .options .option{width:160px}:host .debugger .section+.section{margin:10px 0 0 0}
        `}generateComponentMarkup(){return window.__CTRender('div',{class:'debugger'},this._renderLoggingOptions(),this._renderResetOptions())}_renderLoggingOptions(){const z=this.layer.logger.hasInitialTypes();return window.__CTRender('div',{class:'section logging'},window.__CTRender('div',{class:'heading'},'Logging'),window.__CTRender('div',{class:'buttons'},window.__CTRender(N.CTButton,{class:'button',type:'secondary',width:'auto',onClick:this._enableAllLogging.bind(this)},'All'),window.__CTRender(N.CTButton,{class:'button',type:'secondary',width:'auto',onClick:this._disableAllLogging.bind(this)},'None'),z&&window.__CTRender(N.CTButton,{class:'button',type:'secondary',width:'auto',onClick:this._resetAllLogging.bind(this)},'Reset')),window.__CTRender('div',{class:'options'},this._loggingTypes.map((W)=>{const G=this._selectedLoggingTypes.includes(W)||this._selectedLoggingTypes.includes(this.ALL_LOGGERS_TOKEN);return window.__CTRender('div',{key:W,class:'option'},window.__CTRender('label',{htmlFor:W},window.__CTRender('input',{type:'checkbox',id:W,checked:G,onChange:()=>this._onChangeLoggingType(W)}),' ',W))})))}_renderResetOptions(){return window.__CTRender('div',{class:'section reset'},window.__CTRender('div',{class:'heading'},'App reset'),window.__CTRender('div',{class:'buttons'},window.__CTRender(N.CTButton,{class:'button',type:'secondary',width:'auto',onClick:this._reloadApp.bind(this)},'Reload'),window.__CTRender(N.CTButton,{class:'button',type:'secondary',width:'auto',onClick:this._clearAllAppData.bind(this)},'Clear local data')))}_enableAllLogging(){return I(this,void 0,void 0,function*(){yield this.layer.setSupportLoggingTypes([...this._loggingTypes]),this._updateLoggers()})}_disableAllLogging(){this.layer.setSupportLoggingTypes([]),this._updateLoggers()}_resetAllLogging(){this.layer.resetSupportLogging(),this._updateLoggers()}_onChangeLoggingType(z){this._selectedLoggingTypes.includes(this.ALL_LOGGERS_TOKEN)&&(this._selectedLoggingTypes=[...this._loggingTypes]);const W=this._selectedLoggingTypes.includes(z)?this._selectedLoggingTypes.filter((G)=>G!==z):[...this._selectedLoggingTypes,z];this.layer.setSupportLoggingTypes(W),this._updateLoggers()}_reloadApp(){this.layer.showWaitingMessage('Reloading...'),window.location.reload()}_clearAllAppData(){this.layer.showWaitingMessage('Clearing all data...'),this.layer.clearAllData().then(()=>{window.location.reload()})}_updateLoggers(){this._selectedLoggingTypes=this.layer.logger.getTypes(),this.forceRedraw()}}E.CTDebugger=B,B.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(21),B=A(2),z=A(1);class W extends N.CTLayerComponent{constructor(){super(...arguments),this.btnClick=()=>R(this,void 0,void 0,function*(){const G=yield H.CtXmppClient.pickFile({mimeTypes:this.fileTypes});this.callback&&this.callback(G)})}static get is(){return'ct-file-picker'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return``}generateComponentMarkup(){return window.__CTRender('div',null,window.__CTRender(B.CTButton,{icon:z.Icons.COMMON.PlusSign,iconColor:'#fff',onClick:this.btnClick}))}}I([N.prop({type:Array,attribute:!0,default:['image/jpeg','image/png','image/gif']})],W.prototype,'fileTypes',void 0),I([N.prop({type:Function,attribute:!1})],W.prototype,'callback',void 0),E.CTFilePicker=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(K,$,X,Q){var Z=arguments.length,ee=3>Z?$:null===Q?Q=Object.getOwnPropertyDescriptor($,X):Q,te;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ee=Reflect.decorate(K,$,X,Q);else for(var ne=K.length-1;0<=ne;ne--)(te=K[ne])&&(ee=(3>Z?te(ee):3<Z?te($,X,ee):te($,X))||ee);return 3<Z&&ee&&Object.defineProperty($,X,ee),ee},R=this&&this.__awaiter||function(K,$,X,Q){return new(X||(X=Promise))(function(Z,ee){function te(oe){try{ae(Q.next(oe))}catch(se){ee(se)}}function ne(oe){try{ae(Q['throw'](oe))}catch(se){ee(se)}}function ae(oe){oe.done?Z(oe.value):new X(function(se){se(oe.value)}).then(te,ne)}ae((Q=Q.apply(K,$||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(2),B=A(11),z=A(60);var W;(function(K){K[K.MEMBERS='Members: ']='MEMBERS'})(W||(W={}));class G{static _create(){return new B.Metadata(J,W)}static get instance(){return this._instance||(this._instance=this._create())}}G._instance=null,E.CTGroupTileMetadata=G;class J extends N.CTLayerComponent{constructor(){super(),this.setMetadata(G.instance)}static get is(){return'ct-group-tile'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host .name{flex:1 1 auto;font-size:1.333em;color:var(--default-font-color, #212121);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .job-title,:host .group{color:var(--subtle-font-color, #828688);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .group{font-style:italic}:host .empty{color:#E1E1E1}
        `}generateComponentMarkup(){return this.group?window.__CTRender(H.CTAvatarTile,{height:this.height,showAvatar:!1,detailStyle:this.detailStyle},this.showIcon&&window.__CTRender(z.CTGroupAvatar,{slot:'avatar',size:40}),window.__CTRender('div',{class:'name'},this.group.name),window.__CTRender('div',{class:'count'},this.translateI18nItem(W.MEMBERS),this.group.users.length),window.__CTRender('slot',{name:'additional'})):void 0}}I([N.prop({type:N.Stroolean,attribute:!1,default:!0})],J.prototype,'showIcon',void 0),I([N.prop({type:Object,attribute:!1})],J.prototype,'group',void 0),I([N.prop({type:String,attribute:!1,default:null})],J.prototype,'height',void 0),I([N.prop({type:Object,attribute:!1,default:{}})],J.prototype,'detailStyle',void 0),E.CTGroupTile=J,J.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(z,W,G,J){var K=arguments.length,$=3>K?W:null===J?J=Object.getOwnPropertyDescriptor(W,G):J,X;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)$=Reflect.decorate(z,W,G,J);else for(var Q=z.length-1;0<=Q;Q--)(X=z[Q])&&($=(3>K?X($):3<K?X(W,G,$):X(W,G))||$);return 3<K&&$&&Object.defineProperty(W,G,$),$},R=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(8);class B extends N.CTLayerComponent{constructor(){super(),this._textbox=null,this._sizeTest=null,this._htmlStripper=null,this._messageContent='',this._sizeTestContent='',this._isMaxSizeMessageTextBox=!1,this._setupResizeWatcher()}static get is(){return'ct-growing-textbox'}initialize(){return R(this,void 0,void 0,function*(){this.onRenderComplete(()=>this._updateTextboxHeight(),!0)})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex}:host .growing-textbox{display:flex;flex-direction:column;flex:1 1 auto;background-color:var(--default-bg-color-light, #fff);overflow:hidden;border:var(--secondary-border, 1px solid #ddd);border-radius:10px}:host .growing-textbox .textbox{flex:1 1 auto;font-family:inherit;font-size:inherit;font-weight:inherit;min-height:32px;overflow:hidden;padding:6px 10px;resize:none;outline:none;border:var(--secondary-border, 1px solid #ddd);will-change:transform;color:var(--tertiary-font-color, inherit)}:host .growing-textbox .textbox.animate-height{transition:height 0.1s ease-out}:host .growing-textbox .textbox.transparent{background:transparent;border:0;padding:7px 10px}:host .growing-textbox .textbox.max-size{overflow:auto}:host .growing-textbox .textbox.size-test{position:fixed;top:-10000px;left:-10000px;height:auto;white-space:pre-wrap}:host .growing-textbox .textbox::placeholder{color:var(--select-placeholder-color, #828688)}:host .growing-textbox .textbox::-webkit-input-placeholder{color:var(--select-placeholder-color, #828688)}
        `}generateComponentMarkup(){const z=['textbox','animate-height'];this.transparent&&z.push('transparent'),this._isMaxSizeMessageTextBox&&z.push('max-size');const W=H.buildStyles({"max-height":`${this.maxHeight||200}px`});return null!==this.height&&(W.height=`${this.height}px`),window.__CTRender('div',{class:'growing-textbox'},window.__CTRender('textarea',{id:'textbox',class:z.join(' '),style:W,rows:1,value:this.value,placeholder:this.placeholder,disabled:this.disabled,maxLength:this.maxLength,onFocus:this._onFocus.bind(this),onInput:this._onChange.bind(this),onKeydown:(G)=>this._onKeyDown(G)}),window.__CTRender('div',{id:'size-test',class:'textbox size-test'},this.renderHtml(this._sizeTestContent)))}_onFocus(){'function'==typeof this.onFocus&&this.onFocus()}_onChange(){this._updateTextboxHeight(),'function'==typeof this.onChange&&this.onChange()}_onKeyDown(z){13===z.keyCode&&z.shiftKey&&(z.preventDefault(),'function'==typeof this.onSubmit&&this.onSubmit())}focus(){this._getDomNodes();this._textbox&&this._textbox.focus()}getValue(){return this._getDomNodes(),this._textbox?this._textbox.value:''}clear(){this._getDomNodes();this._textbox&&(this.value='',this._textbox.value='',this._updateTextboxHeight())}_getDomNodes(){const z=this.shadowRoot;this._textbox=this._textbox||z.querySelector('#textbox'),this._sizeTest=this._sizeTest||z.querySelector('#size-test'),this._htmlStripper=this._htmlStripper||document.createElement('div')}_setupResizeWatcher(){window.addEventListener('resize',this._updateTextboxHeight.bind(this))}_updateTextboxHeight(){if((this._getDomNodes(),!!this._textbox)&&this._sizeTest){const z=this._textbox.value;this._sizeTest.style.width=`${this._textbox.offsetWidth}px`,this._messageContent=z,this._htmlStripper.innerHTML=z;const W=this._htmlStripper.textContent.replace(/\n/g,'<br/>');this._sizeTestContent=W,this._sizeTest.innerHTML=W+'&nbsp',this.height=this._sizeTest.offsetHeight;const G=(this.height||0)>=this.maxHeight;G!==this._isMaxSizeMessageTextBox&&(this._isMaxSizeMessageTextBox=G,this.forceRedraw())}}}I([N.prop({type:String,attribute:!0,default:''})],B.prototype,'value',void 0),I([N.prop({type:String,attribute:!0,default:''})],B.prototype,'placeholder',void 0),I([N.prop({type:N.NullableNumber,attribute:!0,default:null})],B.prototype,'height',void 0),I([N.prop({type:Number,attribute:!0,default:200})],B.prototype,'maxHeight',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],B.prototype,'transparent',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],B.prototype,'disabled',void 0),I([N.prop({type:Number,attribute:!0,default:!1})],B.prototype,'maxLength',void 0),I([N.prop({type:Function,attribute:!1,default:null})],B.prototype,'onFocus',void 0),I([N.prop({type:Function,attribute:!1,default:null})],B.prototype,'onChange',void 0),I([N.prop({type:Function,attribute:!1,default:null})],B.prototype,'onSubmit',void 0),E.CTGrowingTextbox=B,B.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(z,W,G,J){var K=arguments.length,$=3>K?W:null===J?J=Object.getOwnPropertyDescriptor(W,G):J,X;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)$=Reflect.decorate(z,W,G,J);else for(var Q=z.length-1;0<=Q;Q--)(X=z[Q])&&($=(3>K?X($):3<K?X(W,G,$):X(W,G))||$);return 3<K&&$&&Object.defineProperty(W,G,$),$},R=this&&this.__awaiter||function(z,W,G,J){return new(G||(G=Promise))(function(K,$){function X(ee){try{Z(J.next(ee))}catch(te){$(te)}}function Q(ee){try{Z(J['throw'](ee))}catch(te){$(te)}}function Z(ee){ee.done?K(ee.value):new G(function(te){te(ee.value)}).then(X,Q)}Z((J=J.apply(z,W||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(8);class B extends N.CTLayerComponent{static get is(){return'ct-icon'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex}:host svg{margin:auto}:host([spin]) svg{animation:spin 1s infinite linear;transform-origin:50% 50%}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        `}generateComponentMarkup(){if(!this.icon)return null;const z=H.buildStyles({fill:'auto'===this.color?window.getComputedStyle(this.parentElement).color:this.color,width:this.width,height:this.height}),W=this.icon.viewBox||'0 0 1024 1024',G=this.icon.nodes||[],J=this.icon.paths||[];return G.length?this._drawFromNodes(W,G,z):this._drawFromPaths(W,J,z)}_drawFromPaths(z,W,G){return window.__CTRender('svg',{width:this.width,height:this.height,viewBox:z,style:G},W.map((J)=>window.__CTRender('path',{d:J})))}_drawFromNodes(z,W,G){return window.__CTRender('svg',{width:this.width,height:this.height,viewBox:z,style:G},W.map((J)=>this._drawNode(J)))}_drawNode(z){return window.__CTRender(z.name,Object.assign({},z.attributes),(z.children||[]).map((W)=>this._drawNode(W)))}}I([N.prop({type:String,attribute:!0})],B.prototype,'width',void 0),I([N.prop({type:String,attribute:!0})],B.prototype,'height',void 0),I([N.prop({type:String,attribute:!0,default:'auto'})],B.prototype,'color',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],B.prototype,'spin',void 0),I([N.prop({type:Object,attribute:!1,default:null})],B.prototype,'icon',void 0),E.CTIcon=B,B.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(X,Q,Z,ee){var te=arguments.length,ne=3>te?Q:null===ee?ee=Object.getOwnPropertyDescriptor(Q,Z):ee,ae;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ne=Reflect.decorate(X,Q,Z,ee);else for(var oe=X.length-1;0<=oe;oe--)(ae=X[oe])&&(ne=(3>te?ae(ne):3<te?ae(Q,Z,ne):ae(Q,Z))||ne);return 3<te&&ne&&Object.defineProperty(Q,Z,ne),ne},R=this&&this.__awaiter||function(X,Q,Z,ee){return new(Z||(Z=Promise))(function(te,ne){function ae(ie){try{se(ee.next(ie))}catch(de){ne(de)}}function oe(ie){try{se(ee['throw'](ie))}catch(de){ne(de)}}function se(ie){ie.done?te(ie.value):new Z(function(de){de(ie.value)}).then(ae,oe)}se((ee=ee.apply(X,Q||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(9),z=A(8),W=A(2),G=A(1);var J;(function(X){X[X.USERNAME='Username']='USERNAME',X[X.PASSWORD='Password']='PASSWORD',X[X.LOG_IN='Log In']='LOG_IN',X[X.LOG_OUT='Log Out']='LOG_OUT'})(J||(J={}));class K{static _create(){return new H.Metadata($,J)}static get instance(){return this._instance||(this._instance=this._create())}}K._instance=null,E.CTLoginFormMetadata=K;class $ extends N.CTLayerComponent{constructor(){super(),this.setMetadata(K.instance)}static get is(){return'ct-login-form'}initialize(){return R(this,void 0,void 0,function*(){this._resetFields()})}setupListeners(){this.addListener(B.BaseEvents.ConnectionStatusChange,(X)=>{switch(X.status){case G.ConnectionStatus.Connected:this.userLoggedIn=!0;break;case G.ConnectionStatus.Connecting:this.isWaiting=!0;break;default:this.isWaiting=!1,this.userLoggedIn=!1;}},{dontSuppress:!0})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;width:100%;margin:auto}:host .form{display:flex;flex-direction:column;width:100%}:host .form .form-field,:host .form .form-buttons{margin:5px 0}:host .form.theme-light .form-buttons .button{--button-primary-bg: transparent;--button-primary-text: #ffffff;--button-primary-border: 1px solid #ffffff}
        `}generateComponentMarkup(){return this.userLoggedIn?this._renderLogoutForm():this._renderLoginForm()}_renderLoginForm(){const X=['form'];this.theme&&X.push(`theme-${this.theme}`);const Q=z.buildStyles({display:this.hideUsername?'none':'block'}),Z={};return this.theme&&(Z[`theme-${this.theme}`]=!0),window.__CTRender('div',{class:X.join(' ')},window.__CTRender('div',{class:'form-field',style:Q},window.__CTRender(W.CTTextbox,Object.assign({type:'text',placeholder:this.translateI18nItem(J.USERNAME),name:'username',defaultValue:this._username,disabled:this.disableUsername||this.isWaiting},Z,{callback:(ee)=>this._onChange(ee),returnKeypress:()=>this._login(),forceTransparency:!0}))),window.__CTRender('div',{class:'form-field'},window.__CTRender(W.CTTextbox,Object.assign({type:'password',placeholder:this.translateI18nItem(J.PASSWORD),name:'password',defaultValue:this._password},Z,{callback:(ee)=>this._onChange(ee),disabled:this.isWaiting,returnKeypress:()=>this._login(),forceTransparency:!0}))),window.__CTRender('div',{class:'form-buttons'},window.__CTRender(W.CTButton,{class:'button',type:'primary',disabled:this.disabled,onClick:()=>this._login(),isWaiting:this.isWaiting},this.logInLabel||this.translateI18nItem(J.LOG_IN))))}_renderLogoutForm(){let X=this.layer.getCurrentUserJid();this.autoAppendDomainName&&(X=X.split('@').shift());const Q={};return this.theme&&(Q[`theme-${this.theme}`]=!0),window.__CTRender('div',{class:'form',style:z.buildStyles({display:'flex'})},window.__CTRender('div',{class:'form-field'},window.__CTRender(W.CTTextbox,Object.assign({type:'text',name:'username',defaultValue:X},Q,{disabled:!0}))),window.__CTRender('div',{class:'form-buttons'},window.__CTRender(W.CTButton,{type:'primary',disabled:!1,onClick:()=>this._logout(),isWaiting:this.isWaiting},this.translateI18nItem(J.LOG_OUT))))}_onChange(X){X&&'username'===X.key&&(this._username=X.value),X&&'password'===X.key&&(this._password=X.value),this.disabled=!this._username||!this._password}_resetFields(){this._username=this.username||'',this._password='',this.disabled=!0}_login(){return R(this,void 0,void 0,function*(){if(this._username&&this._password){this.isWaiting=!0;let X=this.autoAppendDomainName?`${this._username.trim()}@${this.layer.config.xmpp.user.domain}`:this._username.trim();this.layer.config.xmpp.user&&!0===this.layer.config.xmpp.user.forceLowercaseJid&&(X=X.toLowerCase());try{yield this.layer.login(X,this._password),this.emitComponentEvent(B.BaseEvents.LoginFormResult,new B.CommsEventArgs(!0)),this.isWaiting=!1,this._resetFields()}catch(Q){this.emitComponentEvent(B.BaseEvents.LoginFormResult,new B.CommsEventArgs(!1,`Could not log in as ${X}`)),this.isWaiting=!1,this._password='',this._onChange(),document.activeElement.blur()}}})}_logout(){return R(this,void 0,void 0,function*(){this.isWaiting=!0;try{yield this.layer.logout(),this.isWaiting=!1,this._resetFields()}catch(X){this.emitComponentEvent(B.BaseEvents.LoginFormResult,new B.CommsEventArgs(!1,`There was an error logging out. Please try again.`)),this.isWaiting=!1,document.activeElement.blur()}})}}I([N.prop({type:String,attribute:!0,default:''})],$.prototype,'theme',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],$.prototype,'autoAppendDomainName',void 0),I([N.prop({type:String,attribute:!0,default:''})],$.prototype,'username',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],$.prototype,'hideUsername',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],$.prototype,'disableUsername',void 0),I([N.prop({type:String,attribute:!0,default:null})],$.prototype,'logInLabel',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],$.prototype,'isWaiting',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],$.prototype,'disabled',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],$.prototype,'userLoggedIn',void 0),E.CTLoginForm=$,$.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(1),B=A(2);class z extends N.CTLayerComponent{constructor(){super(),this._open=!1,this._setUpEventHandlers()}static get is(){return'ct-menu'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:inline-block;color:inherit}:host .menu-container{position:relative}:host .menu-container .button{cursor:pointer}:host .menu-container .menu{position:absolute;top:25px;right:0;min-width:80px;background:var(--list-bg);color:var(--default-font-color, #212121);border:var(--list-item-border);z-index:99999;box-shadow:0 2px 5px rgba(0,0,0,0.5)}:host .menu-container .menu .menu-item{border-bottom:var(--list-item-border);padding:10px;cursor:pointer;white-space:nowrap}:host .menu-container .menu .menu-item.disabled{opacity:0.5}:host .menu-container .menu .menu-item:hover:not(.disabled){background:var(--secondary-color, #efefef)}:host .menu-container .menu .menu-item:last-child{border-bottom:0}
        `}generateComponentMarkup(){return window.__CTRender('div',{class:'menu-container'},window.__CTRender('div',{class:'button',onClick:(G)=>this._toggleMenu(G)},window.__CTRender(B.CTIcon,{width:'20',height:'20',icon:H.Icons.COMMON.MenuDots})),this._open&&window.__CTRender('div',{class:'menu'},this.menuItems.map((G)=>this._renderMenuItem(G))))}_renderMenuItem(G){const J=['menu-item'];return G.disabled&&J.push('disabled'),G.className&&J.push(G.className),window.__CTRender('div',{class:J.join(' '),onClick:()=>this._performAction(G)},G.label)}_toggleMenu(G){G.stopPropagation(),this._setMenuState(!this._open)}_performAction(G){G&&G.action&&!G.disabled&&(this._setMenuState(!1),G.action())}_setUpEventHandlers(){const G=this._handleDocumentInteraction.bind(this);document.addEventListener('click',G),window.addEventListener('resize',G)}_setMenuState(G=!this._open){this._open=G,this.forceRedraw()}_handleDocumentInteraction(){this._open&&this._setMenuState(!1)}}I([N.prop({type:Array,attribute:!0,default:[]})],z.prototype,'menuItems',void 0),E.CTMenu=z;E.MenuItem=class{constructor(G,J,K=!1,$=null){this.label=G,this.action=J,this.disabled=K,this.className=$}},z.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(Q,Z,ee,te){var ne=arguments.length,ae=3>ne?Z:null===te?te=Object.getOwnPropertyDescriptor(Z,ee):te,oe;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)ae=Reflect.decorate(Q,Z,ee,te);else for(var se=Q.length-1;0<=se;se--)(oe=Q[se])&&(ae=(3>ne?oe(ae):3<ne?oe(Z,ee,ae):oe(Z,ee))||ae);return 3<ne&&ae&&Object.defineProperty(Z,ee,ae),ae},R=this&&this.__awaiter||function(Q,Z,ee,te){return new(ee||(ee=Promise))(function(ne,ae){function oe(de){try{ie(te.next(de))}catch(le){ae(le)}}function se(de){try{ie(te['throw'](de))}catch(le){ae(le)}}function ie(de){de.done?ne(de.value):new ee(function(le){le(de.value)}).then(oe,se)}ie((te=te.apply(Q,Z||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(9),W=A(8),G=A(2),J=A(59);var K;(function(Q){Q[Q.ONLINE='Online']='ONLINE',Q[Q.OFFLINE='Offline']='OFFLINE',Q[Q.RECONNECTING='Reconnecting']='RECONNECTING',Q[Q.RECONNECT='Reconnect']='RECONNECT'})(K||(K={}));class ${static _create(){return new H.Metadata(X,K)}static get instance(){return this._instance||(this._instance=this._create())}}$._instance=null,E.CTOnlineIndicatorMetadata=$;class X extends N.CTLayerComponent{constructor(){super(),this.attemptCount=0,this.setMetadata($.instance)}static get is(){return'ct-online-indicator'}initialize(){return R(this,void 0,void 0,function*(){this.status=this.layer.getConnectionStatus()})}setupListeners(){this.addListener(z.BaseEvents.ConnectionStatusChange,(Q)=>{this.status=Q.status,this.reconnectTime=Q.reconnectTime,this.allowReconnect=Q.status===B.ConnectionStatus.Disconnected,clearInterval(this.timeoutId),Q.reconnectTime&&(this.timeoutId=setInterval(()=>{this.reconnectTime-=1e3},1e3))},{dontSuppress:!0})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:inline-flex;font-size:inherit;font-weight:inherit;color:inherit}:host .online-indicator{display:flex;align-items:center}:host .online-indicator .icon{flex:none;margin:0 5px 0 0}:host .online-indicator .label{display:flex;align-items:center;flex:1 1}:host .online-indicator .label .reconnect-detail{display:flex;align-items:center}:host .online-indicator .label .reconnect-detail .countdown{width:40px;padding:0 5px}
        `}generateComponentMarkup(){const Q=['online-indicator',this.status===B.ConnectionStatus.Connected?'online':'offline'],Z=this.status===B.ConnectionStatus.Connecting?B.Icons.COMMON.LoadingSpinner:this.status===B.ConnectionStatus.Connected?B.Icons.COMMON.StatusOnline:B.Icons.COMMON.StatusOffline;return window.__CTRender('div',{class:Q.join(' ')},W.renderIf(this.showIcon,window.__CTRender('div',{class:'icon'},window.__CTRender(G.CTIcon,{width:'16',height:'16',icon:Z,spin:this.status===B.ConnectionStatus.Connecting}))),W.renderIf(this.showText,window.__CTRender('div',{class:'label'},window.__CTRender('span',{class:'status'},this._getStatusLabel()),W.renderIf(this.status===B.ConnectionStatus.Disconnected&&this.reconnectTime!==void 0&&0<this.reconnectTime,window.__CTRender('span',{class:'reconnect-detail'},window.__CTRender('span',{class:'countdown'},this._getCountdownLabel()),window.__CTRender(J.CTButton,{type:'invert-secondary',disabled:!this.allowReconnect,onClick:(ee)=>this._tryLoginNow(ee)},this.translateI18nItem(K.RECONNECT)))))))}_getStatusLabel(){switch(this.status){case B.ConnectionStatus.Connected:return this.translateI18nItem(K.ONLINE);case B.ConnectionStatus.Connecting:return this.translateI18nItem(K.RECONNECTING);case B.ConnectionStatus.Disconnecting:case B.ConnectionStatus.Disconnected:return this.translateI18nItem(K.OFFLINE);}}_getCountdownLabel(){return`(${this.reconnectTime/1e3}s)`}_tryLoginNow(){!1===this.allowReconnect||(this.allowReconnect=!1,this.status=B.ConnectionStatus.Connecting,this.layer.attemptReconnect())}}I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],X.prototype,'showIcon',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],X.prototype,'showText',void 0),I([N.prop({type:String,attribute:!1,default:B.ConnectionStatus.Disconnected})],X.prototype,'status',void 0),I([N.prop({type:Number,attribute:!1,default:0})],X.prototype,'reconnectTime',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],X.prototype,'allowReconnect',void 0),E.CTOnlineIndicator=X,X.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(W,G,J,K){var $=arguments.length,X=3>$?G:null===K?K=Object.getOwnPropertyDescriptor(G,J):K,Q;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(W,G,J,K);else for(var Z=W.length-1;0<=Z;Z--)(Q=W[Z])&&(X=(3>$?Q(X):3<$?Q(G,J,X):Q(G,J))||X);return 3<$&&X&&Object.defineProperty(G,J,X),X},R=this&&this.__awaiter||function(W,G,J,K){return new(J||(J=Promise))(function($,X){function Q(te){try{ee(K.next(te))}catch(ne){X(ne)}}function Z(te){try{ee(K['throw'](te))}catch(ne){X(ne)}}function ee(te){te.done?$(te.value):new J(function(ne){ne(te.value)}).then(Q,Z)}ee((K=K.apply(W,G||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(2),B=A(1);class z extends N.CTLayerComponent{static get is(){return'ct-searchbox'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host .search-box{position:relative;color:var(--subtle-font-color, #828688)}:host .search-box input{width:100%;height:30px;font-family:inherit;font-size:14px;font-weight:inherit;padding:4px 26px;border-radius:15px;background:#ffffff;color:var(--default-font-color, #212121);border:var(--secondary-border, 1px solid #ddd);outline:none}:host .search-box input::placeholder{text-align:center;color:var(--subtle-font-color, #828688)}:host .search-box input::-webkit-input-placeholder{text-align:center;color:var(--subtle-font-color, #828688)}:host .search-box .icon{position:absolute;top:0;left:0;height:100%;padding:0 7px}:host .search-box .clear{position:absolute;top:0;right:0;height:100%;padding:0 7px;cursor:pointer}
        `}generateComponentMarkup(){let W=B.Icons.COMMON.Search;return'filter'===this.type&&(W=B.Icons.COMMON.Filter),window.__CTRender('div',{class:'search-box'},window.__CTRender('input',{type:'text',placeholder:this.placeholder,oninput:(G)=>this._onChange(G.target.value),onblur:()=>this._onBlur()}),window.__CTRender(H.CTIcon,{class:'icon',width:'16',height:'16',icon:W}),this.allowClear&&this.showClear&&window.__CTRender(H.CTIcon,{class:'clear',width:'12',height:'12',icon:B.Icons.COMMON.CircleCross,onClick:this._clear.bind(this)}))}_onChange(W){const G=0===W.length;G?(this.cancelDebounce('search'),this.showClear=!1,this.value='',this.onSearch('')):(this.showClear=!0,this.debounce('search',()=>{this.value=W,'function'==typeof this.onSearch&&this.onSearch(W)},this.delay))}_clear(W=!0){if(this.allowClear){const G=this.shadowRoot.querySelector('input');G.value='',W&&G.focus(),this._onChange('')}}_onBlur(){this.onBlur&&this.onBlur()}clear(){return R(this,void 0,void 0,function*(){this._clear(!1)})}}I([N.prop({type:String,attribute:!0,default:'search'})],z.prototype,'type',void 0),I([N.prop({type:String,attribute:!0,default:''})],z.prototype,'placeholder',void 0),I([N.prop({type:Number,attribute:!0,default:200})],z.prototype,'delay',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],z.prototype,'allowClear',void 0),I([N.prop({type:Function,attribute:!1,default:null})],z.prototype,'onSearch',void 0),I([N.prop({type:Function,attribute:!1,default:null})],z.prototype,'onBlur',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],z.prototype,'showClear',void 0),I([N.prop({type:String,attribute:!1,default:''})],z.prototype,'value',void 0),E.CTSearchbox=z,z.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(2),B=A(8),z=A(1);class W extends N.CTLayerComponent{static get is(){return'ct-selection-list'}initialize(){return R(this,void 0,void 0,function*(){'function'==typeof this.onSelect&&this.onSelect(this.options[this.selected].key)})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;width:100%}:host .selection-list{display:flex;flex-direction:row;flex-wrap:wrap;color:var(--default-bg-color-light-font, #212121)}:host .selection-list label{margin:10px 0 5px;text-transform:uppercase;font-size:0.8em;color:var(--tertiary-placeholder-color, #212121)}:host .selection-list .dropdown-contanier{flex:1 1 100%;position:relative}:host .selection-list .dropdown-contanier select{width:100%;height:30px;font-size:1em;outline:none;background-color:var(--default-bg-color-light, #fff);border:1px solid var(--select-border-color, #ddd);color:inherit;-webkit-appearance:none;padding:0.3em;border-radius:0}:host .selection-list .dropdown-contanier ct-icon.select-icon{pointer-events:none;position:absolute;top:0;right:0;height:100%;padding:0 7px;cursor:pointer}:host .selection-list .button-container{position:relative;flex:0 1 50%}:host .selection-list .button-container:nth-child(2n-1){padding:10px 5px 0 0}:host .selection-list .button-container:nth-child(2n-2){padding:10px 0 0 5px}:host .selection-list .button-container:nth-child(1),:host .selection-list .button-container:nth-child(2){padding-top:0}:host .selection-list.button-list{display:block}:host .selection-list.button-list .button-container{display:block;padding:0 0 1px 0}:host .selection-list.button-list .button-container:last-child{padding:0}
        `}generateComponentMarkup(){const J=!this.forceDropdown&&(this.buttonList||this.options.length<=4),K=['selection-list'];return this.buttonList&&K.push('button-list'),window.__CTRender('div',{class:K.join(' ')},window.__CTRender('label',null,'Response Options'),B.renderIfElse(J,this._renderButtons(),this._renderDropDown()))}_renderDropDown(){return window.__CTRender('div',{class:'dropdown-contanier'},window.__CTRender('select',{onChange:(G)=>this._onMakeSelection(G),value:this.selected.toString()},this.options.map((G)=>window.__CTRender('option',{"data-key":G.key,value:G.key.toString(),defaultSelected:this.selected===G.key},G.value))),window.__CTRender(H.CTIcon,{class:'select-icon',width:'12',height:'12',icon:z.Icons.COMMON.ChevronDown}))}_renderButtons(){return this.options.map((G)=>window.__CTRender('div',{class:'button-container'},window.__CTRender(H.CTButton,{"data-key":G.key,type:'secondary',selected:this.selected===G.key,onClick:(J)=>this._onMakeSelection(J)},G.value)))}_onMakeSelection(G){const J=G.target;if(!J)return;let K=null;switch(J.nodeName){case'CT-BUTTON':K=parseInt(J.getAttribute('data-key'));break;case'SELECT':K=parseInt(J.value);}if(!isNaN(K)){const $=this.options.find((X)=>X.key===K);$&&(this._makeSelection($.key),this.selected=$.key)}}_makeSelection(G){'function'==typeof this.onSelect&&this.onSelect(G)}}I([N.prop({type:Number,attribute:!0,default:Number.MIN_VALUE})],W.prototype,'selected',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!1})],W.prototype,'buttonList',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],W.prototype,'forceDropdown',void 0),I([N.prop({type:Function,attribute:!0})],W.prototype,'onSelect',void 0),I([N.prop({type:Array,attribute:!1,default:[]})],W.prototype,'options',void 0),E.CTSelectionList=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(2),B=A(15),z=A(5);let W=class extends N.CTLayerComponent{constructor(){super(...arguments),this._toggle=()=>{this.value=!this.value,this.callback&&this.callback(this.value)}}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}generateComponentMarkup(){return window.__CTRender('div',{class:'container',onClick:this._toggle},window.__CTRender('p',null,this.label),this.value?window.__CTRender(H.CTIcon,{width:'16',height:'16',icon:z.Icons.UI.CheckboxChecked}):window.__CTRender(H.CTIcon,{width:'16',height:'16',icon:z.Icons.UI.CheckboxUnchecked}))}};I([N.prop({type:Function,attribute:!1})],W.prototype,'callback',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],W.prototype,'value',void 0),I([N.prop({type:String,attribute:!1,default:null})],W.prototype,'label',void 0),W=I([B.component({tag:'ct-single-checkbox',styles:[`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host div.container{display:flex;margin:5px 0;padding:0 5px;justify-content:space-between;cursor:pointer;color:var(--primary-color, #22b1c8)}:host div.container p{color:var(--default-font-color, #212121)}
    `]})],W),E.CTSingleCheckbox=W},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(1),B=A(8),z=A(2);class W extends N.CTLayerComponent{static get is(){return'ct-slide-panel'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block;color:inherit}@keyframes fadein{0%{opacity:0;transform:translateX(-100%)}1%{opacity:0;transform:translateX(0)}100%{opacity:1;transform:translateX(0)}}@keyframes fadeout{0%{opacity:1;transform:translateX(0)}99%{opacity:0;transform:translateX(0)}100%{opacity:0;transform:translateX(-100%)}}@keyframes slidein{0%{transform:translateX(-200%)}1%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes slideout{0%{transform:translateX(0)}99%{transform:translateX(-100%)}100%{transform:translateX(-200%)}}:host .slide-panel{display:flex;justify-content:center;align-items:center;height:100%}:host .slide-panel .button{display:block;z-index:99999;cursor:pointer}:host .slide-panel .blocker{position:fixed;top:0;left:0;width:100%;height:100%;transform:translateX(-200%);background:rgba(0,0,0,0.5);z-index:99997;will-change:transform}:host .slide-panel .slide-panel-menu{position:fixed;top:0;left:0;height:100%;transform:translateX(-200%);background:transparent;color:#212121;z-index:99998;will-change:transform}:host .slide-panel.open .blocker{animation:fadein var(--animation-fast, .3s) 1 ease-out normal forwards}:host .slide-panel.open .slide-panel-menu{animation:slidein var(--animation-fast, .3s) 1 ease-out normal forwards}:host .slide-panel.closed .blocker{animation:fadeout var(--animation-fast, .3s) 1 ease-out normal forwards}:host .slide-panel.closed .slide-panel-menu{animation:slideout var(--animation-fast, .3s) 1 ease-out normal forwards}
        `}generateComponentMarkup(){const G=['slide-panel',this.state],J=B.buildStyles({width:this.menuWidth||'300px'});return window.__CTRender('div',{class:G.join(' ')},window.__CTRender('div',{class:'button',onClick:this._toggleMenu.bind(this)},window.__CTRender(z.CTIcon,{width:'20',height:'20',icon:H.Icons.COMMON.Menu})),window.__CTRender('div',{class:'blocker',onClick:this._closeMenu.bind(this)}),window.__CTRender('div',{class:'slide-panel-menu',style:J},window.__CTRender('slot',null)))}_toggleMenu(){this.state=this.state&&'closed'!==this.state?'closed':'open'}_closeMenu(){this.state='closed'}}I([N.prop({type:String,attribute:!0,default:'300px'})],W.prototype,'menuWidth',void 0),I([N.prop({type:String,attribute:!1,default:''})],W.prototype,'state',void 0),E.CTSlidePanel=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(8),B=A(2),z=A(1);class W extends N.CTLayerComponent{static get is(){return'ct-textbox'}initialize(){return R(this,void 0,void 0,function*(){this._value=this.defaultValue||'',this._isPasswordField=this.type&&'password'===this.type.toLowerCase(),this._isPasswordField&&this._watchPasswordField()})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host label{color:var(--default-font-color, #212121)}:host div div.input{position:relative;display:flex;flex-direction:row;margin:0 0 5px 0;border-bottom:1px solid var(--default-border-color, #ddd)}:host div div.input.focus{border-color:var(--login-form-border-color, green)}:host div div.input input,:host div div.input textarea{flex:1 1;font-family:inherit;font-size:inherit;font-weight:inherit;background-color:var(--default-bg-color-light, transparent);border:none;padding:0.3em;margin:auto;outline:none;resize:none;color:var(--login-form-font-color, inherit)}:host div div.input input.transparent,:host div div.input textarea.transparent{background-color:transparent}:host div div.input input:focus,:host div div.input textarea:focus{border:none;outline-offset:0}:host div div.input input:focus:not(:placeholder-shown) ~ .clear-value,:host div div.input textarea:focus:not(:placeholder-shown) ~ .clear-value{opacity:0.5;cursor:pointer}:host div div.input input:focus:not(:placeholder-shown) ~ .required,:host div div.input textarea:focus:not(:placeholder-shown) ~ .required{visibility:hidden}:host div div.input input:valid ~ .required,:host div div.input textarea:valid ~ .required{visibility:hidden}:host div div.input ct-icon{flex:0 0 20px;text-align:center}:host div div.input ct-icon.show-password{opacity:0.5}:host div div.input ct-icon.show-password.show-password-enabled{opacity:1}:host div div.input ct-icon.required{position:absolute;right:5px;top:0;height:100%}:host div div.input ct-icon.clear-value{opacity:0}:host div div.input ct-icon+ct-icon{margin:0 0 0 5px}:host div div.input .validation{margin-bottom:1%;color:red}:host div.disabled div.input{border-bottom:none}:host([full-border]) div div.input{background-color:var(--default-bg-color-light, #fff);border:1px solid var(--select-border-color, #ddd);color:var(--default-bg-color-light-font, #212121)}:host([full-border]) div div.input input::placeholder,:host([full-border]) div div.input textarea::placeholder{color:var(--select-placeholder-color, #828688)}:host([full-border]) div div.input input::-webkit-input-placeholder,:host([full-border]) div div.input textarea::-webkit-input-placeholder{color:var(--select-placeholder-color, #828688)}:host([theme-light]) label{color:#ffffff}:host([theme-light]) div div.input{border-bottom:1px solid rgba(255,255,255,0.6);color:#ffffff}:host([theme-light]) div div.input input,:host([theme-light]) div div.input textarea{color:#ffffff}:host([theme-light]) div div.input input::placeholder,:host([theme-light]) div div.input textarea::placeholder{color:rgba(255,255,255,0.6)}:host([theme-light]) div div.input input::-webkit-input-placeholder,:host([theme-light]) div div.input textarea::-webkit-input-placeholder{color:rgba(255,255,255,0.6)}:host([theme-light]) div div.input.focus{border-color:#ffffff}
        `}generateComponentMarkup(){const G={};return this.max&&(G.maxlength=this.max),window.__CTRender('div',{class:this.disabled?'disabled':''},H.renderIf(void 0!==this.label,window.__CTRender('label',{htmlFor:this.name},this.label)),window.__CTRender('div',{class:'input'},H.renderIfElse('textarea'===this.type,window.__CTRender('textarea',Object.assign({class:`${this.forceTransparency?'transparent':''}`,placeholder:this.placeholder,name:this.name,onFocus:()=>this._toggleFocus(!0),onBlur:()=>this._toggleFocus(!1),onInput:(J)=>this._updateValue({key:J.target.name,value:J.target.value}),onkeydown:this._keydown.bind(this),value:this.defaultValue,disabled:this.disabled,required:this.required,rows:5},G)),window.__CTRender('input',Object.assign({class:`${this.forceTransparency?'transparent':''}`,type:this.type,placeholder:this.placeholder,name:this.name,onFocus:()=>this._toggleFocus(!0),onBlur:()=>this._toggleFocus(!1),onInput:(J)=>this._updateValue({key:J.target.name,value:J.target.value}),onkeydown:this._keydown.bind(this),value:this.defaultValue,disabled:this.disabled,required:this.required},G))),H.renderIf(this.required,window.__CTRender(B.CTIcon,{class:'required',width:'8',height:'8',color:'#a91a49',icon:z.Icons.COMMON.RequiredField})),H.renderIf(this.showClearOptions&&!this._isPasswordField,window.__CTRender(B.CTIcon,{class:'clear-value',width:'12',height:'12',icon:z.Icons.COMMON.ClearTextbox,onClick:()=>this._clear()})),H.renderIf(this._isPasswordField,window.__CTRender(B.CTIcon,{class:`show-password ${'text'===this.type?'show-password-enabled':''}`,width:'20',height:'20',icon:z.Icons.COMMON.ShowPassword,onClick:()=>this._togglePasswordFieldType()}))))}_toggleFocus(G){const J=this.shadowRoot.querySelector('.input'),K='textarea'===this.type?J.querySelector('textarea'):J.querySelector('input');G?(J.classList.add('focus'),'scrollIntoViewIfNeeded'in K?K.scrollIntoViewIfNeeded():'scrollIntoView'in K&&K.scrollIntoView()):J.classList.remove('focus')}_keydown(G){13===G.keyCode&&this.returnKeypress?this.returnKeypress():null}_updateValue(G){this._value=G.value,'function'==typeof this.callback&&this.callback({key:G.key,value:G.value,validated:this.validated})}_clear(){let G;G='textarea'===this.type?this.shadowRoot.querySelector('textarea'):this.shadowRoot.querySelector('input'),G.value='',G.focus(),G.dispatchEvent(new Event('input'))}_togglePasswordFieldType(){this._isPasswordField&&('password'===this.type?this.type='text':this.type='password')}_watchPasswordField(){const G=(J)=>{const K=this.shadowRoot.querySelector('.input');if(J.path){const $=J.path.includes(K);!1===$&&'text'===this.type&&(this.type='password')}};document.removeEventListener('click',G),document.addEventListener('click',G)}}I([N.prop({type:String,attribute:!0})],W.prototype,'placeholder',void 0),I([N.prop({type:String,attribute:!0})],W.prototype,'type',void 0),I([N.prop({type:String,attribute:!0})],W.prototype,'label',void 0),I([N.prop({type:String,attribute:!0})],W.prototype,'name',void 0),I([N.prop({type:Boolean,attribute:!0,default:!0})],W.prototype,'showClearOptions',void 0),I([N.prop({type:String,attribute:!0})],W.prototype,'defaultValue',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],W.prototype,'required',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],W.prototype,'disabled',void 0),I([N.prop({type:Boolean,attribute:!0,default:!1})],W.prototype,'fullBorder',void 0),I([N.prop({type:Number,attribute:!0,default:4e3})],W.prototype,'max',void 0),I([N.prop({type:Boolean,attribute:!1,default:!0})],W.prototype,'validated',void 0),I([N.prop({type:Boolean,attribute:!1,default:!1})],W.prototype,'forceTransparency',void 0),E.CTTextbox=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(G,J,K,$){var X=arguments.length,Q=3>X?J:null===$?$=Object.getOwnPropertyDescriptor(J,K):$,Z;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Q=Reflect.decorate(G,J,K,$);else for(var ee=G.length-1;0<=ee;ee--)(Z=G[ee])&&(Q=(3>X?Z(Q):3<X?Z(J,K,Q):Z(J,K))||Q);return 3<X&&Q&&Object.defineProperty(J,K,Q),Q},R=this&&this.__awaiter||function(G,J,K,$){return new(K||(K=Promise))(function(X,Q){function Z(ne){try{te($.next(ne))}catch(ae){Q(ae)}}function ee(ne){try{te($['throw'](ne))}catch(ae){Q(ae)}}function te(ne){ne.done?X(ne.value):new K(function(ae){ae(ne.value)}).then(Z,ee)}te(($=$.apply(G,J||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(1),B=A(8),z=A(2);class W extends N.CTLayerComponent{static get is(){return'ct-user-avatar'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:block}:host .bg{position:relative;flex:none;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:50%;overflow:hidden;background:var(--avatar-bg, #7b7e80);color:var(--avatar-color, #fff)}:host .bg .image{position:absolute;top:0;left:0;border-radius:50%}
        `}generateComponentMarkup(){const G=B.buildStyles({width:`${this.size}px`,height:`${this.size}px`});this.bgColor&&(G.backgroundColor=this.bgColor);const J=Math.floor(this.size/2);return window.__CTRender('div',{class:'bg',style:G},window.__CTRender(z.CTIcon,{icon:this.defaultIcon,width:J,height:J}),this.user.avatar&&window.__CTRender('img',{class:'image',src:this.user.avatar,width:this.size,height:this.size}))}}I([N.prop({type:Number,attribute:!1,default:40})],W.prototype,'size',void 0),I([N.prop({type:Object,attribute:!1})],W.prototype,'user',void 0),I([N.prop({type:Object,attribute:!1,default:H.Icons.COMMON.User})],W.prototype,'defaultIcon',void 0),I([N.prop({type:String,attribute:!1,default:''})],W.prototype,'bgColor',void 0),E.CTUserAvatar=W,W.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(J,K,$,X){var Q=arguments.length,Z=3>Q?K:null===X?X=Object.getOwnPropertyDescriptor(K,$):X,ee;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)Z=Reflect.decorate(J,K,$,X);else for(var te=J.length-1;0<=te;te--)(ee=J[te])&&(Z=(3>Q?ee(Z):3<Q?ee(K,$,Z):ee(K,$))||Z);return 3<Q&&Z&&Object.defineProperty(K,$,Z),Z},R=this&&this.__awaiter||function(J,K,$,X){return new($||($=Promise))(function(Q,Z){function ee(ae){try{ne(X.next(ae))}catch(oe){Z(oe)}}function te(ae){try{ne(X['throw'](ae))}catch(oe){Z(oe)}}function ne(ae){ae.done?Q(ae.value):new $(function(oe){oe(ae.value)}).then(ee,te)}ne((X=X.apply(J,K||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(9),B=A(1),z=A(2),W=A(8);class G extends N.CTLayerComponent{static get is(){return'ct-user-display'}initialize(){return R(this,void 0,void 0,function*(){this._update()})}setupListeners(){this.addListeners([H.BaseEvents.ConnectionStatusChange,H.BaseEvents.CurrentUserVCardUpdate],()=>{this._update()})}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:inline-flex;font-size:inherit;font-weight:inherit;color:inherit}:host .user-display{display:flex;align-items:center;max-width:100%}:host .user-display .icon{flex:none;margin:0 5px 0 0}:host .user-display .label{flex:1 1}
        `}generateComponentMarkup(){switch(this.type){case'simple':return this._renderSimple();case'full':return this._renderFull();}return null}_renderSimple(){return this.displayName?window.__CTRender('div',{class:'user-display'},this.showIcon&&window.__CTRender('div',{class:'icon'},window.__CTRender(z.CTIcon,{width:'16',height:'16',icon:B.Icons.COMMON.UserIconEmpty})),window.__CTRender('div',{class:'label'},this.displayName)):null}_renderFull(){return this.user?window.__CTRender('div',{class:'user-display'},window.__CTRender(z.CTUserTile,{user:this.user,showAvatar:this.showIcon,detailStyle:W.buildStyles({flexDirection:'column',overflow:'hidden',width:'100%'})})):null}_update(){switch(this.type){case'simple':this.displayName=this.layer.getCurrentXmppDisplayName(),this.user=null;break;case'full':this.displayName=null,this.user=this.layer.getCurrentUser();}}}I([N.prop({type:String,attribute:!0,default:'simple'})],G.prototype,'type',void 0),I([N.prop({type:N.Stroolean,attribute:!0,default:!0})],G.prototype,'showIcon',void 0),I([N.prop({type:String,attribute:!1,default:null})],G.prototype,'displayName',void 0),I([N.prop({type:Object,attribute:!1,default:null})],G.prototype,'user',void 0),E.CTUserDisplay=G,G.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(ne,ae,oe,se){var ie=arguments.length,de=3>ie?ae:null===se?se=Object.getOwnPropertyDescriptor(ae,oe):se,le;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)de=Reflect.decorate(ne,ae,oe,se);else for(var _e=ne.length-1;0<=_e;_e--)(le=ne[_e])&&(de=(3>ie?le(de):3<ie?le(ae,oe,de):le(ae,oe))||de);return 3<ie&&de&&Object.defineProperty(ae,oe,de),de},R=this&&this.__awaiter||function(ne,ae,oe,se){return new(oe||(oe=Promise))(function(ie,de){function le(ce){try{ue(se.next(ce))}catch(pe){de(pe)}}function _e(ce){try{ue(se['throw'](ce))}catch(pe){de(pe)}}function ue(ce){ce.done?ie(ce.value):new oe(function(pe){pe(ce.value)}).then(le,_e)}ue((se=se.apply(ne,ae||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(11),B=A(1),z=A(3),W=A(8),G=A(2),J=A(33),K=A(178),$=A(60),X=A(166),Q=A(61);var Z;(function(ne){ne[ne.SEARCH_PLACEHOLDER='Find Users']='SEARCH_PLACEHOLDER',ne[ne.INITIAL_MESSAGE='Find users by searching for first name or last name']='INITIAL_MESSAGE',ne[ne.NO_MATCHES='No users match your search']='NO_MATCHES',ne[ne.SEARCH_BY='Search By:']='SEARCH_BY',ne[ne.SEARCH_BY_ALL='All']='SEARCH_BY_ALL',ne[ne.SEARCH_BY_NAME='Name']='SEARCH_BY_NAME',ne[ne.SEARCH_BY_JOB_TITLE='Job Title']='SEARCH_BY_JOB_TITLE',ne[ne.SEARCH_BY_ROLE='Role']='SEARCH_BY_ROLE',ne[ne.UNABLE_TO_ADD_USERS='Unable to add users']='UNABLE_TO_ADD_USERS',ne[ne.MAX_USERS_REACHED_ROLE='It was not possible to add this role to the conversation as it would exceed the maximum number of users allowed']='MAX_USERS_REACHED_ROLE'})(Z||(Z={}));class ee{static _create(){return new H.Metadata(te,Z)}static get instance(){return this._instance||(this._instance=this._create())}}ee._instance=null,E.CTUserListMetadata=ee;class te extends N.CTLayerComponent{constructor(){super(),this.TILE_HEIGHT=70,this._onSearchChange=(ne,ae)=>{const oe=!ae||0===ae.trim().length,se=oe?0:250;this.isFetching=!oe,this.debounce('search',()=>{this._searchContacts((ne||'').toLowerCase(),ae)},se)},this.setMetadata(ee.instance),this._onWindowResize=this._onWindowResize.bind(this),window.addEventListener('resize',this._onWindowResize,!0)}static get is(){return'ct-user-list'}initialize(){return R(this,void 0,void 0,function*(){this._virtualList=this.rolesOnly?new J.VirtualList(this,[],{itemHeight:this.TILE_HEIGHT,itemKeyGetter:(ne)=>ne.name}):new J.VirtualList(this,[],{itemHeight:this.TILE_HEIGHT,itemKeyGetter:(ne)=>ne.jid}),this.allowSearch&&this.requireSearch?(this.isFetching=!1,this.searchTerm=''):(this.isFetching=!0,this.defer(()=>R(this,void 0,void 0,function*(){yield this._searchContacts('','')})))})}setupListeners(){}disconnectedCallback(){window.removeEventListener('resize',this._onWindowResize)}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{display:flex;flex-direction:column;height:100%}:host .user-list{position:relative;display:flex;flex-direction:column;flex:1 1 auto;height:100%}:host .user-list .search{flex:0 0 55px;display:flex;padding:0 20px;justify-content:center;align-items:center;background:var(--secondary-color, #f2f2f2);border-bottom:var(--secondary-border, 1px solid #ddd)}:host .user-list .search .search-box{width:75%;font-size:.833em}:host .user-list .search .fields{margin-top:10px}:host .user-list .search input[type="radio"]{display:none}:host .user-list .search input[type="radio"]:checked+span{font-weight:bold;color:var(--primary-color, #22b1c8)}:host .user-list .search label{border-right:solid 1px #E1E1E1;padding:0 10px;color:#999999;font-size:14px}:host .user-list .search label:first-child{color:#CCCCCC}:host .user-list .search label:first-child,:host .user-list .search label:last-child{border-right:none}:host .user-list .selected-users{flex:none;display:flex;align-items:center;height:0;background-color:var(--list-item-bg, #fff);overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;transition:height var(--animation-normal, .5s) ease-out}:host .user-list .selected-users .scroller{display:inline-flex}:host .user-list .selected-users .scroller .selected-user{display:inline-flex;flex-direction:column;justify-content:center;align-items:center;text-overflow:ellipsis;width:75px;margin:10px 0 0 0}:host .user-list .selected-users .scroller .selected-user .avatar{position:relative;margin:0 0 5px 0}:host .user-list .selected-users .scroller .selected-user .avatar .remove{position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;top:-5px;right:-5px;width:16px;height:16px;border-radius:50%;background:var(--primary-color, #22b1c8);border:2px solid var(--avatar-color, #fff);color:var(--primary-font-color, #fff);cursor:pointer}:host .user-list .selected-users .scroller .selected-user .name{font-size:.833em;color:var(--default-font-color);overflow:hidden;text-overflow:ellipsis;width:100%;height:20px;line-height:0.9em;text-align:center;white-space:nowrap}:host .user-list .selected-users.has-selections{height:70px;border-bottom:var(--list-item-border, 1px solid #ddd)}:host .user-list .user-list-items{position:relative;display:flex;flex-direction:column;flex:1 1 auto;height:100%;overflow:hidden}:host .user-list .user-list-items .users-loading-bg{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;background:var(--list-bg, #f2f2f2);z-index:-1}:host .user-list .user-list-items .users{flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch}:host .user-list .user-list-items .users .user{position:relative}:host .user-list .user-list-items .users .user .selection{position:absolute;top:0;right:0;height:100%;display:flex;justify-content:center;align-items:center;padding:0 20px;cursor:pointer}:host .user-list .user-list-items .users .user .selection .checkbox{display:flex;justify-content:center;align-items:center;width:16px;height:16px;color:var(--subtle-font-color, #828688);border:2px solid var(--subtle-font-color, #828688)}:host .user-list .user-list-items .users .user.selected .selection .checkbox{border:0}:host .user-list .user-list-items .users .user.selection-disabled .selection{opacity:0;cursor:not-allowed}:host .user-list .user-list-items .users .user.clickable{cursor:pointer}:host .user-list .initial-message,:host .user-list .fetching,:host .user-list .no-users{flex:1;display:flex;justify-content:center;align-items:flex-start;height:100%;text-align:center;padding:55px;background:var(--list-bg, #f2f2f2);color:var(--subtle-font-color, #828688)}:host .user-list .initial-message{align-items:center;font-size:1.333em}
        `}generateComponentMarkup(){const ne=[this.translateI18nItem(Z.SEARCH_BY_NAME),this.translateI18nItem(Z.SEARCH_BY_JOB_TITLE)];return this.layer.config.roles.enableRoles&&ne.push(this.layer.config.roles.rolesLabel||this.translateI18nItem(Z.SEARCH_BY_ROLE)),window.__CTRender('div',{class:'user-list'},this.allowSearch&&window.__CTRender('div',{class:'search'},window.__CTRender(Q.CTSelectionTextFilter,{placeholder:this.searchPlaceholder||this.translateI18nItem(Z.SEARCH_PLACEHOLDER),selectionItems:ne,onSearch:this._onSearchChange})),this.allowSelection&&this._renderSelections(),this.isFetching&&window.__CTRender('div',{class:'fetching'},window.__CTRender(G.CTIcon,{width:'16',height:'16',icon:B.Icons.COMMON.LoadingSpinner,spin:!0})),!this.isFetching&&window.__CTRender('div',{class:'user-list-items'},this._users&&1<this._users.length&&window.__CTRender('div',{class:'fetching users-loading-bg'},window.__CTRender(G.CTIcon,{width:'16',height:'16',icon:B.Icons.COMMON.LoadingSpinner,spin:!0})),this._renderUsers()))}_renderSelections(){const ne=['selected-users'],ae=0<this.selections.size;return ae&&ne.push('has-selections'),window.__CTRender('div',{class:ne.join(' ')},0<this.selections.size&&window.__CTRender('div',{class:'scroller'},[...this.selections.values()].map((oe)=>window.__CTRender('div',{class:'selected-user'},W.renderIf(void 0!==oe.jid,window.__CTRender('div',{class:'avatar'},window.__CTRender(G.CTUserAvatar,{user:oe,size:32}),window.__CTRender('div',{class:'remove',onClick:(se)=>this._removeUserSelection(oe,se)},window.__CTRender(G.CTIcon,{class:'icon',width:'6',height:'6',icon:B.Icons.COMMON.Cross})))),W.renderIf(void 0!==oe.name,window.__CTRender('div',{class:'avatar'},window.__CTRender($.CTGroupAvatar,{size:32}),window.__CTRender('div',{class:'remove',onClick:(se)=>this._removeUserSelection(oe,se)},window.__CTRender(G.CTIcon,{class:'icon',width:'6',height:'6',icon:B.Icons.COMMON.Cross})))),W.renderIf(void 0!==oe.jid,window.__CTRender('div',{class:'name'},z.formatUserName(oe,this.selectedUsersNameFormat))),W.renderIf(void 0!==oe.name,window.__CTRender('div',{class:'name'},oe.name))))))}_renderUsers(){const ne=!this.searchTerm||0===this.searchTerm.trim().length;if(this.allowSearch&&this.requireSearch&&ne)return window.__CTRender('div',{class:'initial-message'},this.initialMessage||this.translateI18nItem(Z.INITIAL_MESSAGE));const ae=this._users.length;return 0===ae?window.__CTRender('div',{class:'no-users'},this.noMatchesMessage||this.translateI18nItem(Z.NO_MATCHES)):this._virtualList.render(this._renderItem.bind(this),'users','users-content')}_renderItem(ne,ae){const oe=this._userSelected(ne),se=['user'],ie=this._maxUsersReached();this.allowSelection&&oe&&se.push('selected'),!oe&&ie&&se.push('selection-disabled'),'function'==typeof this.onClickUser&&se.push('clickable');const de=(_e)=>{_e.stopPropagation();this.allowSelection&&(oe||!ie)&&this._toggleUserSelection(ne,_e)},le=W.buildStyles({paddingRight:'36px'});return ne.name?window.__CTRender('div',Object.assign({class:se.join(' ')},ae,{onClick:(_e)=>this._onClickItem(ne,_e)}),window.__CTRender(K.CTGroupTile,{group:ne,height:`${this.TILE_HEIGHT}px`,detailStyle:le},this.allowSelection&&window.__CTRender('div',{slot:'additional',class:'selection',onClick:de.bind(this)},window.__CTRender('div',{class:'checkbox'},oe&&window.__CTRender(G.CTIcon,{width:'12',height:'12',icon:B.Icons.COMMON.Tick}))))):window.__CTRender('div',Object.assign({class:se.join(' ')},ae,{onClick:(_e)=>this._onClickItem(ne,_e)}),window.__CTRender(G.CTUserTile,{user:ne,nameFormat:this.nameFormat,height:`${this.TILE_HEIGHT}px`,detailStyle:le},this.allowSelection&&window.__CTRender('div',{slot:'additional',class:'selection',onClick:de.bind(this)},window.__CTRender('div',{class:'checkbox'},oe&&window.__CTRender(G.CTIcon,{width:'12',height:'12',icon:B.Icons.COMMON.Tick})))))}_onWindowResize(){this.debounce('resize',()=>{this.forceRecalcList()})}forceRecalcList(){this._virtualList.forceRecalc()}_onClickItem(ne,ae){ae.stopPropagation(),ne.users?'function'==typeof this.onClickGroup&&this.onClickGroup(ne):'function'==typeof this.onClickUser&&this.onClickUser(ne)}_toggleUserSelection(ne,ae){return R(this,void 0,void 0,function*(){ae.stopPropagation();this.allowSelection&&(this._userSelected(ne)?yield this._removeUserSelection(ne,ae):yield this._addUserSelection(ne,ae))})}_addUserSelection(ne,ae){return R(this,void 0,void 0,function*(){if(ae.stopPropagation(),ne.jid)this.selections.set(ne.jid,ne);else{if(this._maxUsersWillBeReached(ne.users.length))return void this.emitEvent(X.PagerEvents._Request_RaiseAlert,this.defaultAlerts.AlertErrorWithOkayButton(this.translateI18nItem(Z.UNABLE_TO_ADD_USERS),this.translateI18nItem(Z.MAX_USERS_REACHED_ROLE),1,{}));this.selections.set(ne.name,ne)}this.onRenderComplete(()=>{const oe=this.shadowRoot.querySelector('.selected-users');oe.scrollLeft=oe.firstChild.clientWidth},!0),'function'==typeof this.onChangeSelection&&this.onChangeSelection((yield this.getSelections())),this.forceRedraw()})}_removeUserSelection(ne,ae){return R(this,void 0,void 0,function*(){ae.stopPropagation(),ne.jid?this.selections.delete(ne.jid):this.selections.delete(ne.name),'function'==typeof this.onChangeSelection&&this.onChangeSelection((yield this.getSelections())),this.forceRedraw()})}getSelections(){return R(this,void 0,void 0,function*(){return this.allowSelection?z.deepCloneArray([...this.selections.values()]):[]})}clearSelections(){return R(this,void 0,void 0,function*(){this.allowSelection&&(this.selections.clear(),'function'==typeof this.onChangeSelection&&this.onChangeSelection((yield this.getSelections())),this.forceRedraw(),yield z.sleep(0))})}reset(){return R(this,void 0,void 0,function*(){yield this.clearSelections()})}_searchContacts(ne,ae){return R(this,void 0,void 0,function*(){this.rolesOnly=!1;const oe=!ae||0===ae.trim().length,se=(this.layer.config.roles.rolesLabel||this.translateI18nItem(Z.SEARCH_BY_ROLE)).toLowerCase();if(oe&&this.requireSearch)this.searchTerm='',this._updateUserList([]),this.isFetching=!1;else{const ie=[];'name'===ne?(ie.push('firstName'),ie.push('lastName')):'job title'===ne?ie.push('jobTitle'):ne===se?(ie.push('group'),this.rolesOnly=!0):void 0;const de=yield this.layer.searchUsers(ae,ie),le=(this.excludeUsers||[]).map((ue)=>ue.toLowerCase()),_e=le.length?de.filter((ue)=>!le.includes(ue.jid.toLowerCase())):de;this.searchTerm=ae,this._updateUserList(_e),this.isFetching=!1}})}_userSelected(ne){return ne.name?this.selections.has(ne.name):this.selections.has(ne.jid)}_maxUsersWillBeReached(ne){return(this.maxSelections||0===this.maxSelections)&&this._totalSelectedUserCount()+ne>this.maxSelections}_totalSelectedUserCount(){const ne=new Map;for(const ae of this.selections.values())ae.jid?ne.set(ae.jid,ae):ae.users.map((oe)=>ne.set(oe.jid,oe));return ne.size}_maxUsersReached(){return(this.maxSelections||0===this.maxSelections)&&this._totalSelectedUserCount()>=this.maxSelections}_updateUserList(ne){return R(this,void 0,void 0,function*(){if(this._users=ne,this.rolesOnly){const ae=[];for(const oe of ne){const se=oe.group.split(', ');se.forEach((ie)=>{let de=ae.find((le)=>le.name===ie);null==de&&(de={name:ie,users:[]},ae.push(de)),de.users.push(oe)})}this._virtualList.setItems(ae)}else this._virtualList.setItems(this._users)})}}I([N.prop({type:Object,attribute:!1,default:z.NameFormat.PREFIX_FIRST_LAST})],te.prototype,'nameFormat',void 0),I([N.prop({type:Array,attribute:!1,default:null})],te.prototype,'excludeUsers',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],te.prototype,'allowSearch',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],te.prototype,'requireSearch',void 0),I([N.prop({type:String,attribute:!1,default:null})],te.prototype,'searchPlaceholder',void 0),I([N.prop({type:String,attribute:!1,default:null})],te.prototype,'initialMessage',void 0),I([N.prop({type:String,attribute:!1,default:null})],te.prototype,'noMatchesMessage',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],te.prototype,'allowSelection',void 0),I([N.prop({type:Object,attribute:!1,default:z.NameFormat.PREFIX_INITIAL_LAST})],te.prototype,'selectedUsersNameFormat',void 0),I([N.prop({type:N.NullableNumber,attribute:!1,default:null})],te.prototype,'maxSelections',void 0),I([N.prop({type:Function,attribute:!1,default:null})],te.prototype,'onClickUser',void 0),I([N.prop({type:Function,attribute:!1,default:null})],te.prototype,'onClickGroup',void 0),I([N.prop({type:Function,attribute:!1,default:null})],te.prototype,'onChangeSelection',void 0),I([N.prop({type:Object,attribute:!1,default:new Map})],te.prototype,'selections',void 0),I([N.prop({type:String,attribute:!1,default:''})],te.prototype,'searchTerm',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],te.prototype,'isFetching',void 0),I([N.prop({type:N.Stroolean,attribute:!1,default:!1})],te.prototype,'rolesOnly',void 0),E.CTUserList=te,te.register()},function(L,E,A){'use strict';var I=this&&this.__decorate||function(W,G,J,K){var $=arguments.length,X=3>$?G:null===K?K=Object.getOwnPropertyDescriptor(G,J):K,Q;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(W,G,J,K);else for(var Z=W.length-1;0<=Z;Z--)(Q=W[Z])&&(X=(3>$?Q(X):3<$?Q(G,J,X):Q(G,J))||X);return 3<$&&X&&Object.defineProperty(G,J,X),X},R=this&&this.__awaiter||function(W,G,J,K){return new(J||(J=Promise))(function($,X){function Q(te){try{ee(K.next(te))}catch(ne){X(ne)}}function Z(te){try{ee(K['throw'](te))}catch(ne){X(ne)}}function ee(te){te.done?$(te.value):new J(function(ne){ne(te.value)}).then(Q,Z)}ee((K=K.apply(W,G||[])).next())})};Object.defineProperty(E,'__esModule',{value:!0});const N=A(0),H=A(3),B=A(2);class z extends N.CTLayerComponent{static get is(){return'ct-user-tile'}initialize(){return R(this,void 0,void 0,function*(){})}setupListeners(){}get generateComponentStyles(){return`/*! Copyright (c) 2018 CommonTime Ltd *//*! Copyright (c) 2018 CommonTime Ltd */input:not([type=checkbox]):not([type=radio]){-webkit-appearance:none}/*! Copyright (c) 2018 CommonTime Ltd */:host{font-family:inherit;font-size:inherit;font-weight:inherit;color:#212121}:host h1,:host h2,:host h3,:host h4,:host h5,:host h6{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host,:host *{box-sizing:border-box}.user-html p{margin:0}.user-html p+p{margin:.8em 0 0 0}.user-html strong{font-weight:600}:host{max-width:100%}:host .name{flex:1 1 auto;font-size:1.333em;color:var(--default-font-color, #212121);white-space:pre-line;overflow:hidden;text-overflow:ellipsis}:host .job-title,:host .group{color:var(--subtle-font-color, #828688);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .group{font-style:italic}:host .empty{color:#E1E1E1}
        `}generateComponentMarkup(){if(this.user){const W=['group'];this.user.group||W.push('empty');const G=['job-title'];return this.user.jobTitle||G.push('empty'),window.__CTRender(B.CTAvatarTile,{height:this.height,showAvatar:this.showAvatar,detailStyle:this.detailStyle},this.showAvatar&&window.__CTRender(B.CTUserAvatar,{slot:'avatar',size:40,user:this.user}),window.__CTRender('div',{class:'name'},H.formatUserName(this.user,this.nameFormat)),window.__CTRender('div',{class:G.join(' ')},this.user.jobTitle||'No Job Title'),this.layer.config.roles.enableRoles&&window.__CTRender('div',{class:W.join(' ')},this.user.group||`No ${this.layer.config.roles.rolesLabel||'Role'}`),window.__CTRender('slot',{name:'additional'}))}}}I([N.prop({type:N.Stroolean,attribute:!1,default:!0})],z.prototype,'showAvatar',void 0),I([N.prop({type:Object,attribute:!1})],z.prototype,'user',void 0),I([N.prop({type:Object,attribute:!1,default:H.NameFormat.PREFIX_FIRST_LAST})],z.prototype,'nameFormat',void 0),I([N.prop({type:String,attribute:!1,default:null})],z.prototype,'height',void 0),I([N.prop({type:Object,attribute:!1,default:{}})],z.prototype,'detailStyle',void 0),E.CTUserTile=z,z.register()},function(L,E,A){'use strict';function R(W,G){return null===G||z.has(G)?z.get(G).getUniqueI18Keys(W)||[]:[]}Object.defineProperty(E,'__esModule',{value:!0});const N=A(20),H=A(46),B=A(2);E.getCommonI18nKeys=function(W=!1,...G){0===G.length&&(G=[...z.keys()]);const J=G.reduce((K,$)=>K.concat(R(W,$)),[]);return J.filter((K,$,X)=>{return X.indexOf(K)===$}).sort()};const z=new Map;z.set('DefaultAlerts',H.DefaultAlertsMetadata.instance),z.set('CTLoginForm',B.CTLoginFormMetadata.instance),z.set('CTOnlineIndicator',B.CTOnlineIndicatorMetadata.instance),z.set('CTUserList',B.CTUserListMetadata.instance),z.set('Common',N.CommonMetadata)},function(L,E){'use strict';function I(Z){var ee=Z.length;if(0<ee%4)throw new Error('Invalid string. Length must be a multiple of 4');var te=Z.indexOf('=');-1===te&&(te=ee);var ne=te===ee?0:4-te%4;return[te,ne]}function N(Z,ee,te){return 3*(ee+te)/4-te}function B(Z){return G[63&Z>>18]+G[63&Z>>12]+G[63&Z>>6]+G[63&Z]}function z(Z,ee,te){for(var ae=[],oe=ee,ne;oe<te;oe+=3)ne=(16711680&Z[oe]<<16)+(65280&Z[oe+1]<<8)+(255&Z[oe+2]),ae.push(B(ne));return ae.join('')}E.byteLength=function(Z){var ee=I(Z),te=ee[0],ne=ee[1];return 3*(te+ne)/4-ne},E.toByteArray=function(Z){for(var te=I(Z),ne=te[0],ae=te[1],oe=new K(N(Z,ne,ae)),se=0,ie=0<ae?ne-4:ne,de=0,ee;de<ie;de+=4)ee=J[Z.charCodeAt(de)]<<18|J[Z.charCodeAt(de+1)]<<12|J[Z.charCodeAt(de+2)]<<6|J[Z.charCodeAt(de+3)],oe[se++]=255&ee>>16,oe[se++]=255&ee>>8,oe[se++]=255&ee;return 2===ae&&(ee=J[Z.charCodeAt(de)]<<2|J[Z.charCodeAt(de+1)]>>4,oe[se++]=255&ee),1===ae&&(ee=J[Z.charCodeAt(de)]<<10|J[Z.charCodeAt(de+1)]<<4|J[Z.charCodeAt(de+2)]>>2,oe[se++]=255&ee>>8,oe[se++]=255&ee),oe},E.fromByteArray=function(Z){for(var te=Z.length,ne=te%3,ae=[],oe=16383,se=0,ie=te-ne,ee;se<ie;se+=oe)ae.push(z(Z,se,se+oe>ie?ie:se+oe));return 1==ne?(ee=Z[te-1],ae.push(G[ee>>2]+G[63&ee<<4]+'==')):2==ne&&(ee=(Z[te-2]<<8)+Z[te-1],ae.push(G[ee>>10]+G[63&ee>>4]+G[63&ee<<2]+'=')),ae.join('')};for(var G=[],J=[],K='undefined'==typeof Uint8Array?Array:Uint8Array,$='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',X=0,Q=$.length;X<Q;++X)G[X]=$[X],J[$.charCodeAt(X)]=X;J['-'.charCodeAt(0)]=62,J['_'.charCodeAt(0)]=63},function(L,E,A){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(I){function R(se,ie){se.super_=ie,se.prototype=Object.create(ie.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}})}function N(se,ie){Object.defineProperty(this,'kind',{value:se,enumerable:!0}),ie&&ie.length&&Object.defineProperty(this,'path',{value:ie,enumerable:!0})}function H(se,ie,de){H.super_.call(this,'E',se),Object.defineProperty(this,'lhs',{value:ie,enumerable:!0}),Object.defineProperty(this,'rhs',{value:de,enumerable:!0})}function B(se,ie){B.super_.call(this,'N',se),Object.defineProperty(this,'rhs',{value:ie,enumerable:!0})}function z(se,ie){z.super_.call(this,'D',se),Object.defineProperty(this,'lhs',{value:ie,enumerable:!0})}function W(se,ie,de){W.super_.call(this,'A',se),Object.defineProperty(this,'index',{value:ie,enumerable:!0}),Object.defineProperty(this,'item',{value:de,enumerable:!0})}function G(se,ie,de){var le=se.slice((de||ie)+1||se.length);return se.length=0>ie?se.length+ie:ie,se.push.apply(se,le),se}function J(se){var ie=typeof se;if('object'!=ie)return ie;return se===Math?'math':null===se?'null':Array.isArray(se)?'array':'[object Date]'===Object.prototype.toString.call(se)?'date':'function'==typeof se.toString&&/^\/.*\//.test(se.toString())?'regexp':'object'}function K(se,ie,de,le,_e,ue,ce){_e=_e||[],ce=ce||[];var pe=_e.slice(0);if('undefined'!=typeof ue){if(le){if('function'==typeof le&&le(pe,ue))return;if('object'==typeof le){if(le.prefilter&&le.prefilter(pe,ue))return;if(le.normalize){var he=le.normalize(pe,ue,se,ie);he&&(se=he[0],ie=he[1])}}}pe.push(ue)}'regexp'===J(se)&&'regexp'===J(ie)&&(se=se.toString(),ie=ie.toString());var ge=typeof se,fe=typeof ie,ye='undefined'!=ge||ce&&ce[ce.length-1].lhs&&ce[ce.length-1].lhs.hasOwnProperty(ue),Te='undefined'!=fe||ce&&ce[ce.length-1].rhs&&ce[ce.length-1].rhs.hasOwnProperty(ue);if(!ye&&Te)de(new B(pe,ie));else if(!Te&&ye)de(new z(pe,se));else if(J(se)!==J(ie))de(new H(pe,se,ie));else if('date'===J(se)&&0!=se-ie)de(new H(pe,se,ie));else if(!('object'==ge&&null!==se&&null!==ie))se!==ie&&('number'==ge&&isNaN(se)&&isNaN(ie)||de(new H(pe,se,ie)));else if(!ce.filter(function(Ee){return Ee.lhs===se}).length){if(ce.push({lhs:se,rhs:ie}),Array.isArray(se)){var Me=se.length,Ce;for(Ce=0;Ce<se.length;Ce++)Ce>=ie.length?de(new W(pe,Ce,new z(void 0,se[Ce]))):K(se[Ce],ie[Ce],de,le,pe,Ce,ce);for(;Ce<ie.length;)de(new W(pe,Ce,new B(void 0,ie[Ce++])))}else{var ve=Object.keys(se),Le=Object.keys(ie);ve.forEach(function(Ee){var be=Le.indexOf(Ee);0<=be?(K(se[Ee],ie[Ee],de,le,pe,Ee,ce),Le=G(Le,be)):K(se[Ee],void 0,de,le,pe,Ee,ce)}),Le.forEach(function(Ee){K(void 0,ie[Ee],de,le,pe,Ee,ce)})}--ce.length}else se!==ie&&de(new H(pe,se,ie))}function $(se,ie,de,le){return le=le||[],K(se,ie,function(_e){_e&&le.push(_e)},de),le.length?le:void 0}function X(se,ie,de){if(de.path&&de.path.length){var le=se[ie],ue=de.path.length-1,_e;for(_e=0;_e<ue;_e++)le=le[de.path[_e]];switch(de.kind){case'A':X(le[de.path[_e]],de.index,de.item);break;case'D':delete le[de.path[_e]];break;case'E':case'N':le[de.path[_e]]=de.rhs;}}else switch(de.kind){case'A':X(se[ie],de.index,de.item);break;case'D':se=G(se,ie);break;case'E':case'N':se[ie]=de.rhs;}return se}function Q(se,ie,de){if(se&&ie&&de&&de.kind){for(var le=se,_e=-1,ue=de.path?de.path.length-1:0;++_e<ue;)'undefined'==typeof le[de.path[_e]]&&(le[de.path[_e]]='number'==typeof de.path[_e]?[]:{}),le=le[de.path[_e]];switch(de.kind){case'A':X(de.path?le[de.path[_e]]:le,de.index,de.item);break;case'D':delete le[de.path[_e]];break;case'E':case'N':le[de.path[_e]]=de.rhs;}}}function Z(se,ie,de){if(de.path&&de.path.length){var le=se[ie],ue=de.path.length-1,_e;for(_e=0;_e<ue;_e++)le=le[de.path[_e]];switch(de.kind){case'A':Z(le[de.path[_e]],de.index,de.item);break;case'D':le[de.path[_e]]=de.lhs;break;case'E':le[de.path[_e]]=de.lhs;break;case'N':delete le[de.path[_e]];}}else switch(de.kind){case'A':Z(se[ie],de.index,de.item);break;case'D':se[ie]=de.lhs;break;case'E':se[ie]=de.lhs;break;case'N':se=G(se,ie);}return se}var oe=[],ne,ae;ne='object'==typeof I&&I?I:'undefined'==typeof window?{}:window,ae=ne.DeepDiff,ae&&oe.push(function(){'undefined'!=typeof ae&&ne.DeepDiff===$&&(ne.DeepDiff=ae,ae=void 0)}),R(H,N),R(B,N),R(z,N),R(W,N),Object.defineProperties($,{diff:{value:$,enumerable:!0},observableDiff:{value:K,enumerable:!0},applyDiff:{value:function(se,ie,de){if(se&&ie){var le=function(_e){(!de||de(se,ie,_e))&&Q(se,ie,_e)};K(se,ie,le)}},enumerable:!0},applyChange:{value:Q,enumerable:!0},revertChange:{value:function(se,ie,de){if(se&&ie&&de&&de.kind){var le=se,_e,ue;for(ue=de.path.length-1,_e=0;_e<ue;_e++)'undefined'==typeof le[de.path[_e]]&&(le[de.path[_e]]={}),le=le[de.path[_e]];switch(de.kind){case'A':Z(le[de.path[_e]],de.index,de.item);break;case'D':le[de.path[_e]]=de.lhs;break;case'E':le[de.path[_e]]=de.lhs;break;case'N':delete le[de.path[_e]];}}},enumerable:!0},isConflict:{value:function(){return'undefined'!=typeof ae},enumerable:!0},noConflict:{value:function(){return oe&&(oe.forEach(function(se){se()}),oe=null),$},enumerable:!0}}),E['default']=$}.call(E,A(35))},function(L,E){E.read=function(A,I,R,N,H){var W=8*H-N-1,G=(1<<W)-1,J=G>>1,K=-7,$=R?H-1:0,X=R?-1:1,Q=A[I+$],B,z;for($+=X,B=Q&(1<<-K)-1,Q>>=-K,K+=W;0<K;B=256*B+A[I+$],$+=X,K-=8);for(z=B&(1<<-K)-1,B>>=-K,K+=N;0<K;z=256*z+A[I+$],$+=X,K-=8);if(0===B)B=1-J;else{if(B===G)return z?NaN:(Q?-1:1)*Infinity;z+=Math.pow(2,N),B-=J}return(Q?-1:1)*z*Math.pow(2,B-N)},E.write=function(A,I,R,N,H,B){var J=8*B-H-1,K=(1<<J)-1,$=K>>1,X=23===H?Math.pow(2,-24)-Math.pow(2,-77):0,Q=N?0:B-1,Z=N?1:-1,ee=0>I||0===I&&0>1/I?1:0,z,W,G;for(I=Math.abs(I),isNaN(I)||I===Infinity?(W=isNaN(I)?1:0,z=K):(z=Math.floor(Math.log(I)/Math.LN2),1>I*(G=Math.pow(2,-z))&&(z--,G*=2),I+=1<=z+$?X/G:X*Math.pow(2,1-$),2<=I*G&&(z++,G/=2),z+$>=K?(W=0,z=K):1<=z+$?(W=(I*G-1)*Math.pow(2,H),z+=$):(W=I*Math.pow(2,$-1)*Math.pow(2,H),z=0));8<=H;A[R+Q]=255&W,Q+=Z,W/=256,H-=8);for(z=z<<H|W,J+=H;0<J;A[R+Q]=255&z,Q+=Z,z/=256,J-=8);A[R+Q-Z]|=128*ee}},function(L){var A={}.toString;L.exports=Array.isArray||function(I){return'[object Array]'==A.call(I)}},function(L,E,A){'use strict';function R($){return $.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}function N($){return $.replace(/"/g,'&quot;')}function H($){if(!$)return'';var X=[];for(var Q in $){var Z=$[Q]+'';X.push(Q+'="'+N(Z)+'"')}return X.join(' ')}function B($){var X=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};X=new K(X);for(var Q=G($),Z=[],ee=0,te;ee<Q.length;ee++){if(te=Q[ee],'nl'===te.type&&X.nl2br){Z.push('<br>\n');continue}else if(!te.isLink||!X.check(te)){Z.push(R(te.toString()));continue}var ne=X.resolve(te),ae=ne.formatted,oe=ne.formattedHref,se=ne.tagName,ie=ne.className,de=ne.target,le=ne.attributes,_e='<'+se+' href="'+N(oe)+'"';ie&&(_e+=' class="'+N(ie)+'"'),de&&(_e+=' target="'+N(de)+'"'),le&&(_e+=' '+H(le)),_e+='>'+R(ae)+'</'+se+'>',Z.push(_e)}return Z.join('')}E.__esModule=!0;var z=A(199),W=function($){if($&&$.__esModule)return $;var X={};if(null!=$)for(var Q in $)Object.prototype.hasOwnProperty.call($,Q)&&(X[Q]=$[Q]);return X.default=$,X}(z),G=W.tokenize,J=W.options,K=J.Options;String.prototype.linkify||(String.prototype.linkify=function($){return B(this,$)}),E.default=B},function(L,E,A){'use strict';function I(X){if(X&&X.__esModule)return X;var Q={};if(null!=X)for(var Z in X)Object.prototype.hasOwnProperty.call(X,Z)&&(Q[Z]=X[Z]);return Q.default=X,Q}E.__esModule=!0,E.tokenize=E.test=E.scanner=E.parser=E.options=E.inherits=E.find=void 0;var R=A(28),N=A(203),H=I(N),B=A(201),z=I(B),W=A(200),G=I(W);Array.isArray||(Array.isArray=function(X){return'[object Array]'===Object.prototype.toString.call(X)});var J=function(Q){return G.run(z.run(Q))};E.find=function(Q){for(var Z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,ee=J(Q),te=[],ne=0,ae;ne<ee.length;ne++)ae=ee[ne],ae.isLink&&(!Z||ae.type===Z)&&te.push(ae.toObject());return te},E.inherits=R.inherits,E.options=H,E.parser=G,E.scanner=z,E.test=function(Q){var Z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,ee=J(Q);return 1===ee.length&&ee[0].isLink&&(!Z||ee[0].type===Z)},E.tokenize=J},function(L,E,A){'use strict';function I(Oe){if(Oe&&Oe.__esModule)return Oe;var Ne={};if(null!=Oe)for(var Pe in Oe)Object.prototype.hasOwnProperty.call(Oe,Pe)&&(Ne[Pe]=Oe[Pe]);return Ne.default=Oe,Ne}E.__esModule=!0,E.start=E.run=E.TOKENS=E.State=void 0;var R=A(63),N=A(34),H=I(N),B=A(202),z=I(B),W=function(Ne){return new R.TokenState(Ne)},G=W(),J=W(),K=W(),$=W(),X=W(),Q=W(),Z=W(),ee=W(B.URL),te=W(),ne=W(B.URL),ae=W(B.URL),oe=W(),se=W(),ie=W(),de=W(),le=W(),_e=W(B.URL),ue=W(B.URL),ce=W(B.URL),pe=W(B.URL),he=W(),ge=W(),fe=W(),ye=W(),Te=W(),Ce=W(),Me=W(B.EMAIL),ve=W(),Le=W(B.EMAIL),Ee=W(B.MAILTOEMAIL),Se=W(),be=W(),De=W(),Ae=W(),Ie=W(B.NL);G.on(N.NL,Ie).on(N.PROTOCOL,J).on(N.MAILTO,K).on(N.SLASH,$),J.on(N.SLASH,$),$.on(N.SLASH,X),G.on(N.TLD,Q).on(N.DOMAIN,Q).on(N.LOCALHOST,ee).on(N.NUM,Q),X.on(N.TLD,ae).on(N.DOMAIN,ae).on(N.NUM,ae).on(N.LOCALHOST,ae),Q.on(N.DOT,Z),Te.on(N.DOT,Ce),Z.on(N.TLD,ee).on(N.DOMAIN,Q).on(N.NUM,Q).on(N.LOCALHOST,Q),Ce.on(N.TLD,Me).on(N.DOMAIN,Te).on(N.NUM,Te).on(N.LOCALHOST,Te),ee.on(N.DOT,Z),Me.on(N.DOT,Ce),ee.on(N.COLON,te).on(N.SLASH,ae),te.on(N.NUM,ne),ne.on(N.SLASH,ae),Me.on(N.COLON,ve),ve.on(N.NUM,Le);var Re=[N.DOMAIN,N.AT,N.LOCALHOST,N.NUM,N.PLUS,N.POUND,N.PROTOCOL,N.SLASH,N.TLD,N.UNDERSCORE,N.SYM,N.AMPERSAND],we=[N.COLON,N.DOT,N.QUERY,N.PUNCTUATION,N.CLOSEBRACE,N.CLOSEBRACKET,N.CLOSEANGLEBRACKET,N.CLOSEPAREN,N.OPENBRACE,N.OPENBRACKET,N.OPENANGLEBRACKET,N.OPENPAREN];ae.on(N.OPENBRACE,se).on(N.OPENBRACKET,ie).on(N.OPENANGLEBRACKET,de).on(N.OPENPAREN,le),oe.on(N.OPENBRACE,se).on(N.OPENBRACKET,ie).on(N.OPENANGLEBRACKET,de).on(N.OPENPAREN,le),se.on(N.CLOSEBRACE,ae),ie.on(N.CLOSEBRACKET,ae),de.on(N.CLOSEANGLEBRACKET,ae),le.on(N.CLOSEPAREN,ae),_e.on(N.CLOSEBRACE,ae),ue.on(N.CLOSEBRACKET,ae),ce.on(N.CLOSEANGLEBRACKET,ae),pe.on(N.CLOSEPAREN,ae),he.on(N.CLOSEBRACE,ae),ge.on(N.CLOSEBRACKET,ae),fe.on(N.CLOSEANGLEBRACKET,ae),ye.on(N.CLOSEPAREN,ae),se.on(Re,_e),ie.on(Re,ue),de.on(Re,ce),le.on(Re,pe),se.on(we,he),ie.on(we,ge),de.on(we,fe),le.on(we,ye),_e.on(Re,_e),ue.on(Re,ue),ce.on(Re,ce),pe.on(Re,pe),_e.on(we,_e),ue.on(we,ue),ce.on(we,ce),pe.on(we,pe),he.on(Re,_e),ge.on(Re,ue),fe.on(Re,ce),ye.on(Re,pe),he.on(we,he),ge.on(we,ge),fe.on(we,fe),ye.on(we,ye),ae.on(Re,ae),oe.on(Re,ae),ae.on(we,oe),oe.on(we,oe),K.on(N.TLD,Ee).on(N.DOMAIN,Ee).on(N.NUM,Ee).on(N.LOCALHOST,Ee),Ee.on(Re,Ee).on(we,Se),Se.on(Re,Ee).on(we,Se);var ke=[N.DOMAIN,N.NUM,N.PLUS,N.POUND,N.QUERY,N.UNDERSCORE,N.SYM,N.AMPERSAND,N.TLD];Q.on(ke,be).on(N.AT,De),ee.on(ke,be).on(N.AT,De),Z.on(ke,be),be.on(ke,be).on(N.AT,De).on(N.DOT,Ae),Ae.on(ke,be),De.on(N.TLD,Te).on(N.DOMAIN,Te).on(N.LOCALHOST,Me);E.State=R.TokenState,E.TOKENS=z,E.run=function(Ne){for(var Pe=Ne.length,xe=0,He=[],je=[];xe<Pe;){for(var Fe=G,Ue=null,Be=null,qe=0,ze=null,We=-1;xe<Pe&&!(Ue=Fe.next(Ne[xe]));)je.push(Ne[xe++]);for(;xe<Pe&&(Be=Ue||Fe.next(Ne[xe]));)Ue=null,Fe=Be,Fe.accepts()?(We=0,ze=Fe):0<=We&&We++,xe++,qe++;if(0>We)for(var Ve=xe-qe;Ve<xe;Ve++)je.push(Ne[Ve]);else{0<je.length&&(He.push(new B.TEXT(je)),je=[]),xe-=We,qe-=We;var Ge=ze.emit();He.push(new Ge(Ne.slice(xe-qe,xe)))}}return 0<je.length&&He.push(new B.TEXT(je)),He},E.start=G},function(L,E,A){'use strict';E.__esModule=!0,E.start=E.run=E.TOKENS=E.State=void 0;var R=A(63),N=A(34),H=function(Ce){if(Ce&&Ce.__esModule)return Ce;var Me={};if(null!=Ce)for(var ve in Ce)Object.prototype.hasOwnProperty.call(Ce,ve)&&(Me[ve]=Ce[ve]);return Me.default=Ce,Me}(N),B='aaa|aarp|abb|abbott|abogado|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|af|afl|ag|agency|ai|aig|airforce|airtel|al|alibaba|alipay|allfinanz|alsace|am|amica|amsterdam|an|analytics|android|ao|apartments|app|apple|aq|aquarelle|ar|aramco|archi|army|arpa|arte|as|asia|associates|at|attorney|au|auction|audi|audio|author|auto|autos|avianca|aw|ax|axa|az|azure|ba|baidu|band|bank|bar|barcelona|barclaycard|barclays|bargains|bauhaus|bayern|bb|bbc|bbva|bcg|bcn|bd|be|beats|beer|bentley|berlin|best|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bom|bond|boo|book|boots|bosch|bostik|bot|boutique|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|camera|camp|cancerresearch|canon|capetown|capital|car|caravan|cards|care|career|careers|cars|cartier|casa|cash|casino|cat|catering|cba|cbn|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chloe|christmas|chrome|church|ci|cipriani|circle|cisco|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|date|dating|datsun|day|dclk|de|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dj|dk|dm|dnp|do|docs|dog|doha|domains|download|drive|dubai|durban|dvag|dz|earth|eat|ec|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|er|erni|es|esq|estate|et|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|fage|fail|fairwinds|faith|family|fan|fans|farm|fashion|fast|feedback|ferrero|fi|film|final|finance|financial|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|florist|flowers|flsmidth|fly|fm|fo|foo|football|ford|forex|forsale|forum|foundation|fox|fr|fresenius|frl|frogans|frontier|fund|furniture|futbol|fyi|ga|gal|gallery|gallup|game|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|gold|goldpoint|golf|goo|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|group|gs|gt|gu|gucci|guge|guide|guitars|guru|gw|gy|hamburg|hangout|haus|hdfcbank|health|healthcare|help|helsinki|here|hermes|hiphop|hitachi|hiv|hk|hm|hn|hockey|holdings|holiday|homedepot|homes|honda|horse|host|hosting|hoteles|hotmail|house|how|hr|hsbc|ht|hu|hyundai|ibm|icbc|ice|icu|id|ie|ifm|iinet|il|im|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|international|investments|io|ipiranga|iq|ir|irish|is|iselect|ist|istanbul|it|itau|iwc|jaguar|java|jcb|je|jetzt|jewelry|jlc|jll|jm|jmp|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kitchen|kiwi|km|kn|koeln|komatsu|kp|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|lamborghini|lamer|lancaster|land|landrover|lanxess|lasalle|lat|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|legal|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|limited|limo|lincoln|linde|link|live|living|lixil|lk|loan|loans|local|locus|lol|london|lotte|lotto|love|lr|ls|lt|ltd|ltda|lu|lupin|luxe|luxury|lv|ly|ma|madrid|maif|maison|makeup|man|management|mango|market|marketing|markets|marriott|mba|mc|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|mg|mh|miami|microsoft|mil|mini|mk|ml|mm|mma|mn|mo|mobi|mobily|moda|moe|moi|mom|monash|money|montblanc|mormon|mortgage|moscow|motorcycles|mov|movie|movistar|mp|mq|mr|ms|mt|mtn|mtpc|mtr|mu|museum|mutuelle|mv|mw|mx|my|mz|na|nadex|nagoya|name|natura|navy|nc|ne|nec|net|netbank|network|neustar|new|news|nexus|nf|ng|ngo|nhk|ni|nico|nikon|ninja|nissan|nl|no|nokia|norton|nowruz|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|office|okinawa|om|omega|one|ong|onl|online|ooo|oracle|orange|org|organic|origins|osaka|otsuka|ovh|pa|page|pamperedchef|panerai|paris|pars|partners|parts|party|passagens|pe|pet|pf|pg|ph|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pohl|poker|porn|post|pr|praxi|press|pro|prod|productions|prof|promo|properties|property|protection|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|racing|re|read|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|ricoh|rio|rip|ro|rocher|rocks|rodeo|room|rs|rsvp|ru|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|saxo|sb|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scor|scot|sd|se|seat|security|seek|select|sener|services|seven|sew|sex|sexy|sfr|sg|sh|sharp|shell|shia|shiksha|shoes|show|shriram|si|singles|site|sj|sk|ski|skin|sky|skype|sl|sm|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|st|stada|star|starhub|statefarm|statoil|stc|stcgroup|stockholm|storage|store|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|taobao|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|team|tech|technology|tel|telecity|telefonica|temasek|tennis|tf|tg|th|thd|theater|theatre|tickets|tienda|tiffany|tips|tires|tirol|tj|tk|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tp|tr|trade|trading|training|travel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubs|ug|uk|unicom|university|uno|uol|us|uy|uz|va|vacations|vana|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|viking|villas|vin|vip|virgin|vision|vista|vistaprint|viva|vlaanderen|vn|vodka|volkswagen|vote|voting|voto|voyage|vu|vuelos|wales|walter|wang|wanggou|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|wme|wolterskluwer|work|works|world|ws|wtc|wtf|xbox|xerox|xin|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|youtube|yt|za|zara|zero|zip|zm|zone|zuerich|zw'.split('|'),z='0123456789'.split(''),W='0123456789abcdefghijklmnopqrstuvwxyz'.split(''),G=[' ','\f','\r','\t','\x0B','\xA0','\u1680','\u180E'],J=[],K=function(Me){return new R.CharacterState(Me)},$=K(),X=K(N.NUM),Q=K(N.DOMAIN),Z=K(),ee=K(N.WS);$.on('@',K(N.AT)).on('.',K(N.DOT)).on('+',K(N.PLUS)).on('#',K(N.POUND)).on('?',K(N.QUERY)).on('/',K(N.SLASH)).on('_',K(N.UNDERSCORE)).on(':',K(N.COLON)).on('{',K(N.OPENBRACE)).on('[',K(N.OPENBRACKET)).on('<',K(N.OPENANGLEBRACKET)).on('(',K(N.OPENPAREN)).on('}',K(N.CLOSEBRACE)).on(']',K(N.CLOSEBRACKET)).on('>',K(N.CLOSEANGLEBRACKET)).on(')',K(N.CLOSEPAREN)).on('&',K(N.AMPERSAND)).on([',',';','!','"','\''],K(N.PUNCTUATION)),$.on('\n',K(N.NL)).on(G,ee),ee.on(G,ee);for(var te=0,ne;te<B.length;te++)ne=(0,R.stateify)(B[te],$,N.TLD,N.DOMAIN),J.push.apply(J,ne);var ae=(0,R.stateify)('file',$,N.DOMAIN,N.DOMAIN),oe=(0,R.stateify)('ftp',$,N.DOMAIN,N.DOMAIN),se=(0,R.stateify)('http',$,N.DOMAIN,N.DOMAIN),ie=(0,R.stateify)('mailto',$,N.DOMAIN,N.DOMAIN);J.push.apply(J,ae),J.push.apply(J,oe),J.push.apply(J,se);var de=ae.pop(),le=oe.pop(),_e=se.pop(),ue=ie.pop(),ce=K(N.DOMAIN),pe=K(N.PROTOCOL),he=K(N.MAILTO);le.on('s',ce).on(':',pe),_e.on('s',ce).on(':',pe),J.push(ce),de.on(':',pe),ce.on(':',pe),ue.on(':',he);var ge=(0,R.stateify)('localhost',$,N.LOCALHOST,N.DOMAIN);J.push.apply(J,ge),$.on(z,X),X.on('-',Z).on(z,X).on(W,Q),Q.on('-',Z).on(W,Q);for(var fe=0;fe<J.length;fe++)J[fe].on('-',Z).on(W,Q);Z.on('-',Z).on(z,Q).on(W,Q),$.defaultTransition=K(N.SYM);E.State=R.CharacterState,E.TOKENS=H,E.run=function(Me){for(var ve=Me.replace(/[A-Z]/g,function(Ye){return Ye.toLowerCase()}),Le=Me.length,Ee=[],Se=0;Se<Le;){for(var be=$,De=null,Ae=null,Ie=0,Re=null,we=-1;Se<Le&&(Ae=be.next(ve[Se]));)De=null,be=Ae,be.accepts()?(we=0,Re=be):0<=we&&we++,Ie++,Se++;if(!(0>we)){Se-=we,Ie-=we;var ke=Re.emit();Ee.push(new ke(Me.substr(Se-Ie,Ie)))}}return Ee},E.start=$},function(L,E,A){'use strict';function I($){return $ instanceof H.DOMAIN||$ instanceof H.TLD}E.__esModule=!0,E.URL=E.TEXT=E.NL=E.EMAIL=E.MAILTOEMAIL=E.Base=void 0;var R=A(64),N=A(28),H=A(34),B=(0,R.createTokenClass)();B.prototype={type:'token',isLink:!1,toString:function(){for(var X=[],Q=0;Q<this.v.length;Q++)X.push(this.v[Q].toString());return X.join('')},toHref:function(){return this.toString()},toObject:function(){var X=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'http';return{type:this.type,value:this.toString(),href:this.toHref(X)}}};var z=(0,N.inherits)(B,(0,R.createTokenClass)(),{type:'email',isLink:!0}),W=(0,N.inherits)(B,(0,R.createTokenClass)(),{type:'email',isLink:!0,toHref:function(){this.v;return'mailto:'+this.toString()}}),G=(0,N.inherits)(B,(0,R.createTokenClass)(),{type:'text'}),J=(0,N.inherits)(B,(0,R.createTokenClass)(),{type:'nl'}),K=(0,N.inherits)(B,(0,R.createTokenClass)(),{type:'url',isLink:!0,toHref:function(){for(var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'http',Q=!1,Z=!1,ee=this.v,te=[],ne=0;ee[ne]instanceof H.PROTOCOL;)Q=!0,te.push(ee[ne].toString().toLowerCase()),ne++;for(;ee[ne]instanceof H.SLASH;)Z=!0,te.push(ee[ne].toString()),ne++;for(;I(ee[ne]);)te.push(ee[ne].toString().toLowerCase()),ne++;for(;ne<ee.length;ne++)te.push(ee[ne].toString());return te=te.join(''),Q||Z||(te=X+'://'+te),te},hasProtocol:function(){return this.v[0]instanceof H.PROTOCOL}});E.Base=B,E.MAILTOEMAIL=z,E.EMAIL=W,E.NL=J,E.TEXT=G,E.URL=K},function(L,E){'use strict';function I(W){W=W||{},this.defaultProtocol=W.defaultProtocol||z.defaultProtocol,this.events=W.events||z.events,this.format=W.format||z.format,this.formatHref=W.formatHref||z.formatHref,this.nl2br=W.nl2br||z.nl2br,this.tagName=W.tagName||z.tagName,this.target=W.target||z.target,this.validate=W.validate||z.validate,this.ignoreTags=[],this.attributes=W.attributes||W.linkAttributes||z.attributes,this.className=W.className||W.linkClass||z.className;for(var G=W.ignoreTags||z.ignoreTags,J=0;J<G.length;J++)this.ignoreTags.push(G[J].toUpperCase())}function N(W){return W}E.__esModule=!0;var B='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(W){return typeof W}:function(W){return W&&'function'==typeof Symbol&&W.constructor===Symbol&&W!==Symbol.prototype?'symbol':typeof W},z={defaultProtocol:'http',events:null,format:N,formatHref:N,nl2br:!1,tagName:'a',target:function(W,G){return'url'===G?'_blank':null},validate:!0,ignoreTags:[],attributes:null,className:'linkified'};E.defaults=z,E.Options=I,E.contains=function(W,G){for(var J=0;J<W.length;J++)if(W[J]===G)return!0;return!1},I.prototype={resolve:function(G){var J=G.toHref(this.defaultProtocol);return{formatted:this.get('format',G.toString(),G),formattedHref:this.get('formatHref',J,G),tagName:this.get('tagName',J,G),className:this.get('className',J,G),target:this.get('target',J,G),events:this.getObject('events',J,G),attributes:this.getObject('attributes',J,G)}},check:function(G){return this.get('validate',G.toString(),G)},get:function(G,J,K){var $=this[G];if(!$)return $;switch('undefined'==typeof $?'undefined':B($)){case'function':return $(J,K.type);case'object':var X=$[K.type]||z[G];return'function'==typeof X?X(J,K.type):X;}return $},getObject:function(G,J,K){var $=this[G];return'function'==typeof $?$(J,K.type):$}}},function(L,E,A){L.exports=A(198).default},function(L,E,A){(function(I){(function(R,N){I.exports=N()})(this,function(){'use strict';function R(){return gr.apply(null,arguments)}function H(il){return il instanceof Array||'[object Array]'===Object.prototype.toString.call(il)}function B(il){return null!=il&&'[object Object]'===Object.prototype.toString.call(il)}function z(il){for(var dl in il)return!1;return!0}function W(il){return void 0===il}function G(il){return'number'==typeof il||'[object Number]'===Object.prototype.toString.call(il)}function J(il){return il instanceof Date||'[object Date]'===Object.prototype.toString.call(il)}function K(il,dl){var ll=[],_l;for(_l=0;_l<il.length;++_l)ll.push(dl(il[_l],_l));return ll}function $(il,dl){return Object.prototype.hasOwnProperty.call(il,dl)}function X(il,dl){for(var ll in dl)$(dl,ll)&&(il[ll]=dl[ll]);return $(dl,'toString')&&(il.toString=dl.toString),$(dl,'valueOf')&&(il.valueOf=dl.valueOf),il}function Q(il,dl,ll,_l){return mn(il,dl,ll,_l,!0).utc()}function Z(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ee(il){return null==il._pf&&(il._pf=Z()),il._pf}function te(il){if(null==il._isValid){var dl=ee(il),ll=Tr.call(dl.parsedDateParts,function(ul){return null!=ul}),_l=!isNaN(il._d.getTime())&&0>dl.overflow&&!dl.empty&&!dl.invalidMonth&&!dl.invalidWeekday&&!dl.nullInput&&!dl.invalidFormat&&!dl.userInvalidated&&(!dl.meridiem||dl.meridiem&&ll);if(il._strict&&(_l=_l&&0===dl.charsLeftOver&&0===dl.unusedTokens.length&&void 0===dl.bigHour),null==Object.isFrozen||!Object.isFrozen(il))il._isValid=_l;else return _l}return il._isValid}function ne(il){var dl=Q(NaN);return null==il?ee(dl).userInvalidated=!0:X(ee(dl),il),dl}function ae(il,dl){var ll,_l,ul;if(W(dl._isAMomentObject)||(il._isAMomentObject=dl._isAMomentObject),W(dl._i)||(il._i=dl._i),W(dl._f)||(il._f=dl._f),W(dl._l)||(il._l=dl._l),W(dl._strict)||(il._strict=dl._strict),W(dl._tzm)||(il._tzm=dl._tzm),W(dl._isUTC)||(il._isUTC=dl._isUTC),W(dl._offset)||(il._offset=dl._offset),W(dl._pf)||(il._pf=ee(dl)),W(dl._locale)||(il._locale=dl._locale),0<Cr.length)for(ll=0;ll<Cr.length;ll++)_l=Cr[ll],ul=dl[_l],W(ul)||(il[_l]=ul);return il}function oe(il){ae(this,il),this._d=new Date(null==il._d?NaN:il._d.getTime()),this.isValid()||(this._d=new Date(NaN)),!1==Mr&&(Mr=!0,R.updateOffset(this),Mr=!1)}function se(il){return il instanceof oe||null!=il&&null!=il._isAMomentObject}function ie(il){return 0>il?Math.ceil(il)||0:Math.floor(il)}function de(il){var dl=+il,ll=0;return 0!=dl&&isFinite(dl)&&(ll=ie(dl)),ll}function le(il,dl,ll){var _l=Math.min(il.length,dl.length),ul=Math.abs(il.length-dl.length),cl=0,ml;for(ml=0;ml<_l;ml++)(ll&&il[ml]!==dl[ml]||!ll&&de(il[ml])!==de(dl[ml]))&&cl++;return cl+ul}function _e(il){!1===R.suppressDeprecationWarnings&&'undefined'!=typeof console&&console.warn&&console.warn('Deprecation warning: '+il)}function ue(il,dl){var ll=!0;return X(function(){if(null!=R.deprecationHandler&&R.deprecationHandler(null,il),ll){for(var _l=[],cl=0,ul;cl<arguments.length;cl++){if(ul='','object'==typeof arguments[cl]){for(var ml in ul+='\n['+cl+'] ',arguments[0])ul+=ml+': '+arguments[0][ml]+', ';ul=ul.slice(0,-2)}else ul=arguments[cl];_l.push(ul)}_e(il+'\nArguments: '+Array.prototype.slice.call(_l).join('')+'\n'+new Error().stack),ll=!1}return dl.apply(this,arguments)},dl)}function ce(il,dl){null!=R.deprecationHandler&&R.deprecationHandler(il,dl),vr[il]||(_e(dl),vr[il]=!0)}function pe(il){return il instanceof Function||'[object Function]'===Object.prototype.toString.call(il)}function ge(il,dl){var ll=X({},il),_l;for(_l in dl)$(dl,_l)&&(B(il[_l])&&B(dl[_l])?(ll[_l]={},X(ll[_l],il[_l]),X(ll[_l],dl[_l])):null==dl[_l]?delete ll[_l]:ll[_l]=dl[_l]);for(_l in il)$(il,_l)&&!$(dl,_l)&&B(il[_l])&&(ll[_l]=X({},ll[_l]));return ll}function fe(il){null!=il&&this.set(il)}function Ee(il,dl){var ll=il.toLowerCase();wr[ll]=wr[ll+'s']=wr[dl]=il}function Se(il){return'string'==typeof il?wr[il]||wr[il.toLowerCase()]:void 0}function be(il){var dl={},ll,_l;for(_l in il)$(il,_l)&&(ll=Se(_l),ll&&(dl[ll]=il[_l]));return dl}function De(il,dl){kr[il]=dl}function Ae(il){var dl=[];for(var ll in il)dl.push({unit:ll,priority:kr[ll]});return dl.sort(function(_l,ul){return _l.priority-ul.priority}),dl}function Ie(il,dl){return function(ll){return null==ll?Re(this,il):(we(this,il,ll),R.updateOffset(this,dl),this)}}function Re(il,dl){return il.isValid()?il._d['get'+(il._isUTC?'UTC':'')+dl]():NaN}function we(il,dl,ll){il.isValid()&&il._d['set'+(il._isUTC?'UTC':'')+dl](ll)}function Oe(il,dl,ll){var _l=''+Math.abs(il),ul=dl-_l.length;return(0<=il?ll?'+':'':'-')+Math.pow(10,Math.max(0,ul)).toString().substr(1)+_l}function Ne(il,dl,ll,_l){var ul=_l;'string'==typeof _l&&(ul=function(){return this[_l]()}),il&&(Pr[il]=ul),dl&&(Pr[dl[0]]=function(){return Oe(ul.apply(this,arguments),dl[1],dl[2])}),ll&&(Pr[ll]=function(){return this.localeData().ordinal(ul.apply(this,arguments),il)})}function Pe(il){return il.match(/\[[\s\S]/)?il.replace(/^\[|\]$/g,''):il.replace(/\\/g,'')}function xe(il){var dl=il.match(Yr),ll,_l;for(ll=0,_l=dl.length;ll<_l;ll++)dl[ll]=Pr[dl[ll]]?Pr[dl[ll]]:Pe(dl[ll]);return function(ul){var cl='',ml;for(ml=0;ml<_l;ml++)cl+=pe(dl[ml])?dl[ml].call(ul,il):dl[ml];return cl}}function He(il,dl){return il.isValid()?(dl=je(dl,il.localeData()),Nr[dl]=Nr[dl]||xe(dl),Nr[dl](il)):il.localeData().invalidDate()}function je(il,dl){function ll(ul){return dl.longDateFormat(ul)||ul}var _l=5;for(Or.lastIndex=0;0<=_l&&Or.test(il);)il=il.replace(Or,ll),Or.lastIndex=0,_l-=1;return il}function Fe(il,dl,ll){es[il]=pe(dl)?dl:function(_l){return _l&&ll?ll:dl}}function Ue(il,dl){return $(es,il)?es[il](dl._strict,dl._locale):new RegExp(Be(il))}function Be(il){return qe(il.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(dl,ll,_l,ul,cl){return ll||_l||ul||cl}))}function qe(il){return il.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')}function ze(il,dl){var _l=dl,ll;for('string'==typeof il&&(il=[il]),G(dl)&&(_l=function(ul,cl){cl[dl]=de(ul)}),ll=0;ll<il.length;ll++)os[il[ll]]=_l}function We(il,dl){ze(il,function(ll,_l,ul,cl){ul._w=ul._w||{},dl(ll,ul._w,ul,cl)})}function Ve(il,dl,ll){null!=dl&&$(os,il)&&os[il](dl,ll._a,ll,il)}function Ge(il,dl){return new Date(Date.UTC(il,dl+1,0)).getUTCDate()}function $e(il,dl,ll){var ml=il.toLocaleLowerCase(),_l,ul,cl;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],_l=0;12>_l;++_l)cl=Q([2e3,_l]),this._shortMonthsParse[_l]=this.monthsShort(cl,'').toLocaleLowerCase(),this._longMonthsParse[_l]=this.months(cl,'').toLocaleLowerCase();return ll?'MMM'===dl?(ul=Ts.call(this._shortMonthsParse,ml),-1===ul?null:ul):(ul=Ts.call(this._longMonthsParse,ml),-1===ul?null:ul):'MMM'===dl?(ul=Ts.call(this._shortMonthsParse,ml),-1!==ul)?ul:(ul=Ts.call(this._longMonthsParse,ml),-1===ul?null:ul):(ul=Ts.call(this._longMonthsParse,ml),-1!==ul)?ul:(ul=Ts.call(this._shortMonthsParse,ml),-1===ul?null:ul)}function Qe(il,dl){var ll;if(!il.isValid())return il;if('string'==typeof dl)if(/^\d+$/.test(dl))dl=de(dl);else if(dl=il.localeData().monthsParse(dl),!G(dl))return il;return ll=Math.min(il.date(),Ge(il.year(),dl)),il._d['set'+(il._isUTC?'UTC':'')+'Month'](dl,ll),il}function Ze(il){return null==il?Re(this,'Month'):(Qe(this,il),R.updateOffset(this,!0),this)}function ot(){function il(ml,pl){return pl.length-ml.length}var dl=[],ll=[],_l=[],ul,cl;for(ul=0;12>ul;ul++)cl=Q([2e3,ul]),dl.push(this.monthsShort(cl,'')),ll.push(this.months(cl,'')),_l.push(this.months(cl,'')),_l.push(this.monthsShort(cl,''));for(dl.sort(il),ll.sort(il),_l.sort(il),ul=0;12>ul;ul++)dl[ul]=qe(dl[ul]),ll[ul]=qe(ll[ul]);for(ul=0;24>ul;ul++)_l[ul]=qe(_l[ul]);this._monthsRegex=new RegExp('^('+_l.join('|')+')','i'),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp('^('+ll.join('|')+')','i'),this._monthsShortStrictRegex=new RegExp('^('+dl.join('|')+')','i')}function st(il){return dt(il)?366:365}function dt(il){return 0==il%4&&0!=il%100||0==il%400}function _t(il,dl,ll,_l,ul,cl,ml){var pl=new Date(il,dl,ll,_l,ul,cl,ml);return 100>il&&0<=il&&isFinite(pl.getFullYear())&&pl.setFullYear(il),pl}function ut(il){var dl=new Date(Date.UTC.apply(null,arguments));return 100>il&&0<=il&&isFinite(dl.getUTCFullYear())&&dl.setUTCFullYear(il),dl}function ct(il,dl,ll){var _l=7+dl-ll,ul=(7+ut(il,0,_l).getUTCDay()-dl)%7;return-ul+_l-1}function mt(il,dl,ll,_l,ul){var ml=ct(il,_l,ul),pl=1+7*(dl-1)+(7+ll-_l)%7+ml,hl,gl;return 0>=pl?(hl=il-1,gl=st(hl)+pl):pl>st(il)?(hl=il+1,gl=pl-st(il)):(hl=il,gl=pl),{year:hl,dayOfYear:gl}}function pt(il,dl,ll){var _l=ct(il.year(),dl,ll),ul=Math.floor((il.dayOfYear()-_l-1)/7)+1,cl,ml;return 1>ul?(ml=il.year()-1,cl=ul+ht(ml,dl,ll)):ul>ht(il.year(),dl,ll)?(cl=ul-ht(il.year(),dl,ll),ml=il.year()+1):(ml=il.year(),cl=ul),{week:cl,year:ml}}function ht(il,dl,ll){var _l=ct(il,dl,ll),ul=ct(il+1,dl,ll);return(st(il)-_l+ul)/7}function vt(il,dl){return'string'==typeof il?isNaN(il)?(il=dl.weekdaysParse(il),'number'==typeof il?il:null):parseInt(il,10):il}function Lt(il,dl){return'string'==typeof il?dl.weekdaysParse(il)%7||7:isNaN(il)?null:il}function Dt(il,dl,ll){var ml=il.toLocaleLowerCase(),_l,ul,cl;if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],_l=0;7>_l;++_l)cl=Q([2000,1]).day(_l),this._minWeekdaysParse[_l]=this.weekdaysMin(cl,'').toLocaleLowerCase(),this._shortWeekdaysParse[_l]=this.weekdaysShort(cl,'').toLocaleLowerCase(),this._weekdaysParse[_l]=this.weekdays(cl,'').toLocaleLowerCase();return ll?'dddd'===dl?(ul=Ts.call(this._weekdaysParse,ml),-1===ul?null:ul):'ddd'===dl?(ul=Ts.call(this._shortWeekdaysParse,ml),-1===ul?null:ul):(ul=Ts.call(this._minWeekdaysParse,ml),-1===ul?null:ul):'dddd'===dl?(ul=Ts.call(this._weekdaysParse,ml),-1!==ul)?ul:(ul=Ts.call(this._shortWeekdaysParse,ml),-1!==ul)?ul:(ul=Ts.call(this._minWeekdaysParse,ml),-1===ul?null:ul):'ddd'===dl?(ul=Ts.call(this._shortWeekdaysParse,ml),-1!==ul)?ul:(ul=Ts.call(this._weekdaysParse,ml),-1!==ul)?ul:(ul=Ts.call(this._minWeekdaysParse,ml),-1===ul?null:ul):(ul=Ts.call(this._minWeekdaysParse,ml),-1!==ul)?ul:(ul=Ts.call(this._weekdaysParse,ml),-1!==ul)?ul:(ul=Ts.call(this._shortWeekdaysParse,ml),-1===ul?null:ul)}function Nt(){function il(fl,yl){return yl.length-fl.length}var dl=[],ll=[],_l=[],ul=[],cl,ml,pl,hl,gl;for(cl=0;7>cl;cl++)ml=Q([2000,1]).day(cl),pl=this.weekdaysMin(ml,''),hl=this.weekdaysShort(ml,''),gl=this.weekdays(ml,''),dl.push(pl),ll.push(hl),_l.push(gl),ul.push(pl),ul.push(hl),ul.push(gl);for(dl.sort(il),ll.sort(il),_l.sort(il),ul.sort(il),cl=0;7>cl;cl++)ll[cl]=qe(ll[cl]),_l[cl]=qe(_l[cl]),ul[cl]=qe(ul[cl]);this._weekdaysRegex=new RegExp('^('+ul.join('|')+')','i'),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp('^('+_l.join('|')+')','i'),this._weekdaysShortStrictRegex=new RegExp('^('+ll.join('|')+')','i'),this._weekdaysMinStrictRegex=new RegExp('^('+dl.join('|')+')','i')}function Pt(){return this.hours()%12||12}function Ht(il,dl){Ne(il,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),dl)})}function jt(il,dl){return dl._meridiemParse}function Bt(il){return il?il.toLowerCase().replace('_','-'):il}function qt(il){for(var dl=0,ll,_l,ul,cl;dl<il.length;){for(cl=Bt(il[dl]).split('-'),ll=cl.length,_l=Bt(il[dl+1]),_l=_l?_l.split('-'):null;0<ll;){if(ul=zt(cl.slice(0,ll).join('-')),ul)return ul;if(_l&&_l.length>=ll&&le(cl,_l,!0)>=ll-1)break;ll--}dl++}return null}function zt(il){var dl=null;if(!xs[il]&&'undefined'!=typeof I&&I&&I.exports)try{dl=js._abbr,!function(){var _l=new Error('Cannot find module "./locale"');throw _l.code='MODULE_NOT_FOUND',_l}(),Wt(dl)}catch(ll){}return xs[il]}function Wt(il,dl){var ll;return il&&(ll=W(dl)?Jt(il):Vt(il,dl),ll&&(js=ll)),js._abbr}function Vt(il,dl){if(null!==dl){var ll=Ps;if(dl.abbr=il,null!=xs[il])ce('defineLocaleOverride','use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'),ll=xs[il]._config;else if(null!=dl.parentLocale)if(null!=xs[dl.parentLocale])ll=xs[dl.parentLocale]._config;else return Hs[dl.parentLocale]||(Hs[dl.parentLocale]=[]),Hs[dl.parentLocale].push({name:il,config:dl}),null;return xs[il]=new fe(ge(ll,dl)),Hs[il]&&Hs[il].forEach(function(_l){Vt(_l.name,_l.config)}),Wt(il),xs[il]}return delete xs[il],null}function Jt(il){var dl;if(il&&il._locale&&il._locale._abbr&&(il=il._locale._abbr),!il)return js;if(!H(il)){if(dl=zt(il),dl)return dl;il=[il]}return qt(il)}function $t(il){var ll=il._a,dl;return ll&&-2===ee(il).overflow&&(dl=0>ll[is]||11<ll[is]?is:1>ll[ds]||ll[ds]>Ge(ll[ss],ll[is])?ds:0>ll[ls]||24<ll[ls]||24===ll[ls]&&(0!==ll[_s]||0!==ll[us]||0!==ll[ps])?ls:0>ll[_s]||59<ll[_s]?_s:0>ll[us]||59<ll[us]?us:0>ll[ps]||999<ll[ps]?ps:-1,ee(il)._overflowDayOfYear&&(dl<ss||dl>ds)&&(dl=ds),ee(il)._overflowWeeks&&-1===dl&&(dl=hs),ee(il)._overflowWeekday&&-1===dl&&(dl=gs),ee(il).overflow=dl),il}function Xt(il){var _l=il._i,ul=Fs.exec(_l)||Us.exec(_l),dl,ll,cl,ml,pl,hl;if(ul){for(ee(il).iso=!0,dl=0,ll=qs.length;dl<ll;dl++)if(qs[dl][1].exec(ul[1])){ml=qs[dl][0],cl=!1!==qs[dl][2];break}if(null==ml)return void(il._isValid=!1);if(ul[3]){for(dl=0,ll=zs.length;dl<ll;dl++)if(zs[dl][1].exec(ul[3])){pl=(ul[2]||' ')+zs[dl][0];break}if(null==pl)return void(il._isValid=!1)}if(!cl&&null!=pl)return void(il._isValid=!1);if(ul[4])if(Bs.exec(ul[4]))hl='Z';else return void(il._isValid=!1);il._f=ml+(pl||'')+(hl||''),rn(il)}else il._isValid=!1}function Qt(il){var pl={" GMT":' +0000'," EDT":' -0400'," EST":' -0500'," CDT":' -0500'," CST":' -0600'," MDT":' -0600'," MST":' -0700'," PDT":' -0700'," PST":' -0800'},dl,ll,_l,ul,cl,ml,gl,fl;if(dl=il._i.replace(/\([^\)]*\)|[\n\t]/g,' ').replace(/(\s\s+)/g,' ').replace(/^\s|\s$/g,''),ll=Vs.exec(dl),ll){if(_l=ll[1]?'ddd'+(5===ll[1].length?', ':' '):'',ul='D MMM '+(10<ll[2].length?'YYYY ':'YY '),cl='HH:mm'+(ll[4]?':ss':''),ll[1]){var yl=new Date(ll[2]),Tl=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][yl.getDay()];if(ll[1].substr(0,3)!==Tl)return ee(il).weekdayMismatch=!0,void(il._isValid=!1)}switch(ll[5].length){case 2:0===fl?gl=' +0000':(fl='YXWVUTSRQPONZABCDEFGHIKLM'.indexOf(ll[5][1].toUpperCase())-12,gl=(0>fl?' -':' +')+(''+fl).replace(/^-?/,'0').match(/..$/)[0]+'00');break;case 4:gl=pl[ll[5]];break;default:gl=pl[' GMT'];}ll[5]=gl,il._i=ll.splice(1).join(''),ml=' ZZ',il._f=_l+ul+cl+ml,rn(il),ee(il).rfc2822=!0}else il._isValid=!1}function Zt(il){var dl=Ws.exec(il._i);if(null!==dl)return void(il._d=new Date(+dl[1]));if(Xt(il),!1===il._isValid)delete il._isValid;else return;if(Qt(il),!1===il._isValid)delete il._isValid;else return;R.createFromInputFallback(il)}function en(il,dl,ll){return null==il?null==dl?ll:dl:il}function tn(il){var dl=new Date(R.now());return il._useUTC?[dl.getUTCFullYear(),dl.getUTCMonth(),dl.getUTCDate()]:[dl.getFullYear(),dl.getMonth(),dl.getDate()]}function nn(il){var _l=[],dl,ll,ul,cl;if(!il._d){for(ul=tn(il),il._w&&null==il._a[ds]&&null==il._a[is]&&an(il),null!=il._dayOfYear&&(cl=en(il._a[ss],ul[ss]),(il._dayOfYear>st(cl)||0===il._dayOfYear)&&(ee(il)._overflowDayOfYear=!0),ll=ut(cl,0,il._dayOfYear),il._a[is]=ll.getUTCMonth(),il._a[ds]=ll.getUTCDate()),dl=0;3>dl&&null==il._a[dl];++dl)il._a[dl]=_l[dl]=ul[dl];for(;7>dl;dl++)il._a[dl]=_l[dl]=null==il._a[dl]?2===dl?1:0:il._a[dl];24===il._a[ls]&&0===il._a[_s]&&0===il._a[us]&&0===il._a[ps]&&(il._nextDay=!0,il._a[ls]=0),il._d=(il._useUTC?ut:_t).apply(null,_l),null!=il._tzm&&il._d.setUTCMinutes(il._d.getUTCMinutes()-il._tzm),il._nextDay&&(il._a[ls]=24)}}function an(il){var dl,ll,_l,ul,cl,ml,pl,hl;if(dl=il._w,null!=dl.GG||null!=dl.W||null!=dl.E)cl=1,ml=4,ll=en(dl.GG,il._a[ss],pt(pn(),1,4).year),_l=en(dl.W,1),ul=en(dl.E,1),(1>ul||7<ul)&&(hl=!0);else{cl=il._locale._week.dow,ml=il._locale._week.doy;var gl=pt(pn(),cl,ml);ll=en(dl.gg,il._a[ss],gl.year),_l=en(dl.w,gl.week),null==dl.d?null==dl.e?ul=cl:(ul=dl.e+cl,(0>dl.e||6<dl.e)&&(hl=!0)):(ul=dl.d,(0>ul||6<ul)&&(hl=!0))}1>_l||_l>ht(ll,cl,ml)?ee(il)._overflowWeeks=!0:null==hl?(pl=mt(ll,_l,ul,cl,ml),il._a[ss]=pl.year,il._dayOfYear=pl.dayOfYear):ee(il)._overflowWeekday=!0}function rn(il){if(il._f===R.ISO_8601)return void Xt(il);if(il._f===R.RFC_2822)return void Qt(il);il._a=[],ee(il).empty=!0;var dl=''+il._i,pl=dl.length,hl=0,ll,_l,ul,cl,ml;for(ul=je(il._f,il._locale).match(Yr)||[],ll=0;ll<ul.length;ll++)cl=ul[ll],_l=(dl.match(Ue(cl,il))||[])[0],_l&&(ml=dl.substr(0,dl.indexOf(_l)),0<ml.length&&ee(il).unusedInput.push(ml),dl=dl.slice(dl.indexOf(_l)+_l.length),hl+=_l.length),Pr[cl]?(_l?ee(il).empty=!1:ee(il).unusedTokens.push(cl),Ve(cl,_l,il)):il._strict&&!_l&&ee(il).unusedTokens.push(cl);ee(il).charsLeftOver=pl-hl,0<dl.length&&ee(il).unusedInput.push(dl),12>=il._a[ls]&&!0===ee(il).bigHour&&0<il._a[ls]&&(ee(il).bigHour=void 0),ee(il).parsedDateParts=il._a.slice(0),ee(il).meridiem=il._meridiem,il._a[ls]=sn(il._locale,il._a[ls],il._meridiem),nn(il),$t(il)}function sn(il,dl,ll){var _l;return null==ll?dl:null==il.meridiemHour?null==il.isPM?dl:(_l=il.isPM(ll),_l&&12>dl&&(dl+=12),_l||12!==dl||(dl=0),dl):il.meridiemHour(dl,ll)}function dn(il){var dl,ll,_l,ul,cl;if(0===il._f.length)return ee(il).invalidFormat=!0,void(il._d=new Date(NaN));for(ul=0;ul<il._f.length;ul++)(cl=0,dl=ae({},il),null!=il._useUTC&&(dl._useUTC=il._useUTC),dl._f=il._f[ul],rn(dl),!!te(dl))&&(cl+=ee(dl).charsLeftOver,cl+=10*ee(dl).unusedTokens.length,ee(dl).score=cl,(null==_l||cl<_l)&&(_l=cl,ll=dl));X(il,ll||dl)}function ln(il){if(!il._d){var dl=be(il._i);il._a=K([dl.year,dl.month,dl.day||dl.date,dl.hour,dl.minute,dl.second,dl.millisecond],function(ll){return ll&&parseInt(ll,10)}),nn(il)}}function _n(il){var dl=new oe($t(un(il)));return dl._nextDay&&(dl.add(1,'d'),dl._nextDay=void 0),dl}function un(il){var dl=il._i,ll=il._f;return(il._locale=il._locale||Jt(il._l),null===dl||void 0===ll&&''===dl)?ne({nullInput:!0}):('string'==typeof dl&&(il._i=dl=il._locale.preparse(dl)),se(dl))?new oe($t(dl)):(J(dl)?il._d=dl:H(ll)?dn(il):ll?rn(il):cn(il),te(il)||(il._d=null),il)}function cn(il){var dl=il._i;W(dl)?il._d=new Date(R.now()):J(dl)?il._d=new Date(dl.valueOf()):'string'==typeof dl?Zt(il):H(dl)?(il._a=K(dl.slice(0),function(ll){return parseInt(ll,10)}),nn(il)):B(dl)?ln(il):G(dl)?il._d=new Date(dl):R.createFromInputFallback(il)}function mn(il,dl,ll,_l,ul){var cl={};return(!0===ll||!1===ll)&&(_l=ll,ll=void 0),(B(il)&&z(il)||H(il)&&0===il.length)&&(il=void 0),cl._isAMomentObject=!0,cl._useUTC=cl._isUTC=ul,cl._l=ll,cl._i=il,cl._f=dl,cl._strict=_l,_n(cl)}function pn(il,dl,ll,_l){return mn(il,dl,ll,_l,!1)}function hn(il,dl){var ll,_l;if(1===dl.length&&H(dl[0])&&(dl=dl[0]),!dl.length)return pn();for(ll=dl[0],_l=1;_l<dl.length;++_l)(!dl[_l].isValid()||dl[_l][il](ll))&&(ll=dl[_l]);return ll}function Tn(il){for(var dl in il)if(-1===$s.indexOf(dl)||null!=il[dl]&&isNaN(il[dl]))return!1;for(var ll=!1,_l=0;_l<$s.length;++_l)if(il[$s[_l]]){if(ll)return!1;parseFloat(il[$s[_l]])!==de(il[$s[_l]])&&(ll=!0)}return!0}function vn(il){var dl=be(il),ll=dl.year||0,_l=dl.quarter||0,ul=dl.month||0,cl=dl.week||0,ml=dl.day||0,pl=dl.hour||0,hl=dl.minute||0,gl=dl.second||0,fl=dl.millisecond||0;this._isValid=Tn(dl),this._milliseconds=+fl+1e3*gl+6e4*hl+60*(60*(1e3*pl)),this._days=+ml+7*cl,this._months=+ul+3*_l+12*ll,this._data={},this._locale=Jt(),this._bubble()}function Ln(il){return il instanceof vn}function En(il){return 0>il?-1*Math.round(-1*il):Math.round(il)}function Sn(il,dl){Ne(il,0,0,function(){var ll=this.utcOffset(),_l='+';return 0>ll&&(ll=-ll,_l='-'),_l+Oe(~~(ll/60),2)+dl+Oe(~~ll%60,2)})}function bn(il,dl){var ll=(dl||'').match(il);if(null===ll)return null;var _l=ll[ll.length-1]||[],ul=(_l+'').match(Xs)||['-',0,0],cl=+(60*ul[1])+de(ul[2]);return 0===cl?0:'+'===ul[0]?cl:-cl}function Dn(il,dl){var ll,_l;return dl._isUTC?(ll=dl.clone(),_l=(se(il)||J(il)?il.valueOf():pn(il).valueOf())-ll.valueOf(),ll._d.setTime(ll._d.valueOf()+_l),R.updateOffset(ll,!1),ll):pn(il).local()}function An(il){return 15*-Math.round(il._d.getTimezoneOffset()/15)}function jn(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Fn(il,dl){var ll=il,_l=null,ul,cl,ml;return Ln(il)?ll={ms:il._milliseconds,d:il._days,M:il._months}:G(il)?(ll={},dl?ll[dl]=il:ll.milliseconds=il):(_l=Qs.exec(il))?(ul='-'===_l[1]?-1:1,ll={y:0,d:de(_l[ds])*ul,h:de(_l[ls])*ul,m:de(_l[_s])*ul,s:de(_l[us])*ul,ms:de(En(1e3*_l[ps]))*ul}):(_l=Zs.exec(il))?(ul='-'===_l[1]?-1:1,ll={y:Un(_l[2],ul),M:Un(_l[3],ul),w:Un(_l[4],ul),d:Un(_l[5],ul),h:Un(_l[6],ul),m:Un(_l[7],ul),s:Un(_l[8],ul)}):null==ll?ll={}:'object'==typeof ll&&('from'in ll||'to'in ll)&&(ml=qn(pn(ll.from),pn(ll.to)),ll={},ll.ms=ml.milliseconds,ll.M=ml.months),cl=new vn(ll),Ln(il)&&$(il,'_locale')&&(cl._locale=il._locale),cl}function Un(il,dl){var ll=il&&parseFloat(il.replace(',','.'));return(isNaN(ll)?0:ll)*dl}function Bn(il,dl){var ll={milliseconds:0,months:0};return ll.months=dl.month()-il.month()+12*(dl.year()-il.year()),il.clone().add(ll.months,'M').isAfter(dl)&&--ll.months,ll.milliseconds=+dl-+il.clone().add(ll.months,'M'),ll}function qn(il,dl){var ll;return il.isValid()&&dl.isValid()?(dl=Dn(dl,il),il.isBefore(dl)?ll=Bn(il,dl):(ll=Bn(dl,il),ll.milliseconds=-ll.milliseconds,ll.months=-ll.months),ll):{milliseconds:0,months:0}}function zn(il,dl){return function(ll,_l){var ul,cl;return null===_l||isNaN(+_l)||(ce(dl,'moment().'+dl+'(period, number) is deprecated. Please use moment().'+dl+'(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'),cl=ll,ll=_l,_l=cl),ll='string'==typeof ll?+ll:ll,ul=Fn(ll,_l),Wn(this,ul,il),this}}function Wn(il,dl,ll,_l){var ul=dl._milliseconds,cl=En(dl._days),ml=En(dl._months);il.isValid()&&(_l=null==_l||_l,ul&&il._d.setTime(il._d.valueOf()+ul*ll),cl&&we(il,'Date',Re(il,'Date')+cl*ll),ml&&Qe(il,Re(il,'Month')+ml*ll),_l&&R.updateOffset(il,cl||ml))}function na(il,dl){var ll=12*(dl.year()-il.year())+(dl.month()-il.month()),_l=il.clone().add(ll,'months'),ul,cl;return 0>dl-_l?(ul=il.clone().add(ll-1,'months'),cl=(dl-_l)/(_l-ul)):(ul=il.clone().add(ll+1,'months'),cl=(dl-_l)/(ul-_l)),-(ll+cl)||0}function ua(il){var dl;return void 0===il?this._locale._abbr:(dl=Jt(il),null!=dl&&(this._locale=dl),this)}function ca(){return this._locale}function Sa(il,dl){Ne(0,[il,il.length],0,dl)}function Ra(il,dl,ll,_l,ul){var cl;return null==il?pt(this,_l,ul).year:(cl=ht(il,_l,ul),dl>cl&&(dl=cl),wa.call(this,il,dl,ll,_l,ul))}function wa(il,dl,ll,_l,ul){var cl=mt(il,dl,ll,_l,ul),ml=ut(cl.year,0,cl.dayOfYear);return this.year(ml.getUTCFullYear()),this.month(ml.getUTCMonth()),this.date(ml.getUTCDate()),this}function Oa(il,dl){dl[ps]=de(1e3*('0.'+il))}function ja(il){return il}function Fa(il,dl,ll,_l){var ul=Jt(),cl=Q().set(_l,dl);return ul[ll](cl,il)}function Ua(il,dl,ll){if(G(il)&&(dl=il,il=void 0),il=il||'',null!=dl)return Fa(il,dl,ll,'month');var ul=[],_l;for(_l=0;12>_l;_l++)ul[_l]=Fa(il,_l,ll,'month');return ul}function Ba(il,dl,ll,_l){'boolean'==typeof il?(G(dl)&&(ll=dl,dl=void 0),dl=dl||''):(dl=il,ll=dl,il=!1,G(dl)&&(ll=dl,dl=void 0),dl=dl||'');var ul=Jt(),cl=il?ul._week.dow:0;if(null!=ll)return Fa(dl,(ll+cl)%7,_l,'day');var pl=[],ml;for(ml=0;7>ml;ml++)pl[ml]=Fa(dl,(ml+cl)%7,_l,'day');return pl}function Ka(il,dl,ll,_l){var ul=Fn(dl,ll);return il._milliseconds+=_l*ul._milliseconds,il._days+=_l*ul._days,il._months+=_l*ul._months,il._bubble()}function Qa(il){return 0>il?Math.floor(il):Math.ceil(il)}function eo(il){return 4800*il/146097}function no(il){return 146097*il/4800}function ro(il){return function(){return this.as(il)}}function io(il){return function(){return this.isValid()?this._data[il]:NaN}}function uo(il,dl,ll,_l,ul){return ul.relativeTime(dl||1,!!ll,il,_l)}function co(il,dl,ll){var _l=Fn(il).abs(),ul=Ri(_l.as('s')),cl=Ri(_l.as('m')),ml=Ri(_l.as('h')),pl=Ri(_l.as('d')),hl=Ri(_l.as('M')),gl=Ri(_l.as('y')),fl=ul<=wi.ss&&['s',ul]||ul<wi.s&&['ss',ul]||1>=cl&&['m']||cl<wi.m&&['mm',cl]||1>=ml&&['h']||ml<wi.h&&['hh',ml]||1>=pl&&['d']||pl<wi.d&&['dd',pl]||1>=hl&&['M']||hl<wi.M&&['MM',hl]||1>=gl&&['y']||['yy',gl];return fl[2]=dl,fl[3]=0<+il,fl[4]=ll,uo.apply(null,fl)}function go(){if(!this.isValid())return this.localeData().invalidDate();var il=ki(this._milliseconds)/1e3,dl=ki(this._days),ll=ki(this._months),_l,ul,cl;_l=ie(il/60),ul=ie(_l/60),il%=60,_l%=60,cl=ie(ll/12),ll%=12;var ml=cl,pl=ll,hl=dl,gl=ul,fl=_l,yl=il,Tl=this.asSeconds();return Tl?(0>Tl?'-':'')+'P'+(ml?ml+'Y':'')+(pl?pl+'M':'')+(hl?hl+'D':'')+(gl||fl||yl?'T':'')+(gl?gl+'H':'')+(fl?fl+'M':'')+(yl?yl+'S':''):'P0D'}function fo(il,dl){var ll=il.split('_');return 1==dl%10&&11!=dl%100?ll[0]:2<=dl%10&&4>=dl%10&&(10>dl%100||20<=dl%100)?ll[1]:ll[2]}function yo(il,dl,ll){var _l={mm:dl?'\u0445\u0432\u0456\u043B\u0456\u043D\u0430_\u0445\u0432\u0456\u043B\u0456\u043D\u044B_\u0445\u0432\u0456\u043B\u0456\u043D':'\u0445\u0432\u0456\u043B\u0456\u043D\u0443_\u0445\u0432\u0456\u043B\u0456\u043D\u044B_\u0445\u0432\u0456\u043B\u0456\u043D',hh:dl?'\u0433\u0430\u0434\u0437\u0456\u043D\u0430_\u0433\u0430\u0434\u0437\u0456\u043D\u044B_\u0433\u0430\u0434\u0437\u0456\u043D':'\u0433\u0430\u0434\u0437\u0456\u043D\u0443_\u0433\u0430\u0434\u0437\u0456\u043D\u044B_\u0433\u0430\u0434\u0437\u0456\u043D',dd:'\u0434\u0437\u0435\u043D\u044C_\u0434\u043D\u0456_\u0434\u0437\u0451\u043D',MM:'\u043C\u0435\u0441\u044F\u0446_\u043C\u0435\u0441\u044F\u0446\u044B_\u043C\u0435\u0441\u044F\u0446\u0430\u045E',yy:'\u0433\u043E\u0434_\u0433\u0430\u0434\u044B_\u0433\u0430\u0434\u043E\u045E'};return'm'===ll?dl?'\u0445\u0432\u0456\u043B\u0456\u043D\u0430':'\u0445\u0432\u0456\u043B\u0456\u043D\u0443':'h'===ll?dl?'\u0433\u0430\u0434\u0437\u0456\u043D\u0430':'\u0433\u0430\u0434\u0437\u0456\u043D\u0443':il+' '+fo(_l[ll],+il)}function To(il,dl,ll){return il+' '+vo({mm:'munutenn',MM:'miz',dd:'devezh'}[ll],il)}function Mo(il){return 9<il?Mo(il%10):il}function vo(il,dl){return 2===dl?Lo(il):il}function Lo(il){var dl={m:'v',b:'v',d:'z'};return void 0===dl[il.charAt(0)]?il:dl[il.charAt(0)]+il.substring(1)}function Eo(il,dl,ll){var _l=il+' ';return'm'===ll?dl?'jedna minuta':'jedne minute':'mm'===ll?(_l+=1===il?'minuta':2===il||3===il||4===il?'minute':'minuta',_l):'h'===ll?dl?'jedan sat':'jednog sata':'hh'===ll?(_l+=1===il?'sat':2===il||3===il||4===il?'sata':'sati',_l):'dd'===ll?(_l+=1===il?'dan':'dana',_l):'MM'===ll?(_l+=1===il?'mjesec':2===il||3===il||4===il?'mjeseca':'mjeseci',_l):'yy'===ll?(_l+=1===il?'godina':2===il||3===il||4===il?'godine':'godina',_l):void 0}function So(il){return 1<il&&5>il&&1!=~~(il/10)}function bo(il,dl,ll,_l){var ul=il+' ';switch(ll){case's':return dl||_l?'p\xE1r sekund':'p\xE1r sekundami';case'm':return dl?'minuta':_l?'minutu':'minutou';case'mm':return dl||_l?ul+(So(il)?'minuty':'minut'):ul+'minutami';break;case'h':return dl?'hodina':_l?'hodinu':'hodinou';case'hh':return dl||_l?ul+(So(il)?'hodiny':'hodin'):ul+'hodinami';break;case'd':return dl||_l?'den':'dnem';case'dd':return dl||_l?ul+(So(il)?'dny':'dn\xED'):ul+'dny';break;case'M':return dl||_l?'m\u011Bs\xEDc':'m\u011Bs\xEDcem';case'MM':return dl||_l?ul+(So(il)?'m\u011Bs\xEDce':'m\u011Bs\xEDc\u016F'):ul+'m\u011Bs\xEDci';break;case'y':return dl||_l?'rok':'rokem';case'yy':return dl||_l?ul+(So(il)?'roky':'let'):ul+'lety';}}function Do(il,dl,ll){var ul={m:['eine Minute','einer Minute'],h:['eine Stunde','einer Stunde'],d:['ein Tag','einem Tag'],dd:[il+' Tage',il+' Tagen'],M:['ein Monat','einem Monat'],MM:[il+' Monate',il+' Monaten'],y:['ein Jahr','einem Jahr'],yy:[il+' Jahre',il+' Jahren']};return dl?ul[ll][0]:ul[ll][1]}function Ao(il,dl,ll){var ul={m:['eine Minute','einer Minute'],h:['eine Stunde','einer Stunde'],d:['ein Tag','einem Tag'],dd:[il+' Tage',il+' Tagen'],M:['ein Monat','einem Monat'],MM:[il+' Monate',il+' Monaten'],y:['ein Jahr','einem Jahr'],yy:[il+' Jahre',il+' Jahren']};return dl?ul[ll][0]:ul[ll][1]}function Io(il,dl,ll){var ul={m:['eine Minute','einer Minute'],h:['eine Stunde','einer Stunde'],d:['ein Tag','einem Tag'],dd:[il+' Tage',il+' Tagen'],M:['ein Monat','einem Monat'],MM:[il+' Monate',il+' Monaten'],y:['ein Jahr','einem Jahr'],yy:[il+' Jahre',il+' Jahren']};return dl?ul[ll][0]:ul[ll][1]}function Ro(il,dl,ll,_l){var ul={s:['m\xF5ne sekundi','m\xF5ni sekund','paar sekundit'],m:['\xFChe minuti','\xFCks minut'],mm:[il+' minuti',il+' minutit'],h:['\xFChe tunni','tund aega','\xFCks tund'],hh:[il+' tunni',il+' tundi'],d:['\xFChe p\xE4eva','\xFCks p\xE4ev'],M:['kuu aja','kuu aega','\xFCks kuu'],MM:[il+' kuu',il+' kuud'],y:['\xFChe aasta','aasta','\xFCks aasta'],yy:[il+' aasta',il+' aastat']};return dl?ul[ll][2]?ul[ll][2]:ul[ll][1]:_l?ul[ll][0]:ul[ll][1]}function wo(il,dl,ll,_l){var ul='';switch(ll){case's':return _l?'muutaman sekunnin':'muutama sekunti';case'm':return _l?'minuutin':'minuutti';case'mm':ul=_l?'minuutin':'minuuttia';break;case'h':return _l?'tunnin':'tunti';case'hh':ul=_l?'tunnin':'tuntia';break;case'd':return _l?'p\xE4iv\xE4n':'p\xE4iv\xE4';case'dd':ul=_l?'p\xE4iv\xE4n':'p\xE4iv\xE4\xE4';break;case'M':return _l?'kuukauden':'kuukausi';case'MM':ul=_l?'kuukauden':'kuukautta';break;case'y':return _l?'vuoden':'vuosi';case'yy':ul=_l?'vuoden':'vuotta';}return ul=ko(il,_l)+' '+ul,ul}function ko(il,dl){return 10>il?dl?ud[il]:_d[il]:il}function Yo(il,dl,ll){var ul={s:['thodde secondanim','thodde second'],m:['eka mintan','ek minute'],mm:[il+' mintanim',il+' mintam'],h:['eka horan','ek hor'],hh:[il+' horanim',il+' hor'],d:['eka disan','ek dis'],dd:[il+' disanim',il+' dis'],M:['eka mhoinean','ek mhoino'],MM:[il+' mhoineanim',il+' mhoine'],y:['eka vorsan','ek voros'],yy:[il+' vorsanim',il+' vorsam']};return dl?ul[ll][0]:ul[ll][1]}function Oo(il,dl,ll){var _l=il+' ';return'm'===ll?dl?'jedna minuta':'jedne minute':'mm'===ll?(_l+=1===il?'minuta':2===il||3===il||4===il?'minute':'minuta',_l):'h'===ll?dl?'jedan sat':'jednog sata':'hh'===ll?(_l+=1===il?'sat':2===il||3===il||4===il?'sata':'sati',_l):'dd'===ll?(_l+=1===il?'dan':'dana',_l):'MM'===ll?(_l+=1===il?'mjesec':2===il||3===il||4===il?'mjeseca':'mjeseci',_l):'yy'===ll?(_l+=1===il?'godina':2===il||3===il||4===il?'godine':'godina',_l):void 0}function No(il,dl,ll,_l){var ul=il;return's'===ll?_l||dl?'n\xE9h\xE1ny m\xE1sodperc':'n\xE9h\xE1ny m\xE1sodperce':'m'===ll?'egy'+(_l||dl?' perc':' perce'):'mm'===ll?ul+(_l||dl?' perc':' perce'):'h'===ll?'egy'+(_l||dl?' \xF3ra':' \xF3r\xE1ja'):'hh'===ll?ul+(_l||dl?' \xF3ra':' \xF3r\xE1ja'):'d'===ll?'egy'+(_l||dl?' nap':' napja'):'dd'===ll?ul+(_l||dl?' nap':' napja'):'M'===ll?'egy'+(_l||dl?' h\xF3nap':' h\xF3napja'):'MM'===ll?ul+(_l||dl?' h\xF3nap':' h\xF3napja'):'y'===ll?'egy'+(_l||dl?' \xE9v':' \xE9ve'):'yy'===ll?ul+(_l||dl?' \xE9v':' \xE9ve'):''}function Po(il){return(il?'':'[m\xFAlt] ')+'['+Md[this.day()]+'] LT[-kor]'}function xo(il){return!(11!=il%100)||1!=il%10}function Ho(il,dl,ll,_l){var ul=il+' ';return's'===ll?dl||_l?'nokkrar sek\xFAndur':'nokkrum sek\xFAndum':'m'===ll?dl?'m\xEDn\xFAta':'m\xEDn\xFAtu':'mm'===ll?xo(il)?ul+(dl||_l?'m\xEDn\xFAtur':'m\xEDn\xFAtum'):dl?ul+'m\xEDn\xFAta':ul+'m\xEDn\xFAtu':'hh'===ll?xo(il)?ul+(dl||_l?'klukkustundir':'klukkustundum'):ul+'klukkustund':'d'===ll?dl?'dagur':_l?'dag':'degi':'dd'===ll?xo(il)?dl?ul+'dagar':ul+(_l?'daga':'d\xF6gum'):dl?ul+'dagur':ul+(_l?'dag':'degi'):'M'===ll?dl?'m\xE1nu\xF0ur':_l?'m\xE1nu\xF0':'m\xE1nu\xF0i':'MM'===ll?xo(il)?dl?ul+'m\xE1nu\xF0ir':ul+(_l?'m\xE1nu\xF0i':'m\xE1nu\xF0um'):dl?ul+'m\xE1nu\xF0ur':ul+(_l?'m\xE1nu\xF0':'m\xE1nu\xF0i'):'y'===ll?dl||_l?'\xE1r':'\xE1ri':'yy'===ll?xo(il)?ul+(dl||_l?'\xE1r':'\xE1rum'):ul+(dl||_l?'\xE1r':'\xE1ri'):void 0}function jo(il,dl,ll){var ul={m:['eng Minutt','enger Minutt'],h:['eng Stonn','enger Stonn'],d:['een Dag','engem Dag'],M:['ee Mount','engem Mount'],y:['ee Joer','engem Joer']};return dl?ul[ll][0]:ul[ll][1]}function Bo(il){if(il=parseInt(il,10),isNaN(il))return!1;if(0>il)return!0;if(10>il)return 4<=il&&7>=il;if(100>il){var dl=il%10,ll=il/10;return 0==dl?Bo(ll):Bo(dl)}if(1e4>il){for(;10<=il;)il/=10;return Bo(il)}return il/=1e3,Bo(il)}function zo(il,dl,ll,_l){return dl?Vo(ll)[0]:_l?Vo(ll)[1]:Vo(ll)[2]}function Wo(il){return 0==il%10||10<il&&20>il}function Vo(il){return bd[il].split('_')}function Go(il,dl,ll,_l){var ul=il+' ';return 1===il?ul+zo(il,dl,ll[0],_l):dl?ul+(Wo(il)?Vo(ll)[1]:Vo(ll)[0]):_l?ul+Vo(ll)[1]:ul+(Wo(il)?Vo(ll)[1]:Vo(ll)[2])}function Jo(il,dl,ll){return ll?1==dl%10&&11!=dl%100?il[2]:il[3]:1==dl%10&&11!=dl%100?il[0]:il[1]}function Ko(il,dl,ll){return il+' '+Jo(Dd[ll],il,dl)}function $o(il,dl,ll){return Jo(Dd[ll],il,dl)}function Qo(il,dl,ll){var ul='';return dl?'s'===ll?ul='\u0915\u093E\u0939\u0940 \u0938\u0947\u0915\u0902\u0926':'m'===ll?ul='\u090F\u0915 \u092E\u093F\u0928\u093F\u091F':'mm'===ll?ul='%d \u092E\u093F\u0928\u093F\u091F\u0947':'h'===ll?ul='\u090F\u0915 \u0924\u093E\u0938':'hh'===ll?ul='%d \u0924\u093E\u0938':'d'===ll?ul='\u090F\u0915 \u0926\u093F\u0935\u0938':'dd'===ll?ul='%d \u0926\u093F\u0935\u0938':'M'===ll?ul='\u090F\u0915 \u092E\u0939\u093F\u0928\u093E':'MM'===ll?ul='%d \u092E\u0939\u093F\u0928\u0947':'y'===ll?ul='\u090F\u0915 \u0935\u0930\u094D\u0937':'yy'===ll?ul='%d \u0935\u0930\u094D\u0937\u0947':void 0:'s'===ll?ul='\u0915\u093E\u0939\u0940 \u0938\u0947\u0915\u0902\u0926\u093E\u0902':'m'===ll?ul='\u090F\u0915\u093E \u092E\u093F\u0928\u093F\u091F\u093E':'mm'===ll?ul='%d \u092E\u093F\u0928\u093F\u091F\u093E\u0902':'h'===ll?ul='\u090F\u0915\u093E \u0924\u093E\u0938\u093E':'hh'===ll?ul='%d \u0924\u093E\u0938\u093E\u0902':'d'===ll?ul='\u090F\u0915\u093E \u0926\u093F\u0935\u0938\u093E':'dd'===ll?ul='%d \u0926\u093F\u0935\u0938\u093E\u0902':'M'===ll?ul='\u090F\u0915\u093E \u092E\u0939\u093F\u0928\u094D\u092F\u093E':'MM'===ll?ul='%d \u092E\u0939\u093F\u0928\u094D\u092F\u093E\u0902':'y'===ll?ul='\u090F\u0915\u093E \u0935\u0930\u094D\u0937\u093E':'yy'===ll?ul='%d \u0935\u0930\u094D\u0937\u093E\u0902':void 0,ul.replace(/%d/i,il)}function Zo(il){return 5>il%10&&1<il%10&&1!=~~(il/10)%10}function er(il,dl,ll){var _l=il+' ';return'm'===ll?dl?'minuta':'minut\u0119':'mm'===ll?_l+(Zo(il)?'minuty':'minut'):'h'===ll?dl?'godzina':'godzin\u0119':'hh'===ll?_l+(Zo(il)?'godziny':'godzin'):'MM'===ll?_l+(Zo(il)?'miesi\u0105ce':'miesi\u0119cy'):'yy'===ll?_l+(Zo(il)?'lata':'lat'):void 0}function tr(il,dl,ll){var ul=' ';return(20<=il%100||100<=il&&0==il%100)&&(ul=' de '),il+ul+{mm:'minute',hh:'ore',dd:'zile',MM:'luni',yy:'ani'}[ll]}function nr(il,dl){var ll=il.split('_');return 1==dl%10&&11!=dl%100?ll[0]:2<=dl%10&&4>=dl%10&&(10>dl%100||20<=dl%100)?ll[1]:ll[2]}function ar(il,dl,ll){var _l={mm:dl?'\u043C\u0438\u043D\u0443\u0442\u0430_\u043C\u0438\u043D\u0443\u0442\u044B_\u043C\u0438\u043D\u0443\u0442':'\u043C\u0438\u043D\u0443\u0442\u0443_\u043C\u0438\u043D\u0443\u0442\u044B_\u043C\u0438\u043D\u0443\u0442',hh:'\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043E\u0432',dd:'\u0434\u0435\u043D\u044C_\u0434\u043D\u044F_\u0434\u043D\u0435\u0439',MM:'\u043C\u0435\u0441\u044F\u0446_\u043C\u0435\u0441\u044F\u0446\u0430_\u043C\u0435\u0441\u044F\u0446\u0435\u0432',yy:'\u0433\u043E\u0434_\u0433\u043E\u0434\u0430_\u043B\u0435\u0442'};return'm'===ll?dl?'\u043C\u0438\u043D\u0443\u0442\u0430':'\u043C\u0438\u043D\u0443\u0442\u0443':il+' '+nr(_l[ll],+il)}function or(il){return 1<il&&5>il}function rr(il,dl,ll,_l){var ul=il+' ';switch(ll){case's':return dl||_l?'p\xE1r sek\xFAnd':'p\xE1r sekundami';case'm':return dl?'min\xFAta':_l?'min\xFAtu':'min\xFAtou';case'mm':return dl||_l?ul+(or(il)?'min\xFAty':'min\xFAt'):ul+'min\xFAtami';break;case'h':return dl?'hodina':_l?'hodinu':'hodinou';case'hh':return dl||_l?ul+(or(il)?'hodiny':'hod\xEDn'):ul+'hodinami';break;case'd':return dl||_l?'de\u0148':'d\u0148om';case'dd':return dl||_l?ul+(or(il)?'dni':'dn\xED'):ul+'d\u0148ami';break;case'M':return dl||_l?'mesiac':'mesiacom';case'MM':return dl||_l?ul+(or(il)?'mesiace':'mesiacov'):ul+'mesiacmi';break;case'y':return dl||_l?'rok':'rokom';case'yy':return dl||_l?ul+(or(il)?'roky':'rokov'):ul+'rokmi';}}function sr(il,dl,ll,_l){var ul=il+' ';return's'===ll?dl||_l?'nekaj sekund':'nekaj sekundami':'m'===ll?dl?'ena minuta':'eno minuto':'mm'===ll?(ul+=1===il?dl?'minuta':'minuto':2===il?dl||_l?'minuti':'minutama':5>il?dl||_l?'minute':'minutami':dl||_l?'minut':'minutami',ul):'h'===ll?dl?'ena ura':'eno uro':'hh'===ll?(ul+=1===il?dl?'ura':'uro':2===il?dl||_l?'uri':'urama':5>il?dl||_l?'ure':'urami':dl||_l?'ur':'urami',ul):'d'===ll?dl||_l?'en dan':'enim dnem':'dd'===ll?(ul+=1===il?dl||_l?'dan':'dnem':2===il?dl||_l?'dni':'dnevoma':dl||_l?'dni':'dnevi',ul):'M'===ll?dl||_l?'en mesec':'enim mesecem':'MM'===ll?(ul+=1===il?dl||_l?'mesec':'mesecem':2===il?dl||_l?'meseca':'mesecema':5>il?dl||_l?'mesece':'meseci':dl||_l?'mesecev':'meseci',ul):'y'===ll?dl||_l?'eno leto':'enim letom':'yy'===ll?(ul+=1===il?dl||_l?'leto':'letom':2===il?dl||_l?'leti':'letoma':5>il?dl||_l?'leta':'leti':dl||_l?'let':'leti',ul):void 0}function lr(il,dl,ll){var ul=_r(il);return'mm'===ll?ul+' tup':'hh'===ll?ul+' rep':'dd'===ll?ul+' jaj':'MM'===ll?ul+' jar':'yy'===ll?ul+' DIS':void 0}function _r(il){var dl=Math.floor(il%1e3/100),ll=Math.floor(il%100/10),_l=il%10,ul='';return 0<dl&&(ul+=al[dl]+'vatlh'),0<ll&&(ul+=(''==ul?'':' ')+al[ll]+'maH'),0<_l&&(ul+=(''==ul?'':' ')+al[_l]),''==ul?'pagh':ul}function ur(il,dl,ll,_l){var ul={s:['viensas secunds','\'iensas secunds'],m:['\'n m\xEDut','\'iens m\xEDut'],mm:[il+' m\xEDuts',''+il+' m\xEDuts'],h:['\'n \xFEora','\'iensa \xFEora'],hh:[il+' \xFEoras',''+il+' \xFEoras'],d:['\'n ziua','\'iensa ziua'],dd:[il+' ziuas',''+il+' ziuas'],M:['\'n mes','\'iens mes'],MM:[il+' mesen',''+il+' mesen'],y:['\'n ar','\'iens ar'],yy:[il+' ars',''+il+' ars']};return _l?ul[ll][0]:dl?ul[ll][0]:ul[ll][1]}function cr(il,dl){var ll=il.split('_');return 1==dl%10&&11!=dl%100?ll[0]:2<=dl%10&&4>=dl%10&&(10>dl%100||20<=dl%100)?ll[1]:ll[2]}function mr(il,dl,ll){var _l={mm:dl?'\u0445\u0432\u0438\u043B\u0438\u043D\u0430_\u0445\u0432\u0438\u043B\u0438\u043D\u0438_\u0445\u0432\u0438\u043B\u0438\u043D':'\u0445\u0432\u0438\u043B\u0438\u043D\u0443_\u0445\u0432\u0438\u043B\u0438\u043D\u0438_\u0445\u0432\u0438\u043B\u0438\u043D',hh:dl?'\u0433\u043E\u0434\u0438\u043D\u0430_\u0433\u043E\u0434\u0438\u043D\u0438_\u0433\u043E\u0434\u0438\u043D':'\u0433\u043E\u0434\u0438\u043D\u0443_\u0433\u043E\u0434\u0438\u043D\u0438_\u0433\u043E\u0434\u0438\u043D',dd:'\u0434\u0435\u043D\u044C_\u0434\u043D\u0456_\u0434\u043D\u0456\u0432',MM:'\u043C\u0456\u0441\u044F\u0446\u044C_\u043C\u0456\u0441\u044F\u0446\u0456_\u043C\u0456\u0441\u044F\u0446\u0456\u0432',yy:'\u0440\u0456\u043A_\u0440\u043E\u043A\u0438_\u0440\u043E\u043A\u0456\u0432'};return'm'===ll?dl?'\u0445\u0432\u0438\u043B\u0438\u043D\u0430':'\u0445\u0432\u0438\u043B\u0438\u043D\u0443':'h'===ll?dl?'\u0433\u043E\u0434\u0438\u043D\u0430':'\u0433\u043E\u0434\u0438\u043D\u0443':il+' '+cr(_l[ll],+il)}function hr(il){return function(){return il+'\u043E'+(11===this.hours()?'\u0431':'')+'] LT'}}var gr,yr;yr=Array.prototype.some?Array.prototype.some:function(il){for(var dl=Object(this),ll=dl.length>>>0,_l=0;_l<ll;_l++)if(_l in dl&&il.call(this,dl[_l],_l,dl))return!0;return!1};var Tr=yr,Cr=R.momentProperties=[],Mr=!1,vr={};R.suppressDeprecationWarnings=!1,R.deprecationHandler=null;var Lr=Object.keys?Object.keys:function(il){var ll=[],dl;for(dl in il)$(il,dl)&&ll.push(dl);return ll};var Er=Lr,Ir=/\d{1,2}/,wr={},kr={},Yr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Or=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nr={},Pr={},xr=/\d/,Hr=/\d\d/,jr=/\d{3}/,Fr=/\d{4}/,Ur=/[+-]?\d{6}/,Br=/\d\d?/,qr=/\d\d\d\d?/,zr=/\d\d\d\d\d\d?/,Wr=/\d{1,3}/,Vr=/\d{1,4}/,Gr=/[+-]?\d{1,6}/,Jr=/\d+/,Kr=/[+-]?\d+/,$r=/Z|[+-]\d\d:?\d\d/gi,Xr=/Z|[+-]\d\d(?::?\d\d)?/gi,Qr=/[+-]?\d+(\.\d{1,3})?/,Zr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,es={},os={},ss=0,is=1,ds=2,ls=3,_s=4,us=5,ps=6,hs=7,gs=8,ys;ys=Array.prototype.indexOf?Array.prototype.indexOf:function(il){var dl;for(dl=0;dl<this.length;++dl)if(this[dl]===il)return dl;return-1};var Ts=ys;Ne('M',['MM',2],'Mo',function(){return this.month()+1}),Ne('MMM',0,0,function(il){return this.localeData().monthsShort(this,il)}),Ne('MMMM',0,0,function(il){return this.localeData().months(this,il)}),Ee('month','M'),De('month',8),Fe('M',Br),Fe('MM',Br,Hr),Fe('MMM',function(il,dl){return dl.monthsShortRegex(il)}),Fe('MMMM',function(il,dl){return dl.monthsRegex(il)}),ze(['M','MM'],function(il,dl){dl[is]=de(il)-1}),ze(['MMM','MMMM'],function(il,dl,ll,_l){var ul=ll._locale.monthsParse(il,_l,ll._strict);null==ul?ee(ll).invalidMonth=il:dl[is]=ul});var Cs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ms='January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),vs='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');Ne('Y',0,0,function(){var il=this.year();return 9999>=il?''+il:'+'+il}),Ne(0,['YY',2],0,function(){return this.year()%100}),Ne(0,['YYYY',4],0,'year'),Ne(0,['YYYYY',5],0,'year'),Ne(0,['YYYYYY',6,!0],0,'year'),Ee('year','y'),De('year',1),Fe('Y',Kr),Fe('YY',Br,Hr),Fe('YYYY',Vr,Fr),Fe('YYYYY',Gr,Ur),Fe('YYYYYY',Gr,Ur),ze(['YYYYY','YYYYYY'],ss),ze('YYYY',function(il,dl){dl[ss]=2===il.length?R.parseTwoDigitYear(il):de(il)}),ze('YY',function(il,dl){dl[ss]=R.parseTwoDigitYear(il)}),ze('Y',function(il,dl){dl[ss]=parseInt(il,10)}),R.parseTwoDigitYear=function(il){return de(il)+(68<de(il)?1900:2e3)};var Ss=Ie('FullYear',!0);Ne('w',['ww',2],'wo','week'),Ne('W',['WW',2],'Wo','isoWeek'),Ee('week','w'),Ee('isoWeek','W'),De('week',5),De('isoWeek',5),Fe('w',Br),Fe('ww',Br,Hr),Fe('W',Br),Fe('WW',Br,Hr),We(['w','ww','W','WW'],function(il,dl,ll,_l){dl[_l.substr(0,1)]=de(il)});Ne('d',0,'do','day'),Ne('dd',0,0,function(il){return this.localeData().weekdaysMin(this,il)}),Ne('ddd',0,0,function(il){return this.localeData().weekdaysShort(this,il)}),Ne('dddd',0,0,function(il){return this.localeData().weekdays(this,il)}),Ne('e',0,0,'weekday'),Ne('E',0,0,'isoWeekday'),Ee('day','d'),Ee('weekday','e'),Ee('isoWeekday','E'),De('day',11),De('weekday',11),De('isoWeekday',11),Fe('d',Br),Fe('e',Br),Fe('E',Br),Fe('dd',function(il,dl){return dl.weekdaysMinRegex(il)}),Fe('ddd',function(il,dl){return dl.weekdaysShortRegex(il)}),Fe('dddd',function(il,dl){return dl.weekdaysRegex(il)}),We(['dd','ddd','dddd'],function(il,dl,ll,_l){var ul=ll._locale.weekdaysParse(il,_l,ll._strict);null==ul?ee(ll).invalidWeekday=il:dl.d=ul}),We(['d','e','E'],function(il,dl,ll,_l){dl[_l]=de(il)});var Ds='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),As='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),Is='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');Ne('H',['HH',2],0,'hour'),Ne('h',['hh',2],0,Pt),Ne('k',['kk',2],0,function(){return this.hours()||24}),Ne('hmm',0,0,function(){return''+Pt.apply(this)+Oe(this.minutes(),2)}),Ne('hmmss',0,0,function(){return''+Pt.apply(this)+Oe(this.minutes(),2)+Oe(this.seconds(),2)}),Ne('Hmm',0,0,function(){return''+this.hours()+Oe(this.minutes(),2)}),Ne('Hmmss',0,0,function(){return''+this.hours()+Oe(this.minutes(),2)+Oe(this.seconds(),2)}),Ht('a',!0),Ht('A',!1),Ee('hour','h'),De('hour',13),Fe('a',jt),Fe('A',jt),Fe('H',Br),Fe('h',Br),Fe('k',Br),Fe('HH',Br,Hr),Fe('hh',Br,Hr),Fe('kk',Br,Hr),Fe('hmm',qr),Fe('hmmss',zr),Fe('Hmm',qr),Fe('Hmmss',zr),ze(['H','HH'],ls),ze(['k','kk'],function(il,dl){var _l=de(il);dl[ls]=24===_l?0:_l}),ze(['a','A'],function(il,dl,ll){ll._isPm=ll._locale.isPM(il),ll._meridiem=il}),ze(['h','hh'],function(il,dl,ll){dl[ls]=de(il),ee(ll).bigHour=!0}),ze('hmm',function(il,dl,ll){var _l=il.length-2;dl[ls]=de(il.substr(0,_l)),dl[_s]=de(il.substr(_l)),ee(ll).bigHour=!0}),ze('hmmss',function(il,dl,ll){var _l=il.length-4,ul=il.length-2;dl[ls]=de(il.substr(0,_l)),dl[_s]=de(il.substr(_l,2)),dl[us]=de(il.substr(ul)),ee(ll).bigHour=!0}),ze('Hmm',function(il,dl){var _l=il.length-2;dl[ls]=de(il.substr(0,_l)),dl[_s]=de(il.substr(_l))}),ze('Hmmss',function(il,dl){var _l=il.length-4,ul=il.length-2;dl[ls]=de(il.substr(0,_l)),dl[_s]=de(il.substr(_l,2)),dl[us]=de(il.substr(ul))});var Os=/[ap]\.?m?\.?/i,Ns=Ie('Hours',!0),Ps={calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},longDateFormat:{LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'},invalidDate:'Invalid date',ordinal:'%d',dayOfMonthOrdinalParse:Ir,relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},months:Ms,monthsShort:vs,week:{dow:0,doy:6},weekdays:Ds,weekdaysMin:Is,weekdaysShort:As,meridiemParse:Os},xs={},Hs={},Fs=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Us=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bs=/Z|[+-]\d\d(?::?\d\d)?/,qs=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,!1],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,!1],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,!1],['YYYYDDD',/\d{7}/]],zs=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]],Ws=/^\/?Date\((\-?\d+)/i,Vs=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/,js;R.createFromInputFallback=ue('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',function(il){il._d=new Date(il._i+(il._useUTC?' UTC':''))}),R.ISO_8601=function(){},R.RFC_2822=function(){};var Gs=ue('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var il=pn.apply(null,arguments);return this.isValid()&&il.isValid()?il<this?this:il:ne()}),Js=ue('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var il=pn.apply(null,arguments);return this.isValid()&&il.isValid()?il>this?this:il:ne()}),$s=['year','quarter','month','week','day','hour','minute','second','millisecond'];Sn('Z',':'),Sn('ZZ',''),Fe('Z',Xr),Fe('ZZ',Xr),ze(['Z','ZZ'],function(il,dl,ll){ll._useUTC=!0,ll._tzm=bn(Xr,il)});var Xs=/([\+\-]|\d\d)/gi;R.updateOffset=function(){};var Qs=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Zs=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Fn.fn=vn.prototype,Fn.invalid=function(){return Fn(NaN)};var ei=zn(1,'add'),ti=zn(-1,'subtract');R.defaultFormat='YYYY-MM-DDTHH:mm:ssZ',R.defaultFormatUtc='YYYY-MM-DDTHH:mm:ss[Z]';var ni=ue('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(il){return void 0===il?this.localeData():this.locale(il)});Ne(0,['gg',2],0,function(){return this.weekYear()%100}),Ne(0,['GG',2],0,function(){return this.isoWeekYear()%100}),Sa('gggg','weekYear'),Sa('ggggg','weekYear'),Sa('GGGG','isoWeekYear'),Sa('GGGGG','isoWeekYear'),Ee('weekYear','gg'),Ee('isoWeekYear','GG'),De('weekYear',1),De('isoWeekYear',1),Fe('G',Kr),Fe('g',Kr),Fe('GG',Br,Hr),Fe('gg',Br,Hr),Fe('GGGG',Vr,Fr),Fe('gggg',Vr,Fr),Fe('GGGGG',Gr,Ur),Fe('ggggg',Gr,Ur),We(['gggg','ggggg','GGGG','GGGGG'],function(il,dl,ll,_l){dl[_l.substr(0,2)]=de(il)}),We(['gg','GG'],function(il,dl,ll,_l){dl[_l]=R.parseTwoDigitYear(il)}),Ne('Q',0,'Qo','quarter'),Ee('quarter','Q'),De('quarter',7),Fe('Q',xr),ze('Q',function(il,dl){dl[is]=3*(de(il)-1)}),Ne('D',['DD',2],'Do','date'),Ee('date','D'),De('date',9),Fe('D',Br),Fe('DD',Br,Hr),Fe('Do',function(il,dl){return il?dl._dayOfMonthOrdinalParse||dl._ordinalParse:dl._dayOfMonthOrdinalParseLenient}),ze(['D','DD'],ds),ze('Do',function(il,dl){dl[ds]=de(il.match(Br)[0],10)});var ai=Ie('Date',!0);Ne('DDD',['DDDD',3],'DDDo','dayOfYear'),Ee('dayOfYear','DDD'),De('dayOfYear',4),Fe('DDD',Wr),Fe('DDDD',jr),ze(['DDD','DDDD'],function(il,dl,ll){ll._dayOfYear=de(il)}),Ne('m',['mm',2],0,'minute'),Ee('minute','m'),De('minute',14),Fe('m',Br),Fe('mm',Br,Hr),ze(['m','mm'],_s);var oi=Ie('Minutes',!1);Ne('s',['ss',2],0,'second'),Ee('second','s'),De('second',15),Fe('s',Br),Fe('ss',Br,Hr),ze(['s','ss'],us);var ri=Ie('Seconds',!1);Ne('S',0,0,function(){return~~(this.millisecond()/100)}),Ne(0,['SS',2],0,function(){return~~(this.millisecond()/10)}),Ne(0,['SSS',3],0,'millisecond'),Ne(0,['SSSS',4],0,function(){return 10*this.millisecond()}),Ne(0,['SSSSS',5],0,function(){return 100*this.millisecond()}),Ne(0,['SSSSSS',6],0,function(){return 1e3*this.millisecond()}),Ne(0,['SSSSSSS',7],0,function(){return 1e4*this.millisecond()}),Ne(0,['SSSSSSSS',8],0,function(){return 1e5*this.millisecond()}),Ne(0,['SSSSSSSSS',9],0,function(){return 1e6*this.millisecond()}),Ee('millisecond','ms'),De('millisecond',16),Fe('S',Wr,xr),Fe('SS',Wr,Hr),Fe('SSS',Wr,jr);var si;for(si='SSSS';9>=si.length;si+='S')Fe(si,Jr);for(si='S';9>=si.length;si+='S')ze(si,Oa);var di=Ie('Milliseconds',!1);Ne('z',0,0,'zoneAbbr'),Ne('zz',0,0,'zoneName');var li=oe.prototype;li.add=ei,li.calendar=function(il,dl){var ll=il||pn(),_l=Dn(ll,this).startOf('day'),ul=R.calendarFormat(this,_l)||'sameElse',cl=dl&&(pe(dl[ul])?dl[ul].call(this,ll):dl[ul]);return this.format(cl||this.localeData().calendar(ul,this,pn(ll)))},li.clone=function(){return new oe(this)},li.diff=function(il,dl,ll){var _l,ul,cl,ml;return this.isValid()?(_l=Dn(il,this),!_l.isValid())?NaN:(ul=6e4*(_l.utcOffset()-this.utcOffset()),dl=Se(dl),'year'===dl||'month'===dl||'quarter'===dl?(ml=na(this,_l),'quarter'===dl?ml/=3:'year'===dl&&(ml/=12)):(cl=this-_l,ml='second'===dl?cl/1e3:'minute'===dl?cl/6e4:'hour'===dl?cl/36e5:'day'===dl?(cl-ul)/864e5:'week'===dl?(cl-ul)/6048e5:cl),ll?ml:ie(ml)):NaN},li.endOf=function(il){return(il=Se(il),void 0===il||'millisecond'===il)?this:('date'===il&&(il='day'),this.startOf(il).add(1,'isoWeek'===il?'week':il).subtract(1,'ms'))},li.format=function(il){il||(il=this.isUtc()?R.defaultFormatUtc:R.defaultFormat);var dl=He(this,il);return this.localeData().postformat(dl)},li.from=function(il,dl){return this.isValid()&&(se(il)&&il.isValid()||pn(il).isValid())?Fn({to:this,from:il}).locale(this.locale()).humanize(!dl):this.localeData().invalidDate()},li.fromNow=function(il){return this.from(pn(),il)},li.to=function(il,dl){return this.isValid()&&(se(il)&&il.isValid()||pn(il).isValid())?Fn({from:this,to:il}).locale(this.locale()).humanize(!dl):this.localeData().invalidDate()},li.toNow=function(il){return this.to(pn(),il)},li.get=function(il){return il=Se(il),pe(this[il])?this[il]():this},li.invalidAt=function(){return ee(this).overflow},li.isAfter=function(il,dl){var ll=se(il)?il:pn(il);return this.isValid()&&ll.isValid()&&(dl=Se(W(dl)?'millisecond':dl),'millisecond'===dl?this.valueOf()>ll.valueOf():ll.valueOf()<this.clone().startOf(dl).valueOf())},li.isBefore=function(il,dl){var ll=se(il)?il:pn(il);return this.isValid()&&ll.isValid()&&(dl=Se(W(dl)?'millisecond':dl),'millisecond'===dl?this.valueOf()<ll.valueOf():this.clone().endOf(dl).valueOf()<ll.valueOf())},li.isBetween=function(il,dl,ll,_l){return _l=_l||'()',('('===_l[0]?this.isAfter(il,ll):!this.isBefore(il,ll))&&(')'===_l[1]?this.isBefore(dl,ll):!this.isAfter(dl,ll))},li.isSame=function(il,dl){var ll=se(il)?il:pn(il),_l;return this.isValid()&&ll.isValid()&&(dl=Se(dl||'millisecond'),'millisecond'===dl?this.valueOf()===ll.valueOf():(_l=ll.valueOf(),this.clone().startOf(dl).valueOf()<=_l&&_l<=this.clone().endOf(dl).valueOf()))},li.isSameOrAfter=function(il,dl){return this.isSame(il,dl)||this.isAfter(il,dl)},li.isSameOrBefore=function(il,dl){return this.isSame(il,dl)||this.isBefore(il,dl)},li.isValid=function(){return te(this)},li.lang=ni,li.locale=ua,li.localeData=ca,li.max=Js,li.min=Gs,li.parsingFlags=function(){return X({},ee(this))},li.set=function(il,dl){if('object'==typeof il){il=be(il);for(var ll=Ae(il),_l=0;_l<ll.length;_l++)this[ll[_l].unit](il[ll[_l].unit])}else if(il=Se(il),pe(this[il]))return this[il](dl);return this},li.startOf=function(il){switch(il=Se(il),il){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':case'date':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}return'week'===il&&this.weekday(0),'isoWeek'===il&&this.isoWeekday(1),'quarter'===il&&this.month(3*Math.floor(this.month()/3)),this},li.subtract=ti,li.toArray=function(){var il=this;return[il.year(),il.month(),il.date(),il.hour(),il.minute(),il.second(),il.millisecond()]},li.toObject=function(){var il=this;return{years:il.year(),months:il.month(),date:il.date(),hours:il.hours(),minutes:il.minutes(),seconds:il.seconds(),milliseconds:il.milliseconds()}},li.toDate=function(){return new Date(this.valueOf())},li.toISOString=function(){if(!this.isValid())return null;var il=this.clone().utc();return 0>il.year()||9999<il.year()?He(il,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'):pe(Date.prototype.toISOString)?this.toDate().toISOString():He(il,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]')},li.inspect=function(){if(!this.isValid())return'moment.invalid(/* '+this._i+' */)';var il='moment',dl='';this.isLocal()||(il=0===this.utcOffset()?'moment.utc':'moment.parseZone',dl='Z');var ll='['+il+'("]',_l=0<=this.year()&&9999>=this.year()?'YYYY':'YYYYYY',cl=dl+'[")]';return this.format(ll+_l+'-MM-DD[T]HH:mm:ss.SSS'+cl)},li.toJSON=function(){return this.isValid()?this.toISOString():null},li.toString=function(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ')},li.unix=function(){return Math.floor(this.valueOf()/1e3)},li.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},li.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},li.year=Ss,li.isLeapYear=function(){return dt(this.year())},li.weekYear=function(il){return Ra.call(this,il,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},li.isoWeekYear=function(il){return Ra.call(this,il,this.isoWeek(),this.isoWeekday(),1,4)},li.quarter=li.quarters=function(il){return null==il?Math.ceil((this.month()+1)/3):this.month(3*(il-1)+this.month()%3)},li.month=Ze,li.daysInMonth=function(){return Ge(this.year(),this.month())},li.week=li.weeks=function(il){var dl=this.localeData().week(this);return null==il?dl:this.add(7*(il-dl),'d')},li.isoWeek=li.isoWeeks=function(il){var dl=pt(this,1,4).week;return null==il?dl:this.add(7*(il-dl),'d')},li.weeksInYear=function(){var il=this.localeData()._week;return ht(this.year(),il.dow,il.doy)},li.isoWeeksInYear=function(){return ht(this.year(),1,4)},li.date=ai,li.day=li.days=function(il){if(!this.isValid())return null==il?NaN:this;var dl=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==il?dl:(il=vt(il,this.localeData()),this.add(il-dl,'d'))},li.weekday=function(il){if(!this.isValid())return null==il?NaN:this;var dl=(this.day()+7-this.localeData()._week.dow)%7;return null==il?dl:this.add(il-dl,'d')},li.isoWeekday=function(il){if(!this.isValid())return null==il?NaN:this;if(null!=il){var dl=Lt(il,this.localeData());return this.day(this.day()%7?dl:dl-7)}return this.day()||7},li.dayOfYear=function(il){var dl=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return null==il?dl:this.add(il-dl,'d')},li.hour=li.hours=Ns,li.minute=li.minutes=oi,li.second=li.seconds=ri,li.millisecond=li.milliseconds=di,li.utcOffset=function(il,dl,ll){var _l=this._offset||0,ul;if(!this.isValid())return null==il?NaN:this;if(null!=il){if('string'!=typeof il)16>Math.abs(il)&&!ll&&(il*=60);else if(il=bn(Xr,il),null===il)return this;return!this._isUTC&&dl&&(ul=An(this)),this._offset=il,this._isUTC=!0,null!=ul&&this.add(ul,'m'),_l!==il&&(!dl||this._changeInProgress?Wn(this,Fn(il-_l,'m'),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,R.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?_l:An(this)},li.utc=function(il){return this.utcOffset(0,il)},li.local=function(il){return this._isUTC&&(this.utcOffset(0,il),this._isUTC=!1,il&&this.subtract(An(this),'m')),this},li.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if('string'==typeof this._i){var il=bn($r,this._i);null==il?this.utcOffset(0,!0):this.utcOffset(il)}return this},li.hasAlignedHourOffset=function(il){return!!this.isValid()&&(il=il?pn(il).utcOffset():0,0==(this.utcOffset()-il)%60)},li.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},li.isLocal=function(){return!!this.isValid()&&!this._isUTC},li.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},li.isUtc=jn,li.isUTC=jn,li.zoneAbbr=function(){return this._isUTC?'UTC':''},li.zoneName=function(){return this._isUTC?'Coordinated Universal Time':''},li.dates=ue('dates accessor is deprecated. Use date instead.',ai),li.months=ue('months accessor is deprecated. Use month instead',Ze),li.years=ue('years accessor is deprecated. Use year instead',Ss),li.zone=ue('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',function(il,dl){return null==il?-this.utcOffset():('string'!=typeof il&&(il=-il),this.utcOffset(il,dl),this)}),li.isDSTShifted=ue('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',function(){if(!W(this._isDSTShifted))return this._isDSTShifted;var il={};if(ae(il,this),il=un(il),il._a){var dl=il._isUTC?Q(il._a):pn(il._a);this._isDSTShifted=this.isValid()&&0<le(il._a,dl.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ui=fe.prototype;ui.calendar=function(il,dl,ll){var _l=this._calendar[il]||this._calendar.sameElse;return pe(_l)?_l.call(dl,ll):_l},ui.longDateFormat=function(il){var dl=this._longDateFormat[il],ll=this._longDateFormat[il.toUpperCase()];return dl||!ll?dl:(this._longDateFormat[il]=ll.replace(/MMMM|MM|DD|dddd/g,function(_l){return _l.slice(1)}),this._longDateFormat[il])},ui.invalidDate=function(){return this._invalidDate},ui.ordinal=function(il){return this._ordinal.replace('%d',il)},ui.preparse=ja,ui.postformat=ja,ui.relativeTime=function(il,dl,ll,_l){var ul=this._relativeTime[ll];return pe(ul)?ul(il,dl,ll,_l):ul.replace(/%d/i,il)},ui.pastFuture=function(il,dl){var ll=this._relativeTime[0<il?'future':'past'];return pe(ll)?ll(dl):ll.replace(/%s/i,dl)},ui.set=function(il){var dl,ll;for(ll in il)dl=il[ll],pe(dl)?this[ll]=dl:this['_'+ll]=dl;this._config=il,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+'|'+/\d{1,2}/.source)},ui.months=function(il,dl){return il?H(this._months)?this._months[il.month()]:this._months[(this._months.isFormat||Cs).test(dl)?'format':'standalone'][il.month()]:H(this._months)?this._months:this._months.standalone},ui.monthsShort=function(il,dl){return il?H(this._monthsShort)?this._monthsShort[il.month()]:this._monthsShort[Cs.test(dl)?'format':'standalone'][il.month()]:H(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ui.monthsParse=function(il,dl,ll){var _l,ul,cl;if(this._monthsParseExact)return $e.call(this,il,dl,ll);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),_l=0;12>_l;_l++){if(ul=Q([2e3,_l]),ll&&!this._longMonthsParse[_l]&&(this._longMonthsParse[_l]=new RegExp('^'+this.months(ul,'').replace('.','')+'$','i'),this._shortMonthsParse[_l]=new RegExp('^'+this.monthsShort(ul,'').replace('.','')+'$','i')),ll||this._monthsParse[_l]||(cl='^'+this.months(ul,'')+'|^'+this.monthsShort(ul,''),this._monthsParse[_l]=new RegExp(cl.replace('.',''),'i')),ll&&'MMMM'===dl&&this._longMonthsParse[_l].test(il))return _l;if(ll&&'MMM'===dl&&this._shortMonthsParse[_l].test(il))return _l;if(!ll&&this._monthsParse[_l].test(il))return _l}},ui.monthsRegex=function(il){return this._monthsParseExact?($(this,'_monthsRegex')||ot.call(this),il?this._monthsStrictRegex:this._monthsRegex):($(this,'_monthsRegex')||(this._monthsRegex=Zr),this._monthsStrictRegex&&il?this._monthsStrictRegex:this._monthsRegex)},ui.monthsShortRegex=function(il){return this._monthsParseExact?($(this,'_monthsRegex')||ot.call(this),il?this._monthsShortStrictRegex:this._monthsShortRegex):($(this,'_monthsShortRegex')||(this._monthsShortRegex=Zr),this._monthsShortStrictRegex&&il?this._monthsShortStrictRegex:this._monthsShortRegex)},ui.week=function(il){return pt(il,this._week.dow,this._week.doy).week},ui.firstDayOfYear=function(){return this._week.doy},ui.firstDayOfWeek=function(){return this._week.dow},ui.weekdays=function(il,dl){return il?H(this._weekdays)?this._weekdays[il.day()]:this._weekdays[this._weekdays.isFormat.test(dl)?'format':'standalone'][il.day()]:H(this._weekdays)?this._weekdays:this._weekdays.standalone},ui.weekdaysMin=function(il){return il?this._weekdaysMin[il.day()]:this._weekdaysMin},ui.weekdaysShort=function(il){return il?this._weekdaysShort[il.day()]:this._weekdaysShort},ui.weekdaysParse=function(il,dl,ll){var _l,ul,cl;if(this._weekdaysParseExact)return Dt.call(this,il,dl,ll);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),_l=0;7>_l;_l++){if(ul=Q([2000,1]).day(_l),ll&&!this._fullWeekdaysParse[_l]&&(this._fullWeekdaysParse[_l]=new RegExp('^'+this.weekdays(ul,'').replace('.','.?')+'$','i'),this._shortWeekdaysParse[_l]=new RegExp('^'+this.weekdaysShort(ul,'').replace('.','.?')+'$','i'),this._minWeekdaysParse[_l]=new RegExp('^'+this.weekdaysMin(ul,'').replace('.','.?')+'$','i')),this._weekdaysParse[_l]||(cl='^'+this.weekdays(ul,'')+'|^'+this.weekdaysShort(ul,'')+'|^'+this.weekdaysMin(ul,''),this._weekdaysParse[_l]=new RegExp(cl.replace('.',''),'i')),ll&&'dddd'===dl&&this._fullWeekdaysParse[_l].test(il))return _l;if(ll&&'ddd'===dl&&this._shortWeekdaysParse[_l].test(il))return _l;if(ll&&'dd'===dl&&this._minWeekdaysParse[_l].test(il))return _l;if(!ll&&this._weekdaysParse[_l].test(il))return _l}},ui.weekdaysRegex=function(il){return this._weekdaysParseExact?($(this,'_weekdaysRegex')||Nt.call(this),il?this._weekdaysStrictRegex:this._weekdaysRegex):($(this,'_weekdaysRegex')||(this._weekdaysRegex=Zr),this._weekdaysStrictRegex&&il?this._weekdaysStrictRegex:this._weekdaysRegex)},ui.weekdaysShortRegex=function(il){return this._weekdaysParseExact?($(this,'_weekdaysRegex')||Nt.call(this),il?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):($(this,'_weekdaysShortRegex')||(this._weekdaysShortRegex=Zr),this._weekdaysShortStrictRegex&&il?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ui.weekdaysMinRegex=function(il){return this._weekdaysParseExact?($(this,'_weekdaysRegex')||Nt.call(this),il?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):($(this,'_weekdaysMinRegex')||(this._weekdaysMinRegex=Zr),this._weekdaysMinStrictRegex&&il?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ui.isPM=function(il){return'p'===(il+'').toLowerCase().charAt(0)},ui.meridiem=function(il,dl,ll){return 11<il?ll?'pm':'PM':ll?'am':'AM'},Wt('en',{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(il){var dl=il%10,ll=1===de(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll}}),R.lang=ue('moment.lang is deprecated. Use moment.locale instead.',Wt),R.langData=ue('moment.langData is deprecated. Use moment.localeData instead.',Jt);var ci=Math.abs,mi=ro('ms'),pi=ro('s'),gi=ro('m'),fi=ro('h'),yi=ro('d'),Ti=ro('w'),Ci=ro('M'),Mi=ro('y'),vi=io('milliseconds'),Li=io('seconds'),Ei=io('minutes'),bi=io('hours'),Di=io('days'),Ai=io('months'),Ii=io('years'),Ri=Math.round,wi={ss:44,s:45,m:45,h:22,d:26,M:11},ki=Math.abs,Yi=vn.prototype;Yi.isValid=function(){return this._isValid},Yi.abs=function(){var il=this._data;return this._milliseconds=ci(this._milliseconds),this._days=ci(this._days),this._months=ci(this._months),il.milliseconds=ci(il.milliseconds),il.seconds=ci(il.seconds),il.minutes=ci(il.minutes),il.hours=ci(il.hours),il.months=ci(il.months),il.years=ci(il.years),this},Yi.add=function(il,dl){return Ka(this,il,dl,1)},Yi.subtract=function(il,dl){return Ka(this,il,dl,-1)},Yi.as=function(il){if(!this.isValid())return NaN;var _l=this._milliseconds,dl,ll;if(il=Se(il),'month'===il||'year'===il)return dl=this._days+_l/864e5,ll=this._months+eo(dl),'month'===il?ll:ll/12;switch(dl=this._days+Math.round(no(this._months)),il){case'week':return dl/7+_l/6048e5;case'day':return dl+_l/864e5;case'hour':return 24*dl+_l/36e5;case'minute':return 1440*dl+_l/6e4;case'second':return 86400*dl+_l/1e3;case'millisecond':return Math.floor(864e5*dl)+_l;default:throw new Error('Unknown unit '+il);}},Yi.asMilliseconds=mi,Yi.asSeconds=pi,Yi.asMinutes=gi,Yi.asHours=fi,Yi.asDays=yi,Yi.asWeeks=Ti,Yi.asMonths=Ci,Yi.asYears=Mi,Yi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*de(this._months/12):NaN},Yi._bubble=function(){var il=this._milliseconds,dl=this._days,ll=this._months,_l=this._data,ul,cl,ml,pl,hl;return 0<=il&&0<=dl&&0<=ll||0>=il&&0>=dl&&0>=ll||(il+=864e5*Qa(no(ll)+dl),dl=0,ll=0),_l.milliseconds=il%1e3,ul=ie(il/1e3),_l.seconds=ul%60,cl=ie(ul/60),_l.minutes=cl%60,ml=ie(cl/60),_l.hours=ml%24,dl+=ie(ml/24),hl=ie(eo(dl)),ll+=hl,dl-=Qa(no(hl)),pl=ie(ll/12),ll%=12,_l.days=dl,_l.months=ll,_l.years=pl,this},Yi.get=function(il){return il=Se(il),this.isValid()?this[il+'s']():NaN},Yi.milliseconds=vi,Yi.seconds=Li,Yi.minutes=Ei,Yi.hours=bi,Yi.days=Di,Yi.weeks=function(){return ie(this.days()/7)},Yi.months=Ai,Yi.years=Ii,Yi.humanize=function(il){if(!this.isValid())return this.localeData().invalidDate();var dl=this.localeData(),ll=co(this,!il,dl);return il&&(ll=dl.pastFuture(+this,ll)),dl.postformat(ll)},Yi.toISOString=go,Yi.toString=go,Yi.toJSON=go,Yi.locale=ua,Yi.localeData=ca,Yi.toIsoString=ue('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',go),Yi.lang=ni,Ne('X',0,0,'unix'),Ne('x',0,0,'valueOf'),Fe('x',Kr),Fe('X',Qr),ze('X',function(il,dl,ll){ll._d=new Date(1e3*parseFloat(il,10))}),ze('x',function(il,dl,ll){ll._d=new Date(de(il))}),R.version='2.18.1',function(il){gr=il}(pn),R.fn=li,R.min=function(){var il=[].slice.call(arguments,0);return hn('isBefore',il)},R.max=function(){var il=[].slice.call(arguments,0);return hn('isAfter',il)},R.now=function(){return Date.now?Date.now():+new Date},R.utc=Q,R.unix=function(il){return pn(1e3*il)},R.months=function(il,dl){return Ua(il,dl,'months')},R.isDate=J,R.locale=Wt,R.invalid=ne,R.duration=Fn,R.isMoment=se,R.weekdays=function(il,dl,ll){return Ba(il,dl,ll,'weekdays')},R.parseZone=function(){return pn.apply(null,arguments).parseZone()},R.localeData=Jt,R.isDuration=Ln,R.monthsShort=function(il,dl){return Ua(il,dl,'monthsShort')},R.weekdaysMin=function(il,dl,ll){return Ba(il,dl,ll,'weekdaysMin')},R.defineLocale=Vt,R.updateLocale=function(il,dl){if(null!=dl){var _l=Ps,ll;null!=xs[il]&&(_l=xs[il]._config),dl=ge(_l,dl),ll=new fe(dl),ll.parentLocale=xs[il],xs[il]=ll,Wt(il)}else null!=xs[il]&&(null==xs[il].parentLocale?null!=xs[il]&&delete xs[il]:xs[il]=xs[il].parentLocale);return xs[il]},R.locales=function(){return Er(xs)},R.weekdaysShort=function(il,dl,ll){return Ba(il,dl,ll,'weekdaysShort')},R.normalizeUnits=Se,R.relativeTimeRounding=function(il){return void 0===il?Ri:'function'==typeof il&&(Ri=il,!0)},R.relativeTimeThreshold=function(il,dl){return void 0!==wi[il]&&(void 0===dl?wi[il]:(wi[il]=dl,'s'===il&&(wi.ss=dl-1),!0))},R.calendarFormat=function(il,dl){var ll=il.diff(dl,'days',!0);return-6>ll?'sameElse':-1>ll?'lastWeek':0>ll?'lastDay':1>ll?'sameDay':2>ll?'nextDay':7>ll?'nextWeek':'sameElse'},R.prototype=li,R.defineLocale('af',{months:'Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember'.split('_'),monthsShort:'Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des'.split('_'),weekdays:'Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag'.split('_'),weekdaysShort:'Son_Maa_Din_Woe_Don_Vry_Sat'.split('_'),weekdaysMin:'So_Ma_Di_Wo_Do_Vr_Sa'.split('_'),meridiemParse:/vm|nm/i,isPM:function(il){return /^nm$/i.test(il)},meridiem:function(il,dl,ll){return 12>il?ll?'vm':'VM':ll?'nm':'NM'},longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Vandag om] LT',nextDay:'[M\xF4re om] LT',nextWeek:'dddd [om] LT',lastDay:'[Gister om] LT',lastWeek:'[Laas] dddd [om] LT',sameElse:'L'},relativeTime:{future:'oor %s',past:'%s gelede',s:'\'n paar sekondes',m:'\'n minuut',mm:'%d minute',h:'\'n uur',hh:'%d ure',d:'\'n dag',dd:'%d dae',M:'\'n maand',MM:'%d maande',y:'\'n jaar',yy:'%d jaar'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(il){return il+(1===il||8===il||20<=il?'ste':'de')},week:{dow:1,doy:4}}),R.defineLocale('ar-dz',{months:'\u062C\u0627\u0646\u0641\u064A_\u0641\u064A\u0641\u0631\u064A_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064A\u0644_\u0645\u0627\u064A_\u062C\u0648\u0627\u0646_\u062C\u0648\u064A\u0644\u064A\u0629_\u0623\u0648\u062A_\u0633\u0628\u062A\u0645\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062F\u064A\u0633\u0645\u0628\u0631'.split('_'),monthsShort:'\u062C\u0627\u0646\u0641\u064A_\u0641\u064A\u0641\u0631\u064A_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064A\u0644_\u0645\u0627\u064A_\u062C\u0648\u0627\u0646_\u062C\u0648\u064A\u0644\u064A\u0629_\u0623\u0648\u062A_\u0633\u0628\u062A\u0645\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062F\u064A\u0633\u0645\u0628\u0631'.split('_'),weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062B\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0627\u062D\u062F_\u0627\u062B\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u0623\u062D_\u0625\u062B_\u062B\u0644\u0627_\u0623\u0631_\u062E\u0645_\u062C\u0645_\u0633\u0628'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0641\u064A %s',past:'\u0645\u0646\u0630 %s',s:'\u062B\u0648\u0627\u0646',m:'\u062F\u0642\u064A\u0642\u0629',mm:'%d \u062F\u0642\u0627\u0626\u0642',h:'\u0633\u0627\u0639\u0629',hh:'%d \u0633\u0627\u0639\u0627\u062A',d:'\u064A\u0648\u0645',dd:'%d \u0623\u064A\u0627\u0645',M:'\u0634\u0647\u0631',MM:'%d \u0623\u0634\u0647\u0631',y:'\u0633\u0646\u0629',yy:'%d \u0633\u0646\u0648\u0627\u062A'},week:{dow:0,doy:4}}),R.defineLocale('ar-kw',{months:'\u064A\u0646\u0627\u064A\u0631_\u0641\u0628\u0631\u0627\u064A\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064A\u0644_\u0645\u0627\u064A_\u064A\u0648\u0646\u064A\u0648_\u064A\u0648\u0644\u064A\u0648\u0632_\u063A\u0634\u062A_\u0634\u062A\u0646\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062F\u062C\u0646\u0628\u0631'.split('_'),monthsShort:'\u064A\u0646\u0627\u064A\u0631_\u0641\u0628\u0631\u0627\u064A\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064A\u0644_\u0645\u0627\u064A_\u064A\u0648\u0646\u064A\u0648_\u064A\u0648\u0644\u064A\u0648\u0632_\u063A\u0634\u062A_\u0634\u062A\u0646\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062F\u062C\u0646\u0628\u0631'.split('_'),weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062A\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0627\u062D\u062F_\u0627\u062A\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u062D_\u0646_\u062B_\u0631_\u062E_\u062C_\u0633'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0641\u064A %s',past:'\u0645\u0646\u0630 %s',s:'\u062B\u0648\u0627\u0646',m:'\u062F\u0642\u064A\u0642\u0629',mm:'%d \u062F\u0642\u0627\u0626\u0642',h:'\u0633\u0627\u0639\u0629',hh:'%d \u0633\u0627\u0639\u0627\u062A',d:'\u064A\u0648\u0645',dd:'%d \u0623\u064A\u0627\u0645',M:'\u0634\u0647\u0631',MM:'%d \u0623\u0634\u0647\u0631',y:'\u0633\u0646\u0629',yy:'%d \u0633\u0646\u0648\u0627\u062A'},week:{dow:0,doy:12}});var Oi={0:'0',1:'1',2:'2',3:'3',4:'4',5:'5',6:'6',7:'7',8:'8',9:'9'},Ni=function(il){return 0===il?0:1===il?1:2===il?2:3<=il%100&&10>=il%100?3:11<=il%100?4:5},Pi={s:['\u0623\u0642\u0644 \u0645\u0646 \u062B\u0627\u0646\u064A\u0629','\u062B\u0627\u0646\u064A\u0629 \u0648\u0627\u062D\u062F\u0629',['\u062B\u0627\u0646\u064A\u062A\u0627\u0646','\u062B\u0627\u0646\u064A\u062A\u064A\u0646'],'%d \u062B\u0648\u0627\u0646','%d \u062B\u0627\u0646\u064A\u0629','%d \u062B\u0627\u0646\u064A\u0629'],m:['\u0623\u0642\u0644 \u0645\u0646 \u062F\u0642\u064A\u0642\u0629','\u062F\u0642\u064A\u0642\u0629 \u0648\u0627\u062D\u062F\u0629',['\u062F\u0642\u064A\u0642\u062A\u0627\u0646','\u062F\u0642\u064A\u0642\u062A\u064A\u0646'],'%d \u062F\u0642\u0627\u0626\u0642','%d \u062F\u0642\u064A\u0642\u0629','%d \u062F\u0642\u064A\u0642\u0629'],h:['\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629','\u0633\u0627\u0639\u0629 \u0648\u0627\u062D\u062F\u0629',['\u0633\u0627\u0639\u062A\u0627\u0646','\u0633\u0627\u0639\u062A\u064A\u0646'],'%d \u0633\u0627\u0639\u0627\u062A','%d \u0633\u0627\u0639\u0629','%d \u0633\u0627\u0639\u0629'],d:['\u0623\u0642\u0644 \u0645\u0646 \u064A\u0648\u0645','\u064A\u0648\u0645 \u0648\u0627\u062D\u062F',['\u064A\u0648\u0645\u0627\u0646','\u064A\u0648\u0645\u064A\u0646'],'%d \u0623\u064A\u0627\u0645','%d \u064A\u0648\u0645\u064B\u0627','%d \u064A\u0648\u0645'],M:['\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631','\u0634\u0647\u0631 \u0648\u0627\u062D\u062F',['\u0634\u0647\u0631\u0627\u0646','\u0634\u0647\u0631\u064A\u0646'],'%d \u0623\u0634\u0647\u0631','%d \u0634\u0647\u0631\u0627','%d \u0634\u0647\u0631'],y:['\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645','\u0639\u0627\u0645 \u0648\u0627\u062D\u062F',['\u0639\u0627\u0645\u0627\u0646','\u0639\u0627\u0645\u064A\u0646'],'%d \u0623\u0639\u0648\u0627\u0645','%d \u0639\u0627\u0645\u064B\u0627','%d \u0639\u0627\u0645']},xi=function(il){return function(dl,ll){var cl=Ni(dl),ml=Pi[il][Ni(dl)];return 2===cl&&(ml=ml[ll?0:1]),ml.replace(/%d/i,dl)}},ji=['\u064A\u0646\u0627\u064A\u0631','\u0641\u0628\u0631\u0627\u064A\u0631','\u0645\u0627\u0631\u0633','\u0623\u0628\u0631\u064A\u0644','\u0645\u0627\u064A\u0648','\u064A\u0648\u0646\u064A\u0648','\u064A\u0648\u0644\u064A\u0648','\u0623\u063A\u0633\u0637\u0633','\u0633\u0628\u062A\u0645\u0628\u0631','\u0623\u0643\u062A\u0648\u0628\u0631','\u0646\u0648\u0641\u0645\u0628\u0631','\u062F\u064A\u0633\u0645\u0628\u0631'];R.defineLocale('ar-ly',{months:ji,monthsShort:ji,weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062B\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0623\u062D\u062F_\u0625\u062B\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u062D_\u0646_\u062B_\u0631_\u062E_\u062C_\u0633'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'D/\u200FM/\u200FYYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0645'===il},meridiem:function(il){return 12>il?'\u0635':'\u0645'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u064B\u0627 \u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0628\u0639\u062F %s',past:'\u0645\u0646\u0630 %s',s:xi('s'),m:xi('m'),mm:xi('m'),h:xi('h'),hh:xi('h'),d:xi('d'),dd:xi('d'),M:xi('M'),MM:xi('M'),y:xi('y'),yy:xi('y')},preparse:function(il){return il.replace(/\u200f/g,'').replace(//g,',')},postformat:function(il){return il.replace(/\d/g,function(dl){return Oi[dl]}).replace(/,/g,'\u060C')},week:{dow:6,doy:12}}),R.defineLocale('ar-ma',{months:'\u064A\u0646\u0627\u064A\u0631_\u0641\u0628\u0631\u0627\u064A\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064A\u0644_\u0645\u0627\u064A_\u064A\u0648\u0646\u064A\u0648_\u064A\u0648\u0644\u064A\u0648\u0632_\u063A\u0634\u062A_\u0634\u062A\u0646\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062F\u062C\u0646\u0628\u0631'.split('_'),monthsShort:'\u064A\u0646\u0627\u064A\u0631_\u0641\u0628\u0631\u0627\u064A\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064A\u0644_\u0645\u0627\u064A_\u064A\u0648\u0646\u064A\u0648_\u064A\u0648\u0644\u064A\u0648\u0632_\u063A\u0634\u062A_\u0634\u062A\u0646\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062F\u062C\u0646\u0628\u0631'.split('_'),weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062A\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0627\u062D\u062F_\u0627\u062A\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u062D_\u0646_\u062B_\u0631_\u062E_\u062C_\u0633'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0641\u064A %s',past:'\u0645\u0646\u0630 %s',s:'\u062B\u0648\u0627\u0646',m:'\u062F\u0642\u064A\u0642\u0629',mm:'%d \u062F\u0642\u0627\u0626\u0642',h:'\u0633\u0627\u0639\u0629',hh:'%d \u0633\u0627\u0639\u0627\u062A',d:'\u064A\u0648\u0645',dd:'%d \u0623\u064A\u0627\u0645',M:'\u0634\u0647\u0631',MM:'%d \u0623\u0634\u0647\u0631',y:'\u0633\u0646\u0629',yy:'%d \u0633\u0646\u0648\u0627\u062A'},week:{dow:6,doy:12}});var Fi={0:'\u0660',1:'\u0661',2:'\u0662',3:'\u0663',4:'\u0664',5:'\u0665',6:'\u0666',7:'\u0667',8:'\u0668',9:'\u0669'},Ui={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('ar-sa',{months:'\u064A\u0646\u0627\u064A\u0631_\u0641\u0628\u0631\u0627\u064A\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064A\u0644_\u0645\u0627\u064A\u0648_\u064A\u0648\u0646\u064A\u0648_\u064A\u0648\u0644\u064A\u0648_\u0623\u063A\u0633\u0637\u0633_\u0633\u0628\u062A\u0645\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062F\u064A\u0633\u0645\u0628\u0631'.split('_'),monthsShort:'\u064A\u0646\u0627\u064A\u0631_\u0641\u0628\u0631\u0627\u064A\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064A\u0644_\u0645\u0627\u064A\u0648_\u064A\u0648\u0646\u064A\u0648_\u064A\u0648\u0644\u064A\u0648_\u0623\u063A\u0633\u0637\u0633_\u0633\u0628\u062A\u0645\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062F\u064A\u0633\u0645\u0628\u0631'.split('_'),weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062B\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0623\u062D\u062F_\u0625\u062B\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u062D_\u0646_\u062B_\u0631_\u062E_\u062C_\u0633'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0645'===il},meridiem:function(il){return 12>il?'\u0635':'\u0645'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0641\u064A %s',past:'\u0645\u0646\u0630 %s',s:'\u062B\u0648\u0627\u0646',m:'\u062F\u0642\u064A\u0642\u0629',mm:'%d \u062F\u0642\u0627\u0626\u0642',h:'\u0633\u0627\u0639\u0629',hh:'%d \u0633\u0627\u0639\u0627\u062A',d:'\u064A\u0648\u0645',dd:'%d \u0623\u064A\u0627\u0645',M:'\u0634\u0647\u0631',MM:'%d \u0623\u0634\u0647\u0631',y:'\u0633\u0646\u0629',yy:'%d \u0633\u0646\u0648\u0627\u062A'},preparse:function(il){return il.replace(/[]/g,function(dl){return Ui[dl]}).replace(//g,',')},postformat:function(il){return il.replace(/\d/g,function(dl){return Fi[dl]}).replace(/,/g,'\u060C')},week:{dow:0,doy:6}}),R.defineLocale('ar-tn',{months:'\u062C\u0627\u0646\u0641\u064A_\u0641\u064A\u0641\u0631\u064A_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064A\u0644_\u0645\u0627\u064A_\u062C\u0648\u0627\u0646_\u062C\u0648\u064A\u0644\u064A\u0629_\u0623\u0648\u062A_\u0633\u0628\u062A\u0645\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062F\u064A\u0633\u0645\u0628\u0631'.split('_'),monthsShort:'\u062C\u0627\u0646\u0641\u064A_\u0641\u064A\u0641\u0631\u064A_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064A\u0644_\u0645\u0627\u064A_\u062C\u0648\u0627\u0646_\u062C\u0648\u064A\u0644\u064A\u0629_\u0623\u0648\u062A_\u0633\u0628\u062A\u0645\u0628\u0631_\u0623\u0643\u062A\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062F\u064A\u0633\u0645\u0628\u0631'.split('_'),weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062B\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0623\u062D\u062F_\u0625\u062B\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u062D_\u0646_\u062B_\u0631_\u062E_\u062C_\u0633'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0641\u064A %s',past:'\u0645\u0646\u0630 %s',s:'\u062B\u0648\u0627\u0646',m:'\u062F\u0642\u064A\u0642\u0629',mm:'%d \u062F\u0642\u0627\u0626\u0642',h:'\u0633\u0627\u0639\u0629',hh:'%d \u0633\u0627\u0639\u0627\u062A',d:'\u064A\u0648\u0645',dd:'%d \u0623\u064A\u0627\u0645',M:'\u0634\u0647\u0631',MM:'%d \u0623\u0634\u0647\u0631',y:'\u0633\u0646\u0629',yy:'%d \u0633\u0646\u0648\u0627\u062A'},week:{dow:1,doy:4}});var Bi={0:'\u0660',1:'\u0661',2:'\u0662',3:'\u0663',4:'\u0664',5:'\u0665',6:'\u0666',7:'\u0667',8:'\u0668',9:'\u0669'},qi={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'},zi=function(il){return 0===il?0:1===il?1:2===il?2:3<=il%100&&10>=il%100?3:11<=il%100?4:5},Wi={s:['\u0623\u0642\u0644 \u0645\u0646 \u062B\u0627\u0646\u064A\u0629','\u062B\u0627\u0646\u064A\u0629 \u0648\u0627\u062D\u062F\u0629',['\u062B\u0627\u0646\u064A\u062A\u0627\u0646','\u062B\u0627\u0646\u064A\u062A\u064A\u0646'],'%d \u062B\u0648\u0627\u0646','%d \u062B\u0627\u0646\u064A\u0629','%d \u062B\u0627\u0646\u064A\u0629'],m:['\u0623\u0642\u0644 \u0645\u0646 \u062F\u0642\u064A\u0642\u0629','\u062F\u0642\u064A\u0642\u0629 \u0648\u0627\u062D\u062F\u0629',['\u062F\u0642\u064A\u0642\u062A\u0627\u0646','\u062F\u0642\u064A\u0642\u062A\u064A\u0646'],'%d \u062F\u0642\u0627\u0626\u0642','%d \u062F\u0642\u064A\u0642\u0629','%d \u062F\u0642\u064A\u0642\u0629'],h:['\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629','\u0633\u0627\u0639\u0629 \u0648\u0627\u062D\u062F\u0629',['\u0633\u0627\u0639\u062A\u0627\u0646','\u0633\u0627\u0639\u062A\u064A\u0646'],'%d \u0633\u0627\u0639\u0627\u062A','%d \u0633\u0627\u0639\u0629','%d \u0633\u0627\u0639\u0629'],d:['\u0623\u0642\u0644 \u0645\u0646 \u064A\u0648\u0645','\u064A\u0648\u0645 \u0648\u0627\u062D\u062F',['\u064A\u0648\u0645\u0627\u0646','\u064A\u0648\u0645\u064A\u0646'],'%d \u0623\u064A\u0627\u0645','%d \u064A\u0648\u0645\u064B\u0627','%d \u064A\u0648\u0645'],M:['\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631','\u0634\u0647\u0631 \u0648\u0627\u062D\u062F',['\u0634\u0647\u0631\u0627\u0646','\u0634\u0647\u0631\u064A\u0646'],'%d \u0623\u0634\u0647\u0631','%d \u0634\u0647\u0631\u0627','%d \u0634\u0647\u0631'],y:['\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645','\u0639\u0627\u0645 \u0648\u0627\u062D\u062F',['\u0639\u0627\u0645\u0627\u0646','\u0639\u0627\u0645\u064A\u0646'],'%d \u0623\u0639\u0648\u0627\u0645','%d \u0639\u0627\u0645\u064B\u0627','%d \u0639\u0627\u0645']},Vi=function(il){return function(dl,ll){var cl=zi(dl),ml=Wi[il][zi(dl)];return 2===cl&&(ml=ml[ll?0:1]),ml.replace(/%d/i,dl)}},Gi=['\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u062B\u0627\u0646\u064A \u064A\u0646\u0627\u064A\u0631','\u0634\u0628\u0627\u0637 \u0641\u0628\u0631\u0627\u064A\u0631','\u0622\u0630\u0627\u0631 \u0645\u0627\u0631\u0633','\u0646\u064A\u0633\u0627\u0646 \u0623\u0628\u0631\u064A\u0644','\u0623\u064A\u0627\u0631 \u0645\u0627\u064A\u0648','\u062D\u0632\u064A\u0631\u0627\u0646 \u064A\u0648\u0646\u064A\u0648','\u062A\u0645\u0648\u0632 \u064A\u0648\u0644\u064A\u0648','\u0622\u0628 \u0623\u063A\u0633\u0637\u0633','\u0623\u064A\u0644\u0648\u0644 \u0633\u0628\u062A\u0645\u0628\u0631','\u062A\u0634\u0631\u064A\u0646 \u0627\u0644\u0623\u0648\u0644 \u0623\u0643\u062A\u0648\u0628\u0631','\u062A\u0634\u0631\u064A\u0646 \u0627\u0644\u062B\u0627\u0646\u064A \u0646\u0648\u0641\u0645\u0628\u0631','\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u0623\u0648\u0644 \u062F\u064A\u0633\u0645\u0628\u0631'];R.defineLocale('ar',{months:Gi,monthsShort:Gi,weekdays:'\u0627\u0644\u0623\u062D\u062F_\u0627\u0644\u0625\u062B\u0646\u064A\u0646_\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062E\u0645\u064A\u0633_\u0627\u0644\u062C\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062A'.split('_'),weekdaysShort:'\u0623\u062D\u062F_\u0625\u062B\u0646\u064A\u0646_\u062B\u0644\u0627\u062B\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062E\u0645\u064A\u0633_\u062C\u0645\u0639\u0629_\u0633\u0628\u062A'.split('_'),weekdaysMin:'\u062D_\u0646_\u062B_\u0631_\u062E_\u062C_\u0633'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'D/\u200FM/\u200FYYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0645'===il},meridiem:function(il){return 12>il?'\u0635':'\u0645'},calendar:{sameDay:'[\u0627\u0644\u064A\u0648\u0645 \u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextDay:'[\u063A\u062F\u064B\u0627 \u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',nextWeek:'dddd [\u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastDay:'[\u0623\u0645\u0633 \u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',lastWeek:'dddd [\u0639\u0646\u062F \u0627\u0644\u0633\u0627\u0639\u0629] LT',sameElse:'L'},relativeTime:{future:'\u0628\u0639\u062F %s',past:'\u0645\u0646\u0630 %s',s:Vi('s'),m:Vi('m'),mm:Vi('m'),h:Vi('h'),hh:Vi('h'),d:Vi('d'),dd:Vi('d'),M:Vi('M'),MM:Vi('M'),y:Vi('y'),yy:Vi('y')},preparse:function(il){return il.replace(/\u200f/g,'').replace(/[]/g,function(dl){return qi[dl]}).replace(//g,',')},postformat:function(il){return il.replace(/\d/g,function(dl){return Bi[dl]}).replace(/,/g,'\u060C')},week:{dow:6,doy:12}});var Ji={1:'-inci',2:'-nci',3:'-\xFCnc\xFC',4:'-\xFCnc\xFC',5:'-inci',6:'-nc\u0131',7:'-nci',8:'-inci',9:'-uncu',10:'-uncu',20:'-nci',30:'-uncu',50:'-nci',60:'-\u0131nc\u0131',70:'-inci',80:'-inci',90:'-\u0131nc\u0131',100:'-\xFCnc\xFC'};R.defineLocale('az',{months:'yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr'.split('_'),monthsShort:'yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek'.split('_'),weekdays:'Bazar_Bazar ert\u0259si_\xC7\u0259r\u015F\u0259nb\u0259 ax\u015Fam\u0131_\xC7\u0259r\u015F\u0259nb\u0259_C\xFCm\u0259 ax\u015Fam\u0131_C\xFCm\u0259_\u015E\u0259nb\u0259'.split('_'),weekdaysShort:'Baz_BzE_\xC7Ax_\xC7\u0259r_CAx_C\xFCm_\u015E\u0259n'.split('_'),weekdaysMin:'Bz_BE_\xC7A_\xC7\u0259_CA_C\xFC_\u015E\u0259'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[bug\xFCn saat] LT',nextDay:'[sabah saat] LT',nextWeek:'[g\u0259l\u0259n h\u0259ft\u0259] dddd [saat] LT',lastDay:'[d\xFCn\u0259n] LT',lastWeek:'[ke\xE7\u0259n h\u0259ft\u0259] dddd [saat] LT',sameElse:'L'},relativeTime:{future:'%s sonra',past:'%s \u0259vv\u0259l',s:'birne\xE7\u0259 saniyy\u0259',m:'bir d\u0259qiq\u0259',mm:'%d d\u0259qiq\u0259',h:'bir saat',hh:'%d saat',d:'bir g\xFCn',dd:'%d g\xFCn',M:'bir ay',MM:'%d ay',y:'bir il',yy:'%d il'},meridiemParse:/gec|shr|gndz|axam/,isPM:function(il){return /^(gndz|axam)$/.test(il)},meridiem:function(il){return 4>il?'gec\u0259':12>il?'s\u0259h\u0259r':17>il?'g\xFCnd\xFCz':'ax\u015Fam'},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(il){if(0===il)return il+'-\u0131nc\u0131';var dl=il%10,_l=100<=il?100:null;return il+(Ji[dl]||Ji[il%100-dl]||Ji[_l])},week:{dow:1,doy:7}}),R.defineLocale('be',{months:{format:'\u0441\u0442\u0443\u0434\u0437\u0435\u043D\u044F_\u043B\u044E\u0442\u0430\u0433\u0430_\u0441\u0430\u043A\u0430\u0432\u0456\u043A\u0430_\u043A\u0440\u0430\u0441\u0430\u0432\u0456\u043A\u0430_\u0442\u0440\u0430\u045E\u043D\u044F_\u0447\u044D\u0440\u0432\u0435\u043D\u044F_\u043B\u0456\u043F\u0435\u043D\u044F_\u0436\u043D\u0456\u045E\u043D\u044F_\u0432\u0435\u0440\u0430\u0441\u043D\u044F_\u043A\u0430\u0441\u0442\u0440\u044B\u0447\u043D\u0456\u043A\u0430_\u043B\u0456\u0441\u0442\u0430\u043F\u0430\u0434\u0430_\u0441\u043D\u0435\u0436\u043D\u044F'.split('_'),standalone:'\u0441\u0442\u0443\u0434\u0437\u0435\u043D\u044C_\u043B\u044E\u0442\u044B_\u0441\u0430\u043A\u0430\u0432\u0456\u043A_\u043A\u0440\u0430\u0441\u0430\u0432\u0456\u043A_\u0442\u0440\u0430\u0432\u0435\u043D\u044C_\u0447\u044D\u0440\u0432\u0435\u043D\u044C_\u043B\u0456\u043F\u0435\u043D\u044C_\u0436\u043D\u0456\u0432\u0435\u043D\u044C_\u0432\u0435\u0440\u0430\u0441\u0435\u043D\u044C_\u043A\u0430\u0441\u0442\u0440\u044B\u0447\u043D\u0456\u043A_\u043B\u0456\u0441\u0442\u0430\u043F\u0430\u0434_\u0441\u043D\u0435\u0436\u0430\u043D\u044C'.split('_')},monthsShort:'\u0441\u0442\u0443\u0434_\u043B\u044E\u0442_\u0441\u0430\u043A_\u043A\u0440\u0430\u0441_\u0442\u0440\u0430\u0432_\u0447\u044D\u0440\u0432_\u043B\u0456\u043F_\u0436\u043D\u0456\u0432_\u0432\u0435\u0440_\u043A\u0430\u0441\u0442_\u043B\u0456\u0441\u0442_\u0441\u043D\u0435\u0436'.split('_'),weekdays:{format:'\u043D\u044F\u0434\u0437\u0435\u043B\u044E_\u043F\u0430\u043D\u044F\u0434\u0437\u0435\u043B\u0430\u043A_\u0430\u045E\u0442\u043E\u0440\u0430\u043A_\u0441\u0435\u0440\u0430\u0434\u0443_\u0447\u0430\u0446\u0432\u0435\u0440_\u043F\u044F\u0442\u043D\u0456\u0446\u0443_\u0441\u0443\u0431\u043E\u0442\u0443'.split('_'),standalone:'\u043D\u044F\u0434\u0437\u0435\u043B\u044F_\u043F\u0430\u043D\u044F\u0434\u0437\u0435\u043B\u0430\u043A_\u0430\u045E\u0442\u043E\u0440\u0430\u043A_\u0441\u0435\u0440\u0430\u0434\u0430_\u0447\u0430\u0446\u0432\u0435\u0440_\u043F\u044F\u0442\u043D\u0456\u0446\u0430_\u0441\u0443\u0431\u043E\u0442\u0430'.split('_'),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:'\u043D\u0434_\u043F\u043D_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043F\u0442_\u0441\u0431'.split('_'),weekdaysMin:'\u043D\u0434_\u043F\u043D_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043F\u0442_\u0441\u0431'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY \u0433.',LLL:'D MMMM YYYY \u0433., HH:mm',LLLL:'dddd, D MMMM YYYY \u0433., HH:mm'},calendar:{sameDay:'[\u0421\u0451\u043D\u043D\u044F \u045E] LT',nextDay:'[\u0417\u0430\u045E\u0442\u0440\u0430 \u045E] LT',lastDay:'[\u0423\u0447\u043E\u0440\u0430 \u045E] LT',nextWeek:function(){return'[\u0423] dddd [\u045E] LT'},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return'[\u0423 \u043C\u0456\u043D\u0443\u043B\u0443\u044E] dddd [\u045E] LT';case 1:case 2:case 4:return'[\u0423 \u043C\u0456\u043D\u0443\u043B\u044B] dddd [\u045E] LT';}},sameElse:'L'},relativeTime:{future:'\u043F\u0440\u0430\u0437 %s',past:'%s \u0442\u0430\u043C\u0443',s:'\u043D\u0435\u043A\u0430\u043B\u044C\u043A\u0456 \u0441\u0435\u043A\u0443\u043D\u0434',m:yo,mm:yo,h:yo,hh:yo,d:'\u0434\u0437\u0435\u043D\u044C',dd:yo,M:'\u043C\u0435\u0441\u044F\u0446',MM:yo,y:'\u0433\u043E\u0434',yy:yo},meridiemParse:/|||/,isPM:function(il){return /^(|)$/.test(il)},meridiem:function(il){return 4>il?'\u043D\u043E\u0447\u044B':12>il?'\u0440\u0430\u043D\u0456\u0446\u044B':17>il?'\u0434\u043D\u044F':'\u0432\u0435\u0447\u0430\u0440\u0430'},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(il,dl){return'M'===dl||'d'===dl||'DDD'===dl||'w'===dl||'W'===dl?(2==il%10||3==il%10)&&12!=il%100&&13!=il%100?il+'-\u0456':il+'-\u044B':'D'===dl?il+'-\u0433\u0430':il},week:{dow:1,doy:7}}),R.defineLocale('bg',{months:'\u044F\u043D\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0438\u043B_\u043C\u0430\u0439_\u044E\u043D\u0438_\u044E\u043B\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043F\u0442\u0435\u043C\u0432\u0440\u0438_\u043E\u043A\u0442\u043E\u043C\u0432\u0440\u0438_\u043D\u043E\u0435\u043C\u0432\u0440\u0438_\u0434\u0435\u043A\u0435\u043C\u0432\u0440\u0438'.split('_'),monthsShort:'\u044F\u043D\u0440_\u0444\u0435\u0432_\u043C\u0430\u0440_\u0430\u043F\u0440_\u043C\u0430\u0439_\u044E\u043D\u0438_\u044E\u043B\u0438_\u0430\u0432\u0433_\u0441\u0435\u043F_\u043E\u043A\u0442_\u043D\u043E\u0435_\u0434\u0435\u043A'.split('_'),weekdays:'\u043D\u0435\u0434\u0435\u043B\u044F_\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u043D\u0438\u043A_\u0432\u0442\u043E\u0440\u043D\u0438\u043A_\u0441\u0440\u044F\u0434\u0430_\u0447\u0435\u0442\u0432\u044A\u0440\u0442\u044A\u043A_\u043F\u0435\u0442\u044A\u043A_\u0441\u044A\u0431\u043E\u0442\u0430'.split('_'),weekdaysShort:'\u043D\u0435\u0434_\u043F\u043E\u043D_\u0432\u0442\u043E_\u0441\u0440\u044F_\u0447\u0435\u0442_\u043F\u0435\u0442_\u0441\u044A\u0431'.split('_'),weekdaysMin:'\u043D\u0434_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'D.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY H:mm',LLLL:'dddd, D MMMM YYYY H:mm'},calendar:{sameDay:'[\u0414\u043D\u0435\u0441 \u0432] LT',nextDay:'[\u0423\u0442\u0440\u0435 \u0432] LT',nextWeek:'dddd [\u0432] LT',lastDay:'[\u0412\u0447\u0435\u0440\u0430 \u0432] LT',lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return'[\u0412 \u0438\u0437\u043C\u0438\u043D\u0430\u043B\u0430\u0442\u0430] dddd [\u0432] LT';case 1:case 2:case 4:case 5:return'[\u0412 \u0438\u0437\u043C\u0438\u043D\u0430\u043B\u0438\u044F] dddd [\u0432] LT';}},sameElse:'L'},relativeTime:{future:'\u0441\u043B\u0435\u0434 %s',past:'\u043F\u0440\u0435\u0434\u0438 %s',s:'\u043D\u044F\u043A\u043E\u043B\u043A\u043E \u0441\u0435\u043A\u0443\u043D\u0434\u0438',m:'\u043C\u0438\u043D\u0443\u0442\u0430',mm:'%d \u043C\u0438\u043D\u0443\u0442\u0438',h:'\u0447\u0430\u0441',hh:'%d \u0447\u0430\u0441\u0430',d:'\u0434\u0435\u043D',dd:'%d \u0434\u043D\u0438',M:'\u043C\u0435\u0441\u0435\u0446',MM:'%d \u043C\u0435\u0441\u0435\u0446\u0430',y:'\u0433\u043E\u0434\u0438\u043D\u0430',yy:'%d \u0433\u043E\u0434\u0438\u043D\u0438'},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(il){var dl=il%10,ll=il%100;return 0===il?il+'-\u0435\u0432':0==ll?il+'-\u0435\u043D':10<ll&&20>ll?il+'-\u0442\u0438':1==dl?il+'-\u0432\u0438':2==dl?il+'-\u0440\u0438':7==dl||8==dl?il+'-\u043C\u0438':il+'-\u0442\u0438'},week:{dow:1,doy:7}});var Ki={0:'\u09E6',1:'\u09E7',2:'\u09E8',3:'\u09E9',4:'\u09EA',5:'\u09EB',6:'\u09EC',7:'\u09ED',8:'\u09EE',9:'\u09EF'},$i={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('bn',{months:'\u099C\u09BE\u09A8\u09C1\u09DF\u09BE\u09B0\u09C0_\u09AB\u09C7\u09AC\u09CD\u09B0\u09C1\u09DF\u09BE\u09B0\u09BF_\u09AE\u09BE\u09B0\u09CD\u099A_\u098F\u09AA\u09CD\u09B0\u09BF\u09B2_\u09AE\u09C7_\u099C\u09C1\u09A8_\u099C\u09C1\u09B2\u09BE\u0987_\u0986\u0997\u09B8\u09CD\u099F_\u09B8\u09C7\u09AA\u09CD\u099F\u09C7\u09AE\u09CD\u09AC\u09B0_\u0985\u0995\u09CD\u099F\u09CB\u09AC\u09B0_\u09A8\u09AD\u09C7\u09AE\u09CD\u09AC\u09B0_\u09A1\u09BF\u09B8\u09C7\u09AE\u09CD\u09AC\u09B0'.split('_'),monthsShort:'\u099C\u09BE\u09A8\u09C1_\u09AB\u09C7\u09AC_\u09AE\u09BE\u09B0\u09CD\u099A_\u098F\u09AA\u09CD\u09B0_\u09AE\u09C7_\u099C\u09C1\u09A8_\u099C\u09C1\u09B2_\u0986\u0997_\u09B8\u09C7\u09AA\u09CD\u099F_\u0985\u0995\u09CD\u099F\u09CB_\u09A8\u09AD\u09C7_\u09A1\u09BF\u09B8\u09C7'.split('_'),weekdays:'\u09B0\u09AC\u09BF\u09AC\u09BE\u09B0_\u09B8\u09CB\u09AE\u09AC\u09BE\u09B0_\u09AE\u0999\u09CD\u0997\u09B2\u09AC\u09BE\u09B0_\u09AC\u09C1\u09A7\u09AC\u09BE\u09B0_\u09AC\u09C3\u09B9\u09B8\u09CD\u09AA\u09A4\u09BF\u09AC\u09BE\u09B0_\u09B6\u09C1\u0995\u09CD\u09B0\u09AC\u09BE\u09B0_\u09B6\u09A8\u09BF\u09AC\u09BE\u09B0'.split('_'),weekdaysShort:'\u09B0\u09AC\u09BF_\u09B8\u09CB\u09AE_\u09AE\u0999\u09CD\u0997\u09B2_\u09AC\u09C1\u09A7_\u09AC\u09C3\u09B9\u09B8\u09CD\u09AA\u09A4\u09BF_\u09B6\u09C1\u0995\u09CD\u09B0_\u09B6\u09A8\u09BF'.split('_'),weekdaysMin:'\u09B0\u09AC\u09BF_\u09B8\u09CB\u09AE_\u09AE\u0999\u09CD\u0997_\u09AC\u09C1\u09A7_\u09AC\u09C3\u09B9\u0983_\u09B6\u09C1\u0995\u09CD\u09B0_\u09B6\u09A8\u09BF'.split('_'),longDateFormat:{LT:'A h:mm \u09B8\u09AE\u09DF',LTS:'A h:mm:ss \u09B8\u09AE\u09DF',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm \u09B8\u09AE\u09DF',LLLL:'dddd, D MMMM YYYY, A h:mm \u09B8\u09AE\u09DF'},calendar:{sameDay:'[\u0986\u099C] LT',nextDay:'[\u0986\u0997\u09BE\u09AE\u09C0\u0995\u09BE\u09B2] LT',nextWeek:'dddd, LT',lastDay:'[\u0997\u09A4\u0995\u09BE\u09B2] LT',lastWeek:'[\u0997\u09A4] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u09AA\u09B0\u09C7',past:'%s \u0986\u0997\u09C7',s:'\u0995\u09DF\u09C7\u0995 \u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1',m:'\u098F\u0995 \u09AE\u09BF\u09A8\u09BF\u099F',mm:'%d \u09AE\u09BF\u09A8\u09BF\u099F',h:'\u098F\u0995 \u0998\u09A8\u09CD\u099F\u09BE',hh:'%d \u0998\u09A8\u09CD\u099F\u09BE',d:'\u098F\u0995 \u09A6\u09BF\u09A8',dd:'%d \u09A6\u09BF\u09A8',M:'\u098F\u0995 \u09AE\u09BE\u09B8',MM:'%d \u09AE\u09BE\u09B8',y:'\u098F\u0995 \u09AC\u099B\u09B0',yy:'%d \u09AC\u099B\u09B0'},preparse:function(il){return il.replace(/[]/g,function(dl){return $i[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return Ki[dl]})},meridiemParse:/||||/,meridiemHour:function(il,dl){return 12===il&&(il=0),'\u09B0\u09BE\u09A4'===dl&&4<=il||'\u09A6\u09C1\u09AA\u09C1\u09B0'===dl&&5>il||'\u09AC\u09BF\u0995\u09BE\u09B2'===dl?il+12:il},meridiem:function(il){return 4>il?'\u09B0\u09BE\u09A4':10>il?'\u09B8\u0995\u09BE\u09B2':17>il?'\u09A6\u09C1\u09AA\u09C1\u09B0':20>il?'\u09AC\u09BF\u0995\u09BE\u09B2':'\u09B0\u09BE\u09A4'},week:{dow:0,doy:6}});var Xi={0:'\u0F20',1:'\u0F21',2:'\u0F22',3:'\u0F23',4:'\u0F24',5:'\u0F25',6:'\u0F26',7:'\u0F27',8:'\u0F28',9:'\u0F29'},Qi={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('bo',{months:'\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F51\u0F44\u0F0B\u0F54\u0F7C_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F42\u0F49\u0F72\u0F66\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F42\u0F66\u0F74\u0F58\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F5E\u0F72\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F63\u0F94\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F51\u0FB2\u0F74\u0F42\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F51\u0F74\u0F53\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F62\u0F92\u0FB1\u0F51\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F51\u0F42\u0F74\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F45\u0F74\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F45\u0F74\u0F0B\u0F42\u0F45\u0F72\u0F42\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F45\u0F74\u0F0B\u0F42\u0F49\u0F72\u0F66\u0F0B\u0F54'.split('_'),monthsShort:'\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F51\u0F44\u0F0B\u0F54\u0F7C_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F42\u0F49\u0F72\u0F66\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F42\u0F66\u0F74\u0F58\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F5E\u0F72\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F63\u0F94\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F51\u0FB2\u0F74\u0F42\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F51\u0F74\u0F53\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F62\u0F92\u0FB1\u0F51\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F51\u0F42\u0F74\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F45\u0F74\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F45\u0F74\u0F0B\u0F42\u0F45\u0F72\u0F42\u0F0B\u0F54_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F56\u0F45\u0F74\u0F0B\u0F42\u0F49\u0F72\u0F66\u0F0B\u0F54'.split('_'),weekdays:'\u0F42\u0F5F\u0F60\u0F0B\u0F49\u0F72\u0F0B\u0F58\u0F0B_\u0F42\u0F5F\u0F60\u0F0B\u0F5F\u0FB3\u0F0B\u0F56\u0F0B_\u0F42\u0F5F\u0F60\u0F0B\u0F58\u0F72\u0F42\u0F0B\u0F51\u0F58\u0F62\u0F0B_\u0F42\u0F5F\u0F60\u0F0B\u0F63\u0FB7\u0F42\u0F0B\u0F54\u0F0B_\u0F42\u0F5F\u0F60\u0F0B\u0F55\u0F74\u0F62\u0F0B\u0F56\u0F74_\u0F42\u0F5F\u0F60\u0F0B\u0F54\u0F0B\u0F66\u0F44\u0F66\u0F0B_\u0F42\u0F5F\u0F60\u0F0B\u0F66\u0FA4\u0F7A\u0F53\u0F0B\u0F54\u0F0B'.split('_'),weekdaysShort:'\u0F49\u0F72\u0F0B\u0F58\u0F0B_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B_\u0F58\u0F72\u0F42\u0F0B\u0F51\u0F58\u0F62\u0F0B_\u0F63\u0FB7\u0F42\u0F0B\u0F54\u0F0B_\u0F55\u0F74\u0F62\u0F0B\u0F56\u0F74_\u0F54\u0F0B\u0F66\u0F44\u0F66\u0F0B_\u0F66\u0FA4\u0F7A\u0F53\u0F0B\u0F54\u0F0B'.split('_'),weekdaysMin:'\u0F49\u0F72\u0F0B\u0F58\u0F0B_\u0F5F\u0FB3\u0F0B\u0F56\u0F0B_\u0F58\u0F72\u0F42\u0F0B\u0F51\u0F58\u0F62\u0F0B_\u0F63\u0FB7\u0F42\u0F0B\u0F54\u0F0B_\u0F55\u0F74\u0F62\u0F0B\u0F56\u0F74_\u0F54\u0F0B\u0F66\u0F44\u0F66\u0F0B_\u0F66\u0FA4\u0F7A\u0F53\u0F0B\u0F54\u0F0B'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm',LLLL:'dddd, D MMMM YYYY, A h:mm'},calendar:{sameDay:'[\u0F51\u0F72\u0F0B\u0F62\u0F72\u0F44] LT',nextDay:'[\u0F66\u0F44\u0F0B\u0F49\u0F72\u0F53] LT',nextWeek:'[\u0F56\u0F51\u0F74\u0F53\u0F0B\u0F55\u0FB2\u0F42\u0F0B\u0F62\u0F97\u0F7A\u0F66\u0F0B\u0F58], LT',lastDay:'[\u0F41\u0F0B\u0F66\u0F44] LT',lastWeek:'[\u0F56\u0F51\u0F74\u0F53\u0F0B\u0F55\u0FB2\u0F42\u0F0B\u0F58\u0F50\u0F60\u0F0B\u0F58] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u0F63\u0F0B',past:'%s \u0F66\u0F94\u0F53\u0F0B\u0F63',s:'\u0F63\u0F58\u0F0B\u0F66\u0F44',m:'\u0F66\u0F90\u0F62\u0F0B\u0F58\u0F0B\u0F42\u0F45\u0F72\u0F42',mm:'%d \u0F66\u0F90\u0F62\u0F0B\u0F58',h:'\u0F46\u0F74\u0F0B\u0F5A\u0F7C\u0F51\u0F0B\u0F42\u0F45\u0F72\u0F42',hh:'%d \u0F46\u0F74\u0F0B\u0F5A\u0F7C\u0F51',d:'\u0F49\u0F72\u0F53\u0F0B\u0F42\u0F45\u0F72\u0F42',dd:'%d \u0F49\u0F72\u0F53\u0F0B',M:'\u0F5F\u0FB3\u0F0B\u0F56\u0F0B\u0F42\u0F45\u0F72\u0F42',MM:'%d \u0F5F\u0FB3\u0F0B\u0F56',y:'\u0F63\u0F7C\u0F0B\u0F42\u0F45\u0F72\u0F42',yy:'%d \u0F63\u0F7C'},preparse:function(il){return il.replace(/[]/g,function(dl){return Qi[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return Xi[dl]})},meridiemParse:/||||/,meridiemHour:function(il,dl){return 12===il&&(il=0),'\u0F58\u0F5A\u0F53\u0F0B\u0F58\u0F7C'===dl&&4<=il||'\u0F49\u0F72\u0F53\u0F0B\u0F42\u0F74\u0F44'===dl&&5>il||'\u0F51\u0F42\u0F7C\u0F44\u0F0B\u0F51\u0F42'===dl?il+12:il},meridiem:function(il){return 4>il?'\u0F58\u0F5A\u0F53\u0F0B\u0F58\u0F7C':10>il?'\u0F5E\u0F7C\u0F42\u0F66\u0F0B\u0F40\u0F66':17>il?'\u0F49\u0F72\u0F53\u0F0B\u0F42\u0F74\u0F44':20>il?'\u0F51\u0F42\u0F7C\u0F44\u0F0B\u0F51\u0F42':'\u0F58\u0F5A\u0F53\u0F0B\u0F58\u0F7C'},week:{dow:0,doy:6}}),R.defineLocale('br',{months:'Genver_C\'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu'.split('_'),monthsShort:'Gen_C\'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker'.split('_'),weekdays:'Sul_Lun_Meurzh_Merc\'her_Yaou_Gwener_Sadorn'.split('_'),weekdaysShort:'Sul_Lun_Meu_Mer_Yao_Gwe_Sad'.split('_'),weekdaysMin:'Su_Lu_Me_Mer_Ya_Gw_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'h[e]mm A',LTS:'h[e]mm:ss A',L:'DD/MM/YYYY',LL:'D [a viz] MMMM YYYY',LLL:'D [a viz] MMMM YYYY h[e]mm A',LLLL:'dddd, D [a viz] MMMM YYYY h[e]mm A'},calendar:{sameDay:'[Hiziv da] LT',nextDay:'[Warc\'hoazh da] LT',nextWeek:'dddd [da] LT',lastDay:'[Dec\'h da] LT',lastWeek:'dddd [paset da] LT',sameElse:'L'},relativeTime:{future:'a-benn %s',past:'%s \'zo',s:'un nebeud segondenno\xF9',m:'ur vunutenn',mm:To,h:'un eur',hh:'%d eur',d:'un devezh',dd:To,M:'ur miz',MM:To,y:'ur bloaz',yy:function(il){switch(Mo(il)){case 1:case 3:case 4:case 5:case 9:return il+' bloaz';default:return il+' vloaz';}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(il){var dl=1===il?'a\xF1':'vet';return il+dl},week:{dow:1,doy:4}}),R.defineLocale('bs',{months:'januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar'.split('_'),monthsShort:'jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.'.split('_'),monthsParseExact:!0,weekdays:'nedjelja_ponedjeljak_utorak_srijeda_\u010Detvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sri._\u010Det._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_\u010De_pe_su'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedjelju] [u] LT';case 3:return'[u] [srijedu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[ju\u010Der u] LT',lastWeek:function(){switch(this.day()){case 0:case 3:return'[pro\u0161lu] dddd [u] LT';case 6:return'[pro\u0161le] [subote] [u] LT';case 1:case 2:case 4:case 5:return'[pro\u0161li] dddd [u] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'prije %s',s:'par sekundi',m:Eo,mm:Eo,h:Eo,hh:Eo,d:'dan',dd:Eo,M:'mjesec',MM:Eo,y:'godinu',yy:Eo},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}}),R.defineLocale('ca',{months:{standalone:'gener_febrer_mar\xE7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre'.split('_'),format:'de gener_de febrer_de mar\xE7_d\'abril_de maig_de juny_de juliol_d\'agost_de setembre_d\'octubre_de novembre_de desembre'.split('_'),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:'gen._febr._mar\xE7_abr._maig_juny_jul._ag._set._oct._nov._des.'.split('_'),monthsParseExact:!0,weekdays:'diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte'.split('_'),weekdaysShort:'dg._dl._dt._dc._dj._dv._ds.'.split('_'),weekdaysMin:'Dg_Dl_Dt_Dc_Dj_Dv_Ds'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'[el] D MMMM [de] YYYY',ll:'D MMM YYYY',LLL:'[el] D MMMM [de] YYYY [a les] H:mm',lll:'D MMM YYYY, H:mm',LLLL:'[el] dddd D MMMM [de] YYYY [a les] H:mm',llll:'ddd D MMM YYYY, H:mm'},calendar:{sameDay:function(){return'[avui a '+(1===this.hours()?'la':'les')+'] LT'},nextDay:function(){return'[dem\xE0 a '+(1===this.hours()?'la':'les')+'] LT'},nextWeek:function(){return'dddd [a '+(1===this.hours()?'la':'les')+'] LT'},lastDay:function(){return'[ahir a '+(1===this.hours()?'la':'les')+'] LT'},lastWeek:function(){return'[el] dddd [passat a '+(1===this.hours()?'la':'les')+'] LT'},sameElse:'L'},relativeTime:{future:'d\'aqu\xED %s',past:'fa %s',s:'uns segons',m:'un minut',mm:'%d minuts',h:'una hora',hh:'%d hores',d:'un dia',dd:'%d dies',M:'un mes',MM:'%d mesos',y:'un any',yy:'%d anys'},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(il,dl){var ll=1===il?'r':2===il?'n':3===il?'r':4===il?'t':'\xE8';return('w'===dl||'W'===dl)&&(ll='a'),il+ll},week:{dow:1,doy:4}});var Zi='leden_\xFAnor_b\u0159ezen_duben_kv\u011Bten_\u010Derven_\u010Dervenec_srpen_z\xE1\u0159\xED_\u0159\xEDjen_listopad_prosinec'.split('_'),ed='led_\xFAno_b\u0159e_dub_kv\u011B_\u010Dvn_\u010Dvc_srp_z\xE1\u0159_\u0159\xEDj_lis_pro'.split('_');R.defineLocale('cs',{months:Zi,monthsShort:ed,monthsParse:function(il,dl){var _l=[],ll;for(ll=0;12>ll;ll++)_l[ll]=new RegExp('^'+il[ll]+'$|^'+dl[ll]+'$','i');return _l}(Zi,ed),shortMonthsParse:function(il){var ll=[],dl;for(dl=0;12>dl;dl++)ll[dl]=new RegExp('^'+il[dl]+'$','i');return ll}(ed),longMonthsParse:function(il){var ll=[],dl;for(dl=0;12>dl;dl++)ll[dl]=new RegExp('^'+il[dl]+'$','i');return ll}(Zi),weekdays:'ned\u011Ble_pond\u011Bl\xED_\xFAter\xFD_st\u0159eda_\u010Dtvrtek_p\xE1tek_sobota'.split('_'),weekdaysShort:'ne_po_\xFAt_st_\u010Dt_p\xE1_so'.split('_'),weekdaysMin:'ne_po_\xFAt_st_\u010Dt_p\xE1_so'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd D. MMMM YYYY H:mm',l:'D. M. YYYY'},calendar:{sameDay:'[dnes v] LT',nextDay:'[z\xEDtra v] LT',nextWeek:function(){switch(this.day()){case 0:return'[v ned\u011Bli v] LT';case 1:case 2:return'[v] dddd [v] LT';case 3:return'[ve st\u0159edu v] LT';case 4:return'[ve \u010Dtvrtek v] LT';case 5:return'[v p\xE1tek v] LT';case 6:return'[v sobotu v] LT';}},lastDay:'[v\u010Dera v] LT',lastWeek:function(){switch(this.day()){case 0:return'[minulou ned\u011Bli v] LT';case 1:case 2:return'[minul\xE9] dddd [v] LT';case 3:return'[minulou st\u0159edu v] LT';case 4:case 5:return'[minul\xFD] dddd [v] LT';case 6:return'[minulou sobotu v] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'p\u0159ed %s',s:bo,m:bo,mm:bo,h:bo,hh:bo,d:bo,dd:bo,M:bo,MM:bo,y:bo,yy:bo},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('cv',{months:'\u043A\u04D1\u0440\u043B\u0430\u0447_\u043D\u0430\u0440\u04D1\u0441_\u043F\u0443\u0448_\u0430\u043A\u0430_\u043C\u0430\u0439_\u04AB\u04D7\u0440\u0442\u043C\u0435_\u0443\u0442\u04D1_\u04AB\u0443\u0440\u043B\u0430_\u0430\u0432\u04D1\u043D_\u044E\u043F\u0430_\u0447\u04F3\u043A_\u0440\u0430\u0448\u0442\u0430\u0432'.split('_'),monthsShort:'\u043A\u04D1\u0440_\u043D\u0430\u0440_\u043F\u0443\u0448_\u0430\u043A\u0430_\u043C\u0430\u0439_\u04AB\u04D7\u0440_\u0443\u0442\u04D1_\u04AB\u0443\u0440_\u0430\u0432\u043D_\u044E\u043F\u0430_\u0447\u04F3\u043A_\u0440\u0430\u0448'.split('_'),weekdays:'\u0432\u044B\u0440\u0441\u0430\u0440\u043D\u0438\u043A\u0443\u043D_\u0442\u0443\u043D\u0442\u0438\u043A\u0443\u043D_\u044B\u0442\u043B\u0430\u0440\u0438\u043A\u0443\u043D_\u044E\u043D\u043A\u0443\u043D_\u043A\u04D7\u04AB\u043D\u0435\u0440\u043D\u0438\u043A\u0443\u043D_\u044D\u0440\u043D\u0435\u043A\u0443\u043D_\u0448\u04D1\u043C\u0430\u0442\u043A\u0443\u043D'.split('_'),weekdaysShort:'\u0432\u044B\u0440_\u0442\u0443\u043D_\u044B\u0442\u043B_\u044E\u043D_\u043A\u04D7\u04AB_\u044D\u0440\u043D_\u0448\u04D1\u043C'.split('_'),weekdaysMin:'\u0432\u0440_\u0442\u043D_\u044B\u0442_\u044E\u043D_\u043A\u04AB_\u044D\u0440_\u0448\u043C'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'YYYY [\u04AB\u0443\u043B\u0445\u0438] MMMM [\u0443\u0439\u04D1\u0445\u04D7\u043D] D[-\u043C\u04D7\u0448\u04D7]',LLL:'YYYY [\u04AB\u0443\u043B\u0445\u0438] MMMM [\u0443\u0439\u04D1\u0445\u04D7\u043D] D[-\u043C\u04D7\u0448\u04D7], HH:mm',LLLL:'dddd, YYYY [\u04AB\u0443\u043B\u0445\u0438] MMMM [\u0443\u0439\u04D1\u0445\u04D7\u043D] D[-\u043C\u04D7\u0448\u04D7], HH:mm'},calendar:{sameDay:'[\u041F\u0430\u044F\u043D] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]',nextDay:'[\u042B\u0440\u0430\u043D] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]',lastDay:'[\u04D6\u043D\u0435\u0440] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]',nextWeek:'[\u04AA\u0438\u0442\u0435\u0441] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]',lastWeek:'[\u0418\u0440\u0442\u043D\u04D7] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]',sameElse:'L'},relativeTime:{future:function(il){var dl=/$/i.exec(il)?'\u0440\u0435\u043D':/$/i.exec(il)?'\u0442\u0430\u043D':'\u0440\u0430\u043D';return il+dl},past:'%s \u043A\u0430\u044F\u043B\u043B\u0430',s:'\u043F\u04D7\u0440-\u0438\u043A \u04AB\u0435\u043A\u043A\u0443\u043D\u0442',m:'\u043F\u04D7\u0440 \u043C\u0438\u043D\u0443\u0442',mm:'%d \u043C\u0438\u043D\u0443\u0442',h:'\u043F\u04D7\u0440 \u0441\u0435\u0445\u0435\u0442',hh:'%d \u0441\u0435\u0445\u0435\u0442',d:'\u043F\u04D7\u0440 \u043A\u0443\u043D',dd:'%d \u043A\u0443\u043D',M:'\u043F\u04D7\u0440 \u0443\u0439\u04D1\u0445',MM:'%d \u0443\u0439\u04D1\u0445',y:'\u043F\u04D7\u0440 \u04AB\u0443\u043B',yy:'%d \u04AB\u0443\u043B'},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:'%d-\u043C\u04D7\u0448',week:{dow:1,doy:7}}),R.defineLocale('cy',{months:'Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr'.split('_'),monthsShort:'Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag'.split('_'),weekdays:'Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn'.split('_'),weekdaysShort:'Sul_Llun_Maw_Mer_Iau_Gwe_Sad'.split('_'),weekdaysMin:'Su_Ll_Ma_Me_Ia_Gw_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Heddiw am] LT',nextDay:'[Yfory am] LT',nextWeek:'dddd [am] LT',lastDay:'[Ddoe am] LT',lastWeek:'dddd [diwethaf am] LT',sameElse:'L'},relativeTime:{future:'mewn %s',past:'%s yn \xF4l',s:'ychydig eiliadau',m:'munud',mm:'%d munud',h:'awr',hh:'%d awr',d:'diwrnod',dd:'%d diwrnod',M:'mis',MM:'%d mis',y:'blwyddyn',yy:'%d flynedd'},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(il){var dl=il,ll='';return 20<dl?40===dl||50===dl||60===dl||80===dl||100===dl?ll='fed':ll='ain':0<dl&&(ll=['','af','il','ydd','ydd','ed','ed','ed','fed','fed','fed','eg','fed','eg','eg','fed','eg','eg','fed','eg','fed'][dl]),il+ll},week:{dow:1,doy:4}}),R.defineLocale('da',{months:'januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december'.split('_'),monthsShort:'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),weekdays:'s\xF8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xF8rdag'.split('_'),weekdaysShort:'s\xF8n_man_tir_ons_tor_fre_l\xF8r'.split('_'),weekdaysMin:'s\xF8_ma_ti_on_to_fr_l\xF8'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd [d.] D. MMMM YYYY [kl.] HH:mm'},calendar:{sameDay:'[i dag kl.] LT',nextDay:'[i morgen kl.] LT',nextWeek:'p\xE5 dddd [kl.] LT',lastDay:'[i g\xE5r kl.] LT',lastWeek:'[i] dddd[s kl.] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'%s siden',s:'f\xE5 sekunder',m:'et minut',mm:'%d minutter',h:'en time',hh:'%d timer',d:'en dag',dd:'%d dage',M:'en m\xE5ned',MM:'%d m\xE5neder',y:'et \xE5r',yy:'%d \xE5r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('de-at',{months:'J\xE4nner_Februar_M\xE4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'J\xE4n._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),monthsParseExact:!0,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',m:Do,mm:'%d Minuten',h:Do,hh:'%d Stunden',d:Do,dd:Do,M:Do,MM:Do,y:Do,yy:Do},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('de-ch',{months:'Januar_Februar_M\xE4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Febr._M\xE4rz_April_Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.'.split('_'),monthsParseExact:!0,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH.mm',LLLL:'dddd, D. MMMM YYYY HH.mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',m:Ao,mm:'%d Minuten',h:Ao,hh:'%d Stunden',d:Ao,dd:Ao,M:Ao,MM:Ao,y:Ao,yy:Ao},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('de',{months:'Januar_Februar_M\xE4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),monthsParseExact:!0,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',m:Io,mm:'%d Minuten',h:Io,hh:'%d Stunden',d:Io,dd:Io,M:Io,MM:Io,y:Io,yy:Io},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var td=['\u0796\u07AC\u0782\u07AA\u0787\u07A6\u0783\u07A9','\u078A\u07AC\u0784\u07B0\u0783\u07AA\u0787\u07A6\u0783\u07A9','\u0789\u07A7\u0783\u07A8\u0797\u07AA','\u0787\u07AD\u0795\u07B0\u0783\u07A9\u078D\u07AA','\u0789\u07AD','\u0796\u07AB\u0782\u07B0','\u0796\u07AA\u078D\u07A6\u0787\u07A8','\u0787\u07AF\u078E\u07A6\u0790\u07B0\u0793\u07AA','\u0790\u07AC\u0795\u07B0\u0793\u07AC\u0789\u07B0\u0784\u07A6\u0783\u07AA','\u0787\u07AE\u0786\u07B0\u0793\u07AF\u0784\u07A6\u0783\u07AA','\u0782\u07AE\u0788\u07AC\u0789\u07B0\u0784\u07A6\u0783\u07AA','\u0791\u07A8\u0790\u07AC\u0789\u07B0\u0784\u07A6\u0783\u07AA'],nd=['\u0787\u07A7\u078B\u07A8\u0787\u07B0\u078C\u07A6','\u0780\u07AF\u0789\u07A6','\u0787\u07A6\u0782\u07B0\u078E\u07A7\u0783\u07A6','\u0784\u07AA\u078B\u07A6','\u0784\u07AA\u0783\u07A7\u0790\u07B0\u078A\u07A6\u078C\u07A8','\u0780\u07AA\u0786\u07AA\u0783\u07AA','\u0780\u07AE\u0782\u07A8\u0780\u07A8\u0783\u07AA'];R.defineLocale('dv',{months:td,monthsShort:td,weekdays:nd,weekdaysShort:nd,weekdaysMin:'\u0787\u07A7\u078B\u07A8_\u0780\u07AF\u0789\u07A6_\u0787\u07A6\u0782\u07B0_\u0784\u07AA\u078B\u07A6_\u0784\u07AA\u0783\u07A7_\u0780\u07AA\u0786\u07AA_\u0780\u07AE\u0782\u07A8'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'D/M/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0789\u078A'===il},meridiem:function(il){return 12>il?'\u0789\u0786':'\u0789\u078A'},calendar:{sameDay:'[\u0789\u07A8\u0787\u07A6\u078B\u07AA] LT',nextDay:'[\u0789\u07A7\u078B\u07A6\u0789\u07A7] LT',nextWeek:'dddd LT',lastDay:'[\u0787\u07A8\u0787\u07B0\u0794\u07AC] LT',lastWeek:'[\u078A\u07A7\u0787\u07A8\u078C\u07AA\u0788\u07A8] dddd LT',sameElse:'L'},relativeTime:{future:'\u078C\u07AC\u0783\u07AD\u078E\u07A6\u0787\u07A8 %s',past:'\u0786\u07AA\u0783\u07A8\u0782\u07B0 %s',s:'\u0790\u07A8\u0786\u07AA\u0782\u07B0\u078C\u07AA\u0786\u07AE\u0785\u07AC\u0787\u07B0',m:'\u0789\u07A8\u0782\u07A8\u0793\u07AC\u0787\u07B0',mm:'\u0789\u07A8\u0782\u07A8\u0793\u07AA %d',h:'\u078E\u07A6\u0791\u07A8\u0787\u07A8\u0783\u07AC\u0787\u07B0',hh:'\u078E\u07A6\u0791\u07A8\u0787\u07A8\u0783\u07AA %d',d:'\u078B\u07AA\u0788\u07A6\u0780\u07AC\u0787\u07B0',dd:'\u078B\u07AA\u0788\u07A6\u0790\u07B0 %d',M:'\u0789\u07A6\u0780\u07AC\u0787\u07B0',MM:'\u0789\u07A6\u0790\u07B0 %d',y:'\u0787\u07A6\u0780\u07A6\u0783\u07AC\u0787\u07B0',yy:'\u0787\u07A6\u0780\u07A6\u0783\u07AA %d'},preparse:function(il){return il.replace(//g,',')},postformat:function(il){return il.replace(/,/g,'\u060C')},week:{dow:7,doy:12}}),R.defineLocale('el',{monthsNominativeEl:'\u0399\u03B1\u03BD\u03BF\u03C5\u03AC\u03C1\u03B9\u03BF\u03C2_\u03A6\u03B5\u03B2\u03C1\u03BF\u03C5\u03AC\u03C1\u03B9\u03BF\u03C2_\u039C\u03AC\u03C1\u03C4\u03B9\u03BF\u03C2_\u0391\u03C0\u03C1\u03AF\u03BB\u03B9\u03BF\u03C2_\u039C\u03AC\u03B9\u03BF\u03C2_\u0399\u03BF\u03CD\u03BD\u03B9\u03BF\u03C2_\u0399\u03BF\u03CD\u03BB\u03B9\u03BF\u03C2_\u0391\u03CD\u03B3\u03BF\u03C5\u03C3\u03C4\u03BF\u03C2_\u03A3\u03B5\u03C0\u03C4\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2_\u039F\u03BA\u03C4\u03CE\u03B2\u03C1\u03B9\u03BF\u03C2_\u039D\u03BF\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2_\u0394\u03B5\u03BA\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2'.split('_'),monthsGenitiveEl:'\u0399\u03B1\u03BD\u03BF\u03C5\u03B1\u03C1\u03AF\u03BF\u03C5_\u03A6\u03B5\u03B2\u03C1\u03BF\u03C5\u03B1\u03C1\u03AF\u03BF\u03C5_\u039C\u03B1\u03C1\u03C4\u03AF\u03BF\u03C5_\u0391\u03C0\u03C1\u03B9\u03BB\u03AF\u03BF\u03C5_\u039C\u03B1\u0390\u03BF\u03C5_\u0399\u03BF\u03C5\u03BD\u03AF\u03BF\u03C5_\u0399\u03BF\u03C5\u03BB\u03AF\u03BF\u03C5_\u0391\u03C5\u03B3\u03BF\u03CD\u03C3\u03C4\u03BF\u03C5_\u03A3\u03B5\u03C0\u03C4\u03B5\u03BC\u03B2\u03C1\u03AF\u03BF\u03C5_\u039F\u03BA\u03C4\u03C9\u03B2\u03C1\u03AF\u03BF\u03C5_\u039D\u03BF\u03B5\u03BC\u03B2\u03C1\u03AF\u03BF\u03C5_\u0394\u03B5\u03BA\u03B5\u03BC\u03B2\u03C1\u03AF\u03BF\u03C5'.split('_'),months:function(il,dl){return il?/D/.test(dl.substring(0,dl.indexOf('MMMM')))?this._monthsGenitiveEl[il.month()]:this._monthsNominativeEl[il.month()]:this._monthsNominativeEl},monthsShort:'\u0399\u03B1\u03BD_\u03A6\u03B5\u03B2_\u039C\u03B1\u03C1_\u0391\u03C0\u03C1_\u039C\u03B1\u03CA_\u0399\u03BF\u03C5\u03BD_\u0399\u03BF\u03C5\u03BB_\u0391\u03C5\u03B3_\u03A3\u03B5\u03C0_\u039F\u03BA\u03C4_\u039D\u03BF\u03B5_\u0394\u03B5\u03BA'.split('_'),weekdays:'\u039A\u03C5\u03C1\u03B9\u03B1\u03BA\u03AE_\u0394\u03B5\u03C5\u03C4\u03AD\u03C1\u03B1_\u03A4\u03C1\u03AF\u03C4\u03B7_\u03A4\u03B5\u03C4\u03AC\u03C1\u03C4\u03B7_\u03A0\u03AD\u03BC\u03C0\u03C4\u03B7_\u03A0\u03B1\u03C1\u03B1\u03C3\u03BA\u03B5\u03C5\u03AE_\u03A3\u03AC\u03B2\u03B2\u03B1\u03C4\u03BF'.split('_'),weekdaysShort:'\u039A\u03C5\u03C1_\u0394\u03B5\u03C5_\u03A4\u03C1\u03B9_\u03A4\u03B5\u03C4_\u03A0\u03B5\u03BC_\u03A0\u03B1\u03C1_\u03A3\u03B1\u03B2'.split('_'),weekdaysMin:'\u039A\u03C5_\u0394\u03B5_\u03A4\u03C1_\u03A4\u03B5_\u03A0\u03B5_\u03A0\u03B1_\u03A3\u03B1'.split('_'),meridiem:function(il,dl,ll){return 11<il?ll?'\u03BC\u03BC':'\u039C\u039C':ll?'\u03C0\u03BC':'\u03A0\u039C'},isPM:function(il){return'\u03BC'===(il+'').toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendarEl:{sameDay:'[\u03A3\u03AE\u03BC\u03B5\u03C1\u03B1 {}] LT',nextDay:'[\u0391\u03CD\u03C1\u03B9\u03BF {}] LT',nextWeek:'dddd [{}] LT',lastDay:'[\u03A7\u03B8\u03B5\u03C2 {}] LT',lastWeek:function(){switch(this.day()){case 6:return'[\u03C4\u03BF \u03C0\u03C1\u03BF\u03B7\u03B3\u03BF\u03CD\u03BC\u03B5\u03BD\u03BF] dddd [{}] LT';default:return'[\u03C4\u03B7\u03BD \u03C0\u03C1\u03BF\u03B7\u03B3\u03BF\u03CD\u03BC\u03B5\u03BD\u03B7] dddd [{}] LT';}},sameElse:'L'},calendar:function(il,dl){var ll=this._calendarEl[il],_l=dl&&dl.hours();return pe(ll)&&(ll=ll.apply(dl)),ll.replace('{}',1==_l%12?'\u03C3\u03C4\u03B7':'\u03C3\u03C4\u03B9\u03C2')},relativeTime:{future:'\u03C3\u03B5 %s',past:'%s \u03C0\u03C1\u03B9\u03BD',s:'\u03BB\u03AF\u03B3\u03B1 \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1',m:'\u03AD\u03BD\u03B1 \u03BB\u03B5\u03C0\u03C4\u03CC',mm:'%d \u03BB\u03B5\u03C0\u03C4\u03AC',h:'\u03BC\u03AF\u03B1 \u03CE\u03C1\u03B1',hh:'%d \u03CE\u03C1\u03B5\u03C2',d:'\u03BC\u03AF\u03B1 \u03BC\u03AD\u03C1\u03B1',dd:'%d \u03BC\u03AD\u03C1\u03B5\u03C2',M:'\u03AD\u03BD\u03B1\u03C2 \u03BC\u03AE\u03BD\u03B1\u03C2',MM:'%d \u03BC\u03AE\u03BD\u03B5\u03C2',y:'\u03AD\u03BD\u03B1\u03C2 \u03C7\u03C1\u03CC\u03BD\u03BF\u03C2',yy:'%d \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\u03B7',week:{dow:1,doy:4}}),R.defineLocale('en-au',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('en-ca',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'YYYY-MM-DD',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll}}),R.defineLocale('en-gb',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('en-ie',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('en-nz',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('eo',{months:'januaro_februaro_marto_aprilo_majo_junio_julio_a\u016Dgusto_septembro_oktobro_novembro_decembro'.split('_'),monthsShort:'jan_feb_mar_apr_maj_jun_jul_a\u016Dg_sep_okt_nov_dec'.split('_'),weekdays:'diman\u0109o_lundo_mardo_merkredo_\u0135a\u016Ddo_vendredo_sabato'.split('_'),weekdaysShort:'dim_lun_mard_merk_\u0135a\u016D_ven_sab'.split('_'),weekdaysMin:'di_lu_ma_me_\u0135a_ve_sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D[-a de] MMMM, YYYY',LLL:'D[-a de] MMMM, YYYY HH:mm',LLLL:'dddd, [la] D[-a de] MMMM, YYYY HH:mm'},meridiemParse:/[ap]\.t\.m/i,isPM:function(il){return'p'===il.charAt(0).toLowerCase()},meridiem:function(il,dl,ll){return 11<il?ll?'p.t.m.':'P.T.M.':ll?'a.t.m.':'A.T.M.'},calendar:{sameDay:'[Hodia\u016D je] LT',nextDay:'[Morga\u016D je] LT',nextWeek:'dddd [je] LT',lastDay:'[Hiera\u016D je] LT',lastWeek:'[pasinta] dddd [je] LT',sameElse:'L'},relativeTime:{future:'post %s',past:'anta\u016D %s',s:'sekundoj',m:'minuto',mm:'%d minutoj',h:'horo',hh:'%d horoj',d:'tago',dd:'%d tagoj',M:'monato',MM:'%d monatoj',y:'jaro',yy:'%d jaroj'},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:'%da',week:{dow:1,doy:7}});var ad='ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),od='ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');R.defineLocale('es-do',{months:'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),monthsShort:function(il,dl){return il?/-MMM-/.test(dl)?od[il.month()]:ad[il.month()]:ad},monthsParseExact:!0,weekdays:'domingo_lunes_martes_mi\xE9rcoles_jueves_viernes_s\xE1bado'.split('_'),weekdaysShort:'dom._lun._mar._mi\xE9._jue._vie._s\xE1b.'.split('_'),weekdaysMin:'do_lu_ma_mi_ju_vi_s\xE1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY h:mm A',LLLL:'dddd, D [de] MMMM [de] YYYY h:mm A'},calendar:{sameDay:function(){return'[hoy a la'+(1===this.hours()?'':'s')+'] LT'},nextDay:function(){return'[ma\xF1ana a la'+(1===this.hours()?'':'s')+'] LT'},nextWeek:function(){return'dddd [a la'+(1===this.hours()?'':'s')+'] LT'},lastDay:function(){return'[ayer a la'+(1===this.hours()?'':'s')+'] LT'},lastWeek:function(){return'[el] dddd [pasado a la'+(1===this.hours()?'':'s')+'] LT'},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un d\xEDa',dd:'%d d\xEDas',M:'un mes',MM:'%d meses',y:'un a\xF1o',yy:'%d a\xF1os'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA',week:{dow:1,doy:4}});var rd='ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),sd='ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');R.defineLocale('es',{months:'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),monthsShort:function(il,dl){return il?/-MMM-/.test(dl)?sd[il.month()]:rd[il.month()]:rd},monthsParseExact:!0,weekdays:'domingo_lunes_martes_mi\xE9rcoles_jueves_viernes_s\xE1bado'.split('_'),weekdaysShort:'dom._lun._mar._mi\xE9._jue._vie._s\xE1b.'.split('_'),weekdaysMin:'do_lu_ma_mi_ju_vi_s\xE1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY H:mm',LLLL:'dddd, D [de] MMMM [de] YYYY H:mm'},calendar:{sameDay:function(){return'[hoy a la'+(1===this.hours()?'':'s')+'] LT'},nextDay:function(){return'[ma\xF1ana a la'+(1===this.hours()?'':'s')+'] LT'},nextWeek:function(){return'dddd [a la'+(1===this.hours()?'':'s')+'] LT'},lastDay:function(){return'[ayer a la'+(1===this.hours()?'':'s')+'] LT'},lastWeek:function(){return'[el] dddd [pasado a la'+(1===this.hours()?'':'s')+'] LT'},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un d\xEDa',dd:'%d d\xEDas',M:'un mes',MM:'%d meses',y:'un a\xF1o',yy:'%d a\xF1os'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA',week:{dow:1,doy:4}}),R.defineLocale('et',{months:'jaanuar_veebruar_m\xE4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember'.split('_'),monthsShort:'jaan_veebr_m\xE4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets'.split('_'),weekdays:'p\xFChap\xE4ev_esmasp\xE4ev_teisip\xE4ev_kolmap\xE4ev_neljap\xE4ev_reede_laup\xE4ev'.split('_'),weekdaysShort:'P_E_T_K_N_R_L'.split('_'),weekdaysMin:'P_E_T_K_N_R_L'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[T\xE4na,] LT',nextDay:'[Homme,] LT',nextWeek:'[J\xE4rgmine] dddd LT',lastDay:'[Eile,] LT',lastWeek:'[Eelmine] dddd LT',sameElse:'L'},relativeTime:{future:'%s p\xE4rast',past:'%s tagasi',s:Ro,m:Ro,mm:Ro,h:Ro,hh:Ro,d:Ro,dd:'%d p\xE4eva',M:Ro,MM:Ro,y:Ro,yy:Ro},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('eu',{months:'urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua'.split('_'),monthsShort:'urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.'.split('_'),monthsParseExact:!0,weekdays:'igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata'.split('_'),weekdaysShort:'ig._al._ar._az._og._ol._lr.'.split('_'),weekdaysMin:'ig_al_ar_az_og_ol_lr'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'YYYY[ko] MMMM[ren] D[a]',LLL:'YYYY[ko] MMMM[ren] D[a] HH:mm',LLLL:'dddd, YYYY[ko] MMMM[ren] D[a] HH:mm',l:'YYYY-M-D',ll:'YYYY[ko] MMM D[a]',lll:'YYYY[ko] MMM D[a] HH:mm',llll:'ddd, YYYY[ko] MMM D[a] HH:mm'},calendar:{sameDay:'[gaur] LT[etan]',nextDay:'[bihar] LT[etan]',nextWeek:'dddd LT[etan]',lastDay:'[atzo] LT[etan]',lastWeek:'[aurreko] dddd LT[etan]',sameElse:'L'},relativeTime:{future:'%s barru',past:'duela %s',s:'segundo batzuk',m:'minutu bat',mm:'%d minutu',h:'ordu bat',hh:'%d ordu',d:'egun bat',dd:'%d egun',M:'hilabete bat',MM:'%d hilabete',y:'urte bat',yy:'%d urte'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});var dd={0:'\u06F0',1:'\u06F1',2:'\u06F2',3:'\u06F3',4:'\u06F4',5:'\u06F5',6:'\u06F6',7:'\u06F7',8:'\u06F8',9:'\u06F9'},ld={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('fa',{months:'\u0698\u0627\u0646\u0648\u06CC\u0647_\u0641\u0648\u0631\u06CC\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06CC\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06CC\u0647_\u0627\u0648\u062A_\u0633\u067E\u062A\u0627\u0645\u0628\u0631_\u0627\u06A9\u062A\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062F\u0633\u0627\u0645\u0628\u0631'.split('_'),monthsShort:'\u0698\u0627\u0646\u0648\u06CC\u0647_\u0641\u0648\u0631\u06CC\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06CC\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06CC\u0647_\u0627\u0648\u062A_\u0633\u067E\u062A\u0627\u0645\u0628\u0631_\u0627\u06A9\u062A\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062F\u0633\u0627\u0645\u0628\u0631'.split('_'),weekdays:'\u06CC\u06A9\u200C\u0634\u0646\u0628\u0647_\u062F\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200C\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067E\u0646\u062C\u200C\u0634\u0646\u0628\u0647_\u062C\u0645\u0639\u0647_\u0634\u0646\u0628\u0647'.split('_'),weekdaysShort:'\u06CC\u06A9\u200C\u0634\u0646\u0628\u0647_\u062F\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200C\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067E\u0646\u062C\u200C\u0634\u0646\u0628\u0647_\u062C\u0645\u0639\u0647_\u0634\u0646\u0628\u0647'.split('_'),weekdaysMin:'\u06CC_\u062F_\u0633_\u0686_\u067E_\u062C_\u0634'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},meridiemParse:/  |  /,isPM:function(il){return /  /.test(il)},meridiem:function(il){return 12>il?'\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631':'\u0628\u0639\u062F \u0627\u0632 \u0638\u0647\u0631'},calendar:{sameDay:'[\u0627\u0645\u0631\u0648\u0632 \u0633\u0627\u0639\u062A] LT',nextDay:'[\u0641\u0631\u062F\u0627 \u0633\u0627\u0639\u062A] LT',nextWeek:'dddd [\u0633\u0627\u0639\u062A] LT',lastDay:'[\u062F\u06CC\u0631\u0648\u0632 \u0633\u0627\u0639\u062A] LT',lastWeek:'dddd [\u067E\u06CC\u0634] [\u0633\u0627\u0639\u062A] LT',sameElse:'L'},relativeTime:{future:'\u062F\u0631 %s',past:'%s \u067E\u06CC\u0634',s:'\u0686\u0646\u062F \u062B\u0627\u0646\u06CC\u0647',m:'\u06CC\u06A9 \u062F\u0642\u06CC\u0642\u0647',mm:'%d \u062F\u0642\u06CC\u0642\u0647',h:'\u06CC\u06A9 \u0633\u0627\u0639\u062A',hh:'%d \u0633\u0627\u0639\u062A',d:'\u06CC\u06A9 \u0631\u0648\u0632',dd:'%d \u0631\u0648\u0632',M:'\u06CC\u06A9 \u0645\u0627\u0647',MM:'%d \u0645\u0627\u0647',y:'\u06CC\u06A9 \u0633\u0627\u0644',yy:'%d \u0633\u0627\u0644'},preparse:function(il){return il.replace(/[-]/g,function(dl){return ld[dl]}).replace(//g,',')},postformat:function(il){return il.replace(/\d/g,function(dl){return dd[dl]}).replace(/,/g,'\u060C')},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\u0645',week:{dow:6,doy:12}});var _d='nolla yksi kaksi kolme nelj\xE4 viisi kuusi seitsem\xE4n kahdeksan yhdeks\xE4n'.split(' '),ud=['nolla','yhden','kahden','kolmen','nelj\xE4n','viiden','kuuden',_d[7],_d[8],_d[9]];R.defineLocale('fi',{months:'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xE4kuu_hein\xE4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),monthsShort:'tammi_helmi_maalis_huhti_touko_kes\xE4_hein\xE4_elo_syys_loka_marras_joulu'.split('_'),weekdays:'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),weekdaysShort:'su_ma_ti_ke_to_pe_la'.split('_'),weekdaysMin:'su_ma_ti_ke_to_pe_la'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD.MM.YYYY',LL:'Do MMMM[ta] YYYY',LLL:'Do MMMM[ta] YYYY, [klo] HH.mm',LLLL:'dddd, Do MMMM[ta] YYYY, [klo] HH.mm',l:'D.M.YYYY',ll:'Do MMM YYYY',lll:'Do MMM YYYY, [klo] HH.mm',llll:'ddd, Do MMM YYYY, [klo] HH.mm'},calendar:{sameDay:'[t\xE4n\xE4\xE4n] [klo] LT',nextDay:'[huomenna] [klo] LT',nextWeek:'dddd [klo] LT',lastDay:'[eilen] [klo] LT',lastWeek:'[viime] dddd[na] [klo] LT',sameElse:'L'},relativeTime:{future:'%s p\xE4\xE4st\xE4',past:'%s sitten',s:wo,m:wo,mm:wo,h:wo,hh:wo,d:wo,dd:wo,M:wo,MM:wo,y:wo,yy:wo},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('fo',{months:'januar_februar_mars_apr\xEDl_mai_juni_juli_august_september_oktober_november_desember'.split('_'),monthsShort:'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),weekdays:'sunnudagur_m\xE1nadagur_t\xFDsdagur_mikudagur_h\xF3sdagur_fr\xEDggjadagur_leygardagur'.split('_'),weekdaysShort:'sun_m\xE1n_t\xFDs_mik_h\xF3s_fr\xED_ley'.split('_'),weekdaysMin:'su_m\xE1_t\xFD_mi_h\xF3_fr_le'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D. MMMM, YYYY HH:mm'},calendar:{sameDay:'[\xCD dag kl.] LT',nextDay:'[\xCD morgin kl.] LT',nextWeek:'dddd [kl.] LT',lastDay:'[\xCD gj\xE1r kl.] LT',lastWeek:'[s\xED\xF0stu] dddd [kl] LT',sameElse:'L'},relativeTime:{future:'um %s',past:'%s s\xED\xF0ani',s:'f\xE1 sekund',m:'ein minutt',mm:'%d minuttir',h:'ein t\xEDmi',hh:'%d t\xEDmar',d:'ein dagur',dd:'%d dagar',M:'ein m\xE1na\xF0i',MM:'%d m\xE1na\xF0ir',y:'eitt \xE1r',yy:'%d \xE1r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('fr-ca',{months:'janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre'.split('_'),monthsShort:'janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.'.split('_'),monthsParseExact:!0,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\u2019hui \xE0] LT',nextDay:'[Demain \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[Hier \xE0] LT',lastWeek:'dddd [dernier \xE0] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(il,dl){switch(dl){default:case'M':case'Q':case'D':case'DDD':case'd':return il+(1===il?'er':'e');case'w':case'W':return il+(1===il?'re':'e');}}}),R.defineLocale('fr-ch',{months:'janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre'.split('_'),monthsShort:'janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.'.split('_'),monthsParseExact:!0,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\u2019hui \xE0] LT',nextDay:'[Demain \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[Hier \xE0] LT',lastWeek:'dddd [dernier \xE0] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(il,dl){switch(dl){default:case'M':case'Q':case'D':case'DDD':case'd':return il+(1===il?'er':'e');case'w':case'W':return il+(1===il?'re':'e');}},week:{dow:1,doy:4}}),R.defineLocale('fr',{months:'janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre'.split('_'),monthsShort:'janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.'.split('_'),monthsParseExact:!0,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\u2019hui \xE0] LT',nextDay:'[Demain \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[Hier \xE0] LT',lastWeek:'dddd [dernier \xE0] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(il,dl){switch(dl){case'D':return il+(1===il?'er':'');default:case'M':case'Q':case'DDD':case'd':return il+(1===il?'er':'e');case'w':case'W':return il+(1===il?'re':'e');}},week:{dow:1,doy:4}});var cd='jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.'.split('_'),md='jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_');R.defineLocale('fy',{months:'jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber'.split('_'),monthsShort:function(il,dl){return il?/-MMM-/.test(dl)?md[il.month()]:cd[il.month()]:cd},monthsParseExact:!0,weekdays:'snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon'.split('_'),weekdaysShort:'si._mo._ti._wo._to._fr._so.'.split('_'),weekdaysMin:'Si_Mo_Ti_Wo_To_Fr_So'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[hjoed om] LT',nextDay:'[moarn om] LT',nextWeek:'dddd [om] LT',lastDay:'[juster om] LT',lastWeek:'[\xF4fr\xFBne] dddd [om] LT',sameElse:'L'},relativeTime:{future:'oer %s',past:'%s lyn',s:'in pear sekonden',m:'ien min\xFAt',mm:'%d minuten',h:'ien oere',hh:'%d oeren',d:'ien dei',dd:'%d dagen',M:'ien moanne',MM:'%d moannen',y:'ien jier',yy:'%d jierren'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(il){return il+(1===il||8===il||20<=il?'ste':'de')},week:{dow:1,doy:4}});R.defineLocale('gd',{months:['Am Faoilleach','An Gearran','Am M\xE0rt','An Giblean','An C\xE8itean','An t-\xD2gmhios','An t-Iuchar','An L\xF9nastal','An t-Sultain','An D\xE0mhair','An t-Samhain','An D\xF9bhlachd'],monthsShort:['Faoi','Gear','M\xE0rt','Gibl','C\xE8it','\xD2gmh','Iuch','L\xF9n','Sult','D\xE0mh','Samh','D\xF9bh'],monthsParseExact:!0,weekdays:['Did\xF2mhnaich','Diluain','Dim\xE0irt','Diciadain','Diardaoin','Dihaoine','Disathairne'],weekdaysShort:['Did','Dil','Dim','Dic','Dia','Dih','Dis'],weekdaysMin:['D\xF2','Lu','M\xE0','Ci','Ar','Ha','Sa'],longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[An-diugh aig] LT',nextDay:'[A-m\xE0ireach aig] LT',nextWeek:'dddd [aig] LT',lastDay:'[An-d\xE8 aig] LT',lastWeek:'dddd [seo chaidh] [aig] LT',sameElse:'L'},relativeTime:{future:'ann an %s',past:'bho chionn %s',s:'beagan diogan',m:'mionaid',mm:'%d mionaidean',h:'uair',hh:'%d uairean',d:'latha',dd:'%d latha',M:'m\xECos',MM:'%d m\xECosan',y:'bliadhna',yy:'%d bliadhna'},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(il){var dl=1===il?'d':2==il%10?'na':'mh';return il+dl},week:{dow:1,doy:4}}),R.defineLocale('gl',{months:'xaneiro_febreiro_marzo_abril_maio_xu\xF1o_xullo_agosto_setembro_outubro_novembro_decembro'.split('_'),monthsShort:'xan._feb._mar._abr._mai._xu\xF1._xul._ago._set._out._nov._dec.'.split('_'),monthsParseExact:!0,weekdays:'domingo_luns_martes_m\xE9rcores_xoves_venres_s\xE1bado'.split('_'),weekdaysShort:'dom._lun._mar._m\xE9r._xov._ven._s\xE1b.'.split('_'),weekdaysMin:'do_lu_ma_m\xE9_xo_ve_s\xE1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY H:mm',LLLL:'dddd, D [de] MMMM [de] YYYY H:mm'},calendar:{sameDay:function(){return'[hoxe '+(1===this.hours()?'\xE1':'\xE1s')+'] LT'},nextDay:function(){return'[ma\xF1\xE1 '+(1===this.hours()?'\xE1':'\xE1s')+'] LT'},nextWeek:function(){return'dddd ['+(1===this.hours()?'a':'\xE1s')+'] LT'},lastDay:function(){return'[onte '+(1===this.hours()?'a':'\xE1')+'] LT'},lastWeek:function(){return'[o] dddd [pasado '+(1===this.hours()?'a':'\xE1s')+'] LT'},sameElse:'L'},relativeTime:{future:function(il){return 0===il.indexOf('un')?'n'+il:'en '+il},past:'hai %s',s:'uns segundos',m:'un minuto',mm:'%d minutos',h:'unha hora',hh:'%d horas',d:'un d\xEDa',dd:'%d d\xEDas',M:'un mes',MM:'%d meses',y:'un ano',yy:'%d anos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA',week:{dow:1,doy:4}}),R.defineLocale('gom-latn',{months:'Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr'.split('_'),monthsShort:'Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.'.split('_'),monthsParseExact:!0,weekdays:'Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son\'var'.split('_'),weekdaysShort:'Ait._Som._Mon._Bud._Bre._Suk._Son.'.split('_'),weekdaysMin:'Ai_Sm_Mo_Bu_Br_Su_Sn'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'A h:mm [vazta]',LTS:'A h:mm:ss [vazta]',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY A h:mm [vazta]',LLLL:'dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]',llll:'ddd, D MMM YYYY, A h:mm [vazta]'},calendar:{sameDay:'[Aiz] LT',nextDay:'[Faleam] LT',nextWeek:'[Ieta to] dddd[,] LT',lastDay:'[Kal] LT',lastWeek:'[Fatlo] dddd[,] LT',sameElse:'L'},relativeTime:{future:'%s',past:'%s adim',s:Yo,m:Yo,mm:Yo,h:Yo,hh:Yo,d:Yo,dd:Yo,M:Yo,MM:Yo,y:Yo,yy:Yo},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(il,dl){switch(dl){case'D':return il+'er';default:case'M':case'Q':case'DDD':case'd':case'w':case'W':return il;}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(il,dl){return(12===il&&(il=0),'rati'===dl)?4>il?il:il+12:'sokalli'===dl?il:'donparam'===dl?12<il?il:il+12:'sanje'===dl?il+12:void 0},meridiem:function(il){return 4>il?'rati':12>il?'sokalli':16>il?'donparam':20>il?'sanje':'rati'}}),R.defineLocale('he',{months:'\u05D9\u05E0\u05D5\u05D0\u05E8_\u05E4\u05D1\u05E8\u05D5\u05D0\u05E8_\u05DE\u05E8\u05E5_\u05D0\u05E4\u05E8\u05D9\u05DC_\u05DE\u05D0\u05D9_\u05D9\u05D5\u05E0\u05D9_\u05D9\u05D5\u05DC\u05D9_\u05D0\u05D5\u05D2\u05D5\u05E1\u05D8_\u05E1\u05E4\u05D8\u05DE\u05D1\u05E8_\u05D0\u05D5\u05E7\u05D8\u05D5\u05D1\u05E8_\u05E0\u05D5\u05D1\u05DE\u05D1\u05E8_\u05D3\u05E6\u05DE\u05D1\u05E8'.split('_'),monthsShort:'\u05D9\u05E0\u05D5\u05F3_\u05E4\u05D1\u05E8\u05F3_\u05DE\u05E8\u05E5_\u05D0\u05E4\u05E8\u05F3_\u05DE\u05D0\u05D9_\u05D9\u05D5\u05E0\u05D9_\u05D9\u05D5\u05DC\u05D9_\u05D0\u05D5\u05D2\u05F3_\u05E1\u05E4\u05D8\u05F3_\u05D0\u05D5\u05E7\u05F3_\u05E0\u05D5\u05D1\u05F3_\u05D3\u05E6\u05DE\u05F3'.split('_'),weekdays:'\u05E8\u05D0\u05E9\u05D5\u05DF_\u05E9\u05E0\u05D9_\u05E9\u05DC\u05D9\u05E9\u05D9_\u05E8\u05D1\u05D9\u05E2\u05D9_\u05D7\u05DE\u05D9\u05E9\u05D9_\u05E9\u05D9\u05E9\u05D9_\u05E9\u05D1\u05EA'.split('_'),weekdaysShort:'\u05D0\u05F3_\u05D1\u05F3_\u05D2\u05F3_\u05D3\u05F3_\u05D4\u05F3_\u05D5\u05F3_\u05E9\u05F3'.split('_'),weekdaysMin:'\u05D0_\u05D1_\u05D2_\u05D3_\u05D4_\u05D5_\u05E9'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D [\u05D1]MMMM YYYY',LLL:'D [\u05D1]MMMM YYYY HH:mm',LLLL:'dddd, D [\u05D1]MMMM YYYY HH:mm',l:'D/M/YYYY',ll:'D MMM YYYY',lll:'D MMM YYYY HH:mm',llll:'ddd, D MMM YYYY HH:mm'},calendar:{sameDay:'[\u05D4\u05D9\u05D5\u05DD \u05D1\u05BE]LT',nextDay:'[\u05DE\u05D7\u05E8 \u05D1\u05BE]LT',nextWeek:'dddd [\u05D1\u05E9\u05E2\u05D4] LT',lastDay:'[\u05D0\u05EA\u05DE\u05D5\u05DC \u05D1\u05BE]LT',lastWeek:'[\u05D1\u05D9\u05D5\u05DD] dddd [\u05D4\u05D0\u05D7\u05E8\u05D5\u05DF \u05D1\u05E9\u05E2\u05D4] LT',sameElse:'L'},relativeTime:{future:'\u05D1\u05E2\u05D5\u05D3 %s',past:'\u05DC\u05E4\u05E0\u05D9 %s',s:'\u05DE\u05E1\u05E4\u05E8 \u05E9\u05E0\u05D9\u05D5\u05EA',m:'\u05D3\u05E7\u05D4',mm:'%d \u05D3\u05E7\u05D5\u05EA',h:'\u05E9\u05E2\u05D4',hh:function(il){return 2===il?'\u05E9\u05E2\u05EA\u05D9\u05D9\u05DD':il+' \u05E9\u05E2\u05D5\u05EA'},d:'\u05D9\u05D5\u05DD',dd:function(il){return 2===il?'\u05D9\u05D5\u05DE\u05D9\u05D9\u05DD':il+' \u05D9\u05DE\u05D9\u05DD'},M:'\u05D7\u05D5\u05D3\u05E9',MM:function(il){return 2===il?'\u05D7\u05D5\u05D3\u05E9\u05D9\u05D9\u05DD':il+' \u05D7\u05D5\u05D3\u05E9\u05D9\u05DD'},y:'\u05E9\u05E0\u05D4',yy:function(il){return 2===il?'\u05E9\u05E0\u05EA\u05D9\u05D9\u05DD':0==il%10&&10!==il?il+' \u05E9\u05E0\u05D4':il+' \u05E9\u05E0\u05D9\u05DD'}},meridiemParse:/"|"| | | ||/i,isPM:function(il){return /^("| |)$/.test(il)},meridiem:function(il,dl,ll){return 5>il?'\u05DC\u05E4\u05E0\u05D5\u05EA \u05D1\u05D5\u05E7\u05E8':10>il?'\u05D1\u05D1\u05D5\u05E7\u05E8':12>il?ll?'\u05DC\u05E4\u05E0\u05D4"\u05E6':'\u05DC\u05E4\u05E0\u05D9 \u05D4\u05E6\u05D4\u05E8\u05D9\u05D9\u05DD':18>il?ll?'\u05D0\u05D7\u05D4"\u05E6':'\u05D0\u05D7\u05E8\u05D9 \u05D4\u05E6\u05D4\u05E8\u05D9\u05D9\u05DD':'\u05D1\u05E2\u05E8\u05D1'}});var Td={0:'\u0966',1:'\u0967',2:'\u0968',3:'\u0969',4:'\u096A',5:'\u096B',6:'\u096C',7:'\u096D',8:'\u096E',9:'\u096F'},Cd={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('hi',{months:'\u091C\u0928\u0935\u0930\u0940_\u092B\u093C\u0930\u0935\u0930\u0940_\u092E\u093E\u0930\u094D\u091A_\u0905\u092A\u094D\u0930\u0948\u0932_\u092E\u0908_\u091C\u0942\u0928_\u091C\u0941\u0932\u093E\u0908_\u0905\u0917\u0938\u094D\u0924_\u0938\u093F\u0924\u092E\u094D\u092C\u0930_\u0905\u0915\u094D\u091F\u0942\u092C\u0930_\u0928\u0935\u092E\u094D\u092C\u0930_\u0926\u093F\u0938\u092E\u094D\u092C\u0930'.split('_'),monthsShort:'\u091C\u0928._\u092B\u093C\u0930._\u092E\u093E\u0930\u094D\u091A_\u0905\u092A\u094D\u0930\u0948._\u092E\u0908_\u091C\u0942\u0928_\u091C\u0941\u0932._\u0905\u0917._\u0938\u093F\u0924._\u0905\u0915\u094D\u091F\u0942._\u0928\u0935._\u0926\u093F\u0938.'.split('_'),monthsParseExact:!0,weekdays:'\u0930\u0935\u093F\u0935\u093E\u0930_\u0938\u094B\u092E\u0935\u093E\u0930_\u092E\u0902\u0917\u0932\u0935\u093E\u0930_\u092C\u0941\u0927\u0935\u093E\u0930_\u0917\u0941\u0930\u0942\u0935\u093E\u0930_\u0936\u0941\u0915\u094D\u0930\u0935\u093E\u0930_\u0936\u0928\u093F\u0935\u093E\u0930'.split('_'),weekdaysShort:'\u0930\u0935\u093F_\u0938\u094B\u092E_\u092E\u0902\u0917\u0932_\u092C\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094D\u0930_\u0936\u0928\u093F'.split('_'),weekdaysMin:'\u0930_\u0938\u094B_\u092E\u0902_\u092C\u0941_\u0917\u0941_\u0936\u0941_\u0936'.split('_'),longDateFormat:{LT:'A h:mm \u092C\u091C\u0947',LTS:'A h:mm:ss \u092C\u091C\u0947',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm \u092C\u091C\u0947',LLLL:'dddd, D MMMM YYYY, A h:mm \u092C\u091C\u0947'},calendar:{sameDay:'[\u0906\u091C] LT',nextDay:'[\u0915\u0932] LT',nextWeek:'dddd, LT',lastDay:'[\u0915\u0932] LT',lastWeek:'[\u092A\u093F\u091B\u0932\u0947] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u092E\u0947\u0902',past:'%s \u092A\u0939\u0932\u0947',s:'\u0915\u0941\u091B \u0939\u0940 \u0915\u094D\u0937\u0923',m:'\u090F\u0915 \u092E\u093F\u0928\u091F',mm:'%d \u092E\u093F\u0928\u091F',h:'\u090F\u0915 \u0918\u0902\u091F\u093E',hh:'%d \u0918\u0902\u091F\u0947',d:'\u090F\u0915 \u0926\u093F\u0928',dd:'%d \u0926\u093F\u0928',M:'\u090F\u0915 \u092E\u0939\u0940\u0928\u0947',MM:'%d \u092E\u0939\u0940\u0928\u0947',y:'\u090F\u0915 \u0935\u0930\u094D\u0937',yy:'%d \u0935\u0930\u094D\u0937'},preparse:function(il){return il.replace(/[]/g,function(dl){return Cd[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return Td[dl]})},meridiemParse:/|||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u0930\u093E\u0924'===dl)?4>il?il:il+12:'\u0938\u0941\u092C\u0939'===dl?il:'\u0926\u094B\u092A\u0939\u0930'===dl?10<=il?il:il+12:'\u0936\u093E\u092E'===dl?il+12:void 0},meridiem:function(il){return 4>il?'\u0930\u093E\u0924':10>il?'\u0938\u0941\u092C\u0939':17>il?'\u0926\u094B\u092A\u0939\u0930':20>il?'\u0936\u093E\u092E':'\u0930\u093E\u0924'},week:{dow:0,doy:6}}),R.defineLocale('hr',{months:{format:'sije\u010Dnja_velja\u010De_o\u017Eujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca'.split('_'),standalone:'sije\u010Danj_velja\u010Da_o\u017Eujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac'.split('_')},monthsShort:'sij._velj._o\u017Eu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.'.split('_'),monthsParseExact:!0,weekdays:'nedjelja_ponedjeljak_utorak_srijeda_\u010Detvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sri._\u010Det._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_\u010De_pe_su'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedjelju] [u] LT';case 3:return'[u] [srijedu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[ju\u010Der u] LT',lastWeek:function(){switch(this.day()){case 0:case 3:return'[pro\u0161lu] dddd [u] LT';case 6:return'[pro\u0161le] [subote] [u] LT';case 1:case 2:case 4:case 5:return'[pro\u0161li] dddd [u] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'prije %s',s:'par sekundi',m:Oo,mm:Oo,h:Oo,hh:Oo,d:'dan',dd:Oo,M:'mjesec',MM:Oo,y:'godinu',yy:Oo},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});var Md='vas\xE1rnap h\xE9tf\u0151n kedden szerd\xE1n cs\xFCt\xF6rt\xF6k\xF6n p\xE9nteken szombaton'.split(' ');R.defineLocale('hu',{months:'janu\xE1r_febru\xE1r_m\xE1rcius_\xE1prilis_m\xE1jus_j\xFAnius_j\xFAlius_augusztus_szeptember_okt\xF3ber_november_december'.split('_'),monthsShort:'jan_feb_m\xE1rc_\xE1pr_m\xE1j_j\xFAn_j\xFAl_aug_szept_okt_nov_dec'.split('_'),weekdays:'vas\xE1rnap_h\xE9tf\u0151_kedd_szerda_cs\xFCt\xF6rt\xF6k_p\xE9ntek_szombat'.split('_'),weekdaysShort:'vas_h\xE9t_kedd_sze_cs\xFCt_p\xE9n_szo'.split('_'),weekdaysMin:'v_h_k_sze_cs_p_szo'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'YYYY.MM.DD.',LL:'YYYY. MMMM D.',LLL:'YYYY. MMMM D. H:mm',LLLL:'YYYY. MMMM D., dddd H:mm'},meridiemParse:/de|du/i,isPM:function(il){return'u'===il.charAt(1).toLowerCase()},meridiem:function(il,dl,ll){return 12>il?!0===ll?'de':'DE':!0===ll?'du':'DU'},calendar:{sameDay:'[ma] LT[-kor]',nextDay:'[holnap] LT[-kor]',nextWeek:function(){return Po.call(this,!0)},lastDay:'[tegnap] LT[-kor]',lastWeek:function(){return Po.call(this,!1)},sameElse:'L'},relativeTime:{future:'%s m\xFAlva',past:'%s',s:No,m:No,mm:No,h:No,hh:No,d:No,dd:No,M:No,MM:No,y:No,yy:No},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('hy-am',{months:{format:'\u0570\u0578\u0582\u0576\u057E\u0561\u0580\u056B_\u0583\u0565\u057F\u0580\u057E\u0561\u0580\u056B_\u0574\u0561\u0580\u057F\u056B_\u0561\u057A\u0580\u056B\u056C\u056B_\u0574\u0561\u0575\u056B\u057D\u056B_\u0570\u0578\u0582\u0576\u056B\u057D\u056B_\u0570\u0578\u0582\u056C\u056B\u057D\u056B_\u0585\u0563\u0578\u057D\u057F\u0578\u057D\u056B_\u057D\u0565\u057A\u057F\u0565\u0574\u0562\u0565\u0580\u056B_\u0570\u0578\u056F\u057F\u0565\u0574\u0562\u0565\u0580\u056B_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580\u056B_\u0564\u0565\u056F\u057F\u0565\u0574\u0562\u0565\u0580\u056B'.split('_'),standalone:'\u0570\u0578\u0582\u0576\u057E\u0561\u0580_\u0583\u0565\u057F\u0580\u057E\u0561\u0580_\u0574\u0561\u0580\u057F_\u0561\u057A\u0580\u056B\u056C_\u0574\u0561\u0575\u056B\u057D_\u0570\u0578\u0582\u0576\u056B\u057D_\u0570\u0578\u0582\u056C\u056B\u057D_\u0585\u0563\u0578\u057D\u057F\u0578\u057D_\u057D\u0565\u057A\u057F\u0565\u0574\u0562\u0565\u0580_\u0570\u0578\u056F\u057F\u0565\u0574\u0562\u0565\u0580_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580_\u0564\u0565\u056F\u057F\u0565\u0574\u0562\u0565\u0580'.split('_')},monthsShort:'\u0570\u0576\u057E_\u0583\u057F\u0580_\u0574\u0580\u057F_\u0561\u057A\u0580_\u0574\u0575\u057D_\u0570\u0576\u057D_\u0570\u056C\u057D_\u0585\u0563\u057D_\u057D\u057A\u057F_\u0570\u056F\u057F_\u0576\u0574\u0562_\u0564\u056F\u057F'.split('_'),weekdays:'\u056F\u056B\u0580\u0561\u056F\u056B_\u0565\u0580\u056F\u0578\u0582\u0577\u0561\u0562\u0569\u056B_\u0565\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056B_\u0579\u0578\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056B_\u0570\u056B\u0576\u0563\u0577\u0561\u0562\u0569\u056B_\u0578\u0582\u0580\u0562\u0561\u0569_\u0577\u0561\u0562\u0561\u0569'.split('_'),weekdaysShort:'\u056F\u0580\u056F_\u0565\u0580\u056F_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569'.split('_'),weekdaysMin:'\u056F\u0580\u056F_\u0565\u0580\u056F_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY \u0569.',LLL:'D MMMM YYYY \u0569., HH:mm',LLLL:'dddd, D MMMM YYYY \u0569., HH:mm'},calendar:{sameDay:'[\u0561\u0575\u057D\u0585\u0580] LT',nextDay:'[\u057E\u0561\u0572\u0568] LT',lastDay:'[\u0565\u0580\u0565\u056F] LT',nextWeek:function(){return'dddd [\u0585\u0580\u0568 \u056A\u0561\u0574\u0568] LT'},lastWeek:function(){return'[\u0561\u0576\u0581\u0561\u056E] dddd [\u0585\u0580\u0568 \u056A\u0561\u0574\u0568] LT'},sameElse:'L'},relativeTime:{future:'%s \u0570\u0565\u057F\u0578',past:'%s \u0561\u057C\u0561\u057B',s:'\u0574\u056B \u0584\u0561\u0576\u056B \u057E\u0561\u0575\u0580\u056F\u0575\u0561\u0576',m:'\u0580\u0578\u057A\u0565',mm:'%d \u0580\u0578\u057A\u0565',h:'\u056A\u0561\u0574',hh:'%d \u056A\u0561\u0574',d:'\u0585\u0580',dd:'%d \u0585\u0580',M:'\u0561\u0574\u056B\u057D',MM:'%d \u0561\u0574\u056B\u057D',y:'\u057F\u0561\u0580\u056B',yy:'%d \u057F\u0561\u0580\u056B'},meridiemParse:/|||/,isPM:function(il){return /^(|)$/.test(il)},meridiem:function(il){return 4>il?'\u0563\u056B\u0577\u0565\u0580\u057E\u0561':12>il?'\u0561\u057C\u0561\u057E\u0578\u057F\u057E\u0561':17>il?'\u0581\u0565\u0580\u0565\u056F\u057E\u0561':'\u0565\u0580\u0565\u056F\u0578\u0575\u0561\u0576'},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(il,dl){return'DDD'===dl||'w'===dl||'W'===dl||'DDDo'===dl?1===il?il+'-\u056B\u0576':il+'-\u0580\u0564':il},week:{dow:1,doy:7}}),R.defineLocale('id',{months:'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des'.split('_'),weekdays:'Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu'.split('_'),weekdaysShort:'Min_Sen_Sel_Rab_Kam_Jum_Sab'.split('_'),weekdaysMin:'Mg_Sn_Sl_Rb_Km_Jm_Sb'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(il,dl){return(12===il&&(il=0),'pagi'===dl)?il:'siang'===dl?11<=il?il:il+12:'sore'===dl||'malam'===dl?il+12:void 0},meridiem:function(il){return 11>il?'pagi':15>il?'siang':19>il?'sore':'malam'},calendar:{sameDay:'[Hari ini pukul] LT',nextDay:'[Besok pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kemarin pukul] LT',lastWeek:'dddd [lalu pukul] LT',sameElse:'L'},relativeTime:{future:'dalam %s',past:'%s yang lalu',s:'beberapa detik',m:'semenit',mm:'%d menit',h:'sejam',hh:'%d jam',d:'sehari',dd:'%d hari',M:'sebulan',MM:'%d bulan',y:'setahun',yy:'%d tahun'},week:{dow:1,doy:7}}),R.defineLocale('is',{months:'jan\xFAar_febr\xFAar_mars_apr\xEDl_ma\xED_j\xFAn\xED_j\xFAl\xED_\xE1g\xFAst_september_okt\xF3ber_n\xF3vember_desember'.split('_'),monthsShort:'jan_feb_mar_apr_ma\xED_j\xFAn_j\xFAl_\xE1g\xFA_sep_okt_n\xF3v_des'.split('_'),weekdays:'sunnudagur_m\xE1nudagur_\xFEri\xF0judagur_mi\xF0vikudagur_fimmtudagur_f\xF6studagur_laugardagur'.split('_'),weekdaysShort:'sun_m\xE1n_\xFEri_mi\xF0_fim_f\xF6s_lau'.split('_'),weekdaysMin:'Su_M\xE1_\xDEr_Mi_Fi_F\xF6_La'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY [kl.] H:mm',LLLL:'dddd, D. MMMM YYYY [kl.] H:mm'},calendar:{sameDay:'[\xED dag kl.] LT',nextDay:'[\xE1 morgun kl.] LT',nextWeek:'dddd [kl.] LT',lastDay:'[\xED g\xE6r kl.] LT',lastWeek:'[s\xED\xF0asta] dddd [kl.] LT',sameElse:'L'},relativeTime:{future:'eftir %s',past:'fyrir %s s\xED\xF0an',s:Ho,m:Ho,mm:Ho,h:'klukkustund',hh:Ho,d:Ho,dd:Ho,M:Ho,MM:Ho,y:Ho,yy:Ho},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('it',{months:'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),monthsShort:'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),weekdays:'domenica_luned\xEC_marted\xEC_mercoled\xEC_gioved\xEC_venerd\xEC_sabato'.split('_'),weekdaysShort:'dom_lun_mar_mer_gio_ven_sab'.split('_'),weekdaysMin:'do_lu_ma_me_gi_ve_sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Oggi alle] LT',nextDay:'[Domani alle] LT',nextWeek:'dddd [alle] LT',lastDay:'[Ieri alle] LT',lastWeek:function(){switch(this.day()){case 0:return'[la scorsa] dddd [alle] LT';default:return'[lo scorso] dddd [alle] LT';}},sameElse:'L'},relativeTime:{future:function(il){return(/^[0-9].+$/.test(il)?'tra':'in')+' '+il},past:'%s fa',s:'alcuni secondi',m:'un minuto',mm:'%d minuti',h:'un\'ora',hh:'%d ore',d:'un giorno',dd:'%d giorni',M:'un mese',MM:'%d mesi',y:'un anno',yy:'%d anni'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA',week:{dow:1,doy:4}}),R.defineLocale('ja',{months:'1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708'.split('_'),monthsShort:'1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708'.split('_'),weekdays:'\u65E5\u66DC\u65E5_\u6708\u66DC\u65E5_\u706B\u66DC\u65E5_\u6C34\u66DC\u65E5_\u6728\u66DC\u65E5_\u91D1\u66DC\u65E5_\u571F\u66DC\u65E5'.split('_'),weekdaysShort:'\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F'.split('_'),weekdaysMin:'\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY/MM/DD',LL:'YYYY\u5E74M\u6708D\u65E5',LLL:'YYYY\u5E74M\u6708D\u65E5 HH:mm',LLLL:'YYYY\u5E74M\u6708D\u65E5 HH:mm dddd',l:'YYYY/MM/DD',ll:'YYYY\u5E74M\u6708D\u65E5',lll:'YYYY\u5E74M\u6708D\u65E5 HH:mm',llll:'YYYY\u5E74M\u6708D\u65E5 HH:mm dddd'},meridiemParse:/|/i,isPM:function(il){return'\u5348\u5F8C'===il},meridiem:function(il){return 12>il?'\u5348\u524D':'\u5348\u5F8C'},calendar:{sameDay:'[\u4ECA\u65E5] LT',nextDay:'[\u660E\u65E5] LT',nextWeek:'[\u6765\u9031]dddd LT',lastDay:'[\u6628\u65E5] LT',lastWeek:'[\u524D\u9031]dddd LT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(il,dl){return'd'===dl||'D'===dl||'DDD'===dl?il+'\u65E5':il},relativeTime:{future:'%s\u5F8C',past:'%s\u524D',s:'\u6570\u79D2',m:'1\u5206',mm:'%d\u5206',h:'1\u6642\u9593',hh:'%d\u6642\u9593',d:'1\u65E5',dd:'%d\u65E5',M:'1\u30F6\u6708',MM:'%d\u30F6\u6708',y:'1\u5E74',yy:'%d\u5E74'}}),R.defineLocale('jv',{months:'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des'.split('_'),weekdays:'Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu'.split('_'),weekdaysShort:'Min_Sen_Sel_Reb_Kem_Jem_Sep'.split('_'),weekdaysMin:'Mg_Sn_Sl_Rb_Km_Jm_Sp'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(il,dl){return(12===il&&(il=0),'enjing'===dl)?il:'siyang'===dl?11<=il?il:il+12:'sonten'===dl||'ndalu'===dl?il+12:void 0},meridiem:function(il){return 11>il?'enjing':15>il?'siyang':19>il?'sonten':'ndalu'},calendar:{sameDay:'[Dinten puniko pukul] LT',nextDay:'[Mbenjang pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kala wingi pukul] LT',lastWeek:'dddd [kepengker pukul] LT',sameElse:'L'},relativeTime:{future:'wonten ing %s',past:'%s ingkang kepengker',s:'sawetawis detik',m:'setunggal menit',mm:'%d menit',h:'setunggal jam',hh:'%d jam',d:'sedinten',dd:'%d dinten',M:'sewulan',MM:'%d wulan',y:'setaun',yy:'%d taun'},week:{dow:1,doy:7}}),R.defineLocale('ka',{months:{standalone:'\u10D8\u10D0\u10DC\u10D5\u10D0\u10E0\u10D8_\u10D7\u10D4\u10D1\u10D4\u10E0\u10D5\u10D0\u10DA\u10D8_\u10DB\u10D0\u10E0\u10E2\u10D8_\u10D0\u10DE\u10E0\u10D8\u10DA\u10D8_\u10DB\u10D0\u10D8\u10E1\u10D8_\u10D8\u10D5\u10DC\u10D8\u10E1\u10D8_\u10D8\u10D5\u10DA\u10D8\u10E1\u10D8_\u10D0\u10D2\u10D5\u10D8\u10E1\u10E2\u10DD_\u10E1\u10D4\u10E5\u10E2\u10D4\u10DB\u10D1\u10D4\u10E0\u10D8_\u10DD\u10E5\u10E2\u10DD\u10DB\u10D1\u10D4\u10E0\u10D8_\u10DC\u10DD\u10D4\u10DB\u10D1\u10D4\u10E0\u10D8_\u10D3\u10D4\u10D9\u10D4\u10DB\u10D1\u10D4\u10E0\u10D8'.split('_'),format:'\u10D8\u10D0\u10DC\u10D5\u10D0\u10E0\u10E1_\u10D7\u10D4\u10D1\u10D4\u10E0\u10D5\u10D0\u10DA\u10E1_\u10DB\u10D0\u10E0\u10E2\u10E1_\u10D0\u10DE\u10E0\u10D8\u10DA\u10D8\u10E1_\u10DB\u10D0\u10D8\u10E1\u10E1_\u10D8\u10D5\u10DC\u10D8\u10E1\u10E1_\u10D8\u10D5\u10DA\u10D8\u10E1\u10E1_\u10D0\u10D2\u10D5\u10D8\u10E1\u10E2\u10E1_\u10E1\u10D4\u10E5\u10E2\u10D4\u10DB\u10D1\u10D4\u10E0\u10E1_\u10DD\u10E5\u10E2\u10DD\u10DB\u10D1\u10D4\u10E0\u10E1_\u10DC\u10DD\u10D4\u10DB\u10D1\u10D4\u10E0\u10E1_\u10D3\u10D4\u10D9\u10D4\u10DB\u10D1\u10D4\u10E0\u10E1'.split('_')},monthsShort:'\u10D8\u10D0\u10DC_\u10D7\u10D4\u10D1_\u10DB\u10D0\u10E0_\u10D0\u10DE\u10E0_\u10DB\u10D0\u10D8_\u10D8\u10D5\u10DC_\u10D8\u10D5\u10DA_\u10D0\u10D2\u10D5_\u10E1\u10D4\u10E5_\u10DD\u10E5\u10E2_\u10DC\u10DD\u10D4_\u10D3\u10D4\u10D9'.split('_'),weekdays:{standalone:'\u10D9\u10D5\u10D8\u10E0\u10D0_\u10DD\u10E0\u10E8\u10D0\u10D1\u10D0\u10D7\u10D8_\u10E1\u10D0\u10DB\u10E8\u10D0\u10D1\u10D0\u10D7\u10D8_\u10DD\u10D7\u10EE\u10E8\u10D0\u10D1\u10D0\u10D7\u10D8_\u10EE\u10E3\u10D7\u10E8\u10D0\u10D1\u10D0\u10D7\u10D8_\u10DE\u10D0\u10E0\u10D0\u10E1\u10D9\u10D4\u10D5\u10D8_\u10E8\u10D0\u10D1\u10D0\u10D7\u10D8'.split('_'),format:'\u10D9\u10D5\u10D8\u10E0\u10D0\u10E1_\u10DD\u10E0\u10E8\u10D0\u10D1\u10D0\u10D7\u10E1_\u10E1\u10D0\u10DB\u10E8\u10D0\u10D1\u10D0\u10D7\u10E1_\u10DD\u10D7\u10EE\u10E8\u10D0\u10D1\u10D0\u10D7\u10E1_\u10EE\u10E3\u10D7\u10E8\u10D0\u10D1\u10D0\u10D7\u10E1_\u10DE\u10D0\u10E0\u10D0\u10E1\u10D9\u10D4\u10D5\u10E1_\u10E8\u10D0\u10D1\u10D0\u10D7\u10E1'.split('_'),isFormat:/(|)/},weekdaysShort:'\u10D9\u10D5\u10D8_\u10DD\u10E0\u10E8_\u10E1\u10D0\u10DB_\u10DD\u10D7\u10EE_\u10EE\u10E3\u10D7_\u10DE\u10D0\u10E0_\u10E8\u10D0\u10D1'.split('_'),weekdaysMin:'\u10D9\u10D5_\u10DD\u10E0_\u10E1\u10D0_\u10DD\u10D7_\u10EE\u10E3_\u10DE\u10D0_\u10E8\u10D0'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[\u10D3\u10E6\u10D4\u10E1] LT[-\u10D6\u10D4]',nextDay:'[\u10EE\u10D5\u10D0\u10DA] LT[-\u10D6\u10D4]',lastDay:'[\u10D2\u10E3\u10E8\u10D8\u10DC] LT[-\u10D6\u10D4]',nextWeek:'[\u10E8\u10D4\u10DB\u10D3\u10D4\u10D2] dddd LT[-\u10D6\u10D4]',lastWeek:'[\u10EC\u10D8\u10DC\u10D0] dddd LT-\u10D6\u10D4',sameElse:'L'},relativeTime:{future:function(il){return /(|||)/.test(il)?il.replace(/$/,'\u10E8\u10D8'):il+'\u10E8\u10D8'},past:function(il){return /(||||)/.test(il)?il.replace(/(|)$/,'\u10D8\u10E1 \u10E3\u10D9\u10D0\u10DC')://.test(il)?il.replace(/$/,'\u10EC\u10DA\u10D8\u10E1 \u10E3\u10D9\u10D0\u10DC'):void 0},s:'\u10E0\u10D0\u10DB\u10D3\u10D4\u10DC\u10D8\u10DB\u10D4 \u10EC\u10D0\u10DB\u10D8',m:'\u10EC\u10E3\u10D7\u10D8',mm:'%d \u10EC\u10E3\u10D7\u10D8',h:'\u10E1\u10D0\u10D0\u10D7\u10D8',hh:'%d \u10E1\u10D0\u10D0\u10D7\u10D8',d:'\u10D3\u10E6\u10D4',dd:'%d \u10D3\u10E6\u10D4',M:'\u10D7\u10D5\u10D4',MM:'%d \u10D7\u10D5\u10D4',y:'\u10EC\u10D4\u10DA\u10D8',yy:'%d \u10EC\u10D4\u10DA\u10D8'},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(il){return 0===il?il:1===il?il+'-\u10DA\u10D8':20>il||100>=il&&0==il%20||0==il%100?'\u10DB\u10D4-'+il:il+'-\u10D4'},week:{dow:1,doy:7}});var vd={0:'-\u0448\u0456',1:'-\u0448\u0456',2:'-\u0448\u0456',3:'-\u0448\u0456',4:'-\u0448\u0456',5:'-\u0448\u0456',6:'-\u0448\u044B',7:'-\u0448\u0456',8:'-\u0448\u0456',9:'-\u0448\u044B',10:'-\u0448\u044B',20:'-\u0448\u044B',30:'-\u0448\u044B',40:'-\u0448\u044B',50:'-\u0448\u0456',60:'-\u0448\u044B',70:'-\u0448\u0456',80:'-\u0448\u0456',90:'-\u0448\u044B',100:'-\u0448\u0456'};R.defineLocale('kk',{months:'\u049B\u0430\u04A3\u0442\u0430\u0440_\u0430\u049B\u043F\u0430\u043D_\u043D\u0430\u0443\u0440\u044B\u0437_\u0441\u04D9\u0443\u0456\u0440_\u043C\u0430\u043C\u044B\u0440_\u043C\u0430\u0443\u0441\u044B\u043C_\u0448\u0456\u043B\u0434\u0435_\u0442\u0430\u043C\u044B\u0437_\u049B\u044B\u0440\u043A\u04AF\u0439\u0435\u043A_\u049B\u0430\u0437\u0430\u043D_\u049B\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043B\u0442\u043E\u049B\u0441\u0430\u043D'.split('_'),monthsShort:'\u049B\u0430\u04A3_\u0430\u049B\u043F_\u043D\u0430\u0443_\u0441\u04D9\u0443_\u043C\u0430\u043C_\u043C\u0430\u0443_\u0448\u0456\u043B_\u0442\u0430\u043C_\u049B\u044B\u0440_\u049B\u0430\u0437_\u049B\u0430\u0440_\u0436\u0435\u043B'.split('_'),weekdays:'\u0436\u0435\u043A\u0441\u0435\u043D\u0431\u0456_\u0434\u04AF\u0439\u0441\u0435\u043D\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043D\u0431\u0456_\u0441\u04D9\u0440\u0441\u0435\u043D\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043D\u0431\u0456_\u0436\u04B1\u043C\u0430_\u0441\u0435\u043D\u0431\u0456'.split('_'),weekdaysShort:'\u0436\u0435\u043A_\u0434\u04AF\u0439_\u0441\u0435\u0439_\u0441\u04D9\u0440_\u0431\u0435\u0439_\u0436\u04B1\u043C_\u0441\u0435\u043D'.split('_'),weekdaysMin:'\u0436\u043A_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043C_\u0441\u043D'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u0411\u04AF\u0433\u0456\u043D \u0441\u0430\u0493\u0430\u0442] LT',nextDay:'[\u0415\u0440\u0442\u0435\u04A3 \u0441\u0430\u0493\u0430\u0442] LT',nextWeek:'dddd [\u0441\u0430\u0493\u0430\u0442] LT',lastDay:'[\u041A\u0435\u0448\u0435 \u0441\u0430\u0493\u0430\u0442] LT',lastWeek:'[\u04E8\u0442\u043A\u0435\u043D \u0430\u043F\u0442\u0430\u043D\u044B\u04A3] dddd [\u0441\u0430\u0493\u0430\u0442] LT',sameElse:'L'},relativeTime:{future:'%s \u0456\u0448\u0456\u043D\u0434\u0435',past:'%s \u0431\u04B1\u0440\u044B\u043D',s:'\u0431\u0456\u0440\u043D\u0435\u0448\u0435 \u0441\u0435\u043A\u0443\u043D\u0434',m:'\u0431\u0456\u0440 \u043C\u0438\u043D\u0443\u0442',mm:'%d \u043C\u0438\u043D\u0443\u0442',h:'\u0431\u0456\u0440 \u0441\u0430\u0493\u0430\u0442',hh:'%d \u0441\u0430\u0493\u0430\u0442',d:'\u0431\u0456\u0440 \u043A\u04AF\u043D',dd:'%d \u043A\u04AF\u043D',M:'\u0431\u0456\u0440 \u0430\u0439',MM:'%d \u0430\u0439',y:'\u0431\u0456\u0440 \u0436\u044B\u043B',yy:'%d \u0436\u044B\u043B'},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(il){var ll=100<=il?100:null;return il+(vd[il]||vd[il%10]||vd[ll])},week:{dow:1,doy:7}}),R.defineLocale('km',{months:'\u1798\u1780\u179A\u17B6_\u1780\u17BB\u1798\u17D2\u1797\u17C8_\u1798\u17B8\u1793\u17B6_\u1798\u17C1\u179F\u17B6_\u17A7\u179F\u1797\u17B6_\u1798\u17B7\u1790\u17BB\u1793\u17B6_\u1780\u1780\u17D2\u1780\u178A\u17B6_\u179F\u17B8\u17A0\u17B6_\u1780\u1789\u17D2\u1789\u17B6_\u178F\u17BB\u179B\u17B6_\u179C\u17B7\u1785\u17D2\u1786\u17B7\u1780\u17B6_\u1792\u17D2\u1793\u17BC'.split('_'),monthsShort:'\u1798\u1780\u179A\u17B6_\u1780\u17BB\u1798\u17D2\u1797\u17C8_\u1798\u17B8\u1793\u17B6_\u1798\u17C1\u179F\u17B6_\u17A7\u179F\u1797\u17B6_\u1798\u17B7\u1790\u17BB\u1793\u17B6_\u1780\u1780\u17D2\u1780\u178A\u17B6_\u179F\u17B8\u17A0\u17B6_\u1780\u1789\u17D2\u1789\u17B6_\u178F\u17BB\u179B\u17B6_\u179C\u17B7\u1785\u17D2\u1786\u17B7\u1780\u17B6_\u1792\u17D2\u1793\u17BC'.split('_'),weekdays:'\u17A2\u17B6\u1791\u17B7\u178F\u17D2\u1799_\u1785\u17D0\u1793\u17D2\u1791_\u17A2\u1784\u17D2\u1782\u17B6\u179A_\u1796\u17BB\u1792_\u1796\u17D2\u179A\u17A0\u179F\u17D2\u1794\u178F\u17B7\u17CD_\u179F\u17BB\u1780\u17D2\u179A_\u179F\u17C5\u179A\u17CD'.split('_'),weekdaysShort:'\u17A2\u17B6\u1791\u17B7\u178F\u17D2\u1799_\u1785\u17D0\u1793\u17D2\u1791_\u17A2\u1784\u17D2\u1782\u17B6\u179A_\u1796\u17BB\u1792_\u1796\u17D2\u179A\u17A0\u179F\u17D2\u1794\u178F\u17B7\u17CD_\u179F\u17BB\u1780\u17D2\u179A_\u179F\u17C5\u179A\u17CD'.split('_'),weekdaysMin:'\u17A2\u17B6\u1791\u17B7\u178F\u17D2\u1799_\u1785\u17D0\u1793\u17D2\u1791_\u17A2\u1784\u17D2\u1782\u17B6\u179A_\u1796\u17BB\u1792_\u1796\u17D2\u179A\u17A0\u179F\u17D2\u1794\u178F\u17B7\u17CD_\u179F\u17BB\u1780\u17D2\u179A_\u179F\u17C5\u179A\u17CD'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u1790\u17D2\u1784\u17C3\u1793\u17C1\u17C7 \u1798\u17C9\u17C4\u1784] LT',nextDay:'[\u179F\u17D2\u17A2\u17C2\u1780 \u1798\u17C9\u17C4\u1784] LT',nextWeek:'dddd [\u1798\u17C9\u17C4\u1784] LT',lastDay:'[\u1798\u17D2\u179F\u17B7\u179B\u1798\u17B7\u1789 \u1798\u17C9\u17C4\u1784] LT',lastWeek:'dddd [\u179F\u1794\u17D2\u178F\u17B6\u17A0\u17CD\u1798\u17BB\u1793] [\u1798\u17C9\u17C4\u1784] LT',sameElse:'L'},relativeTime:{future:'%s\u1791\u17C0\u178F',past:'%s\u1798\u17BB\u1793',s:'\u1794\u17C9\u17BB\u1793\u17D2\u1798\u17B6\u1793\u179C\u17B7\u1793\u17B6\u1791\u17B8',m:'\u1798\u17BD\u1799\u1793\u17B6\u1791\u17B8',mm:'%d \u1793\u17B6\u1791\u17B8',h:'\u1798\u17BD\u1799\u1798\u17C9\u17C4\u1784',hh:'%d \u1798\u17C9\u17C4\u1784',d:'\u1798\u17BD\u1799\u1790\u17D2\u1784\u17C3',dd:'%d \u1790\u17D2\u1784\u17C3',M:'\u1798\u17BD\u1799\u1781\u17C2',MM:'%d \u1781\u17C2',y:'\u1798\u17BD\u1799\u1786\u17D2\u1793\u17B6\u17C6',yy:'%d \u1786\u17D2\u1793\u17B6\u17C6'},week:{dow:1,doy:4}});var Ld={0:'\u0CE6',1:'\u0CE7',2:'\u0CE8',3:'\u0CE9',4:'\u0CEA',5:'\u0CEB',6:'\u0CEC',7:'\u0CED',8:'\u0CEE',9:'\u0CEF'},Ed={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('kn',{months:'\u0C9C\u0CA8\u0CB5\u0CB0\u0CBF_\u0CAB\u0CC6\u0CAC\u0CCD\u0CB0\u0CB5\u0CB0\u0CBF_\u0CAE\u0CBE\u0CB0\u0CCD\u0C9A\u0CCD_\u0C8F\u0CAA\u0CCD\u0CB0\u0CBF\u0CB2\u0CCD_\u0CAE\u0CC6\u0CD5_\u0C9C\u0CC2\u0CA8\u0CCD_\u0C9C\u0CC1\u0CB2\u0CC6\u0CD6_\u0C86\u0C97\u0CB8\u0CCD\u0C9F\u0CCD_\u0CB8\u0CC6\u0CAA\u0CCD\u0C9F\u0CC6\u0C82\u0CAC\u0CB0\u0CCD_\u0C85\u0C95\u0CCD\u0C9F\u0CC6\u0CC2\u0CD5\u0CAC\u0CB0\u0CCD_\u0CA8\u0CB5\u0CC6\u0C82\u0CAC\u0CB0\u0CCD_\u0CA1\u0CBF\u0CB8\u0CC6\u0C82\u0CAC\u0CB0\u0CCD'.split('_'),monthsShort:'\u0C9C\u0CA8_\u0CAB\u0CC6\u0CAC\u0CCD\u0CB0_\u0CAE\u0CBE\u0CB0\u0CCD\u0C9A\u0CCD_\u0C8F\u0CAA\u0CCD\u0CB0\u0CBF\u0CB2\u0CCD_\u0CAE\u0CC6\u0CD5_\u0C9C\u0CC2\u0CA8\u0CCD_\u0C9C\u0CC1\u0CB2\u0CC6\u0CD6_\u0C86\u0C97\u0CB8\u0CCD\u0C9F\u0CCD_\u0CB8\u0CC6\u0CAA\u0CCD\u0C9F\u0CC6\u0C82\u0CAC_\u0C85\u0C95\u0CCD\u0C9F\u0CC6\u0CC2\u0CD5\u0CAC_\u0CA8\u0CB5\u0CC6\u0C82\u0CAC_\u0CA1\u0CBF\u0CB8\u0CC6\u0C82\u0CAC'.split('_'),monthsParseExact:!0,weekdays:'\u0CAD\u0CBE\u0CA8\u0CC1\u0CB5\u0CBE\u0CB0_\u0CB8\u0CC6\u0CC2\u0CD5\u0CAE\u0CB5\u0CBE\u0CB0_\u0CAE\u0C82\u0C97\u0CB3\u0CB5\u0CBE\u0CB0_\u0CAC\u0CC1\u0CA7\u0CB5\u0CBE\u0CB0_\u0C97\u0CC1\u0CB0\u0CC1\u0CB5\u0CBE\u0CB0_\u0CB6\u0CC1\u0C95\u0CCD\u0CB0\u0CB5\u0CBE\u0CB0_\u0CB6\u0CA8\u0CBF\u0CB5\u0CBE\u0CB0'.split('_'),weekdaysShort:'\u0CAD\u0CBE\u0CA8\u0CC1_\u0CB8\u0CC6\u0CC2\u0CD5\u0CAE_\u0CAE\u0C82\u0C97\u0CB3_\u0CAC\u0CC1\u0CA7_\u0C97\u0CC1\u0CB0\u0CC1_\u0CB6\u0CC1\u0C95\u0CCD\u0CB0_\u0CB6\u0CA8\u0CBF'.split('_'),weekdaysMin:'\u0CAD\u0CBE_\u0CB8\u0CC6\u0CC2\u0CD5_\u0CAE\u0C82_\u0CAC\u0CC1_\u0C97\u0CC1_\u0CB6\u0CC1_\u0CB6'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm',LLLL:'dddd, D MMMM YYYY, A h:mm'},calendar:{sameDay:'[\u0C87\u0C82\u0CA6\u0CC1] LT',nextDay:'[\u0CA8\u0CBE\u0CB3\u0CC6] LT',nextWeek:'dddd, LT',lastDay:'[\u0CA8\u0CBF\u0CA8\u0CCD\u0CA8\u0CC6] LT',lastWeek:'[\u0C95\u0CC6\u0CC2\u0CA8\u0CC6\u0CAF] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u0CA8\u0C82\u0CA4\u0CB0',past:'%s \u0CB9\u0CBF\u0C82\u0CA6\u0CC6',s:'\u0C95\u0CC6\u0CB2\u0CB5\u0CC1 \u0C95\u0CCD\u0CB7\u0CA3\u0C97\u0CB3\u0CC1',m:'\u0C92\u0C82\u0CA6\u0CC1 \u0CA8\u0CBF\u0CAE\u0CBF\u0CB7',mm:'%d \u0CA8\u0CBF\u0CAE\u0CBF\u0CB7',h:'\u0C92\u0C82\u0CA6\u0CC1 \u0C97\u0C82\u0C9F\u0CC6',hh:'%d \u0C97\u0C82\u0C9F\u0CC6',d:'\u0C92\u0C82\u0CA6\u0CC1 \u0CA6\u0CBF\u0CA8',dd:'%d \u0CA6\u0CBF\u0CA8',M:'\u0C92\u0C82\u0CA6\u0CC1 \u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1',MM:'%d \u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1',y:'\u0C92\u0C82\u0CA6\u0CC1 \u0CB5\u0CB0\u0CCD\u0CB7',yy:'%d \u0CB5\u0CB0\u0CCD\u0CB7'},preparse:function(il){return il.replace(/[]/g,function(dl){return Ed[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return Ld[dl]})},meridiemParse:/|||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u0CB0\u0CBE\u0CA4\u0CCD\u0CB0\u0CBF'===dl)?4>il?il:il+12:'\u0CAC\u0CC6\u0CB3\u0CBF\u0C97\u0CCD\u0C97\u0CC6'===dl?il:'\u0CAE\u0CA7\u0CCD\u0CAF\u0CBE\u0CB9\u0CCD\u0CA8'===dl?10<=il?il:il+12:'\u0CB8\u0C82\u0C9C\u0CC6'===dl?il+12:void 0},meridiem:function(il){return 4>il?'\u0CB0\u0CBE\u0CA4\u0CCD\u0CB0\u0CBF':10>il?'\u0CAC\u0CC6\u0CB3\u0CBF\u0C97\u0CCD\u0C97\u0CC6':17>il?'\u0CAE\u0CA7\u0CCD\u0CAF\u0CBE\u0CB9\u0CCD\u0CA8':20>il?'\u0CB8\u0C82\u0C9C\u0CC6':'\u0CB0\u0CBE\u0CA4\u0CCD\u0CB0\u0CBF'},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(il){return il+'\u0CA8\u0CC6\u0CD5'},week:{dow:0,doy:6}}),R.defineLocale('ko',{months:'1\uC6D4_2\uC6D4_3\uC6D4_4\uC6D4_5\uC6D4_6\uC6D4_7\uC6D4_8\uC6D4_9\uC6D4_10\uC6D4_11\uC6D4_12\uC6D4'.split('_'),monthsShort:'1\uC6D4_2\uC6D4_3\uC6D4_4\uC6D4_5\uC6D4_6\uC6D4_7\uC6D4_8\uC6D4_9\uC6D4_10\uC6D4_11\uC6D4_12\uC6D4'.split('_'),weekdays:'\uC77C\uC694\uC77C_\uC6D4\uC694\uC77C_\uD654\uC694\uC77C_\uC218\uC694\uC77C_\uBAA9\uC694\uC77C_\uAE08\uC694\uC77C_\uD1A0\uC694\uC77C'.split('_'),weekdaysShort:'\uC77C_\uC6D4_\uD654_\uC218_\uBAA9_\uAE08_\uD1A0'.split('_'),weekdaysMin:'\uC77C_\uC6D4_\uD654_\uC218_\uBAA9_\uAE08_\uD1A0'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'YYYY.MM.DD',LL:'YYYY\uB144 MMMM D\uC77C',LLL:'YYYY\uB144 MMMM D\uC77C A h:mm',LLLL:'YYYY\uB144 MMMM D\uC77C dddd A h:mm',l:'YYYY.MM.DD',ll:'YYYY\uB144 MMMM D\uC77C',lll:'YYYY\uB144 MMMM D\uC77C A h:mm',llll:'YYYY\uB144 MMMM D\uC77C dddd A h:mm'},calendar:{sameDay:'\uC624\uB298 LT',nextDay:'\uB0B4\uC77C LT',nextWeek:'dddd LT',lastDay:'\uC5B4\uC81C LT',lastWeek:'\uC9C0\uB09C\uC8FC dddd LT',sameElse:'L'},relativeTime:{future:'%s \uD6C4',past:'%s \uC804',s:'\uBA87 \uCD08',ss:'%d\uCD08',m:'1\uBD84',mm:'%d\uBD84',h:'\uD55C \uC2DC\uAC04',hh:'%d\uC2DC\uAC04',d:'\uD558\uB8E8',dd:'%d\uC77C',M:'\uD55C \uB2EC',MM:'%d\uB2EC',y:'\uC77C \uB144',yy:'%d\uB144'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\uC77C',meridiemParse:/|/,isPM:function(il){return'\uC624\uD6C4'===il},meridiem:function(il){return 12>il?'\uC624\uC804':'\uC624\uD6C4'}});var Sd={0:'-\u0447\u04AF',1:'-\u0447\u0438',2:'-\u0447\u0438',3:'-\u0447\u04AF',4:'-\u0447\u04AF',5:'-\u0447\u0438',6:'-\u0447\u044B',7:'-\u0447\u0438',8:'-\u0447\u0438',9:'-\u0447\u0443',10:'-\u0447\u0443',20:'-\u0447\u044B',30:'-\u0447\u0443',40:'-\u0447\u044B',50:'-\u0447\u04AF',60:'-\u0447\u044B',70:'-\u0447\u0438',80:'-\u0447\u0438',90:'-\u0447\u0443',100:'-\u0447\u04AF'};R.defineLocale('ky',{months:'\u044F\u043D\u0432\u0430\u0440\u044C_\u0444\u0435\u0432\u0440\u0430\u043B\u044C_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0435\u043B\u044C_\u043C\u0430\u0439_\u0438\u044E\u043D\u044C_\u0438\u044E\u043B\u044C_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C_\u043E\u043A\u0442\u044F\u0431\u0440\u044C_\u043D\u043E\u044F\u0431\u0440\u044C_\u0434\u0435\u043A\u0430\u0431\u0440\u044C'.split('_'),monthsShort:'\u044F\u043D\u0432_\u0444\u0435\u0432_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440_\u043C\u0430\u0439_\u0438\u044E\u043D\u044C_\u0438\u044E\u043B\u044C_\u0430\u0432\u0433_\u0441\u0435\u043D_\u043E\u043A\u0442_\u043D\u043E\u044F_\u0434\u0435\u043A'.split('_'),weekdays:'\u0416\u0435\u043A\u0448\u0435\u043C\u0431\u0438_\u0414\u04AF\u0439\u0448\u04E9\u043C\u0431\u04AF_\u0428\u0435\u0439\u0448\u0435\u043C\u0431\u0438_\u0428\u0430\u0440\u0448\u0435\u043C\u0431\u0438_\u0411\u0435\u0439\u0448\u0435\u043C\u0431\u0438_\u0416\u0443\u043C\u0430_\u0418\u0448\u0435\u043C\u0431\u0438'.split('_'),weekdaysShort:'\u0416\u0435\u043A_\u0414\u04AF\u0439_\u0428\u0435\u0439_\u0428\u0430\u0440_\u0411\u0435\u0439_\u0416\u0443\u043C_\u0418\u0448\u0435'.split('_'),weekdaysMin:'\u0416\u043A_\u0414\u0439_\u0428\u0439_\u0428\u0440_\u0411\u0439_\u0416\u043C_\u0418\u0448'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u0411\u04AF\u0433\u04AF\u043D \u0441\u0430\u0430\u0442] LT',nextDay:'[\u042D\u0440\u0442\u0435\u04A3 \u0441\u0430\u0430\u0442] LT',nextWeek:'dddd [\u0441\u0430\u0430\u0442] LT',lastDay:'[\u041A\u0435\u0447\u0435 \u0441\u0430\u0430\u0442] LT',lastWeek:'[\u04E8\u0442\u043A\u0435\u043D \u0430\u043F\u0442\u0430\u043D\u044B\u043D] dddd [\u043A\u04AF\u043D\u04AF] [\u0441\u0430\u0430\u0442] LT',sameElse:'L'},relativeTime:{future:'%s \u0438\u0447\u0438\u043D\u0434\u0435',past:'%s \u043C\u0443\u0440\u0443\u043D',s:'\u0431\u0438\u0440\u043D\u0435\u0447\u0435 \u0441\u0435\u043A\u0443\u043D\u0434',m:'\u0431\u0438\u0440 \u043C\u04AF\u043D\u04E9\u0442',mm:'%d \u043C\u04AF\u043D\u04E9\u0442',h:'\u0431\u0438\u0440 \u0441\u0430\u0430\u0442',hh:'%d \u0441\u0430\u0430\u0442',d:'\u0431\u0438\u0440 \u043A\u04AF\u043D',dd:'%d \u043A\u04AF\u043D',M:'\u0431\u0438\u0440 \u0430\u0439',MM:'%d \u0430\u0439',y:'\u0431\u0438\u0440 \u0436\u044B\u043B',yy:'%d \u0436\u044B\u043B'},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(il){var ll=100<=il?100:null;return il+(Sd[il]||Sd[il%10]||Sd[ll])},week:{dow:1,doy:7}}),R.defineLocale('lb',{months:'Januar_Februar_M\xE4erz_Abr\xEBll_Mee_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),monthsParseExact:!0,weekdays:'Sonndeg_M\xE9indeg_D\xEBnschdeg_M\xEBttwoch_Donneschdeg_Freideg_Samschdeg'.split('_'),weekdaysShort:'So._M\xE9._D\xEB._M\xEB._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_M\xE9_D\xEB_M\xEB_Do_Fr_Sa'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm [Auer]',LTS:'H:mm:ss [Auer]',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm [Auer]',LLLL:'dddd, D. MMMM YYYY H:mm [Auer]'},calendar:{sameDay:'[Haut um] LT',sameElse:'L',nextDay:'[Muer um] LT',nextWeek:'dddd [um] LT',lastDay:'[G\xEBschter um] LT',lastWeek:function(){switch(this.day()){case 2:case 4:return'[Leschten] dddd [um] LT';default:return'[Leschte] dddd [um] LT';}}},relativeTime:{future:function(il){var dl=il.substr(0,il.indexOf(' '));return Bo(dl)?'a '+il:'an '+il},past:function(il){var dl=il.substr(0,il.indexOf(' '));return Bo(dl)?'viru '+il:'virun '+il},s:'e puer Sekonnen',m:jo,mm:'%d Minutten',h:jo,hh:'%d Stonnen',d:jo,dd:'%d Deeg',M:jo,MM:'%d M\xE9int',y:jo,yy:'%d Joer'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('lo',{months:'\u0EA1\u0EB1\u0E87\u0E81\u0EAD\u0E99_\u0E81\u0EB8\u0EA1\u0E9E\u0EB2_\u0EA1\u0EB5\u0E99\u0EB2_\u0EC0\u0EA1\u0EAA\u0EB2_\u0E9E\u0EB6\u0E94\u0EAA\u0EB0\u0E9E\u0EB2_\u0EA1\u0EB4\u0E96\u0EB8\u0E99\u0EB2_\u0E81\u0ECD\u0EA5\u0EB0\u0E81\u0EBB\u0E94_\u0EAA\u0EB4\u0E87\u0EAB\u0EB2_\u0E81\u0EB1\u0E99\u0E8D\u0EB2_\u0E95\u0EB8\u0EA5\u0EB2_\u0E9E\u0EB0\u0E88\u0EB4\u0E81_\u0E97\u0EB1\u0E99\u0EA7\u0EB2'.split('_'),monthsShort:'\u0EA1\u0EB1\u0E87\u0E81\u0EAD\u0E99_\u0E81\u0EB8\u0EA1\u0E9E\u0EB2_\u0EA1\u0EB5\u0E99\u0EB2_\u0EC0\u0EA1\u0EAA\u0EB2_\u0E9E\u0EB6\u0E94\u0EAA\u0EB0\u0E9E\u0EB2_\u0EA1\u0EB4\u0E96\u0EB8\u0E99\u0EB2_\u0E81\u0ECD\u0EA5\u0EB0\u0E81\u0EBB\u0E94_\u0EAA\u0EB4\u0E87\u0EAB\u0EB2_\u0E81\u0EB1\u0E99\u0E8D\u0EB2_\u0E95\u0EB8\u0EA5\u0EB2_\u0E9E\u0EB0\u0E88\u0EB4\u0E81_\u0E97\u0EB1\u0E99\u0EA7\u0EB2'.split('_'),weekdays:'\u0EAD\u0EB2\u0E97\u0EB4\u0E94_\u0E88\u0EB1\u0E99_\u0EAD\u0EB1\u0E87\u0E84\u0EB2\u0E99_\u0E9E\u0EB8\u0E94_\u0E9E\u0EB0\u0EAB\u0EB1\u0E94_\u0EAA\u0EB8\u0E81_\u0EC0\u0EAA\u0EBB\u0EB2'.split('_'),weekdaysShort:'\u0E97\u0EB4\u0E94_\u0E88\u0EB1\u0E99_\u0EAD\u0EB1\u0E87\u0E84\u0EB2\u0E99_\u0E9E\u0EB8\u0E94_\u0E9E\u0EB0\u0EAB\u0EB1\u0E94_\u0EAA\u0EB8\u0E81_\u0EC0\u0EAA\u0EBB\u0EB2'.split('_'),weekdaysMin:'\u0E97_\u0E88_\u0EAD\u0E84_\u0E9E_\u0E9E\u0EAB_\u0EAA\u0E81_\u0EAA'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'\u0EA7\u0EB1\u0E99dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0E95\u0EAD\u0E99\u0EC1\u0EA5\u0E87'===il},meridiem:function(il){return 12>il?'\u0E95\u0EAD\u0E99\u0EC0\u0E8A\u0EBB\u0EC9\u0EB2':'\u0E95\u0EAD\u0E99\u0EC1\u0EA5\u0E87'},calendar:{sameDay:'[\u0EA1\u0EB7\u0EC9\u0E99\u0EB5\u0EC9\u0EC0\u0EA7\u0EA5\u0EB2] LT',nextDay:'[\u0EA1\u0EB7\u0EC9\u0EAD\u0EB7\u0EC8\u0E99\u0EC0\u0EA7\u0EA5\u0EB2] LT',nextWeek:'[\u0EA7\u0EB1\u0E99]dddd[\u0EDC\u0EC9\u0EB2\u0EC0\u0EA7\u0EA5\u0EB2] LT',lastDay:'[\u0EA1\u0EB7\u0EC9\u0EA7\u0EB2\u0E99\u0E99\u0EB5\u0EC9\u0EC0\u0EA7\u0EA5\u0EB2] LT',lastWeek:'[\u0EA7\u0EB1\u0E99]dddd[\u0EC1\u0EA5\u0EC9\u0EA7\u0E99\u0EB5\u0EC9\u0EC0\u0EA7\u0EA5\u0EB2] LT',sameElse:'L'},relativeTime:{future:'\u0EAD\u0EB5\u0E81 %s',past:'%s\u0E9C\u0EC8\u0EB2\u0E99\u0EA1\u0EB2',s:'\u0E9A\u0ECD\u0EC8\u0EC0\u0E97\u0EBB\u0EC8\u0EB2\u0EC3\u0E94\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5',m:'1 \u0E99\u0EB2\u0E97\u0EB5',mm:'%d \u0E99\u0EB2\u0E97\u0EB5',h:'1 \u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87',hh:'%d \u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87',d:'1 \u0EA1\u0EB7\u0EC9',dd:'%d \u0EA1\u0EB7\u0EC9',M:'1 \u0EC0\u0E94\u0EB7\u0EAD\u0E99',MM:'%d \u0EC0\u0E94\u0EB7\u0EAD\u0E99',y:'1 \u0E9B\u0EB5',yy:'%d \u0E9B\u0EB5'},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(il){return'\u0E97\u0EB5\u0EC8'+il}});var bd={m:'minut\u0117_minut\u0117s_minut\u0119',mm:'minut\u0117s_minu\u010Di\u0173_minutes',h:'valanda_valandos_valand\u0105',hh:'valandos_valand\u0173_valandas',d:'diena_dienos_dien\u0105',dd:'dienos_dien\u0173_dienas',M:'m\u0117nuo_m\u0117nesio_m\u0117nes\u012F',MM:'m\u0117nesiai_m\u0117nesi\u0173_m\u0117nesius',y:'metai_met\u0173_metus',yy:'metai_met\u0173_metus'};R.defineLocale('lt',{months:{format:'sausio_vasario_kovo_baland\u017Eio_gegu\u017E\u0117s_bir\u017Eelio_liepos_rugpj\u016B\u010Dio_rugs\u0117jo_spalio_lapkri\u010Dio_gruod\u017Eio'.split('_'),standalone:'sausis_vasaris_kovas_balandis_gegu\u017E\u0117_bir\u017Eelis_liepa_rugpj\u016Btis_rugs\u0117jis_spalis_lapkritis_gruodis'.split('_'),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:'sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd'.split('_'),weekdays:{format:'sekmadien\u012F_pirmadien\u012F_antradien\u012F_tre\u010Diadien\u012F_ketvirtadien\u012F_penktadien\u012F_\u0161e\u0161tadien\u012F'.split('_'),standalone:'sekmadienis_pirmadienis_antradienis_tre\u010Diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis'.split('_'),isFormat:/dddd HH:mm/},weekdaysShort:'Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161'.split('_'),weekdaysMin:'S_P_A_T_K_Pn_\u0160'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'YYYY [m.] MMMM D [d.]',LLL:'YYYY [m.] MMMM D [d.], HH:mm [val.]',LLLL:'YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]',l:'YYYY-MM-DD',ll:'YYYY [m.] MMMM D [d.]',lll:'YYYY [m.] MMMM D [d.], HH:mm [val.]',llll:'YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]'},calendar:{sameDay:'[\u0160iandien] LT',nextDay:'[Rytoj] LT',nextWeek:'dddd LT',lastDay:'[Vakar] LT',lastWeek:'[Pra\u0117jus\u012F] dddd LT',sameElse:'L'},relativeTime:{future:'po %s',past:'prie\u0161 %s',s:function(il,dl,ll,_l){return dl?'kelios sekund\u0117s':_l?'keli\u0173 sekund\u017Ei\u0173':'kelias sekundes'},m:zo,mm:Go,h:zo,hh:Go,d:zo,dd:Go,M:zo,MM:Go,y:zo,yy:Go},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(il){return il+'-oji'},week:{dow:1,doy:4}});var Dd={m:'min\u016Btes_min\u016Bt\u0113m_min\u016Bte_min\u016Btes'.split('_'),mm:'min\u016Btes_min\u016Bt\u0113m_min\u016Bte_min\u016Btes'.split('_'),h:'stundas_stund\u0101m_stunda_stundas'.split('_'),hh:'stundas_stund\u0101m_stunda_stundas'.split('_'),d:'dienas_dien\u0101m_diena_dienas'.split('_'),dd:'dienas_dien\u0101m_diena_dienas'.split('_'),M:'m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i'.split('_'),MM:'m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i'.split('_'),y:'gada_gadiem_gads_gadi'.split('_'),yy:'gada_gadiem_gads_gadi'.split('_')};R.defineLocale('lv',{months:'janv\u0101ris_febru\u0101ris_marts_apr\u012Blis_maijs_j\u016Bnijs_j\u016Blijs_augusts_septembris_oktobris_novembris_decembris'.split('_'),monthsShort:'jan_feb_mar_apr_mai_j\u016Bn_j\u016Bl_aug_sep_okt_nov_dec'.split('_'),weekdays:'sv\u0113tdiena_pirmdiena_otrdiena_tre\u0161diena_ceturtdiena_piektdiena_sestdiena'.split('_'),weekdaysShort:'Sv_P_O_T_C_Pk_S'.split('_'),weekdaysMin:'Sv_P_O_T_C_Pk_S'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY.',LL:'YYYY. [gada] D. MMMM',LLL:'YYYY. [gada] D. MMMM, HH:mm',LLLL:'YYYY. [gada] D. MMMM, dddd, HH:mm'},calendar:{sameDay:'[\u0160odien pulksten] LT',nextDay:'[R\u012Bt pulksten] LT',nextWeek:'dddd [pulksten] LT',lastDay:'[Vakar pulksten] LT',lastWeek:'[Pag\u0101ju\u0161\u0101] dddd [pulksten] LT',sameElse:'L'},relativeTime:{future:'p\u0113c %s',past:'pirms %s',s:function(il,dl){return dl?'da\u017Eas sekundes':'da\u017E\u0101m sekund\u0113m'},m:$o,mm:Ko,h:$o,hh:Ko,d:$o,dd:Ko,M:$o,MM:Ko,y:$o,yy:Ko},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var Ad={words:{m:['jedan minut','jednog minuta'],mm:['minut','minuta','minuta'],h:['jedan sat','jednog sata'],hh:['sat','sata','sati'],dd:['dan','dana','dana'],MM:['mjesec','mjeseca','mjeseci'],yy:['godina','godine','godina']},correctGrammaticalCase:function(il,dl){return 1===il?dl[0]:2<=il&&4>=il?dl[1]:dl[2]},translate:function(il,dl,ll){var _l=Ad.words[ll];return 1===ll.length?dl?_l[0]:_l[1]:il+' '+Ad.correctGrammaticalCase(il,_l)}};R.defineLocale('me',{months:'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),monthsShort:'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),monthsParseExact:!0,weekdays:'nedjelja_ponedjeljak_utorak_srijeda_\u010Detvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sri._\u010Det._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_\u010De_pe_su'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sjutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedjelju] [u] LT';case 3:return'[u] [srijedu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[ju\u010De u] LT',lastWeek:function(){return['[pro\u0161le] [nedjelje] [u] LT','[pro\u0161log] [ponedjeljka] [u] LT','[pro\u0161log] [utorka] [u] LT','[pro\u0161le] [srijede] [u] LT','[pro\u0161log] [\u010Detvrtka] [u] LT','[pro\u0161log] [petka] [u] LT','[pro\u0161le] [subote] [u] LT'][this.day()]},sameElse:'L'},relativeTime:{future:'za %s',past:'prije %s',s:'nekoliko sekundi',m:Ad.translate,mm:Ad.translate,h:Ad.translate,hh:Ad.translate,d:'dan',dd:Ad.translate,M:'mjesec',MM:Ad.translate,y:'godinu',yy:Ad.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}}),R.defineLocale('mi',{months:'Kohi-t\u0101te_Hui-tanguru_Pout\u016B-te-rangi_Paenga-wh\u0101wh\u0101_Haratua_Pipiri_H\u014Dngoingoi_Here-turi-k\u014Dk\u0101_Mahuru_Whiringa-\u0101-nuku_Whiringa-\u0101-rangi_Hakihea'.split('_'),monthsShort:'Kohi_Hui_Pou_Pae_Hara_Pipi_H\u014Dngoi_Here_Mahu_Whi-nu_Whi-ra_Haki'.split('_'),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:'R\u0101tapu_Mane_T\u016Brei_Wenerei_T\u0101ite_Paraire_H\u0101tarei'.split('_'),weekdaysShort:'Ta_Ma_T\u016B_We_T\u0101i_Pa_H\u0101'.split('_'),weekdaysMin:'Ta_Ma_T\u016B_We_T\u0101i_Pa_H\u0101'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [i] HH:mm',LLLL:'dddd, D MMMM YYYY [i] HH:mm'},calendar:{sameDay:'[i teie mahana, i] LT',nextDay:'[apopo i] LT',nextWeek:'dddd [i] LT',lastDay:'[inanahi i] LT',lastWeek:'dddd [whakamutunga i] LT',sameElse:'L'},relativeTime:{future:'i roto i %s',past:'%s i mua',s:'te h\u0113kona ruarua',m:'he meneti',mm:'%d meneti',h:'te haora',hh:'%d haora',d:'he ra',dd:'%d ra',M:'he marama',MM:'%d marama',y:'he tau',yy:'%d tau'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA',week:{dow:1,doy:4}}),R.defineLocale('mk',{months:'\u0458\u0430\u043D\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0438\u043B_\u043C\u0430\u0458_\u0458\u0443\u043D\u0438_\u0458\u0443\u043B\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043F\u0442\u0435\u043C\u0432\u0440\u0438_\u043E\u043A\u0442\u043E\u043C\u0432\u0440\u0438_\u043D\u043E\u0435\u043C\u0432\u0440\u0438_\u0434\u0435\u043A\u0435\u043C\u0432\u0440\u0438'.split('_'),monthsShort:'\u0458\u0430\u043D_\u0444\u0435\u0432_\u043C\u0430\u0440_\u0430\u043F\u0440_\u043C\u0430\u0458_\u0458\u0443\u043D_\u0458\u0443\u043B_\u0430\u0432\u0433_\u0441\u0435\u043F_\u043E\u043A\u0442_\u043D\u043E\u0435_\u0434\u0435\u043A'.split('_'),weekdays:'\u043D\u0435\u0434\u0435\u043B\u0430_\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u043D\u0438\u043A_\u0432\u0442\u043E\u0440\u043D\u0438\u043A_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u043E\u043A_\u043F\u0435\u0442\u043E\u043A_\u0441\u0430\u0431\u043E\u0442\u0430'.split('_'),weekdaysShort:'\u043D\u0435\u0434_\u043F\u043E\u043D_\u0432\u0442\u043E_\u0441\u0440\u0435_\u0447\u0435\u0442_\u043F\u0435\u0442_\u0441\u0430\u0431'.split('_'),weekdaysMin:'\u043De_\u043Fo_\u0432\u0442_\u0441\u0440_\u0447\u0435_\u043F\u0435_\u0441a'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'D.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY H:mm',LLLL:'dddd, D MMMM YYYY H:mm'},calendar:{sameDay:'[\u0414\u0435\u043D\u0435\u0441 \u0432\u043E] LT',nextDay:'[\u0423\u0442\u0440\u0435 \u0432\u043E] LT',nextWeek:'[\u0412\u043E] dddd [\u0432\u043E] LT',lastDay:'[\u0412\u0447\u0435\u0440\u0430 \u0432\u043E] LT',lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return'[\u0418\u0437\u043C\u0438\u043D\u0430\u0442\u0430\u0442\u0430] dddd [\u0432\u043E] LT';case 1:case 2:case 4:case 5:return'[\u0418\u0437\u043C\u0438\u043D\u0430\u0442\u0438\u043E\u0442] dddd [\u0432\u043E] LT';}},sameElse:'L'},relativeTime:{future:'\u043F\u043E\u0441\u043B\u0435 %s',past:'\u043F\u0440\u0435\u0434 %s',s:'\u043D\u0435\u043A\u043E\u043B\u043A\u0443 \u0441\u0435\u043A\u0443\u043D\u0434\u0438',m:'\u043C\u0438\u043D\u0443\u0442\u0430',mm:'%d \u043C\u0438\u043D\u0443\u0442\u0438',h:'\u0447\u0430\u0441',hh:'%d \u0447\u0430\u0441\u0430',d:'\u0434\u0435\u043D',dd:'%d \u0434\u0435\u043D\u0430',M:'\u043C\u0435\u0441\u0435\u0446',MM:'%d \u043C\u0435\u0441\u0435\u0446\u0438',y:'\u0433\u043E\u0434\u0438\u043D\u0430',yy:'%d \u0433\u043E\u0434\u0438\u043D\u0438'},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(il){var dl=il%10,ll=il%100;return 0===il?il+'-\u0435\u0432':0==ll?il+'-\u0435\u043D':10<ll&&20>ll?il+'-\u0442\u0438':1==dl?il+'-\u0432\u0438':2==dl?il+'-\u0440\u0438':7==dl||8==dl?il+'-\u043C\u0438':il+'-\u0442\u0438'},week:{dow:1,doy:7}}),R.defineLocale('ml',{months:'\u0D1C\u0D28\u0D41\u0D35\u0D30\u0D3F_\u0D2B\u0D46\u0D2C\u0D4D\u0D30\u0D41\u0D35\u0D30\u0D3F_\u0D2E\u0D3E\u0D7C\u0D1A\u0D4D\u0D1A\u0D4D_\u0D0F\u0D2A\u0D4D\u0D30\u0D3F\u0D7D_\u0D2E\u0D47\u0D2F\u0D4D_\u0D1C\u0D42\u0D7A_\u0D1C\u0D42\u0D32\u0D48_\u0D13\u0D17\u0D38\u0D4D\u0D31\u0D4D\u0D31\u0D4D_\u0D38\u0D46\u0D2A\u0D4D\u0D31\u0D4D\u0D31\u0D02\u0D2C\u0D7C_\u0D12\u0D15\u0D4D\u0D1F\u0D4B\u0D2C\u0D7C_\u0D28\u0D35\u0D02\u0D2C\u0D7C_\u0D21\u0D3F\u0D38\u0D02\u0D2C\u0D7C'.split('_'),monthsShort:'\u0D1C\u0D28\u0D41._\u0D2B\u0D46\u0D2C\u0D4D\u0D30\u0D41._\u0D2E\u0D3E\u0D7C._\u0D0F\u0D2A\u0D4D\u0D30\u0D3F._\u0D2E\u0D47\u0D2F\u0D4D_\u0D1C\u0D42\u0D7A_\u0D1C\u0D42\u0D32\u0D48._\u0D13\u0D17._\u0D38\u0D46\u0D2A\u0D4D\u0D31\u0D4D\u0D31._\u0D12\u0D15\u0D4D\u0D1F\u0D4B._\u0D28\u0D35\u0D02._\u0D21\u0D3F\u0D38\u0D02.'.split('_'),monthsParseExact:!0,weekdays:'\u0D1E\u0D3E\u0D2F\u0D31\u0D3E\u0D34\u0D4D\u0D1A_\u0D24\u0D3F\u0D19\u0D4D\u0D15\u0D33\u0D3E\u0D34\u0D4D\u0D1A_\u0D1A\u0D4A\u0D35\u0D4D\u0D35\u0D3E\u0D34\u0D4D\u0D1A_\u0D2C\u0D41\u0D27\u0D28\u0D3E\u0D34\u0D4D\u0D1A_\u0D35\u0D4D\u0D2F\u0D3E\u0D34\u0D3E\u0D34\u0D4D\u0D1A_\u0D35\u0D46\u0D33\u0D4D\u0D33\u0D3F\u0D2F\u0D3E\u0D34\u0D4D\u0D1A_\u0D36\u0D28\u0D3F\u0D2F\u0D3E\u0D34\u0D4D\u0D1A'.split('_'),weekdaysShort:'\u0D1E\u0D3E\u0D2F\u0D7C_\u0D24\u0D3F\u0D19\u0D4D\u0D15\u0D7E_\u0D1A\u0D4A\u0D35\u0D4D\u0D35_\u0D2C\u0D41\u0D27\u0D7B_\u0D35\u0D4D\u0D2F\u0D3E\u0D34\u0D02_\u0D35\u0D46\u0D33\u0D4D\u0D33\u0D3F_\u0D36\u0D28\u0D3F'.split('_'),weekdaysMin:'\u0D1E\u0D3E_\u0D24\u0D3F_\u0D1A\u0D4A_\u0D2C\u0D41_\u0D35\u0D4D\u0D2F\u0D3E_\u0D35\u0D46_\u0D36'.split('_'),longDateFormat:{LT:'A h:mm -\u0D28\u0D41',LTS:'A h:mm:ss -\u0D28\u0D41',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm -\u0D28\u0D41',LLLL:'dddd, D MMMM YYYY, A h:mm -\u0D28\u0D41'},calendar:{sameDay:'[\u0D07\u0D28\u0D4D\u0D28\u0D4D] LT',nextDay:'[\u0D28\u0D3E\u0D33\u0D46] LT',nextWeek:'dddd, LT',lastDay:'[\u0D07\u0D28\u0D4D\u0D28\u0D32\u0D46] LT',lastWeek:'[\u0D15\u0D34\u0D3F\u0D1E\u0D4D\u0D1E] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u0D15\u0D34\u0D3F\u0D1E\u0D4D\u0D1E\u0D4D',past:'%s \u0D2E\u0D41\u0D7B\u0D2A\u0D4D',s:'\u0D05\u0D7D\u0D2A \u0D28\u0D3F\u0D2E\u0D3F\u0D37\u0D19\u0D4D\u0D19\u0D7E',m:'\u0D12\u0D30\u0D41 \u0D2E\u0D3F\u0D28\u0D3F\u0D31\u0D4D\u0D31\u0D4D',mm:'%d \u0D2E\u0D3F\u0D28\u0D3F\u0D31\u0D4D\u0D31\u0D4D',h:'\u0D12\u0D30\u0D41 \u0D2E\u0D23\u0D3F\u0D15\u0D4D\u0D15\u0D42\u0D7C',hh:'%d \u0D2E\u0D23\u0D3F\u0D15\u0D4D\u0D15\u0D42\u0D7C',d:'\u0D12\u0D30\u0D41 \u0D26\u0D3F\u0D35\u0D38\u0D02',dd:'%d \u0D26\u0D3F\u0D35\u0D38\u0D02',M:'\u0D12\u0D30\u0D41 \u0D2E\u0D3E\u0D38\u0D02',MM:'%d \u0D2E\u0D3E\u0D38\u0D02',y:'\u0D12\u0D30\u0D41 \u0D35\u0D7C\u0D37\u0D02',yy:'%d \u0D35\u0D7C\u0D37\u0D02'},meridiemParse:/|| ||/i,meridiemHour:function(il,dl){return 12===il&&(il=0),'\u0D30\u0D3E\u0D24\u0D4D\u0D30\u0D3F'===dl&&4<=il||'\u0D09\u0D1A\u0D4D\u0D1A \u0D15\u0D34\u0D3F\u0D1E\u0D4D\u0D1E\u0D4D'===dl||'\u0D35\u0D48\u0D15\u0D41\u0D28\u0D4D\u0D28\u0D47\u0D30\u0D02'===dl?il+12:il},meridiem:function(il){return 4>il?'\u0D30\u0D3E\u0D24\u0D4D\u0D30\u0D3F':12>il?'\u0D30\u0D3E\u0D35\u0D3F\u0D32\u0D46':17>il?'\u0D09\u0D1A\u0D4D\u0D1A \u0D15\u0D34\u0D3F\u0D1E\u0D4D\u0D1E\u0D4D':20>il?'\u0D35\u0D48\u0D15\u0D41\u0D28\u0D4D\u0D28\u0D47\u0D30\u0D02':'\u0D30\u0D3E\u0D24\u0D4D\u0D30\u0D3F'}});var Id={0:'\u0966',1:'\u0967',2:'\u0968',3:'\u0969',4:'\u096A',5:'\u096B',6:'\u096C',7:'\u096D',8:'\u096E',9:'\u096F'},Rd={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('mr',{months:'\u091C\u093E\u0928\u0947\u0935\u093E\u0930\u0940_\u092B\u0947\u092C\u094D\u0930\u0941\u0935\u093E\u0930\u0940_\u092E\u093E\u0930\u094D\u091A_\u090F\u092A\u094D\u0930\u093F\u0932_\u092E\u0947_\u091C\u0942\u0928_\u091C\u0941\u0932\u0948_\u0911\u0917\u0938\u094D\u091F_\u0938\u092A\u094D\u091F\u0947\u0902\u092C\u0930_\u0911\u0915\u094D\u091F\u094B\u092C\u0930_\u0928\u094B\u0935\u094D\u0939\u0947\u0902\u092C\u0930_\u0921\u093F\u0938\u0947\u0902\u092C\u0930'.split('_'),monthsShort:'\u091C\u093E\u0928\u0947._\u092B\u0947\u092C\u094D\u0930\u0941._\u092E\u093E\u0930\u094D\u091A._\u090F\u092A\u094D\u0930\u093F._\u092E\u0947._\u091C\u0942\u0928._\u091C\u0941\u0932\u0948._\u0911\u0917._\u0938\u092A\u094D\u091F\u0947\u0902._\u0911\u0915\u094D\u091F\u094B._\u0928\u094B\u0935\u094D\u0939\u0947\u0902._\u0921\u093F\u0938\u0947\u0902.'.split('_'),monthsParseExact:!0,weekdays:'\u0930\u0935\u093F\u0935\u093E\u0930_\u0938\u094B\u092E\u0935\u093E\u0930_\u092E\u0902\u0917\u0933\u0935\u093E\u0930_\u092C\u0941\u0927\u0935\u093E\u0930_\u0917\u0941\u0930\u0942\u0935\u093E\u0930_\u0936\u0941\u0915\u094D\u0930\u0935\u093E\u0930_\u0936\u0928\u093F\u0935\u093E\u0930'.split('_'),weekdaysShort:'\u0930\u0935\u093F_\u0938\u094B\u092E_\u092E\u0902\u0917\u0933_\u092C\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094D\u0930_\u0936\u0928\u093F'.split('_'),weekdaysMin:'\u0930_\u0938\u094B_\u092E\u0902_\u092C\u0941_\u0917\u0941_\u0936\u0941_\u0936'.split('_'),longDateFormat:{LT:'A h:mm \u0935\u093E\u091C\u0924\u093E',LTS:'A h:mm:ss \u0935\u093E\u091C\u0924\u093E',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm \u0935\u093E\u091C\u0924\u093E',LLLL:'dddd, D MMMM YYYY, A h:mm \u0935\u093E\u091C\u0924\u093E'},calendar:{sameDay:'[\u0906\u091C] LT',nextDay:'[\u0909\u0926\u094D\u092F\u093E] LT',nextWeek:'dddd, LT',lastDay:'[\u0915\u093E\u0932] LT',lastWeek:'[\u092E\u093E\u0917\u0940\u0932] dddd, LT',sameElse:'L'},relativeTime:{future:'%s\u092E\u0927\u094D\u092F\u0947',past:'%s\u092A\u0942\u0930\u094D\u0935\u0940',s:Qo,m:Qo,mm:Qo,h:Qo,hh:Qo,d:Qo,dd:Qo,M:Qo,MM:Qo,y:Qo,yy:Qo},preparse:function(il){return il.replace(/[]/g,function(dl){return Rd[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return Id[dl]})},meridiemParse:/|||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u0930\u093E\u0924\u094D\u0930\u0940'===dl)?4>il?il:il+12:'\u0938\u0915\u093E\u0933\u0940'===dl?il:'\u0926\u0941\u092A\u093E\u0930\u0940'===dl?10<=il?il:il+12:'\u0938\u093E\u092F\u0902\u0915\u093E\u0933\u0940'===dl?il+12:void 0},meridiem:function(il){return 4>il?'\u0930\u093E\u0924\u094D\u0930\u0940':10>il?'\u0938\u0915\u093E\u0933\u0940':17>il?'\u0926\u0941\u092A\u093E\u0930\u0940':20>il?'\u0938\u093E\u092F\u0902\u0915\u093E\u0933\u0940':'\u0930\u093E\u0924\u094D\u0930\u0940'},week:{dow:0,doy:6}}),R.defineLocale('ms-my',{months:'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),monthsShort:'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),weekdays:'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),weekdaysShort:'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),weekdaysMin:'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(il,dl){return(12===il&&(il=0),'pagi'===dl)?il:'tengahari'===dl?11<=il?il:il+12:'petang'===dl||'malam'===dl?il+12:void 0},meridiem:function(il){return 11>il?'pagi':15>il?'tengahari':19>il?'petang':'malam'},calendar:{sameDay:'[Hari ini pukul] LT',nextDay:'[Esok pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kelmarin pukul] LT',lastWeek:'dddd [lepas pukul] LT',sameElse:'L'},relativeTime:{future:'dalam %s',past:'%s yang lepas',s:'beberapa saat',m:'seminit',mm:'%d minit',h:'sejam',hh:'%d jam',d:'sehari',dd:'%d hari',M:'sebulan',MM:'%d bulan',y:'setahun',yy:'%d tahun'},week:{dow:1,doy:7}}),R.defineLocale('ms',{months:'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),monthsShort:'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),weekdays:'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),weekdaysShort:'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),weekdaysMin:'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(il,dl){return(12===il&&(il=0),'pagi'===dl)?il:'tengahari'===dl?11<=il?il:il+12:'petang'===dl||'malam'===dl?il+12:void 0},meridiem:function(il){return 11>il?'pagi':15>il?'tengahari':19>il?'petang':'malam'},calendar:{sameDay:'[Hari ini pukul] LT',nextDay:'[Esok pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kelmarin pukul] LT',lastWeek:'dddd [lepas pukul] LT',sameElse:'L'},relativeTime:{future:'dalam %s',past:'%s yang lepas',s:'beberapa saat',m:'seminit',mm:'%d minit',h:'sejam',hh:'%d jam',d:'sehari',dd:'%d hari',M:'sebulan',MM:'%d bulan',y:'setahun',yy:'%d tahun'},week:{dow:1,doy:7}});var wd={0:'\u1040',1:'\u1041',2:'\u1042',3:'\u1043',4:'\u1044',5:'\u1045',6:'\u1046',7:'\u1047',8:'\u1048',9:'\u1049'},kd={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('my',{months:'\u1007\u1014\u103A\u1014\u101D\u102B\u101B\u102E_\u1016\u1031\u1016\u1031\u102C\u103A\u101D\u102B\u101B\u102E_\u1019\u1010\u103A_\u1027\u1015\u103C\u102E_\u1019\u1031_\u1007\u103D\u1014\u103A_\u1007\u1030\u101C\u102D\u102F\u1004\u103A_\u101E\u103C\u1002\u102F\u1010\u103A_\u1005\u1000\u103A\u1010\u1004\u103A\u1018\u102C_\u1021\u1031\u102C\u1000\u103A\u1010\u102D\u102F\u1018\u102C_\u1014\u102D\u102F\u101D\u1004\u103A\u1018\u102C_\u1012\u102E\u1007\u1004\u103A\u1018\u102C'.split('_'),monthsShort:'\u1007\u1014\u103A_\u1016\u1031_\u1019\u1010\u103A_\u1015\u103C\u102E_\u1019\u1031_\u1007\u103D\u1014\u103A_\u101C\u102D\u102F\u1004\u103A_\u101E\u103C_\u1005\u1000\u103A_\u1021\u1031\u102C\u1000\u103A_\u1014\u102D\u102F_\u1012\u102E'.split('_'),weekdays:'\u1010\u1014\u1004\u103A\u1039\u1002\u1014\u103D\u1031_\u1010\u1014\u1004\u103A\u1039\u101C\u102C_\u1021\u1004\u103A\u1039\u1002\u102B_\u1017\u102F\u1012\u1039\u1013\u101F\u1030\u1038_\u1000\u103C\u102C\u101E\u1015\u1010\u1031\u1038_\u101E\u1031\u102C\u1000\u103C\u102C_\u1005\u1014\u1031'.split('_'),weekdaysShort:'\u1014\u103D\u1031_\u101C\u102C_\u1002\u102B_\u101F\u1030\u1038_\u1000\u103C\u102C_\u101E\u1031\u102C_\u1014\u1031'.split('_'),weekdaysMin:'\u1014\u103D\u1031_\u101C\u102C_\u1002\u102B_\u101F\u1030\u1038_\u1000\u103C\u102C_\u101E\u1031\u102C_\u1014\u1031'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u101A\u1014\u1031.] LT [\u1019\u103E\u102C]',nextDay:'[\u1019\u1014\u1000\u103A\u1016\u103C\u1014\u103A] LT [\u1019\u103E\u102C]',nextWeek:'dddd LT [\u1019\u103E\u102C]',lastDay:'[\u1019\u1014\u1031.\u1000] LT [\u1019\u103E\u102C]',lastWeek:'[\u1015\u103C\u102E\u1038\u1001\u1032\u1037\u101E\u1031\u102C] dddd LT [\u1019\u103E\u102C]',sameElse:'L'},relativeTime:{future:'\u101C\u102C\u1019\u100A\u103A\u1037 %s \u1019\u103E\u102C',past:'\u101C\u103D\u1014\u103A\u1001\u1032\u1037\u101E\u1031\u102C %s \u1000',s:'\u1005\u1000\u1039\u1000\u1014\u103A.\u1021\u1014\u100A\u103A\u1038\u1004\u101A\u103A',m:'\u1010\u1005\u103A\u1019\u102D\u1014\u1005\u103A',mm:'%d \u1019\u102D\u1014\u1005\u103A',h:'\u1010\u1005\u103A\u1014\u102C\u101B\u102E',hh:'%d \u1014\u102C\u101B\u102E',d:'\u1010\u1005\u103A\u101B\u1000\u103A',dd:'%d \u101B\u1000\u103A',M:'\u1010\u1005\u103A\u101C',MM:'%d \u101C',y:'\u1010\u1005\u103A\u1014\u103E\u1005\u103A',yy:'%d \u1014\u103E\u1005\u103A'},preparse:function(il){return il.replace(/[]/g,function(dl){return kd[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return wd[dl]})},week:{dow:1,doy:4}}),R.defineLocale('nb',{months:'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),monthsShort:'jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),monthsParseExact:!0,weekdays:'s\xF8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xF8rdag'.split('_'),weekdaysShort:'s\xF8._ma._ti._on._to._fr._l\xF8.'.split('_'),weekdaysMin:'s\xF8_ma_ti_on_to_fr_l\xF8'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY [kl.] HH:mm',LLLL:'dddd D. MMMM YYYY [kl.] HH:mm'},calendar:{sameDay:'[i dag kl.] LT',nextDay:'[i morgen kl.] LT',nextWeek:'dddd [kl.] LT',lastDay:'[i g\xE5r kl.] LT',lastWeek:'[forrige] dddd [kl.] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'%s siden',s:'noen sekunder',m:'ett minutt',mm:'%d minutter',h:'en time',hh:'%d timer',d:'en dag',dd:'%d dager',M:'en m\xE5ned',MM:'%d m\xE5neder',y:'ett \xE5r',yy:'%d \xE5r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var Yd={0:'\u0966',1:'\u0967',2:'\u0968',3:'\u0969',4:'\u096A',5:'\u096B',6:'\u096C',7:'\u096D',8:'\u096E',9:'\u096F'},Od={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('ne',{months:'\u091C\u0928\u0935\u0930\u0940_\u092B\u0947\u092C\u094D\u0930\u0941\u0935\u0930\u0940_\u092E\u093E\u0930\u094D\u091A_\u0905\u092A\u094D\u0930\u093F\u0932_\u092E\u0908_\u091C\u0941\u0928_\u091C\u0941\u0932\u093E\u0908_\u0905\u0917\u0937\u094D\u091F_\u0938\u0947\u092A\u094D\u091F\u0947\u092E\u094D\u092C\u0930_\u0905\u0915\u094D\u091F\u094B\u092C\u0930_\u0928\u094B\u092D\u0947\u092E\u094D\u092C\u0930_\u0921\u093F\u0938\u0947\u092E\u094D\u092C\u0930'.split('_'),monthsShort:'\u091C\u0928._\u092B\u0947\u092C\u094D\u0930\u0941._\u092E\u093E\u0930\u094D\u091A_\u0905\u092A\u094D\u0930\u093F._\u092E\u0908_\u091C\u0941\u0928_\u091C\u0941\u0932\u093E\u0908._\u0905\u0917._\u0938\u0947\u092A\u094D\u091F._\u0905\u0915\u094D\u091F\u094B._\u0928\u094B\u092D\u0947._\u0921\u093F\u0938\u0947.'.split('_'),monthsParseExact:!0,weekdays:'\u0906\u0907\u0924\u092C\u093E\u0930_\u0938\u094B\u092E\u092C\u093E\u0930_\u092E\u0919\u094D\u0917\u0932\u092C\u093E\u0930_\u092C\u0941\u0927\u092C\u093E\u0930_\u092C\u093F\u0939\u093F\u092C\u093E\u0930_\u0936\u0941\u0915\u094D\u0930\u092C\u093E\u0930_\u0936\u0928\u093F\u092C\u093E\u0930'.split('_'),weekdaysShort:'\u0906\u0907\u0924._\u0938\u094B\u092E._\u092E\u0919\u094D\u0917\u0932._\u092C\u0941\u0927._\u092C\u093F\u0939\u093F._\u0936\u0941\u0915\u094D\u0930._\u0936\u0928\u093F.'.split('_'),weekdaysMin:'\u0906._\u0938\u094B._\u092E\u0902._\u092C\u0941._\u092C\u093F._\u0936\u0941._\u0936.'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'A\u0915\u094B h:mm \u092C\u091C\u0947',LTS:'A\u0915\u094B h:mm:ss \u092C\u091C\u0947',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A\u0915\u094B h:mm \u092C\u091C\u0947',LLLL:'dddd, D MMMM YYYY, A\u0915\u094B h:mm \u092C\u091C\u0947'},preparse:function(il){return il.replace(/[]/g,function(dl){return Od[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return Yd[dl]})},meridiemParse:/|||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u0930\u093E\u0924\u093F'===dl)?4>il?il:il+12:'\u092C\u093F\u0939\u093E\u0928'===dl?il:'\u0926\u093F\u0909\u0901\u0938\u094B'===dl?10<=il?il:il+12:'\u0938\u093E\u0901\u091D'===dl?il+12:void 0},meridiem:function(il){return 3>il?'\u0930\u093E\u0924\u093F':12>il?'\u092C\u093F\u0939\u093E\u0928':16>il?'\u0926\u093F\u0909\u0901\u0938\u094B':20>il?'\u0938\u093E\u0901\u091D':'\u0930\u093E\u0924\u093F'},calendar:{sameDay:'[\u0906\u091C] LT',nextDay:'[\u092D\u094B\u0932\u093F] LT',nextWeek:'[\u0906\u0909\u0901\u0926\u094B] dddd[,] LT',lastDay:'[\u0939\u093F\u091C\u094B] LT',lastWeek:'[\u0917\u090F\u0915\u094B] dddd[,] LT',sameElse:'L'},relativeTime:{future:'%s\u092E\u093E',past:'%s \u0905\u0917\u093E\u0921\u093F',s:'\u0915\u0947\u0939\u0940 \u0915\u094D\u0937\u0923',m:'\u090F\u0915 \u092E\u093F\u0928\u0947\u091F',mm:'%d \u092E\u093F\u0928\u0947\u091F',h:'\u090F\u0915 \u0918\u0923\u094D\u091F\u093E',hh:'%d \u0918\u0923\u094D\u091F\u093E',d:'\u090F\u0915 \u0926\u093F\u0928',dd:'%d \u0926\u093F\u0928',M:'\u090F\u0915 \u092E\u0939\u093F\u0928\u093E',MM:'%d \u092E\u0939\u093F\u0928\u093E',y:'\u090F\u0915 \u092C\u0930\u094D\u0937',yy:'%d \u092C\u0930\u094D\u0937'},week:{dow:0,doy:6}});var Nd='jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),Pd='jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_'),xd=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],Hd=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;R.defineLocale('nl-be',{months:'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),monthsShort:function(il,dl){return il?/-MMM-/.test(dl)?Pd[il.month()]:Nd[il.month()]:Nd},monthsRegex:Hd,monthsShortRegex:Hd,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:xd,longMonthsParse:xd,shortMonthsParse:xd,weekdays:'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),weekdaysShort:'zo._ma._di._wo._do._vr._za.'.split('_'),weekdaysMin:'Zo_Ma_Di_Wo_Do_Vr_Za'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[vandaag om] LT',nextDay:'[morgen om] LT',nextWeek:'dddd [om] LT',lastDay:'[gisteren om] LT',lastWeek:'[afgelopen] dddd [om] LT',sameElse:'L'},relativeTime:{future:'over %s',past:'%s geleden',s:'een paar seconden',m:'\xE9\xE9n minuut',mm:'%d minuten',h:'\xE9\xE9n uur',hh:'%d uur',d:'\xE9\xE9n dag',dd:'%d dagen',M:'\xE9\xE9n maand',MM:'%d maanden',y:'\xE9\xE9n jaar',yy:'%d jaar'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(il){return il+(1===il||8===il||20<=il?'ste':'de')},week:{dow:1,doy:4}});var jd='jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),Fd='jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_'),Ud=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],Bd=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;R.defineLocale('nl',{months:'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),monthsShort:function(il,dl){return il?/-MMM-/.test(dl)?Fd[il.month()]:jd[il.month()]:jd},monthsRegex:Bd,monthsShortRegex:Bd,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:Ud,longMonthsParse:Ud,shortMonthsParse:Ud,weekdays:'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),weekdaysShort:'zo._ma._di._wo._do._vr._za.'.split('_'),weekdaysMin:'Zo_Ma_Di_Wo_Do_Vr_Za'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[vandaag om] LT',nextDay:'[morgen om] LT',nextWeek:'dddd [om] LT',lastDay:'[gisteren om] LT',lastWeek:'[afgelopen] dddd [om] LT',sameElse:'L'},relativeTime:{future:'over %s',past:'%s geleden',s:'een paar seconden',m:'\xE9\xE9n minuut',mm:'%d minuten',h:'\xE9\xE9n uur',hh:'%d uur',d:'\xE9\xE9n dag',dd:'%d dagen',M:'\xE9\xE9n maand',MM:'%d maanden',y:'\xE9\xE9n jaar',yy:'%d jaar'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(il){return il+(1===il||8===il||20<=il?'ste':'de')},week:{dow:1,doy:4}}),R.defineLocale('nn',{months:'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),monthsShort:'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),weekdays:'sundag_m\xE5ndag_tysdag_onsdag_torsdag_fredag_laurdag'.split('_'),weekdaysShort:'sun_m\xE5n_tys_ons_tor_fre_lau'.split('_'),weekdaysMin:'su_m\xE5_ty_on_to_fr_l\xF8'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY [kl.] H:mm',LLLL:'dddd D. MMMM YYYY [kl.] HH:mm'},calendar:{sameDay:'[I dag klokka] LT',nextDay:'[I morgon klokka] LT',nextWeek:'dddd [klokka] LT',lastDay:'[I g\xE5r klokka] LT',lastWeek:'[F\xF8reg\xE5ande] dddd [klokka] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'%s sidan',s:'nokre sekund',m:'eit minutt',mm:'%d minutt',h:'ein time',hh:'%d timar',d:'ein dag',dd:'%d dagar',M:'ein m\xE5nad',MM:'%d m\xE5nader',y:'eit \xE5r',yy:'%d \xE5r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var qd={0:'\u0A66',1:'\u0A67',2:'\u0A68',3:'\u0A69',4:'\u0A6A',5:'\u0A6B',6:'\u0A6C',7:'\u0A6D',8:'\u0A6E',9:'\u0A6F'},zd={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('pa-in',{months:'\u0A1C\u0A28\u0A35\u0A30\u0A40_\u0A2B\u0A3C\u0A30\u0A35\u0A30\u0A40_\u0A2E\u0A3E\u0A30\u0A1A_\u0A05\u0A2A\u0A4D\u0A30\u0A48\u0A32_\u0A2E\u0A08_\u0A1C\u0A42\u0A28_\u0A1C\u0A41\u0A32\u0A3E\u0A08_\u0A05\u0A17\u0A38\u0A24_\u0A38\u0A24\u0A70\u0A2C\u0A30_\u0A05\u0A15\u0A24\u0A42\u0A2C\u0A30_\u0A28\u0A35\u0A70\u0A2C\u0A30_\u0A26\u0A38\u0A70\u0A2C\u0A30'.split('_'),monthsShort:'\u0A1C\u0A28\u0A35\u0A30\u0A40_\u0A2B\u0A3C\u0A30\u0A35\u0A30\u0A40_\u0A2E\u0A3E\u0A30\u0A1A_\u0A05\u0A2A\u0A4D\u0A30\u0A48\u0A32_\u0A2E\u0A08_\u0A1C\u0A42\u0A28_\u0A1C\u0A41\u0A32\u0A3E\u0A08_\u0A05\u0A17\u0A38\u0A24_\u0A38\u0A24\u0A70\u0A2C\u0A30_\u0A05\u0A15\u0A24\u0A42\u0A2C\u0A30_\u0A28\u0A35\u0A70\u0A2C\u0A30_\u0A26\u0A38\u0A70\u0A2C\u0A30'.split('_'),weekdays:'\u0A10\u0A24\u0A35\u0A3E\u0A30_\u0A38\u0A4B\u0A2E\u0A35\u0A3E\u0A30_\u0A2E\u0A70\u0A17\u0A32\u0A35\u0A3E\u0A30_\u0A2C\u0A41\u0A27\u0A35\u0A3E\u0A30_\u0A35\u0A40\u0A30\u0A35\u0A3E\u0A30_\u0A38\u0A3C\u0A41\u0A71\u0A15\u0A30\u0A35\u0A3E\u0A30_\u0A38\u0A3C\u0A28\u0A40\u0A1A\u0A30\u0A35\u0A3E\u0A30'.split('_'),weekdaysShort:'\u0A10\u0A24_\u0A38\u0A4B\u0A2E_\u0A2E\u0A70\u0A17\u0A32_\u0A2C\u0A41\u0A27_\u0A35\u0A40\u0A30_\u0A38\u0A3C\u0A41\u0A15\u0A30_\u0A38\u0A3C\u0A28\u0A40'.split('_'),weekdaysMin:'\u0A10\u0A24_\u0A38\u0A4B\u0A2E_\u0A2E\u0A70\u0A17\u0A32_\u0A2C\u0A41\u0A27_\u0A35\u0A40\u0A30_\u0A38\u0A3C\u0A41\u0A15\u0A30_\u0A38\u0A3C\u0A28\u0A40'.split('_'),longDateFormat:{LT:'A h:mm \u0A35\u0A1C\u0A47',LTS:'A h:mm:ss \u0A35\u0A1C\u0A47',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm \u0A35\u0A1C\u0A47',LLLL:'dddd, D MMMM YYYY, A h:mm \u0A35\u0A1C\u0A47'},calendar:{sameDay:'[\u0A05\u0A1C] LT',nextDay:'[\u0A15\u0A32] LT',nextWeek:'dddd, LT',lastDay:'[\u0A15\u0A32] LT',lastWeek:'[\u0A2A\u0A3F\u0A1B\u0A32\u0A47] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u0A35\u0A3F\u0A71\u0A1A',past:'%s \u0A2A\u0A3F\u0A1B\u0A32\u0A47',s:'\u0A15\u0A41\u0A1D \u0A38\u0A15\u0A3F\u0A70\u0A1F',m:'\u0A07\u0A15 \u0A2E\u0A3F\u0A70\u0A1F',mm:'%d \u0A2E\u0A3F\u0A70\u0A1F',h:'\u0A07\u0A71\u0A15 \u0A18\u0A70\u0A1F\u0A3E',hh:'%d \u0A18\u0A70\u0A1F\u0A47',d:'\u0A07\u0A71\u0A15 \u0A26\u0A3F\u0A28',dd:'%d \u0A26\u0A3F\u0A28',M:'\u0A07\u0A71\u0A15 \u0A2E\u0A39\u0A40\u0A28\u0A3E',MM:'%d \u0A2E\u0A39\u0A40\u0A28\u0A47',y:'\u0A07\u0A71\u0A15 \u0A38\u0A3E\u0A32',yy:'%d \u0A38\u0A3E\u0A32'},preparse:function(il){return il.replace(/[]/g,function(dl){return zd[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return qd[dl]})},meridiemParse:/|||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u0A30\u0A3E\u0A24'===dl)?4>il?il:il+12:'\u0A38\u0A35\u0A47\u0A30'===dl?il:'\u0A26\u0A41\u0A2A\u0A39\u0A3F\u0A30'===dl?10<=il?il:il+12:'\u0A38\u0A3C\u0A3E\u0A2E'===dl?il+12:void 0},meridiem:function(il){return 4>il?'\u0A30\u0A3E\u0A24':10>il?'\u0A38\u0A35\u0A47\u0A30':17>il?'\u0A26\u0A41\u0A2A\u0A39\u0A3F\u0A30':20>il?'\u0A38\u0A3C\u0A3E\u0A2E':'\u0A30\u0A3E\u0A24'},week:{dow:0,doy:6}});var Wd='stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017Adziernik_listopad_grudzie\u0144'.split('_'),Vd='stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015Bnia_pa\u017Adziernika_listopada_grudnia'.split('_');R.defineLocale('pl',{months:function(il,dl){return il?''===dl?'('+Vd[il.month()]+'|'+Wd[il.month()]+')':/D MMMM/.test(dl)?Vd[il.month()]:Wd[il.month()]:Wd},monthsShort:'sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017A_lis_gru'.split('_'),weekdays:'niedziela_poniedzia\u0142ek_wtorek_\u015Broda_czwartek_pi\u0105tek_sobota'.split('_'),weekdaysShort:'ndz_pon_wt_\u015Br_czw_pt_sob'.split('_'),weekdaysMin:'Nd_Pn_Wt_\u015Ar_Cz_Pt_So'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Dzi\u015B o] LT',nextDay:'[Jutro o] LT',nextWeek:'[W] dddd [o] LT',lastDay:'[Wczoraj o] LT',lastWeek:function(){switch(this.day()){case 0:return'[W zesz\u0142\u0105 niedziel\u0119 o] LT';case 3:return'[W zesz\u0142\u0105 \u015Brod\u0119 o] LT';case 6:return'[W zesz\u0142\u0105 sobot\u0119 o] LT';default:return'[W zesz\u0142y] dddd [o] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'%s temu',s:'kilka sekund',m:er,mm:er,h:er,hh:er,d:'1 dzie\u0144',dd:'%d dni',M:'miesi\u0105c',MM:er,y:'rok',yy:er},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('pt-br',{months:'Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split('_'),monthsShort:'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),weekdays:'Domingo_Segunda-feira_Ter\xE7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xE1bado'.split('_'),weekdaysShort:'Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b'.split('_'),weekdaysMin:'Do_2\xAA_3\xAA_4\xAA_5\xAA_6\xAA_S\xE1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY [\xE0s] HH:mm',LLLL:'dddd, D [de] MMMM [de] YYYY [\xE0s] HH:mm'},calendar:{sameDay:'[Hoje \xE0s] LT',nextDay:'[Amanh\xE3 \xE0s] LT',nextWeek:'dddd [\xE0s] LT',lastDay:'[Ontem \xE0s] LT',lastWeek:function(){return 0===this.day()||6===this.day()?'[\xDAltimo] dddd [\xE0s] LT':'[\xDAltima] dddd [\xE0s] LT'},sameElse:'L'},relativeTime:{future:'em %s',past:'%s atr\xE1s',s:'poucos segundos',m:'um minuto',mm:'%d minutos',h:'uma hora',hh:'%d horas',d:'um dia',dd:'%d dias',M:'um m\xEAs',MM:'%d meses',y:'um ano',yy:'%d anos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA'}),R.defineLocale('pt',{months:'Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split('_'),monthsShort:'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),weekdays:'Domingo_Segunda-Feira_Ter\xE7a-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_S\xE1bado'.split('_'),weekdaysShort:'Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b'.split('_'),weekdaysMin:'Do_2\xAA_3\xAA_4\xAA_5\xAA_6\xAA_S\xE1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY HH:mm',LLLL:'dddd, D [de] MMMM [de] YYYY HH:mm'},calendar:{sameDay:'[Hoje \xE0s] LT',nextDay:'[Amanh\xE3 \xE0s] LT',nextWeek:'dddd [\xE0s] LT',lastDay:'[Ontem \xE0s] LT',lastWeek:function(){return 0===this.day()||6===this.day()?'[\xDAltimo] dddd [\xE0s] LT':'[\xDAltima] dddd [\xE0s] LT'},sameElse:'L'},relativeTime:{future:'em %s',past:'h\xE1 %s',s:'segundos',m:'um minuto',mm:'%d minutos',h:'uma hora',hh:'%d horas',d:'um dia',dd:'%d dias',M:'um m\xEAs',MM:'%d meses',y:'um ano',yy:'%d anos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\xBA',week:{dow:1,doy:4}}),R.defineLocale('ro',{months:'ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie'.split('_'),monthsShort:'ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.'.split('_'),monthsParseExact:!0,weekdays:'duminic\u0103_luni_mar\u021Bi_miercuri_joi_vineri_s\xE2mb\u0103t\u0103'.split('_'),weekdaysShort:'Dum_Lun_Mar_Mie_Joi_Vin_S\xE2m'.split('_'),weekdaysMin:'Du_Lu_Ma_Mi_Jo_Vi_S\xE2'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY H:mm',LLLL:'dddd, D MMMM YYYY H:mm'},calendar:{sameDay:'[azi la] LT',nextDay:'[m\xE2ine la] LT',nextWeek:'dddd [la] LT',lastDay:'[ieri la] LT',lastWeek:'[fosta] dddd [la] LT',sameElse:'L'},relativeTime:{future:'peste %s',past:'%s \xEEn urm\u0103',s:'c\xE2teva secunde',m:'un minut',mm:tr,h:'o or\u0103',hh:tr,d:'o zi',dd:tr,M:'o lun\u0103',MM:tr,y:'un an',yy:tr},week:{dow:1,doy:7}});var Gd=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];R.defineLocale('ru',{months:{format:'\u044F\u043D\u0432\u0430\u0440\u044F_\u0444\u0435\u0432\u0440\u0430\u043B\u044F_\u043C\u0430\u0440\u0442\u0430_\u0430\u043F\u0440\u0435\u043B\u044F_\u043C\u0430\u044F_\u0438\u044E\u043D\u044F_\u0438\u044E\u043B\u044F_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F_\u043E\u043A\u0442\u044F\u0431\u0440\u044F_\u043D\u043E\u044F\u0431\u0440\u044F_\u0434\u0435\u043A\u0430\u0431\u0440\u044F'.split('_'),standalone:'\u044F\u043D\u0432\u0430\u0440\u044C_\u0444\u0435\u0432\u0440\u0430\u043B\u044C_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0435\u043B\u044C_\u043C\u0430\u0439_\u0438\u044E\u043D\u044C_\u0438\u044E\u043B\u044C_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C_\u043E\u043A\u0442\u044F\u0431\u0440\u044C_\u043D\u043E\u044F\u0431\u0440\u044C_\u0434\u0435\u043A\u0430\u0431\u0440\u044C'.split('_')},monthsShort:{format:'\u044F\u043D\u0432._\u0444\u0435\u0432\u0440._\u043C\u0430\u0440._\u0430\u043F\u0440._\u043C\u0430\u044F_\u0438\u044E\u043D\u044F_\u0438\u044E\u043B\u044F_\u0430\u0432\u0433._\u0441\u0435\u043D\u0442._\u043E\u043A\u0442._\u043D\u043E\u044F\u0431._\u0434\u0435\u043A.'.split('_'),standalone:'\u044F\u043D\u0432._\u0444\u0435\u0432\u0440._\u043C\u0430\u0440\u0442_\u0430\u043F\u0440._\u043C\u0430\u0439_\u0438\u044E\u043D\u044C_\u0438\u044E\u043B\u044C_\u0430\u0432\u0433._\u0441\u0435\u043D\u0442._\u043E\u043A\u0442._\u043D\u043E\u044F\u0431._\u0434\u0435\u043A.'.split('_')},weekdays:{standalone:'\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435_\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A_\u0432\u0442\u043E\u0440\u043D\u0438\u043A_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043F\u044F\u0442\u043D\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043E\u0442\u0430'.split('_'),format:'\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435_\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A_\u0432\u0442\u043E\u0440\u043D\u0438\u043A_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043F\u044F\u0442\u043D\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043E\u0442\u0443'.split('_'),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:'\u0432\u0441_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431'.split('_'),weekdaysMin:'\u0432\u0441_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431'.split('_'),monthsParse:Gd,longMonthsParse:Gd,shortMonthsParse:Gd,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY \u0433.',LLL:'D MMMM YYYY \u0433., HH:mm',LLLL:'dddd, D MMMM YYYY \u0433., HH:mm'},calendar:{sameDay:'[\u0421\u0435\u0433\u043E\u0434\u043D\u044F \u0432] LT',nextDay:'[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT',lastDay:'[\u0412\u0447\u0435\u0440\u0430 \u0432] LT',nextWeek:function(il){if(il.week()!==this.week())switch(this.day()){case 0:return'[\u0412 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435] dddd [\u0432] LT';case 1:case 2:case 4:return'[\u0412 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439] dddd [\u0432] LT';case 3:case 5:case 6:return'[\u0412 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E] dddd [\u0432] LT';}else return 2===this.day()?'[\u0412\u043E] dddd [\u0432] LT':'[\u0412] dddd [\u0432] LT'},lastWeek:function(il){if(il.week()!==this.week())switch(this.day()){case 0:return'[\u0412 \u043F\u0440\u043E\u0448\u043B\u043E\u0435] dddd [\u0432] LT';case 1:case 2:case 4:return'[\u0412 \u043F\u0440\u043E\u0448\u043B\u044B\u0439] dddd [\u0432] LT';case 3:case 5:case 6:return'[\u0412 \u043F\u0440\u043E\u0448\u043B\u0443\u044E] dddd [\u0432] LT';}else return 2===this.day()?'[\u0412\u043E] dddd [\u0432] LT':'[\u0412] dddd [\u0432] LT'},sameElse:'L'},relativeTime:{future:'\u0447\u0435\u0440\u0435\u0437 %s',past:'%s \u043D\u0430\u0437\u0430\u0434',s:'\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0441\u0435\u043A\u0443\u043D\u0434',m:ar,mm:ar,h:'\u0447\u0430\u0441',hh:ar,d:'\u0434\u0435\u043D\u044C',dd:ar,M:'\u043C\u0435\u0441\u044F\u0446',MM:ar,y:'\u0433\u043E\u0434',yy:ar},meridiemParse:/|||/i,isPM:function(il){return /^(|)$/.test(il)},meridiem:function(il){return 4>il?'\u043D\u043E\u0447\u0438':12>il?'\u0443\u0442\u0440\u0430':17>il?'\u0434\u043D\u044F':'\u0432\u0435\u0447\u0435\u0440\u0430'},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(il,dl){return'M'===dl||'d'===dl||'DDD'===dl?il+'-\u0439':'D'===dl?il+'-\u0433\u043E':'w'===dl||'W'===dl?il+'-\u044F':il},week:{dow:1,doy:7}});var Jd=['\u062C\u0646\u0648\u0631\u064A','\u0641\u064A\u0628\u0631\u0648\u0631\u064A','\u0645\u0627\u0631\u0686','\u0627\u067E\u0631\u064A\u0644','\u0645\u0626\u064A','\u062C\u0648\u0646','\u062C\u0648\u0644\u0627\u0621\u0650','\u0622\u06AF\u0633\u067D','\u0633\u064A\u067E\u067D\u0645\u0628\u0631','\u0622\u06AA\u067D\u0648\u0628\u0631','\u0646\u0648\u0645\u0628\u0631','\u068A\u0633\u0645\u0628\u0631'],Kd=['\u0622\u0686\u0631','\u0633\u0648\u0645\u0631','\u0627\u06B1\u0627\u0631\u0648','\u0627\u0631\u0628\u0639','\u062E\u0645\u064A\u0633','\u062C\u0645\u0639','\u0687\u0646\u0687\u0631'];R.defineLocale('sd',{months:Jd,monthsShort:Jd,weekdays:Kd,weekdaysShort:Kd,weekdaysMin:Kd,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd\u060C D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0634\u0627\u0645'===il},meridiem:function(il){return 12>il?'\u0635\u0628\u062D':'\u0634\u0627\u0645'},calendar:{sameDay:'[\u0627\u0684] LT',nextDay:'[\u0633\u0680\u0627\u06BB\u064A] LT',nextWeek:'dddd [\u0627\u06B3\u064A\u0646 \u0647\u0641\u062A\u064A \u062A\u064A] LT',lastDay:'[\u06AA\u0627\u0644\u0647\u0647] LT',lastWeek:'[\u06AF\u0632\u0631\u064A\u0644 \u0647\u0641\u062A\u064A] dddd [\u062A\u064A] LT',sameElse:'L'},relativeTime:{future:'%s \u067E\u0648\u0621',past:'%s \u0627\u06B3',s:'\u0686\u0646\u062F \u0633\u064A\u06AA\u0646\u068A',m:'\u0647\u06AA \u0645\u0646\u067D',mm:'%d \u0645\u0646\u067D',h:'\u0647\u06AA \u06AA\u0644\u0627\u06AA',hh:'%d \u06AA\u0644\u0627\u06AA',d:'\u0647\u06AA \u068F\u064A\u0646\u0647\u0646',dd:'%d \u068F\u064A\u0646\u0647\u0646',M:'\u0647\u06AA \u0645\u0647\u064A\u0646\u0648',MM:'%d \u0645\u0647\u064A\u0646\u0627',y:'\u0647\u06AA \u0633\u0627\u0644',yy:'%d \u0633\u0627\u0644'},preparse:function(il){return il.replace(//g,',')},postformat:function(il){return il.replace(/,/g,'\u060C')},week:{dow:1,doy:4}}),R.defineLocale('se',{months:'o\u0111\u0111ajagem\xE1nnu_guovvam\xE1nnu_njuk\u010Dam\xE1nnu_cuo\u014Bom\xE1nnu_miessem\xE1nnu_geassem\xE1nnu_suoidnem\xE1nnu_borgem\xE1nnu_\u010Dak\u010Dam\xE1nnu_golggotm\xE1nnu_sk\xE1bmam\xE1nnu_juovlam\xE1nnu'.split('_'),monthsShort:'o\u0111\u0111j_guov_njuk_cuo_mies_geas_suoi_borg_\u010Dak\u010D_golg_sk\xE1b_juov'.split('_'),weekdays:'sotnabeaivi_vuoss\xE1rga_ma\u014B\u014Beb\xE1rga_gaskavahkku_duorastat_bearjadat_l\xE1vvardat'.split('_'),weekdaysShort:'sotn_vuos_ma\u014B_gask_duor_bear_l\xE1v'.split('_'),weekdaysMin:'s_v_m_g_d_b_L'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'MMMM D. [b.] YYYY',LLL:'MMMM D. [b.] YYYY [ti.] HH:mm',LLLL:'dddd, MMMM D. [b.] YYYY [ti.] HH:mm'},calendar:{sameDay:'[otne ti] LT',nextDay:'[ihttin ti] LT',nextWeek:'dddd [ti] LT',lastDay:'[ikte ti] LT',lastWeek:'[ovddit] dddd [ti] LT',sameElse:'L'},relativeTime:{future:'%s gea\u017Ees',past:'ma\u014Bit %s',s:'moadde sekunddat',m:'okta minuhta',mm:'%d minuhtat',h:'okta diimmu',hh:'%d diimmut',d:'okta beaivi',dd:'%d beaivvit',M:'okta m\xE1nnu',MM:'%d m\xE1nut',y:'okta jahki',yy:'%d jagit'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('si',{months:'\u0DA2\u0DB1\u0DC0\u0DCF\u0DBB\u0DD2_\u0DB4\u0DD9\u0DB6\u0DBB\u0DC0\u0DCF\u0DBB\u0DD2_\u0DB8\u0DCF\u0DBB\u0DCA\u0DAD\u0DD4_\u0D85\u0DB4\u0DCA\u200D\u0DBB\u0DDA\u0DBD\u0DCA_\u0DB8\u0DD0\u0DBA\u0DD2_\u0DA2\u0DD6\u0DB1\u0DD2_\u0DA2\u0DD6\u0DBD\u0DD2_\u0D85\u0D9C\u0DDD\u0DC3\u0DCA\u0DAD\u0DD4_\u0DC3\u0DD0\u0DB4\u0DCA\u0DAD\u0DD0\u0DB8\u0DCA\u0DB6\u0DBB\u0DCA_\u0D94\u0D9A\u0DCA\u0DAD\u0DDD\u0DB6\u0DBB\u0DCA_\u0DB1\u0DDC\u0DC0\u0DD0\u0DB8\u0DCA\u0DB6\u0DBB\u0DCA_\u0DAF\u0DD9\u0DC3\u0DD0\u0DB8\u0DCA\u0DB6\u0DBB\u0DCA'.split('_'),monthsShort:'\u0DA2\u0DB1_\u0DB4\u0DD9\u0DB6_\u0DB8\u0DCF\u0DBB\u0DCA_\u0D85\u0DB4\u0DCA_\u0DB8\u0DD0\u0DBA\u0DD2_\u0DA2\u0DD6\u0DB1\u0DD2_\u0DA2\u0DD6\u0DBD\u0DD2_\u0D85\u0D9C\u0DDD_\u0DC3\u0DD0\u0DB4\u0DCA_\u0D94\u0D9A\u0DCA_\u0DB1\u0DDC\u0DC0\u0DD0_\u0DAF\u0DD9\u0DC3\u0DD0'.split('_'),weekdays:'\u0D89\u0DBB\u0DD2\u0DAF\u0DCF_\u0DC3\u0DB3\u0DD4\u0DAF\u0DCF_\u0D85\u0D9F\u0DC4\u0DBB\u0DD4\u0DC0\u0DCF\u0DAF\u0DCF_\u0DB6\u0DAF\u0DCF\u0DAF\u0DCF_\u0DB6\u0DCA\u200D\u0DBB\u0DC4\u0DC3\u0DCA\u0DB4\u0DAD\u0DD2\u0DB1\u0DCA\u0DAF\u0DCF_\u0DC3\u0DD2\u0D9A\u0DD4\u0DBB\u0DCF\u0DAF\u0DCF_\u0DC3\u0DD9\u0DB1\u0DC3\u0DD4\u0DBB\u0DCF\u0DAF\u0DCF'.split('_'),weekdaysShort:'\u0D89\u0DBB\u0DD2_\u0DC3\u0DB3\u0DD4_\u0D85\u0D9F_\u0DB6\u0DAF\u0DCF_\u0DB6\u0DCA\u200D\u0DBB\u0DC4_\u0DC3\u0DD2\u0D9A\u0DD4_\u0DC3\u0DD9\u0DB1'.split('_'),weekdaysMin:'\u0D89_\u0DC3_\u0D85_\u0DB6_\u0DB6\u0DCA\u200D\u0DBB_\u0DC3\u0DD2_\u0DC3\u0DD9'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'a h:mm',LTS:'a h:mm:ss',L:'YYYY/MM/DD',LL:'YYYY MMMM D',LLL:'YYYY MMMM D, a h:mm',LLLL:'YYYY MMMM D [\u0DC0\u0DD0\u0DB1\u0DD2] dddd, a h:mm:ss'},calendar:{sameDay:'[\u0D85\u0DAF] LT[\u0DA7]',nextDay:'[\u0DC4\u0DD9\u0DA7] LT[\u0DA7]',nextWeek:'dddd LT[\u0DA7]',lastDay:'[\u0D8A\u0DBA\u0DDA] LT[\u0DA7]',lastWeek:'[\u0DB4\u0DC3\u0DD4\u0D9C\u0DD2\u0DBA] dddd LT[\u0DA7]',sameElse:'L'},relativeTime:{future:'%s\u0D9A\u0DD2\u0DB1\u0DCA',past:'%s\u0D9A\u0DA7 \u0DB4\u0DD9\u0DBB',s:'\u0DAD\u0DAD\u0DCA\u0DB4\u0DBB \u0D9A\u0DD2\u0DC4\u0DD2\u0DB4\u0DBA',m:'\u0DB8\u0DD2\u0DB1\u0DD2\u0DAD\u0DCA\u0DAD\u0DD4\u0DC0',mm:'\u0DB8\u0DD2\u0DB1\u0DD2\u0DAD\u0DCA\u0DAD\u0DD4 %d',h:'\u0DB4\u0DD0\u0DBA',hh:'\u0DB4\u0DD0\u0DBA %d',d:'\u0DAF\u0DD2\u0DB1\u0DBA',dd:'\u0DAF\u0DD2\u0DB1 %d',M:'\u0DB8\u0DCF\u0DC3\u0DBA',MM:'\u0DB8\u0DCF\u0DC3 %d',y:'\u0DC0\u0DC3\u0DBB',yy:'\u0DC0\u0DC3\u0DBB %d'},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(il){return il+' \u0DC0\u0DD0\u0DB1\u0DD2'},meridiemParse:/ | |.|../,isPM:function(il){return'\u0DB4.\u0DC0.'===il||'\u0DB4\u0DC3\u0DCA \u0DC0\u0DBB\u0DD4'===il},meridiem:function(il,dl,ll){return 11<il?ll?'\u0DB4.\u0DC0.':'\u0DB4\u0DC3\u0DCA \u0DC0\u0DBB\u0DD4':ll?'\u0DB4\u0DD9.\u0DC0.':'\u0DB4\u0DD9\u0DBB \u0DC0\u0DBB\u0DD4'}});var $d='janu\xE1r_febru\xE1r_marec_apr\xEDl_m\xE1j_j\xFAn_j\xFAl_august_september_okt\xF3ber_november_december'.split('_'),Xd='jan_feb_mar_apr_m\xE1j_j\xFAn_j\xFAl_aug_sep_okt_nov_dec'.split('_');R.defineLocale('sk',{months:$d,monthsShort:Xd,weekdays:'nede\u013Ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota'.split('_'),weekdaysShort:'ne_po_ut_st_\u0161t_pi_so'.split('_'),weekdaysMin:'ne_po_ut_st_\u0161t_pi_so'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd D. MMMM YYYY H:mm'},calendar:{sameDay:'[dnes o] LT',nextDay:'[zajtra o] LT',nextWeek:function(){switch(this.day()){case 0:return'[v nede\u013Eu o] LT';case 1:case 2:return'[v] dddd [o] LT';case 3:return'[v stredu o] LT';case 4:return'[vo \u0161tvrtok o] LT';case 5:return'[v piatok o] LT';case 6:return'[v sobotu o] LT';}},lastDay:'[v\u010Dera o] LT',lastWeek:function(){switch(this.day()){case 0:return'[minul\xFA nede\u013Eu o] LT';case 1:case 2:return'[minul\xFD] dddd [o] LT';case 3:return'[minul\xFA stredu o] LT';case 4:case 5:return'[minul\xFD] dddd [o] LT';case 6:return'[minul\xFA sobotu o] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'pred %s',s:rr,m:rr,mm:rr,h:rr,hh:rr,d:rr,dd:rr,M:rr,MM:rr,y:rr,yy:rr},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('sl',{months:'januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december'.split('_'),monthsShort:'jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.'.split('_'),monthsParseExact:!0,weekdays:'nedelja_ponedeljek_torek_sreda_\u010Detrtek_petek_sobota'.split('_'),weekdaysShort:'ned._pon._tor._sre._\u010Det._pet._sob.'.split('_'),weekdaysMin:'ne_po_to_sr_\u010De_pe_so'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danes ob] LT',nextDay:'[jutri ob] LT',nextWeek:function(){switch(this.day()){case 0:return'[v] [nedeljo] [ob] LT';case 3:return'[v] [sredo] [ob] LT';case 6:return'[v] [soboto] [ob] LT';case 1:case 2:case 4:case 5:return'[v] dddd [ob] LT';}},lastDay:'[v\u010Deraj ob] LT',lastWeek:function(){switch(this.day()){case 0:return'[prej\u0161njo] [nedeljo] [ob] LT';case 3:return'[prej\u0161njo] [sredo] [ob] LT';case 6:return'[prej\u0161njo] [soboto] [ob] LT';case 1:case 2:case 4:case 5:return'[prej\u0161nji] dddd [ob] LT';}},sameElse:'L'},relativeTime:{future:'\u010Dez %s',past:'pred %s',s:sr,m:sr,mm:sr,h:sr,hh:sr,d:sr,dd:sr,M:sr,MM:sr,y:sr,yy:sr},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}}),R.defineLocale('sq',{months:'Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xEBntor_Dhjetor'.split('_'),monthsShort:'Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xEBn_Dhj'.split('_'),weekdays:'E Diel_E H\xEBn\xEB_E Mart\xEB_E M\xEBrkur\xEB_E Enjte_E Premte_E Shtun\xEB'.split('_'),weekdaysShort:'Die_H\xEBn_Mar_M\xEBr_Enj_Pre_Sht'.split('_'),weekdaysMin:'D_H_Ma_M\xEB_E_P_Sh'.split('_'),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(il){return'M'===il.charAt(0)},meridiem:function(il){return 12>il?'PD':'MD'},longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Sot n\xEB] LT',nextDay:'[Nes\xEBr n\xEB] LT',nextWeek:'dddd [n\xEB] LT',lastDay:'[Dje n\xEB] LT',lastWeek:'dddd [e kaluar n\xEB] LT',sameElse:'L'},relativeTime:{future:'n\xEB %s',past:'%s m\xEB par\xEB',s:'disa sekonda',m:'nj\xEB minut\xEB',mm:'%d minuta',h:'nj\xEB or\xEB',hh:'%d or\xEB',d:'nj\xEB dit\xEB',dd:'%d dit\xEB',M:'nj\xEB muaj',MM:'%d muaj',y:'nj\xEB vit',yy:'%d vite'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var Qd={words:{m:['\u0458\u0435\u0434\u0430\u043D \u043C\u0438\u043D\u0443\u0442','\u0458\u0435\u0434\u043D\u0435 \u043C\u0438\u043D\u0443\u0442\u0435'],mm:['\u043C\u0438\u043D\u0443\u0442','\u043C\u0438\u043D\u0443\u0442\u0435','\u043C\u0438\u043D\u0443\u0442\u0430'],h:['\u0458\u0435\u0434\u0430\u043D \u0441\u0430\u0442','\u0458\u0435\u0434\u043D\u043E\u0433 \u0441\u0430\u0442\u0430'],hh:['\u0441\u0430\u0442','\u0441\u0430\u0442\u0430','\u0441\u0430\u0442\u0438'],dd:['\u0434\u0430\u043D','\u0434\u0430\u043D\u0430','\u0434\u0430\u043D\u0430'],MM:['\u043C\u0435\u0441\u0435\u0446','\u043C\u0435\u0441\u0435\u0446\u0430','\u043C\u0435\u0441\u0435\u0446\u0438'],yy:['\u0433\u043E\u0434\u0438\u043D\u0430','\u0433\u043E\u0434\u0438\u043D\u0435','\u0433\u043E\u0434\u0438\u043D\u0430']},correctGrammaticalCase:function(il,dl){return 1===il?dl[0]:2<=il&&4>=il?dl[1]:dl[2]},translate:function(il,dl,ll){var _l=Qd.words[ll];return 1===ll.length?dl?_l[0]:_l[1]:il+' '+Qd.correctGrammaticalCase(il,_l)}};R.defineLocale('sr-cyrl',{months:'\u0458\u0430\u043D\u0443\u0430\u0440_\u0444\u0435\u0431\u0440\u0443\u0430\u0440_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0438\u043B_\u043C\u0430\u0458_\u0458\u0443\u043D_\u0458\u0443\u043B_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043F\u0442\u0435\u043C\u0431\u0430\u0440_\u043E\u043A\u0442\u043E\u0431\u0430\u0440_\u043D\u043E\u0432\u0435\u043C\u0431\u0430\u0440_\u0434\u0435\u0446\u0435\u043C\u0431\u0430\u0440'.split('_'),monthsShort:'\u0458\u0430\u043D._\u0444\u0435\u0431._\u043C\u0430\u0440._\u0430\u043F\u0440._\u043C\u0430\u0458_\u0458\u0443\u043D_\u0458\u0443\u043B_\u0430\u0432\u0433._\u0441\u0435\u043F._\u043E\u043A\u0442._\u043D\u043E\u0432._\u0434\u0435\u0446.'.split('_'),monthsParseExact:!0,weekdays:'\u043D\u0435\u0434\u0435\u0459\u0430_\u043F\u043E\u043D\u0435\u0434\u0435\u0459\u0430\u043A_\u0443\u0442\u043E\u0440\u0430\u043A_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u0430\u043A_\u043F\u0435\u0442\u0430\u043A_\u0441\u0443\u0431\u043E\u0442\u0430'.split('_'),weekdaysShort:'\u043D\u0435\u0434._\u043F\u043E\u043D._\u0443\u0442\u043E._\u0441\u0440\u0435._\u0447\u0435\u0442._\u043F\u0435\u0442._\u0441\u0443\u0431.'.split('_'),weekdaysMin:'\u043D\u0435_\u043F\u043E_\u0443\u0442_\u0441\u0440_\u0447\u0435_\u043F\u0435_\u0441\u0443'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[\u0434\u0430\u043D\u0430\u0441 \u0443] LT',nextDay:'[\u0441\u0443\u0442\u0440\u0430 \u0443] LT',nextWeek:function(){switch(this.day()){case 0:return'[\u0443] [\u043D\u0435\u0434\u0435\u0459\u0443] [\u0443] LT';case 3:return'[\u0443] [\u0441\u0440\u0435\u0434\u0443] [\u0443] LT';case 6:return'[\u0443] [\u0441\u0443\u0431\u043E\u0442\u0443] [\u0443] LT';case 1:case 2:case 4:case 5:return'[\u0443] dddd [\u0443] LT';}},lastDay:'[\u0458\u0443\u0447\u0435 \u0443] LT',lastWeek:function(){return['[\u043F\u0440\u043E\u0448\u043B\u0435] [\u043D\u0435\u0434\u0435\u0459\u0435] [\u0443] LT','[\u043F\u0440\u043E\u0448\u043B\u043E\u0433] [\u043F\u043E\u043D\u0435\u0434\u0435\u0459\u043A\u0430] [\u0443] LT','[\u043F\u0440\u043E\u0448\u043B\u043E\u0433] [\u0443\u0442\u043E\u0440\u043A\u0430] [\u0443] LT','[\u043F\u0440\u043E\u0448\u043B\u0435] [\u0441\u0440\u0435\u0434\u0435] [\u0443] LT','[\u043F\u0440\u043E\u0448\u043B\u043E\u0433] [\u0447\u0435\u0442\u0432\u0440\u0442\u043A\u0430] [\u0443] LT','[\u043F\u0440\u043E\u0448\u043B\u043E\u0433] [\u043F\u0435\u0442\u043A\u0430] [\u0443] LT','[\u043F\u0440\u043E\u0448\u043B\u0435] [\u0441\u0443\u0431\u043E\u0442\u0435] [\u0443] LT'][this.day()]},sameElse:'L'},relativeTime:{future:'\u0437\u0430 %s',past:'\u043F\u0440\u0435 %s',s:'\u043D\u0435\u043A\u043E\u043B\u0438\u043A\u043E \u0441\u0435\u043A\u0443\u043D\u0434\u0438',m:Qd.translate,mm:Qd.translate,h:Qd.translate,hh:Qd.translate,d:'\u0434\u0430\u043D',dd:Qd.translate,M:'\u043C\u0435\u0441\u0435\u0446',MM:Qd.translate,y:'\u0433\u043E\u0434\u0438\u043D\u0443',yy:Qd.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});var Zd={words:{m:['jedan minut','jedne minute'],mm:['minut','minute','minuta'],h:['jedan sat','jednog sata'],hh:['sat','sata','sati'],dd:['dan','dana','dana'],MM:['mesec','meseca','meseci'],yy:['godina','godine','godina']},correctGrammaticalCase:function(il,dl){return 1===il?dl[0]:2<=il&&4>=il?dl[1]:dl[2]},translate:function(il,dl,ll){var _l=Zd.words[ll];return 1===ll.length?dl?_l[0]:_l[1]:il+' '+Zd.correctGrammaticalCase(il,_l)}};R.defineLocale('sr',{months:'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),monthsShort:'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),monthsParseExact:!0,weekdays:'nedelja_ponedeljak_utorak_sreda_\u010Detvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sre._\u010Det._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_\u010De_pe_su'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedelju] [u] LT';case 3:return'[u] [sredu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[ju\u010De u] LT',lastWeek:function(){return['[pro\u0161le] [nedelje] [u] LT','[pro\u0161log] [ponedeljka] [u] LT','[pro\u0161log] [utorka] [u] LT','[pro\u0161le] [srede] [u] LT','[pro\u0161log] [\u010Detvrtka] [u] LT','[pro\u0161log] [petka] [u] LT','[pro\u0161le] [subote] [u] LT'][this.day()]},sameElse:'L'},relativeTime:{future:'za %s',past:'pre %s',s:'nekoliko sekundi',m:Zd.translate,mm:Zd.translate,h:Zd.translate,hh:Zd.translate,d:'dan',dd:Zd.translate,M:'mesec',MM:Zd.translate,y:'godinu',yy:Zd.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}}),R.defineLocale('ss',{months:'Bhimbidvwane_Indlovana_Indlov\'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni'.split('_'),monthsShort:'Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo'.split('_'),weekdays:'Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo'.split('_'),weekdaysShort:'Lis_Umb_Lsb_Les_Lsi_Lsh_Umg'.split('_'),weekdaysMin:'Li_Us_Lb_Lt_Ls_Lh_Ug'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Namuhla nga] LT',nextDay:'[Kusasa nga] LT',nextWeek:'dddd [nga] LT',lastDay:'[Itolo nga] LT',lastWeek:'dddd [leliphelile] [nga] LT',sameElse:'L'},relativeTime:{future:'nga %s',past:'wenteka nga %s',s:'emizuzwana lomcane',m:'umzuzu',mm:'%d emizuzu',h:'lihora',hh:'%d emahora',d:'lilanga',dd:'%d emalanga',M:'inyanga',MM:'%d tinyanga',y:'umnyaka',yy:'%d iminyaka'},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(il){return 11>il?'ekuseni':15>il?'emini':19>il?'entsambama':'ebusuku'},meridiemHour:function(il,dl){return(12===il&&(il=0),'ekuseni'===dl)?il:'emini'===dl?11<=il?il:il+12:'entsambama'===dl||'ebusuku'===dl?0===il?0:il+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}}),R.defineLocale('sv',{months:'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),monthsShort:'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),weekdays:'s\xF6ndag_m\xE5ndag_tisdag_onsdag_torsdag_fredag_l\xF6rdag'.split('_'),weekdaysShort:'s\xF6n_m\xE5n_tis_ons_tor_fre_l\xF6r'.split('_'),weekdaysMin:'s\xF6_m\xE5_ti_on_to_fr_l\xF6'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [kl.] HH:mm',LLLL:'dddd D MMMM YYYY [kl.] HH:mm',lll:'D MMM YYYY HH:mm',llll:'ddd D MMM YYYY HH:mm'},calendar:{sameDay:'[Idag] LT',nextDay:'[Imorgon] LT',lastDay:'[Ig\xE5r] LT',nextWeek:'[P\xE5] dddd LT',lastWeek:'[I] dddd[s] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'f\xF6r %s sedan',s:'n\xE5gra sekunder',m:'en minut',mm:'%d minuter',h:'en timme',hh:'%d timmar',d:'en dag',dd:'%d dagar',M:'en m\xE5nad',MM:'%d m\xE5nader',y:'ett \xE5r',yy:'%d \xE5r'},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'e':1==dl?'a':2==dl?'a':3==dl?'e':'e';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('sw',{months:'Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba'.split('_'),monthsShort:'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des'.split('_'),weekdays:'Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi'.split('_'),weekdaysShort:'Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos'.split('_'),weekdaysMin:'J2_J3_J4_J5_Al_Ij_J1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[leo saa] LT',nextDay:'[kesho saa] LT',nextWeek:'[wiki ijayo] dddd [saat] LT',lastDay:'[jana] LT',lastWeek:'[wiki iliyopita] dddd [saat] LT',sameElse:'L'},relativeTime:{future:'%s baadaye',past:'tokea %s',s:'hivi punde',m:'dakika moja',mm:'dakika %d',h:'saa limoja',hh:'masaa %d',d:'siku moja',dd:'masiku %d',M:'mwezi mmoja',MM:'miezi %d',y:'mwaka mmoja',yy:'miaka %d'},week:{dow:1,doy:7}});var tl={0:'\u0BE6',1:'\u0BE7',2:'\u0BE8',3:'\u0BE9',4:'\u0BEA',5:'\u0BEB',6:'\u0BEC',7:'\u0BED',8:'\u0BEE',9:'\u0BEF'},nl={"":'1',"":'2',"":'3',"":'4',"":'5',"":'6',"":'7',"":'8',"":'9',"":'0'};R.defineLocale('ta',{months:'\u0B9C\u0BA9\u0BB5\u0BB0\u0BBF_\u0BAA\u0BBF\u0BAA\u0BCD\u0BB0\u0BB5\u0BB0\u0BBF_\u0BAE\u0BBE\u0BB0\u0BCD\u0B9A\u0BCD_\u0B8F\u0BAA\u0BCD\u0BB0\u0BB2\u0BCD_\u0BAE\u0BC7_\u0B9C\u0BC2\u0BA9\u0BCD_\u0B9C\u0BC2\u0BB2\u0BC8_\u0B86\u0B95\u0BB8\u0BCD\u0B9F\u0BCD_\u0B9A\u0BC6\u0BAA\u0BCD\u0B9F\u0BC6\u0BAE\u0BCD\u0BAA\u0BB0\u0BCD_\u0B85\u0B95\u0BCD\u0B9F\u0BC7\u0BBE\u0BAA\u0BB0\u0BCD_\u0BA8\u0BB5\u0BAE\u0BCD\u0BAA\u0BB0\u0BCD_\u0B9F\u0BBF\u0B9A\u0BAE\u0BCD\u0BAA\u0BB0\u0BCD'.split('_'),monthsShort:'\u0B9C\u0BA9\u0BB5\u0BB0\u0BBF_\u0BAA\u0BBF\u0BAA\u0BCD\u0BB0\u0BB5\u0BB0\u0BBF_\u0BAE\u0BBE\u0BB0\u0BCD\u0B9A\u0BCD_\u0B8F\u0BAA\u0BCD\u0BB0\u0BB2\u0BCD_\u0BAE\u0BC7_\u0B9C\u0BC2\u0BA9\u0BCD_\u0B9C\u0BC2\u0BB2\u0BC8_\u0B86\u0B95\u0BB8\u0BCD\u0B9F\u0BCD_\u0B9A\u0BC6\u0BAA\u0BCD\u0B9F\u0BC6\u0BAE\u0BCD\u0BAA\u0BB0\u0BCD_\u0B85\u0B95\u0BCD\u0B9F\u0BC7\u0BBE\u0BAA\u0BB0\u0BCD_\u0BA8\u0BB5\u0BAE\u0BCD\u0BAA\u0BB0\u0BCD_\u0B9F\u0BBF\u0B9A\u0BAE\u0BCD\u0BAA\u0BB0\u0BCD'.split('_'),weekdays:'\u0B9E\u0BBE\u0BAF\u0BBF\u0BB1\u0BCD\u0BB1\u0BC1\u0B95\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8_\u0BA4\u0BBF\u0B99\u0BCD\u0B95\u0B9F\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8_\u0B9A\u0BC6\u0BB5\u0BCD\u0BB5\u0BBE\u0BAF\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8_\u0BAA\u0BC1\u0BA4\u0BA9\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8_\u0BB5\u0BBF\u0BAF\u0BBE\u0BB4\u0B95\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8_\u0BB5\u0BC6\u0BB3\u0BCD\u0BB3\u0BBF\u0B95\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8_\u0B9A\u0BA9\u0BBF\u0B95\u0BCD\u0B95\u0BBF\u0BB4\u0BAE\u0BC8'.split('_'),weekdaysShort:'\u0B9E\u0BBE\u0BAF\u0BBF\u0BB1\u0BC1_\u0BA4\u0BBF\u0B99\u0BCD\u0B95\u0BB3\u0BCD_\u0B9A\u0BC6\u0BB5\u0BCD\u0BB5\u0BBE\u0BAF\u0BCD_\u0BAA\u0BC1\u0BA4\u0BA9\u0BCD_\u0BB5\u0BBF\u0BAF\u0BBE\u0BB4\u0BA9\u0BCD_\u0BB5\u0BC6\u0BB3\u0BCD\u0BB3\u0BBF_\u0B9A\u0BA9\u0BBF'.split('_'),weekdaysMin:'\u0B9E\u0BBE_\u0BA4\u0BBF_\u0B9A\u0BC6_\u0BAA\u0BC1_\u0BB5\u0BBF_\u0BB5\u0BC6_\u0B9A'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, HH:mm',LLLL:'dddd, D MMMM YYYY, HH:mm'},calendar:{sameDay:'[\u0B87\u0BA9\u0BCD\u0BB1\u0BC1] LT',nextDay:'[\u0BA8\u0BBE\u0BB3\u0BC8] LT',nextWeek:'dddd, LT',lastDay:'[\u0BA8\u0BC7\u0BB1\u0BCD\u0BB1\u0BC1] LT',lastWeek:'[\u0B95\u0B9F\u0BA8\u0BCD\u0BA4 \u0BB5\u0BBE\u0BB0\u0BAE\u0BCD] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u0B87\u0BB2\u0BCD',past:'%s \u0BAE\u0BC1\u0BA9\u0BCD',s:'\u0B92\u0BB0\u0BC1 \u0B9A\u0BBF\u0BB2 \u0BB5\u0BBF\u0BA8\u0BBE\u0B9F\u0BBF\u0B95\u0BB3\u0BCD',m:'\u0B92\u0BB0\u0BC1 \u0BA8\u0BBF\u0BAE\u0BBF\u0B9F\u0BAE\u0BCD',mm:'%d \u0BA8\u0BBF\u0BAE\u0BBF\u0B9F\u0B99\u0BCD\u0B95\u0BB3\u0BCD',h:'\u0B92\u0BB0\u0BC1 \u0BAE\u0BA3\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD',hh:'%d \u0BAE\u0BA3\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD',d:'\u0B92\u0BB0\u0BC1 \u0BA8\u0BBE\u0BB3\u0BCD',dd:'%d \u0BA8\u0BBE\u0B9F\u0BCD\u0B95\u0BB3\u0BCD',M:'\u0B92\u0BB0\u0BC1 \u0BAE\u0BBE\u0BA4\u0BAE\u0BCD',MM:'%d \u0BAE\u0BBE\u0BA4\u0B99\u0BCD\u0B95\u0BB3\u0BCD',y:'\u0B92\u0BB0\u0BC1 \u0BB5\u0BB0\u0BC1\u0B9F\u0BAE\u0BCD',yy:'%d \u0B86\u0BA3\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(il){return il+'\u0BB5\u0BA4\u0BC1'},preparse:function(il){return il.replace(/[]/g,function(dl){return nl[dl]})},postformat:function(il){return il.replace(/\d/g,function(dl){return tl[dl]})},meridiemParse:/|||||/,meridiem:function(il){return 2>il?' \u0BAF\u0BBE\u0BAE\u0BAE\u0BCD':6>il?' \u0BB5\u0BC8\u0B95\u0BB1\u0BC8':10>il?' \u0B95\u0BBE\u0BB2\u0BC8':14>il?' \u0BA8\u0BA3\u0BCD\u0BAA\u0B95\u0BB2\u0BCD':18>il?' \u0B8E\u0BB1\u0BCD\u0BAA\u0BBE\u0B9F\u0BC1':22>il?' \u0BAE\u0BBE\u0BB2\u0BC8':' \u0BAF\u0BBE\u0BAE\u0BAE\u0BCD'},meridiemHour:function(il,dl){return 12===il&&(il=0),'\u0BAF\u0BBE\u0BAE\u0BAE\u0BCD'===dl?2>il?il:il+12:'\u0BB5\u0BC8\u0B95\u0BB1\u0BC8'===dl||'\u0B95\u0BBE\u0BB2\u0BC8'===dl?il:'\u0BA8\u0BA3\u0BCD\u0BAA\u0B95\u0BB2\u0BCD'===dl?10<=il?il:il+12:il+12},week:{dow:0,doy:6}}),R.defineLocale('te',{months:'\u0C1C\u0C28\u0C35\u0C30\u0C3F_\u0C2B\u0C3F\u0C2C\u0C4D\u0C30\u0C35\u0C30\u0C3F_\u0C2E\u0C3E\u0C30\u0C4D\u0C1A\u0C3F_\u0C0F\u0C2A\u0C4D\u0C30\u0C3F\u0C32\u0C4D_\u0C2E\u0C47_\u0C1C\u0C42\u0C28\u0C4D_\u0C1C\u0C42\u0C32\u0C46\u0C56_\u0C06\u0C17\u0C38\u0C4D\u0C1F\u0C41_\u0C38\u0C46\u0C2A\u0C4D\u0C1F\u0C46\u0C02\u0C2C\u0C30\u0C4D_\u0C05\u0C15\u0C4D\u0C1F\u0C4B\u0C2C\u0C30\u0C4D_\u0C28\u0C35\u0C02\u0C2C\u0C30\u0C4D_\u0C21\u0C3F\u0C38\u0C46\u0C02\u0C2C\u0C30\u0C4D'.split('_'),monthsShort:'\u0C1C\u0C28._\u0C2B\u0C3F\u0C2C\u0C4D\u0C30._\u0C2E\u0C3E\u0C30\u0C4D\u0C1A\u0C3F_\u0C0F\u0C2A\u0C4D\u0C30\u0C3F._\u0C2E\u0C47_\u0C1C\u0C42\u0C28\u0C4D_\u0C1C\u0C42\u0C32\u0C46\u0C56_\u0C06\u0C17._\u0C38\u0C46\u0C2A\u0C4D._\u0C05\u0C15\u0C4D\u0C1F\u0C4B._\u0C28\u0C35._\u0C21\u0C3F\u0C38\u0C46.'.split('_'),monthsParseExact:!0,weekdays:'\u0C06\u0C26\u0C3F\u0C35\u0C3E\u0C30\u0C02_\u0C38\u0C4B\u0C2E\u0C35\u0C3E\u0C30\u0C02_\u0C2E\u0C02\u0C17\u0C33\u0C35\u0C3E\u0C30\u0C02_\u0C2C\u0C41\u0C27\u0C35\u0C3E\u0C30\u0C02_\u0C17\u0C41\u0C30\u0C41\u0C35\u0C3E\u0C30\u0C02_\u0C36\u0C41\u0C15\u0C4D\u0C30\u0C35\u0C3E\u0C30\u0C02_\u0C36\u0C28\u0C3F\u0C35\u0C3E\u0C30\u0C02'.split('_'),weekdaysShort:'\u0C06\u0C26\u0C3F_\u0C38\u0C4B\u0C2E_\u0C2E\u0C02\u0C17\u0C33_\u0C2C\u0C41\u0C27_\u0C17\u0C41\u0C30\u0C41_\u0C36\u0C41\u0C15\u0C4D\u0C30_\u0C36\u0C28\u0C3F'.split('_'),weekdaysMin:'\u0C06_\u0C38\u0C4B_\u0C2E\u0C02_\u0C2C\u0C41_\u0C17\u0C41_\u0C36\u0C41_\u0C36'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm',LLLL:'dddd, D MMMM YYYY, A h:mm'},calendar:{sameDay:'[\u0C28\u0C47\u0C21\u0C41] LT',nextDay:'[\u0C30\u0C47\u0C2A\u0C41] LT',nextWeek:'dddd, LT',lastDay:'[\u0C28\u0C3F\u0C28\u0C4D\u0C28] LT',lastWeek:'[\u0C17\u0C24] dddd, LT',sameElse:'L'},relativeTime:{future:'%s \u0C32\u0C4B',past:'%s \u0C15\u0C4D\u0C30\u0C3F\u0C24\u0C02',s:'\u0C15\u0C4A\u0C28\u0C4D\u0C28\u0C3F \u0C15\u0C4D\u0C37\u0C23\u0C3E\u0C32\u0C41',m:'\u0C12\u0C15 \u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C02',mm:'%d \u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C3E\u0C32\u0C41',h:'\u0C12\u0C15 \u0C17\u0C02\u0C1F',hh:'%d \u0C17\u0C02\u0C1F\u0C32\u0C41',d:'\u0C12\u0C15 \u0C30\u0C4B\u0C1C\u0C41',dd:'%d \u0C30\u0C4B\u0C1C\u0C41\u0C32\u0C41',M:'\u0C12\u0C15 \u0C28\u0C46\u0C32',MM:'%d \u0C28\u0C46\u0C32\u0C32\u0C41',y:'\u0C12\u0C15 \u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38\u0C30\u0C02',yy:'%d \u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38\u0C30\u0C3E\u0C32\u0C41'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d\u0C35',meridiemParse:/|||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u0C30\u0C3E\u0C24\u0C4D\u0C30\u0C3F'===dl)?4>il?il:il+12:'\u0C09\u0C26\u0C2F\u0C02'===dl?il:'\u0C2E\u0C27\u0C4D\u0C2F\u0C3E\u0C39\u0C4D\u0C28\u0C02'===dl?10<=il?il:il+12:'\u0C38\u0C3E\u0C2F\u0C02\u0C24\u0C4D\u0C30\u0C02'===dl?il+12:void 0},meridiem:function(il){return 4>il?'\u0C30\u0C3E\u0C24\u0C4D\u0C30\u0C3F':10>il?'\u0C09\u0C26\u0C2F\u0C02':17>il?'\u0C2E\u0C27\u0C4D\u0C2F\u0C3E\u0C39\u0C4D\u0C28\u0C02':20>il?'\u0C38\u0C3E\u0C2F\u0C02\u0C24\u0C4D\u0C30\u0C02':'\u0C30\u0C3E\u0C24\u0C4D\u0C30\u0C3F'},week:{dow:0,doy:6}}),R.defineLocale('tet',{months:'Janeiru_Fevereiru_Marsu_Abril_Maiu_Juniu_Juliu_Augustu_Setembru_Outubru_Novembru_Dezembru'.split('_'),monthsShort:'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Aug_Set_Out_Nov_Dez'.split('_'),weekdays:'Domingu_Segunda_Tersa_Kuarta_Kinta_Sexta_Sabadu'.split('_'),weekdaysShort:'Dom_Seg_Ters_Kua_Kint_Sext_Sab'.split('_'),weekdaysMin:'Do_Seg_Te_Ku_Ki_Sex_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Ohin iha] LT',nextDay:'[Aban iha] LT',nextWeek:'dddd [iha] LT',lastDay:'[Horiseik iha] LT',lastWeek:'dddd [semana kotuk] [iha] LT',sameElse:'L'},relativeTime:{future:'iha %s',past:'%s liuba',s:'minutu balun',m:'minutu ida',mm:'minutus %d',h:'horas ida',hh:'horas %d',d:'loron ida',dd:'loron %d',M:'fulan ida',MM:'fulan %d',y:'tinan ida',yy:'tinan %d'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('th',{months:'\u0E21\u0E01\u0E23\u0E32\u0E04\u0E21_\u0E01\u0E38\u0E21\u0E20\u0E32\u0E1E\u0E31\u0E19\u0E18\u0E4C_\u0E21\u0E35\u0E19\u0E32\u0E04\u0E21_\u0E40\u0E21\u0E29\u0E32\u0E22\u0E19_\u0E1E\u0E24\u0E29\u0E20\u0E32\u0E04\u0E21_\u0E21\u0E34\u0E16\u0E38\u0E19\u0E32\u0E22\u0E19_\u0E01\u0E23\u0E01\u0E0E\u0E32\u0E04\u0E21_\u0E2A\u0E34\u0E07\u0E2B\u0E32\u0E04\u0E21_\u0E01\u0E31\u0E19\u0E22\u0E32\u0E22\u0E19_\u0E15\u0E38\u0E25\u0E32\u0E04\u0E21_\u0E1E\u0E24\u0E28\u0E08\u0E34\u0E01\u0E32\u0E22\u0E19_\u0E18\u0E31\u0E19\u0E27\u0E32\u0E04\u0E21'.split('_'),monthsShort:'\u0E21.\u0E04._\u0E01.\u0E1E._\u0E21\u0E35.\u0E04._\u0E40\u0E21.\u0E22._\u0E1E.\u0E04._\u0E21\u0E34.\u0E22._\u0E01.\u0E04._\u0E2A.\u0E04._\u0E01.\u0E22._\u0E15.\u0E04._\u0E1E.\u0E22._\u0E18.\u0E04.'.split('_'),monthsParseExact:!0,weekdays:'\u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C_\u0E08\u0E31\u0E19\u0E17\u0E23\u0E4C_\u0E2D\u0E31\u0E07\u0E04\u0E32\u0E23_\u0E1E\u0E38\u0E18_\u0E1E\u0E24\u0E2B\u0E31\u0E2A\u0E1A\u0E14\u0E35_\u0E28\u0E38\u0E01\u0E23\u0E4C_\u0E40\u0E2A\u0E32\u0E23\u0E4C'.split('_'),weekdaysShort:'\u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C_\u0E08\u0E31\u0E19\u0E17\u0E23\u0E4C_\u0E2D\u0E31\u0E07\u0E04\u0E32\u0E23_\u0E1E\u0E38\u0E18_\u0E1E\u0E24\u0E2B\u0E31\u0E2A_\u0E28\u0E38\u0E01\u0E23\u0E4C_\u0E40\u0E2A\u0E32\u0E23\u0E4C'.split('_'),weekdaysMin:'\u0E2D\u0E32._\u0E08._\u0E2D._\u0E1E._\u0E1E\u0E24._\u0E28._\u0E2A.'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY \u0E40\u0E27\u0E25\u0E32 H:mm',LLLL:'\u0E27\u0E31\u0E19dddd\u0E17\u0E35\u0E48 D MMMM YYYY \u0E40\u0E27\u0E25\u0E32 H:mm'},meridiemParse:/|/,isPM:function(il){return'\u0E2B\u0E25\u0E31\u0E07\u0E40\u0E17\u0E35\u0E48\u0E22\u0E07'===il},meridiem:function(il){return 12>il?'\u0E01\u0E48\u0E2D\u0E19\u0E40\u0E17\u0E35\u0E48\u0E22\u0E07':'\u0E2B\u0E25\u0E31\u0E07\u0E40\u0E17\u0E35\u0E48\u0E22\u0E07'},calendar:{sameDay:'[\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49 \u0E40\u0E27\u0E25\u0E32] LT',nextDay:'[\u0E1E\u0E23\u0E38\u0E48\u0E07\u0E19\u0E35\u0E49 \u0E40\u0E27\u0E25\u0E32] LT',nextWeek:'dddd[\u0E2B\u0E19\u0E49\u0E32 \u0E40\u0E27\u0E25\u0E32] LT',lastDay:'[\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E27\u0E32\u0E19\u0E19\u0E35\u0E49 \u0E40\u0E27\u0E25\u0E32] LT',lastWeek:'[\u0E27\u0E31\u0E19]dddd[\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27 \u0E40\u0E27\u0E25\u0E32] LT',sameElse:'L'},relativeTime:{future:'\u0E2D\u0E35\u0E01 %s',past:'%s\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27',s:'\u0E44\u0E21\u0E48\u0E01\u0E35\u0E48\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35',m:'1 \u0E19\u0E32\u0E17\u0E35',mm:'%d \u0E19\u0E32\u0E17\u0E35',h:'1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07',hh:'%d \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07',d:'1 \u0E27\u0E31\u0E19',dd:'%d \u0E27\u0E31\u0E19',M:'1 \u0E40\u0E14\u0E37\u0E2D\u0E19',MM:'%d \u0E40\u0E14\u0E37\u0E2D\u0E19',y:'1 \u0E1B\u0E35',yy:'%d \u0E1B\u0E35'}}),R.defineLocale('tl-ph',{months:'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),monthsShort:'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),weekdays:'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),weekdaysShort:'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),weekdaysMin:'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'MM/D/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY HH:mm',LLLL:'dddd, MMMM DD, YYYY HH:mm'},calendar:{sameDay:'LT [ngayong araw]',nextDay:'[Bukas ng] LT',nextWeek:'LT [sa susunod na] dddd',lastDay:'LT [kahapon]',lastWeek:'LT [noong nakaraang] dddd',sameElse:'L'},relativeTime:{future:'sa loob ng %s',past:'%s ang nakalipas',s:'ilang segundo',m:'isang minuto',mm:'%d minuto',h:'isang oras',hh:'%d oras',d:'isang araw',dd:'%d araw',M:'isang buwan',MM:'%d buwan',y:'isang taon',yy:'%d taon'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(il){return il},week:{dow:1,doy:4}});var al='pagh_wa\u2019_cha\u2019_wej_loS_vagh_jav_Soch_chorgh_Hut'.split('_');R.defineLocale('tlh',{months:'tera\u2019 jar wa\u2019_tera\u2019 jar cha\u2019_tera\u2019 jar wej_tera\u2019 jar loS_tera\u2019 jar vagh_tera\u2019 jar jav_tera\u2019 jar Soch_tera\u2019 jar chorgh_tera\u2019 jar Hut_tera\u2019 jar wa\u2019maH_tera\u2019 jar wa\u2019maH wa\u2019_tera\u2019 jar wa\u2019maH cha\u2019'.split('_'),monthsShort:'jar wa\u2019_jar cha\u2019_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa\u2019maH_jar wa\u2019maH wa\u2019_jar wa\u2019maH cha\u2019'.split('_'),monthsParseExact:!0,weekdays:'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),weekdaysShort:'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),weekdaysMin:'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[DaHjaj] LT',nextDay:'[wa\u2019leS] LT',nextWeek:'LLL',lastDay:'[wa\u2019Hu\u2019] LT',lastWeek:'LLL',sameElse:'L'},relativeTime:{future:function(il){var dl=il;return dl=-1===il.indexOf('jaj')?-1===il.indexOf('jar')?-1===il.indexOf('DIS')?dl+' pIq':dl.slice(0,-3)+'nem':dl.slice(0,-3)+'waQ':dl.slice(0,-3)+'leS',dl},past:function(il){var dl=il;return dl=-1===il.indexOf('jaj')?-1===il.indexOf('jar')?-1===il.indexOf('DIS')?dl+' ret':dl.slice(0,-3)+'ben':dl.slice(0,-3)+'wen':dl.slice(0,-3)+'Hu\u2019',dl},s:'puS lup',m:'wa\u2019 tup',mm:lr,h:'wa\u2019 rep',hh:lr,d:'wa\u2019 jaj',dd:lr,M:'wa\u2019 jar',MM:lr,y:'wa\u2019 DIS',yy:lr},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var ol={1:'\'inci',2:'\'nci',3:'\'\xFCnc\xFC',4:'\'\xFCnc\xFC',5:'\'inci',6:'\'nc\u0131',7:'\'nci',8:'\'inci',9:'\'uncu',10:'\'uncu',20:'\'nci',30:'\'uncu',50:'\'nci',60:'\'\u0131nc\u0131',70:'\'inci',80:'\'inci',90:'\'\u0131nc\u0131',100:'\'\xFCnc\xFC'};R.defineLocale('tr',{months:'Ocak_\u015Eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011Fustos_Eyl\xFCl_Ekim_Kas\u0131m_Aral\u0131k'.split('_'),monthsShort:'Oca_\u015Eub_Mar_Nis_May_Haz_Tem_A\u011Fu_Eyl_Eki_Kas_Ara'.split('_'),weekdays:'Pazar_Pazartesi_Sal\u0131_\xC7ar\u015Famba_Per\u015Fembe_Cuma_Cumartesi'.split('_'),weekdaysShort:'Paz_Pts_Sal_\xC7ar_Per_Cum_Cts'.split('_'),weekdaysMin:'Pz_Pt_Sa_\xC7a_Pe_Cu_Ct'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[bug\xFCn saat] LT',nextDay:'[yar\u0131n saat] LT',nextWeek:'[haftaya] dddd [saat] LT',lastDay:'[d\xFCn] LT',lastWeek:'[ge\xE7en hafta] dddd [saat] LT',sameElse:'L'},relativeTime:{future:'%s sonra',past:'%s \xF6nce',s:'birka\xE7 saniye',m:'bir dakika',mm:'%d dakika',h:'bir saat',hh:'%d saat',d:'bir g\xFCn',dd:'%d g\xFCn',M:'bir ay',MM:'%d ay',y:'bir y\u0131l',yy:'%d y\u0131l'},dayOfMonthOrdinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(il){if(0===il)return il+'\'\u0131nc\u0131';var dl=il%10,_l=100<=il?100:null;return il+(ol[dl]||ol[il%100-dl]||ol[_l])},week:{dow:1,doy:7}}),R.defineLocale('tzl',{months:'Januar_Fevraglh_Mar\xE7_Avr\xEFu_Mai_G\xFCn_Julia_Guscht_Setemvar_Listop\xE4ts_Noemvar_Zecemvar'.split('_'),monthsShort:'Jan_Fev_Mar_Avr_Mai_G\xFCn_Jul_Gus_Set_Lis_Noe_Zec'.split('_'),weekdays:'S\xFAladi_L\xFAne\xE7i_Maitzi_M\xE1rcuri_Xh\xFAadi_Vi\xE9ner\xE7i_S\xE1turi'.split('_'),weekdaysShort:'S\xFAl_L\xFAn_Mai_M\xE1r_Xh\xFA_Vi\xE9_S\xE1t'.split('_'),weekdaysMin:'S\xFA_L\xFA_Ma_M\xE1_Xh_Vi_S\xE1'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD.MM.YYYY',LL:'D. MMMM [dallas] YYYY',LLL:'D. MMMM [dallas] YYYY HH.mm',LLLL:'dddd, [li] D. MMMM [dallas] YYYY HH.mm'},meridiemParse:/d\'o|d\'a/i,isPM:function(il){return'd\'o'===il.toLowerCase()},meridiem:function(il,dl,ll){return 11<il?ll?'d\'o':'D\'O':ll?'d\'a':'D\'A'},calendar:{sameDay:'[oxhi \xE0] LT',nextDay:'[dem\xE0 \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[ieiri \xE0] LT',lastWeek:'[s\xFCr el] dddd [lasteu \xE0] LT',sameElse:'L'},relativeTime:{future:'osprei %s',past:'ja%s',s:ur,m:ur,mm:ur,h:ur,hh:ur,d:ur,dd:ur,M:ur,MM:ur,y:ur,yy:ur},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}}),R.defineLocale('tzm-latn',{months:'innayr_br\u02E4ayr\u02E4_mar\u02E4s\u02E4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02E4wbr\u02E4_nwwanbir_dwjnbir'.split('_'),monthsShort:'innayr_br\u02E4ayr\u02E4_mar\u02E4s\u02E4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02E4wbr\u02E4_nwwanbir_dwjnbir'.split('_'),weekdays:'asamas_aynas_asinas_akras_akwas_asimwas_asi\u1E0Dyas'.split('_'),weekdaysShort:'asamas_aynas_asinas_akras_akwas_asimwas_asi\u1E0Dyas'.split('_'),weekdaysMin:'asamas_aynas_asinas_akras_akwas_asimwas_asi\u1E0Dyas'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[asdkh g] LT',nextDay:'[aska g] LT',nextWeek:'dddd [g] LT',lastDay:'[assant g] LT',lastWeek:'dddd [g] LT',sameElse:'L'},relativeTime:{future:'dadkh s yan %s',past:'yan %s',s:'imik',m:'minu\u1E0D',mm:'%d minu\u1E0D',h:'sa\u025Ba',hh:'%d tassa\u025Bin',d:'ass',dd:'%d ossan',M:'ayowr',MM:'%d iyyirn',y:'asgas',yy:'%d isgasn'},week:{dow:6,doy:12}}),R.defineLocale('tzm',{months:'\u2D49\u2D4F\u2D4F\u2D30\u2D62\u2D54_\u2D31\u2D55\u2D30\u2D62\u2D55_\u2D4E\u2D30\u2D55\u2D5A_\u2D49\u2D31\u2D54\u2D49\u2D54_\u2D4E\u2D30\u2D62\u2D62\u2D53_\u2D62\u2D53\u2D4F\u2D62\u2D53_\u2D62\u2D53\u2D4D\u2D62\u2D53\u2D63_\u2D56\u2D53\u2D5B\u2D5C_\u2D5B\u2D53\u2D5C\u2D30\u2D4F\u2D31\u2D49\u2D54_\u2D3D\u2D5F\u2D53\u2D31\u2D55_\u2D4F\u2D53\u2D61\u2D30\u2D4F\u2D31\u2D49\u2D54_\u2D37\u2D53\u2D4A\u2D4F\u2D31\u2D49\u2D54'.split('_'),monthsShort:'\u2D49\u2D4F\u2D4F\u2D30\u2D62\u2D54_\u2D31\u2D55\u2D30\u2D62\u2D55_\u2D4E\u2D30\u2D55\u2D5A_\u2D49\u2D31\u2D54\u2D49\u2D54_\u2D4E\u2D30\u2D62\u2D62\u2D53_\u2D62\u2D53\u2D4F\u2D62\u2D53_\u2D62\u2D53\u2D4D\u2D62\u2D53\u2D63_\u2D56\u2D53\u2D5B\u2D5C_\u2D5B\u2D53\u2D5C\u2D30\u2D4F\u2D31\u2D49\u2D54_\u2D3D\u2D5F\u2D53\u2D31\u2D55_\u2D4F\u2D53\u2D61\u2D30\u2D4F\u2D31\u2D49\u2D54_\u2D37\u2D53\u2D4A\u2D4F\u2D31\u2D49\u2D54'.split('_'),weekdays:'\u2D30\u2D59\u2D30\u2D4E\u2D30\u2D59_\u2D30\u2D62\u2D4F\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D4F\u2D30\u2D59_\u2D30\u2D3D\u2D54\u2D30\u2D59_\u2D30\u2D3D\u2D61\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D4E\u2D61\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D39\u2D62\u2D30\u2D59'.split('_'),weekdaysShort:'\u2D30\u2D59\u2D30\u2D4E\u2D30\u2D59_\u2D30\u2D62\u2D4F\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D4F\u2D30\u2D59_\u2D30\u2D3D\u2D54\u2D30\u2D59_\u2D30\u2D3D\u2D61\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D4E\u2D61\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D39\u2D62\u2D30\u2D59'.split('_'),weekdaysMin:'\u2D30\u2D59\u2D30\u2D4E\u2D30\u2D59_\u2D30\u2D62\u2D4F\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D4F\u2D30\u2D59_\u2D30\u2D3D\u2D54\u2D30\u2D59_\u2D30\u2D3D\u2D61\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D4E\u2D61\u2D30\u2D59_\u2D30\u2D59\u2D49\u2D39\u2D62\u2D30\u2D59'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[\u2D30\u2D59\u2D37\u2D45 \u2D34] LT',nextDay:'[\u2D30\u2D59\u2D3D\u2D30 \u2D34] LT',nextWeek:'dddd [\u2D34] LT',lastDay:'[\u2D30\u2D5A\u2D30\u2D4F\u2D5C \u2D34] LT',lastWeek:'dddd [\u2D34] LT',sameElse:'L'},relativeTime:{future:'\u2D37\u2D30\u2D37\u2D45 \u2D59 \u2D62\u2D30\u2D4F %s',past:'\u2D62\u2D30\u2D4F %s',s:'\u2D49\u2D4E\u2D49\u2D3D',m:'\u2D4E\u2D49\u2D4F\u2D53\u2D3A',mm:'%d \u2D4E\u2D49\u2D4F\u2D53\u2D3A',h:'\u2D59\u2D30\u2D44\u2D30',hh:'%d \u2D5C\u2D30\u2D59\u2D59\u2D30\u2D44\u2D49\u2D4F',d:'\u2D30\u2D59\u2D59',dd:'%d o\u2D59\u2D59\u2D30\u2D4F',M:'\u2D30\u2D62o\u2D53\u2D54',MM:'%d \u2D49\u2D62\u2D62\u2D49\u2D54\u2D4F',y:'\u2D30\u2D59\u2D33\u2D30\u2D59',yy:'%d \u2D49\u2D59\u2D33\u2D30\u2D59\u2D4F'},week:{dow:6,doy:12}}),R.defineLocale('uk',{months:{format:'\u0441\u0456\u0447\u043D\u044F_\u043B\u044E\u0442\u043E\u0433\u043E_\u0431\u0435\u0440\u0435\u0437\u043D\u044F_\u043A\u0432\u0456\u0442\u043D\u044F_\u0442\u0440\u0430\u0432\u043D\u044F_\u0447\u0435\u0440\u0432\u043D\u044F_\u043B\u0438\u043F\u043D\u044F_\u0441\u0435\u0440\u043F\u043D\u044F_\u0432\u0435\u0440\u0435\u0441\u043D\u044F_\u0436\u043E\u0432\u0442\u043D\u044F_\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043D\u044F'.split('_'),standalone:'\u0441\u0456\u0447\u0435\u043D\u044C_\u043B\u044E\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043D\u044C_\u043A\u0432\u0456\u0442\u0435\u043D\u044C_\u0442\u0440\u0430\u0432\u0435\u043D\u044C_\u0447\u0435\u0440\u0432\u0435\u043D\u044C_\u043B\u0438\u043F\u0435\u043D\u044C_\u0441\u0435\u0440\u043F\u0435\u043D\u044C_\u0432\u0435\u0440\u0435\u0441\u0435\u043D\u044C_\u0436\u043E\u0432\u0442\u0435\u043D\u044C_\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043D\u044C'.split('_')},monthsShort:'\u0441\u0456\u0447_\u043B\u044E\u0442_\u0431\u0435\u0440_\u043A\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043B\u0438\u043F_\u0441\u0435\u0440\u043F_\u0432\u0435\u0440_\u0436\u043E\u0432\u0442_\u043B\u0438\u0441\u0442_\u0433\u0440\u0443\u0434'.split('_'),weekdays:function(il,dl){var ll={nominative:'\u043D\u0435\u0434\u0456\u043B\u044F_\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043E\u043A_\u0432\u0456\u0432\u0442\u043E\u0440\u043E\u043A_\u0441\u0435\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440_\u043F\u2019\u044F\u0442\u043D\u0438\u0446\u044F_\u0441\u0443\u0431\u043E\u0442\u0430'.split('_'),accusative:'\u043D\u0435\u0434\u0456\u043B\u044E_\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043E\u043A_\u0432\u0456\u0432\u0442\u043E\u0440\u043E\u043A_\u0441\u0435\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440_\u043F\u2019\u044F\u0442\u043D\u0438\u0446\u044E_\u0441\u0443\u0431\u043E\u0442\u0443'.split('_'),genitive:'\u043D\u0435\u0434\u0456\u043B\u0456_\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043A\u0430_\u0432\u0456\u0432\u0442\u043E\u0440\u043A\u0430_\u0441\u0435\u0440\u0435\u0434\u0438_\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430_\u043F\u2019\u044F\u0442\u043D\u0438\u0446\u0456_\u0441\u0443\u0431\u043E\u0442\u0438'.split('_')};if(!il)return ll.nominative;var _l=/(\[[]\]) ?dddd/.test(dl)?'accusative':/\[?(?:|)? ?\] ?dddd/.test(dl)?'genitive':'nominative';return ll[_l][il.day()]},weekdaysShort:'\u043D\u0434_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431'.split('_'),weekdaysMin:'\u043D\u0434_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY \u0440.',LLL:'D MMMM YYYY \u0440., HH:mm',LLLL:'dddd, D MMMM YYYY \u0440., HH:mm'},calendar:{sameDay:hr('[\u0421\u044C\u043E\u0433\u043E\u0434\u043D\u0456 '),nextDay:hr('[\u0417\u0430\u0432\u0442\u0440\u0430 '),lastDay:hr('[\u0412\u0447\u043E\u0440\u0430 '),nextWeek:hr('[\u0423] dddd ['),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return hr('[\u041C\u0438\u043D\u0443\u043B\u043E\u0457] dddd [').call(this);case 1:case 2:case 4:return hr('[\u041C\u0438\u043D\u0443\u043B\u043E\u0433\u043E] dddd [').call(this);}},sameElse:'L'},relativeTime:{future:'\u0437\u0430 %s',past:'%s \u0442\u043E\u043C\u0443',s:'\u0434\u0435\u043A\u0456\u043B\u044C\u043A\u0430 \u0441\u0435\u043A\u0443\u043D\u0434',m:mr,mm:mr,h:'\u0433\u043E\u0434\u0438\u043D\u0443',hh:mr,d:'\u0434\u0435\u043D\u044C',dd:mr,M:'\u043C\u0456\u0441\u044F\u0446\u044C',MM:mr,y:'\u0440\u0456\u043A',yy:mr},meridiemParse:/|||/,isPM:function(il){return /^(|)$/.test(il)},meridiem:function(il){return 4>il?'\u043D\u043E\u0447\u0456':12>il?'\u0440\u0430\u043D\u043A\u0443':17>il?'\u0434\u043D\u044F':'\u0432\u0435\u0447\u043E\u0440\u0430'},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(il,dl){return'M'===dl||'d'===dl||'DDD'===dl||'w'===dl||'W'===dl?il+'-\u0439':'D'===dl?il+'-\u0433\u043E':il},week:{dow:1,doy:7}});var rl=['\u062C\u0646\u0648\u0631\u06CC','\u0641\u0631\u0648\u0631\u06CC','\u0645\u0627\u0631\u0686','\u0627\u067E\u0631\u06CC\u0644','\u0645\u0626\u06CC','\u062C\u0648\u0646','\u062C\u0648\u0644\u0627\u0626\u06CC','\u0627\u06AF\u0633\u062A','\u0633\u062A\u0645\u0628\u0631','\u0627\u06A9\u062A\u0648\u0628\u0631','\u0646\u0648\u0645\u0628\u0631','\u062F\u0633\u0645\u0628\u0631'],sl=['\u0627\u062A\u0648\u0627\u0631','\u067E\u06CC\u0631','\u0645\u0646\u06AF\u0644','\u0628\u062F\u06BE','\u062C\u0645\u0639\u0631\u0627\u062A','\u062C\u0645\u0639\u06C1','\u06C1\u0641\u062A\u06C1'];return R.defineLocale('ur',{months:rl,monthsShort:rl,weekdays:sl,weekdaysShort:sl,weekdaysMin:sl,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd\u060C D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(il){return'\u0634\u0627\u0645'===il},meridiem:function(il){return 12>il?'\u0635\u0628\u062D':'\u0634\u0627\u0645'},calendar:{sameDay:'[\u0622\u062C \u0628\u0648\u0642\u062A] LT',nextDay:'[\u06A9\u0644 \u0628\u0648\u0642\u062A] LT',nextWeek:'dddd [\u0628\u0648\u0642\u062A] LT',lastDay:'[\u06AF\u0630\u0634\u062A\u06C1 \u0631\u0648\u0632 \u0628\u0648\u0642\u062A] LT',lastWeek:'[\u06AF\u0630\u0634\u062A\u06C1] dddd [\u0628\u0648\u0642\u062A] LT',sameElse:'L'},relativeTime:{future:'%s \u0628\u0639\u062F',past:'%s \u0642\u0628\u0644',s:'\u0686\u0646\u062F \u0633\u06CC\u06A9\u0646\u0688',m:'\u0627\u06CC\u06A9 \u0645\u0646\u0679',mm:'%d \u0645\u0646\u0679',h:'\u0627\u06CC\u06A9 \u06AF\u06BE\u0646\u0679\u06C1',hh:'%d \u06AF\u06BE\u0646\u0679\u06D2',d:'\u0627\u06CC\u06A9 \u062F\u0646',dd:'%d \u062F\u0646',M:'\u0627\u06CC\u06A9 \u0645\u0627\u06C1',MM:'%d \u0645\u0627\u06C1',y:'\u0627\u06CC\u06A9 \u0633\u0627\u0644',yy:'%d \u0633\u0627\u0644'},preparse:function(il){return il.replace(//g,',')},postformat:function(il){return il.replace(/,/g,'\u060C')},week:{dow:1,doy:4}}),R.defineLocale('uz-latn',{months:'Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr'.split('_'),monthsShort:'Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek'.split('_'),weekdays:'Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba'.split('_'),weekdaysShort:'Yak_Dush_Sesh_Chor_Pay_Jum_Shan'.split('_'),weekdaysMin:'Ya_Du_Se_Cho_Pa_Ju_Sha'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'D MMMM YYYY, dddd HH:mm'},calendar:{sameDay:'[Bugun soat] LT [da]',nextDay:'[Ertaga] LT [da]',nextWeek:'dddd [kuni soat] LT [da]',lastDay:'[Kecha soat] LT [da]',lastWeek:'[O\'tgan] dddd [kuni soat] LT [da]',sameElse:'L'},relativeTime:{future:'Yaqin %s ichida',past:'Bir necha %s oldin',s:'soniya',m:'bir daqiqa',mm:'%d daqiqa',h:'bir soat',hh:'%d soat',d:'bir kun',dd:'%d kun',M:'bir oy',MM:'%d oy',y:'bir yil',yy:'%d yil'},week:{dow:1,doy:7}}),R.defineLocale('uz',{months:'\u044F\u043D\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043B_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0435\u043B_\u043C\u0430\u0439_\u0438\u044E\u043D_\u0438\u044E\u043B_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043D\u0442\u044F\u0431\u0440_\u043E\u043A\u0442\u044F\u0431\u0440_\u043D\u043E\u044F\u0431\u0440_\u0434\u0435\u043A\u0430\u0431\u0440'.split('_'),monthsShort:'\u044F\u043D\u0432_\u0444\u0435\u0432_\u043C\u0430\u0440_\u0430\u043F\u0440_\u043C\u0430\u0439_\u0438\u044E\u043D_\u0438\u044E\u043B_\u0430\u0432\u0433_\u0441\u0435\u043D_\u043E\u043A\u0442_\u043D\u043E\u044F_\u0434\u0435\u043A'.split('_'),weekdays:'\u042F\u043A\u0448\u0430\u043D\u0431\u0430_\u0414\u0443\u0448\u0430\u043D\u0431\u0430_\u0421\u0435\u0448\u0430\u043D\u0431\u0430_\u0427\u043E\u0440\u0448\u0430\u043D\u0431\u0430_\u041F\u0430\u0439\u0448\u0430\u043D\u0431\u0430_\u0416\u0443\u043C\u0430_\u0428\u0430\u043D\u0431\u0430'.split('_'),weekdaysShort:'\u042F\u043A\u0448_\u0414\u0443\u0448_\u0421\u0435\u0448_\u0427\u043E\u0440_\u041F\u0430\u0439_\u0416\u0443\u043C_\u0428\u0430\u043D'.split('_'),weekdaysMin:'\u042F\u043A_\u0414\u0443_\u0421\u0435_\u0427\u043E_\u041F\u0430_\u0416\u0443_\u0428\u0430'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'D MMMM YYYY, dddd HH:mm'},calendar:{sameDay:'[\u0411\u0443\u0433\u0443\u043D \u0441\u043E\u0430\u0442] LT [\u0434\u0430]',nextDay:'[\u042D\u0440\u0442\u0430\u0433\u0430] LT [\u0434\u0430]',nextWeek:'dddd [\u043A\u0443\u043D\u0438 \u0441\u043E\u0430\u0442] LT [\u0434\u0430]',lastDay:'[\u041A\u0435\u0447\u0430 \u0441\u043E\u0430\u0442] LT [\u0434\u0430]',lastWeek:'[\u0423\u0442\u0433\u0430\u043D] dddd [\u043A\u0443\u043D\u0438 \u0441\u043E\u0430\u0442] LT [\u0434\u0430]',sameElse:'L'},relativeTime:{future:'\u042F\u043A\u0438\u043D %s \u0438\u0447\u0438\u0434\u0430',past:'\u0411\u0438\u0440 \u043D\u0435\u0447\u0430 %s \u043E\u043B\u0434\u0438\u043D',s:'\u0444\u0443\u0440\u0441\u0430\u0442',m:'\u0431\u0438\u0440 \u0434\u0430\u043A\u0438\u043A\u0430',mm:'%d \u0434\u0430\u043A\u0438\u043A\u0430',h:'\u0431\u0438\u0440 \u0441\u043E\u0430\u0442',hh:'%d \u0441\u043E\u0430\u0442',d:'\u0431\u0438\u0440 \u043A\u0443\u043D',dd:'%d \u043A\u0443\u043D',M:'\u0431\u0438\u0440 \u043E\u0439',MM:'%d \u043E\u0439',y:'\u0431\u0438\u0440 \u0439\u0438\u043B',yy:'%d \u0439\u0438\u043B'},week:{dow:1,doy:7}}),R.defineLocale('vi',{months:'th\xE1ng 1_th\xE1ng 2_th\xE1ng 3_th\xE1ng 4_th\xE1ng 5_th\xE1ng 6_th\xE1ng 7_th\xE1ng 8_th\xE1ng 9_th\xE1ng 10_th\xE1ng 11_th\xE1ng 12'.split('_'),monthsShort:'Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12'.split('_'),monthsParseExact:!0,weekdays:'ch\u1EE7 nh\u1EADt_th\u1EE9 hai_th\u1EE9 ba_th\u1EE9 t\u01B0_th\u1EE9 n\u0103m_th\u1EE9 s\xE1u_th\u1EE9 b\u1EA3y'.split('_'),weekdaysShort:'CN_T2_T3_T4_T5_T6_T7'.split('_'),weekdaysMin:'CN_T2_T3_T4_T5_T6_T7'.split('_'),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(il){return /^ch$/i.test(il)},meridiem:function(il,dl,ll){return 12>il?ll?'sa':'SA':ll?'ch':'CH'},longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM [n\u0103m] YYYY',LLL:'D MMMM [n\u0103m] YYYY HH:mm',LLLL:'dddd, D MMMM [n\u0103m] YYYY HH:mm',l:'DD/M/YYYY',ll:'D MMM YYYY',lll:'D MMM YYYY HH:mm',llll:'ddd, D MMM YYYY HH:mm'},calendar:{sameDay:'[H\xF4m nay l\xFAc] LT',nextDay:'[Ng\xE0y mai l\xFAc] LT',nextWeek:'dddd [tu\u1EA7n t\u1EDBi l\xFAc] LT',lastDay:'[H\xF4m qua l\xFAc] LT',lastWeek:'dddd [tu\u1EA7n r\u1ED3i l\xFAc] LT',sameElse:'L'},relativeTime:{future:'%s t\u1EDBi',past:'%s tr\u01B0\u1EDBc',s:'v\xE0i gi\xE2y',m:'m\u1ED9t ph\xFAt',mm:'%d ph\xFAt',h:'m\u1ED9t gi\u1EDD',hh:'%d gi\u1EDD',d:'m\u1ED9t ng\xE0y',dd:'%d ng\xE0y',M:'m\u1ED9t th\xE1ng',MM:'%d th\xE1ng',y:'m\u1ED9t n\u0103m',yy:'%d n\u0103m'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(il){return il},week:{dow:1,doy:4}}),R.defineLocale('x-pseudo',{months:'J~\xE1\xF1\xFA\xE1~r\xFD_F~\xE9br\xFA~\xE1r\xFD_~M\xE1rc~h_\xC1p~r\xEDl_~M\xE1\xFD_~J\xFA\xF1\xE9~_J\xFAl~\xFD_\xC1\xFA~g\xFAst~_S\xE9p~t\xE9mb~\xE9r_\xD3~ct\xF3b~\xE9r_\xD1~\xF3v\xE9m~b\xE9r_~D\xE9c\xE9~mb\xE9r'.split('_'),monthsShort:'J~\xE1\xF1_~F\xE9b_~M\xE1r_~\xC1pr_~M\xE1\xFD_~J\xFA\xF1_~J\xFAl_~\xC1\xFAg_~S\xE9p_~\xD3ct_~\xD1\xF3v_~D\xE9c'.split('_'),monthsParseExact:!0,weekdays:'S~\xFA\xF1d\xE1~\xFD_M\xF3~\xF1d\xE1\xFD~_T\xFA\xE9~sd\xE1\xFD~_W\xE9d~\xF1\xE9sd~\xE1\xFD_T~h\xFArs~d\xE1\xFD_~Fr\xEDd~\xE1\xFD_S~\xE1t\xFAr~d\xE1\xFD'.split('_'),weekdaysShort:'S~\xFA\xF1_~M\xF3\xF1_~T\xFA\xE9_~W\xE9d_~Th\xFA_~Fr\xED_~S\xE1t'.split('_'),weekdaysMin:'S~\xFA_M\xF3~_T\xFA_~W\xE9_T~h_Fr~_S\xE1'.split('_'),weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[T~\xF3d\xE1~\xFD \xE1t] LT',nextDay:'[T~\xF3m\xF3~rr\xF3~w \xE1t] LT',nextWeek:'dddd [\xE1t] LT',lastDay:'[\xDD~\xE9st~\xE9rd\xE1~\xFD \xE1t] LT',lastWeek:'[L~\xE1st] dddd [\xE1t] LT',sameElse:'L'},relativeTime:{future:'\xED~\xF1 %s',past:'%s \xE1~g\xF3',s:'\xE1 ~f\xE9w ~s\xE9c\xF3~\xF1ds',m:'\xE1 ~m\xED\xF1~\xFAt\xE9',mm:'%d m~\xED\xF1\xFA~t\xE9s',h:'\xE1~\xF1 h\xF3~\xFAr',hh:'%d h~\xF3\xFArs',d:'\xE1 ~d\xE1\xFD',dd:'%d d~\xE1\xFDs',M:'\xE1 ~m\xF3\xF1~th',MM:'%d m~\xF3\xF1t~hs',y:'\xE1 ~\xFD\xE9\xE1r',yy:'%d \xFD~\xE9\xE1rs'},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(il){var dl=il%10,ll=1==~~(il%100/10)?'th':1==dl?'st':2==dl?'nd':3==dl?'rd':'th';return il+ll},week:{dow:1,doy:4}}),R.defineLocale('yo',{months:'S\u1EB9\u0301r\u1EB9\u0301_E\u0300re\u0300le\u0300_\u1EB8r\u1EB9\u0300na\u0300_I\u0300gbe\u0301_E\u0300bibi_O\u0300ku\u0300du_Ag\u1EB9mo_O\u0300gu\u0301n_Owewe_\u1ECC\u0300wa\u0300ra\u0300_Be\u0301lu\u0301_\u1ECC\u0300p\u1EB9\u0300\u0300'.split('_'),monthsShort:'S\u1EB9\u0301r_E\u0300rl_\u1EB8rn_I\u0300gb_E\u0300bi_O\u0300ku\u0300_Ag\u1EB9_O\u0300gu\u0301_Owe_\u1ECC\u0300wa\u0300_Be\u0301l_\u1ECC\u0300p\u1EB9\u0300\u0300'.split('_'),weekdays:'A\u0300i\u0300ku\u0301_Aje\u0301_I\u0300s\u1EB9\u0301gun_\u1ECCj\u1ECD\u0301ru\u0301_\u1ECCj\u1ECD\u0301b\u1ECD_\u1EB8ti\u0300_A\u0300ba\u0301m\u1EB9\u0301ta'.split('_'),weekdaysShort:'A\u0300i\u0300k_Aje\u0301_I\u0300s\u1EB9\u0301_\u1ECCjr_\u1ECCjb_\u1EB8ti\u0300_A\u0300ba\u0301'.split('_'),weekdaysMin:'A\u0300i\u0300_Aj_I\u0300s_\u1ECCr_\u1ECCb_\u1EB8t_A\u0300b'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[O\u0300ni\u0300 ni] LT',nextDay:'[\u1ECC\u0300la ni] LT',nextWeek:'dddd [\u1ECCs\u1EB9\u0300 to\u0301n\'b\u1ECD] [ni] LT',lastDay:'[A\u0300na ni] LT',lastWeek:'dddd [\u1ECCs\u1EB9\u0300 to\u0301l\u1ECD\u0301] [ni] LT',sameElse:'L'},relativeTime:{future:'ni\u0301 %s',past:'%s k\u1ECDja\u0301',s:'i\u0300s\u1EB9ju\u0301 aaya\u0301 die',m:'i\u0300s\u1EB9ju\u0301 kan',mm:'i\u0300s\u1EB9ju\u0301 %d',h:'wa\u0301kati kan',hh:'wa\u0301kati %d',d:'\u1ECDj\u1ECD\u0301 kan',dd:'\u1ECDj\u1ECD\u0301 %d',M:'osu\u0300 kan',MM:'osu\u0300 %d',y:'\u1ECDdu\u0301n kan',yy:'\u1ECDdu\u0301n %d'},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:'\u1ECDj\u1ECD\u0301 %d',week:{dow:1,doy:4}}),R.defineLocale('zh-cn',{months:'\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708'.split('_'),monthsShort:'1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708'.split('_'),weekdays:'\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D'.split('_'),weekdaysShort:'\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D'.split('_'),weekdaysMin:'\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY\u5E74MMMD\u65E5',LL:'YYYY\u5E74MMMD\u65E5',LLL:'YYYY\u5E74MMMD\u65E5Ah\u70B9mm\u5206',LLLL:'YYYY\u5E74MMMD\u65E5ddddAh\u70B9mm\u5206',l:'YYYY\u5E74MMMD\u65E5',ll:'YYYY\u5E74MMMD\u65E5',lll:'YYYY\u5E74MMMD\u65E5 HH:mm',llll:'YYYY\u5E74MMMD\u65E5dddd HH:mm'},meridiemParse:/|||||/,meridiemHour:function(il,dl){return 12===il&&(il=0),'\u51CC\u6668'===dl||'\u65E9\u4E0A'===dl||'\u4E0A\u5348'===dl?il:'\u4E0B\u5348'===dl||'\u665A\u4E0A'===dl?il+12:11<=il?il:il+12},meridiem:function(il,dl){var _l=100*il+dl;return 600>_l?'\u51CC\u6668':900>_l?'\u65E9\u4E0A':1130>_l?'\u4E0A\u5348':1230>_l?'\u4E2D\u5348':1800>_l?'\u4E0B\u5348':'\u665A\u4E0A'},calendar:{sameDay:'[\u4ECA\u5929]LT',nextDay:'[\u660E\u5929]LT',nextWeek:'[\u4E0B]ddddLT',lastDay:'[\u6628\u5929]LT',lastWeek:'[\u4E0A]ddddLT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(il,dl){return'd'===dl||'D'===dl||'DDD'===dl?il+'\u65E5':'M'===dl?il+'\u6708':'w'===dl||'W'===dl?il+'\u5468':il},relativeTime:{future:'%s\u5185',past:'%s\u524D',s:'\u51E0\u79D2',m:'1 \u5206\u949F',mm:'%d \u5206\u949F',h:'1 \u5C0F\u65F6',hh:'%d \u5C0F\u65F6',d:'1 \u5929',dd:'%d \u5929',M:'1 \u4E2A\u6708',MM:'%d \u4E2A\u6708',y:'1 \u5E74',yy:'%d \u5E74'},week:{dow:1,doy:4}}),R.defineLocale('zh-hk',{months:'\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708'.split('_'),monthsShort:'1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708'.split('_'),weekdays:'\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D'.split('_'),weekdaysShort:'\u9031\u65E5_\u9031\u4E00_\u9031\u4E8C_\u9031\u4E09_\u9031\u56DB_\u9031\u4E94_\u9031\u516D'.split('_'),weekdaysMin:'\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY\u5E74MMMD\u65E5',LL:'YYYY\u5E74MMMD\u65E5',LLL:'YYYY\u5E74MMMD\u65E5 HH:mm',LLLL:'YYYY\u5E74MMMD\u65E5dddd HH:mm',l:'YYYY\u5E74MMMD\u65E5',ll:'YYYY\u5E74MMMD\u65E5',lll:'YYYY\u5E74MMMD\u65E5 HH:mm',llll:'YYYY\u5E74MMMD\u65E5dddd HH:mm'},meridiemParse:/|||||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u51CC\u6668'===dl||'\u65E9\u4E0A'===dl||'\u4E0A\u5348'===dl)?il:'\u4E2D\u5348'===dl?11<=il?il:il+12:'\u4E0B\u5348'===dl||'\u665A\u4E0A'===dl?il+12:void 0},meridiem:function(il,dl){var _l=100*il+dl;return 600>_l?'\u51CC\u6668':900>_l?'\u65E9\u4E0A':1130>_l?'\u4E0A\u5348':1230>_l?'\u4E2D\u5348':1800>_l?'\u4E0B\u5348':'\u665A\u4E0A'},calendar:{sameDay:'[\u4ECA\u5929]LT',nextDay:'[\u660E\u5929]LT',nextWeek:'[\u4E0B]ddddLT',lastDay:'[\u6628\u5929]LT',lastWeek:'[\u4E0A]ddddLT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(il,dl){return'd'===dl||'D'===dl||'DDD'===dl?il+'\u65E5':'M'===dl?il+'\u6708':'w'===dl||'W'===dl?il+'\u9031':il},relativeTime:{future:'%s\u5167',past:'%s\u524D',s:'\u5E7E\u79D2',m:'1 \u5206\u9418',mm:'%d \u5206\u9418',h:'1 \u5C0F\u6642',hh:'%d \u5C0F\u6642',d:'1 \u5929',dd:'%d \u5929',M:'1 \u500B\u6708',MM:'%d \u500B\u6708',y:'1 \u5E74',yy:'%d \u5E74'}}),R.defineLocale('zh-tw',{months:'\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708'.split('_'),monthsShort:'1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708'.split('_'),weekdays:'\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D'.split('_'),weekdaysShort:'\u9031\u65E5_\u9031\u4E00_\u9031\u4E8C_\u9031\u4E09_\u9031\u56DB_\u9031\u4E94_\u9031\u516D'.split('_'),weekdaysMin:'\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY\u5E74MMMD\u65E5',LL:'YYYY\u5E74MMMD\u65E5',LLL:'YYYY\u5E74MMMD\u65E5 HH:mm',LLLL:'YYYY\u5E74MMMD\u65E5dddd HH:mm',l:'YYYY\u5E74MMMD\u65E5',ll:'YYYY\u5E74MMMD\u65E5',lll:'YYYY\u5E74MMMD\u65E5 HH:mm',llll:'YYYY\u5E74MMMD\u65E5dddd HH:mm'},meridiemParse:/|||||/,meridiemHour:function(il,dl){return(12===il&&(il=0),'\u51CC\u6668'===dl||'\u65E9\u4E0A'===dl||'\u4E0A\u5348'===dl)?il:'\u4E2D\u5348'===dl?11<=il?il:il+12:'\u4E0B\u5348'===dl||'\u665A\u4E0A'===dl?il+12:void 0},meridiem:function(il,dl){var _l=100*il+dl;return 600>_l?'\u51CC\u6668':900>_l?'\u65E9\u4E0A':1130>_l?'\u4E0A\u5348':1230>_l?'\u4E2D\u5348':1800>_l?'\u4E0B\u5348':'\u665A\u4E0A'},calendar:{sameDay:'[\u4ECA\u5929]LT',nextDay:'[\u660E\u5929]LT',nextWeek:'[\u4E0B]ddddLT',lastDay:'[\u6628\u5929]LT',lastWeek:'[\u4E0A]ddddLT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(il,dl){return'd'===dl||'D'===dl||'DDD'===dl?il+'\u65E5':'M'===dl?il+'\u6708':'w'===dl||'W'===dl?il+'\u9031':il},relativeTime:{future:'%s\u5167',past:'%s\u524D',s:'\u5E7E\u79D2',m:'1 \u5206\u9418',mm:'%d \u5206\u9418',h:'1 \u5C0F\u6642',hh:'%d \u5C0F\u6642',d:'1 \u5929',dd:'%d \u5929',M:'1 \u500B\u6708',MM:'%d \u500B\u6708',y:'1 \u5E74',yy:'%d \u5E74'}}),R.locale('en'),R})}).call(E,A(208)(L))},function(L){function A(){throw new Error('setTimeout has not been defined')}function I(){throw new Error('clearTimeout has not been defined')}function R(ee){if(J===setTimeout)return setTimeout(ee,0);if((J===A||!J)&&setTimeout)return J=setTimeout,setTimeout(ee,0);try{return J(ee,0)}catch(te){try{return J.call(null,ee,0)}catch(ne){return J.call(this,ee,0)}}}function N(ee){if(K===clearTimeout)return clearTimeout(ee);if((K===I||!K)&&clearTimeout)return K=clearTimeout,clearTimeout(ee);try{return K(ee)}catch(te){try{return K.call(null,ee)}catch(ne){return K.call(this,ee)}}}function H(){X&&Q&&(X=!1,Q.length?$=Q.concat($):Z=-1,$.length&&B())}function B(){if(!X){var ee=R(H);X=!0;for(var te=$.length;te;){for(Q=$,$=[];++Z<te;)Q&&Q[Z].run();Z=-1,te=$.length}Q=null,X=!1,N(ee)}}function z(ee,te){this.fun=ee,this.array=te}function W(){}var G=L.exports={},J,K;(function(){try{J='function'==typeof setTimeout?setTimeout:A}catch(ee){J=A}try{K='function'==typeof clearTimeout?clearTimeout:I}catch(ee){K=I}})();var $=[],X=!1,Z=-1,Q;G.nextTick=function(ee){var te=Array(arguments.length-1);if(1<arguments.length)for(var ne=1;ne<arguments.length;ne++)te[ne-1]=arguments[ne];$.push(new z(ee,te)),1!==$.length||X||R(B)},z.prototype.run=function(){this.fun.apply(null,this.array)},G.title='browser',G.browser=!0,G.env={},G.argv=[],G.version='',G.versions={},G.on=W,G.addListener=W,G.once=W,G.off=W,G.removeListener=W,G.removeAllListeners=W,G.emit=W,G.prependListener=W,G.prependOnceListener=W,G.listeners=function(){return[]},G.binding=function(){throw new Error('process.binding is not supported')},G.cwd=function(){return'/'},G.chdir=function(){throw new Error('process.chdir is not supported')},G.umask=function(){return 0}},function(L,E){(function(A){L.exports=A}).call(E,{})},function(L){L.exports=function(A){return A.webpackPolyfill||(A.deprecate=function(){},A.paths=[],!A.children&&(A.children=[]),Object.defineProperty(A,'loaded',{enumerable:!0,get:function(){return A.l}}),Object.defineProperty(A,'id',{enumerable:!0,get:function(){return A.i}}),A.webpackPolyfill=1),A}},function(L,E){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E.clamp=function(R,N){function H(ce,pe){return X.getComputedStyle||(X.getComputedStyle=function(he){return this.el=he,this.getPropertyValue=function(fe){var ye=/(\-([a-z]){1})/g;return'float'==fe&&(fe='styleFloat'),ye.test(fe)&&(fe=fe.replace(ye,function(){return arguments[2].toUpperCase()})),he.currentStyle&&he.currentStyle[fe]?he.currentStyle[fe]:null},this}),X.getComputedStyle(ce,null).getPropertyValue(pe)}function B(ce){var pe=ce||R.clientHeight,he=W(R);return Math.max(Math.floor(pe/he),0)}function z(ce){var pe=W(R);return pe*ce}function W(ce){var pe=H(ce,'line-height');return'normal'==pe&&(pe=1.2*parseInt(H(ce,'font-size'))),parseInt(pe)}function G(ce){return ce.lastChild.children&&0<ce.lastChild.children.length?G(Array.prototype.slice.call(ce.children).pop()):ce.lastChild&&ce.lastChild.nodeValue&&''!=ce.lastChild.nodeValue&&ce.lastChild.nodeValue!=Q.truncationChar?ce.lastChild:(ce.lastChild.parentNode.removeChild(ce.lastChild),G(R))}function J(ce,pe){function he(){se=Q.splitOnChars.slice(0),ie=se[0],de=null,le=null}if(pe){var ge=ce.nodeValue.replace(Q.truncationChar,'');if(de||(ie=0<se.length?se.shift():'',de=ge.split(ie)),1<de.length?(le=de.pop(),K(ce,de.join(ie))):de=null,oe&&(ce.nodeValue=ce.nodeValue.replace(Q.truncationChar,''),R.innerHTML=ce.nodeValue+' '+oe.innerHTML+Q.truncationChar),!de)''==ie&&(K(ce,''),ce=G(R),he());else if(R.clientHeight<=pe)if(0<=se.length&&''!=ie)K(ce,de.join(ie)+ie+le),de=null;else return R.innerHTML;return Q.animate?void setTimeout(function(){J(ce,pe)},!0===Q.animate?10:Q.animate):J(ce,pe)}}function K(ce,pe){ce.nodeValue=pe+Q.truncationChar}N=N||{};var $=this,X=window,Q={clamp:N.clamp||1e6,useNativeClamp:!('undefined'!=typeof N.useNativeClamp)||N.useNativeClamp,splitOnChars:N.splitOnChars||['.','-','\u2013','\u2014',' '],animate:N.animate||!1,truncationChar:N.truncationChar||'\u2026',truncationHTML:N.truncationHTML},Z=R.style,ee=R.innerHTML,te='undefined'!=typeof R.style.webkitLineClamp,ne=Q.clamp,ae=ne.indexOf&&(-1<ne.indexOf('px')||-1<ne.indexOf('em')),oe;Q.truncationHTML&&(oe=document.createElement('span'),oe.innerHTML=Q.truncationHTML);var se=Q.splitOnChars.slice(0),ie=se[0],de,le;'auto'==ne?ne=B():ae&&(ne=B(parseInt(ne)));var _e;if(te&&Q.useNativeClamp)Z.overflow='hidden',Z.textOverflow='ellipsis',Z.webkitBoxOrient='vertical',Z.display='-webkit-box',Z.webkitLineClamp=ne,ae&&(Z.height=Q.clamp+'px');else{var ue=z(ne);ue<=R.clientHeight&&(_e=J(G(R),ue))}return{original:ee,clamped:_e}}},function(){},function(L,E,A){A(0),A(2),A(66),A(36),A(37),A(38),A(39),A(40),A(29),A(41),A(67),L.exports=A(68)}]);